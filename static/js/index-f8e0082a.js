import{d as e,h as n,c as o,f as t,g as l,a4 as r,a5 as a,aZ as i,bz as d,bA as c,z as s,aX as u,k as f,n as h,l as b,j as v,ac as p,u as g,bB as k,a7 as y,m,b2 as x,p as w,ab as C,a$ as R,b0 as S,N,bl as D,y as K,bC as L,aa as F,a6 as P,i as A,w as T,A as O,a1 as $,bD as B,a8 as E,B as z}from"./index-6455addc.js";import{C as j}from"./index-2eb51493.js";import{u as I}from"./index-0de10c62.js";import{u as U,S as _}from"./source-modal-bdc2db4b.js";import{u as M}from"./browser-5c6ff8c6.js";import{u as V,r as q,c as H,d as Y}from"./use-merged-state-1589eac9.js";import{a as W,X}from"./Scrollbar-d957449d.js";import{i as G}from"./is-browser-11820a37.js";import{h as Q,f as Z,a as J,c as ee}from"./create-e88f5dcb.js";import{p as ne,g as oe,d as te}from"./index-5871ef24.js";import{V as le,N as re}from"./Select-9a1690ad.js";import{_ as ae}from"./Dropdown-03ada580.js";function ie(e){return"string"==typeof e?`s-${e}`:`n-${e}`}const de=e({name:"Switcher",render:()=>n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},n("path",{d:"M12 8l10 8l-10 8z"}))}),ce=n("svg",{viewBox:"0 0 64 64",class:"check-icon"},n("path",{d:"M50.42,16.76L22.34,39.45l-8.1-11.46c-1.12-1.58-3.3-1.96-4.88-0.84c-1.58,1.12-1.95,3.3-0.84,4.88l10.26,14.51  c0.56,0.79,1.42,1.31,2.38,1.45c0.16,0.02,0.32,0.03,0.48,0.03c0.8,0,1.57-0.27,2.2-0.78l30.99-25.03c1.5-1.21,1.74-3.42,0.52-4.92  C54.13,15.78,51.93,15.55,50.42,16.76z"})),se=n("svg",{viewBox:"0 0 100 100",class:"line-icon"},n("path",{d:"M80.2,55.5H21.4c-2.8,0-5.1-2.5-5.1-5.5l0,0c0-3,2.3-5.5,5.1-5.5h58.7c2.8,0,5.1,2.5,5.1,5.5l0,0C85.2,53.1,82.9,55.5,80.2,55.5z"})),ue=o("n-checkbox-group"),fe=t([l("checkbox","\n font-size: var(--n-font-size);\n outline: none;\n cursor: pointer;\n display: inline-flex;\n flex-wrap: nowrap;\n align-items: flex-start;\n word-break: break-word;\n line-height: var(--n-size);\n --n-merged-color-table: var(--n-color-table);\n ",[r("show-label","line-height: var(--n-label-line-height);"),t("&:hover",[l("checkbox-box",[a("border","border: var(--n-border-checked);")])]),t("&:focus:not(:active)",[l("checkbox-box",[a("border","\n border: var(--n-border-focus);\n box-shadow: var(--n-box-shadow-focus);\n ")])]),r("inside-table",[l("checkbox-box","\n background-color: var(--n-merged-color-table);\n ")]),r("checked",[l("checkbox-box","\n background-color: var(--n-color-checked);\n ",[l("checkbox-icon",[t(".check-icon","\n opacity: 1;\n transform: scale(1);\n ")])])]),r("indeterminate",[l("checkbox-box",[l("checkbox-icon",[t(".check-icon","\n opacity: 0;\n transform: scale(.5);\n "),t(".line-icon","\n opacity: 1;\n transform: scale(1);\n ")])])]),r("checked, indeterminate",[t("&:focus:not(:active)",[l("checkbox-box",[a("border","\n border: var(--n-border-checked);\n box-shadow: var(--n-box-shadow-focus);\n ")])]),l("checkbox-box","\n background-color: var(--n-color-checked);\n border-left: 0;\n border-top: 0;\n ",[a("border",{border:"var(--n-border-checked)"})])]),r("disabled",{cursor:"not-allowed"},[r("checked",[l("checkbox-box","\n background-color: var(--n-color-disabled-checked);\n ",[a("border",{border:"var(--n-border-disabled-checked)"}),l("checkbox-icon",[t(".check-icon, .line-icon",{fill:"var(--n-check-mark-color-disabled-checked)"})])])]),l("checkbox-box","\n background-color: var(--n-color-disabled);\n ",[a("border","\n border: var(--n-border-disabled);\n "),l("checkbox-icon",[t(".check-icon, .line-icon","\n fill: var(--n-check-mark-color-disabled);\n ")])]),a("label","\n color: var(--n-text-color-disabled);\n ")]),l("checkbox-box-wrapper","\n position: relative;\n width: var(--n-size);\n flex-shrink: 0;\n flex-grow: 0;\n user-select: none;\n -webkit-user-select: none;\n "),l("checkbox-box","\n position: absolute;\n left: 0;\n top: 50%;\n transform: translateY(-50%);\n height: var(--n-size);\n width: var(--n-size);\n display: inline-block;\n box-sizing: border-box;\n border-radius: var(--n-border-radius);\n background-color: var(--n-color);\n transition: background-color 0.3s var(--n-bezier);\n ",[a("border","\n transition:\n border-color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n border-radius: inherit;\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n border: var(--n-border);\n "),l("checkbox-icon","\n display: flex;\n align-items: center;\n justify-content: center;\n position: absolute;\n left: 1px;\n right: 1px;\n top: 1px;\n bottom: 1px;\n ",[t(".check-icon, .line-icon","\n width: 100%;\n fill: var(--n-check-mark-color);\n opacity: 0;\n transform: scale(0.5);\n transform-origin: center;\n transition:\n fill 0.3s var(--n-bezier),\n transform 0.3s var(--n-bezier),\n opacity 0.3s var(--n-bezier),\n border-color 0.3s var(--n-bezier);\n "),i({left:"1px",top:"1px"})])]),a("label","\n color: var(--n-text-color);\n transition: color .3s var(--n-bezier);\n user-select: none;\n -webkit-user-select: none;\n padding: var(--n-label-padding);\n font-weight: var(--n-label-font-weight);\n ",[t("&:empty",{display:"none"})])]),d(l("checkbox","\n --n-merged-color-table: var(--n-color-table-modal);\n ")),c(l("checkbox","\n --n-merged-color-table: var(--n-color-table-popover);\n "))]),he=e({name:"Checkbox",props:Object.assign(Object.assign({},g.props),{size:String,checked:{type:[Boolean,String,Number],default:void 0},defaultChecked:{type:[Boolean,String,Number],default:!1},value:[String,Number],disabled:{type:Boolean,default:void 0},indeterminate:Boolean,label:String,focusable:{type:Boolean,default:!0},checkedValue:{type:[Boolean,String,Number],default:!0},uncheckedValue:{type:[Boolean,String,Number],default:!1},"onUpdate:checked":[Function,Array],onUpdateChecked:[Function,Array],privateInsideTable:Boolean,onChange:[Function,Array]}),setup(e){s((()=>{e.onChange&&u("checkbox","`on-change` is deprecated, please use `on-update:checked` instead.")}));const n=f(null),{mergedClsPrefixRef:o,inlineThemeDisabled:t,mergedRtlRef:l}=h(e),r=M(e,{mergedSize(n){const{size:o}=e;if(void 0!==o)return o;if(d){const{value:e}=d.mergedSizeRef;if(void 0!==e)return e}if(n){const{mergedSize:e}=n;if(void 0!==e)return e.value}return"medium"},mergedDisabled(n){const{disabled:o}=e;if(void 0!==o)return o;if(d){if(d.disabledRef.value)return!0;const{maxRef:{value:e},checkedCountRef:n}=d;if(void 0!==e&&n.value>=e&&!N.value)return!0;const{minRef:{value:o}}=d;if(void 0!==o&&n.value<=o&&N.value)return!0}return!!n&&n.disabled.value}}),{mergedDisabledRef:a,mergedSizeRef:i}=r,d=b(ue,null),c=f(e.defaultChecked),R=v(e,"checked"),S=V(R,c),N=p((()=>{if(d){const n=d.valueSetRef.value;return!(!n||void 0===e.value)&&n.has(e.value)}return S.value===e.checkedValue})),D=g("Checkbox","-checkbox",fe,k,e,o);function K(n){if(d&&void 0!==e.value)d.toggleCheckbox(!N.value,e.value);else{const{onChange:o,"onUpdate:checked":t,onUpdateChecked:l}=e,{nTriggerFormInput:a,nTriggerFormChange:i}=r,d=N.value?e.uncheckedValue:e.checkedValue;t&&H(t,d,n),l&&H(l,d,n),o&&H(o,d,n),a(),i(),c.value=d}}const L={focus:()=>{var e;null===(e=n.value)||void 0===e||e.focus()},blur:()=>{var e;null===(e=n.value)||void 0===e||e.blur()}},F=y("Checkbox",l,o),P=m((()=>{const{value:e}=i,{common:{cubicBezierEaseInOut:n},self:{borderRadius:o,color:t,colorChecked:l,colorDisabled:r,colorTableHeader:a,colorTableHeaderModal:d,colorTableHeaderPopover:c,checkMarkColor:s,checkMarkColorDisabled:u,border:f,borderFocus:h,borderDisabled:b,borderChecked:v,boxShadowFocus:p,textColor:g,textColorDisabled:k,checkMarkColorDisabledChecked:y,colorDisabledChecked:m,borderDisabledChecked:w,labelPadding:C,labelLineHeight:R,labelFontWeight:S,[x("fontSize",e)]:N,[x("size",e)]:K}}=D.value;return{"--n-label-line-height":R,"--n-label-font-weight":S,"--n-size":K,"--n-bezier":n,"--n-border-radius":o,"--n-border":f,"--n-border-checked":v,"--n-border-focus":h,"--n-border-disabled":b,"--n-border-disabled-checked":w,"--n-box-shadow-focus":p,"--n-color":t,"--n-color-checked":l,"--n-color-table":a,"--n-color-table-modal":d,"--n-color-table-popover":c,"--n-color-disabled":r,"--n-color-disabled-checked":m,"--n-text-color":g,"--n-text-color-disabled":k,"--n-check-mark-color":s,"--n-check-mark-color-disabled":u,"--n-check-mark-color-disabled-checked":y,"--n-font-size":N,"--n-label-padding":C}})),A=t?w("checkbox",m((()=>i.value[0])),P,e):void 0;return Object.assign(r,L,{rtlEnabled:F,selfRef:n,mergedClsPrefix:o,mergedDisabled:a,renderedChecked:N,mergedTheme:D,labelId:C(),handleClick:function(e){a.value||K(e)},handleKeyUp:function(e){if(!a.value)switch(e.key){case" ":case"Enter":K(e)}},handleKeyDown:function(e){if(" "===e.key)e.preventDefault()},cssVars:t?void 0:P,themeClass:null==A?void 0:A.themeClass,onRender:null==A?void 0:A.onRender})},render(){var e;const{$slots:o,renderedChecked:t,mergedDisabled:l,indeterminate:r,privateInsideTable:a,cssVars:i,labelId:d,label:c,mergedClsPrefix:s,focusable:u,handleKeyUp:f,handleKeyDown:h,handleClick:b}=this;null===(e=this.onRender)||void 0===e||e.call(this);const v=q(o.default,(e=>c||e?n("span",{class:`${s}-checkbox__label`,id:d},c||e):null));return n("div",{ref:"selfRef",class:[`${s}-checkbox`,this.themeClass,this.rtlEnabled&&`${s}-checkbox--rtl`,t&&`${s}-checkbox--checked`,l&&`${s}-checkbox--disabled`,r&&`${s}-checkbox--indeterminate`,a&&`${s}-checkbox--inside-table`,v&&`${s}-checkbox--show-label`],tabindex:l||!u?void 0:0,role:"checkbox","aria-checked":r?"mixed":t,"aria-labelledby":d,style:i,onKeyup:f,onKeydown:h,onClick:b,onMousedown:()=>{W("selectstart",window,(e=>{e.preventDefault()}),{once:!0})}},n("div",{class:`${s}-checkbox-box-wrapper`},"Â ",n("div",{class:`${s}-checkbox-box`},n(R,null,{default:()=>this.indeterminate?n("div",{key:"indeterminate",class:`${s}-checkbox-icon`},se):n("div",{key:"check",class:`${s}-checkbox-icon`},ce)}),n("div",{class:`${s}-checkbox-box__border`}))),v)}}),be=o("n-tree-select"),ve=o("n-tree"),pe=e({name:"NTreeSwitcher",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},expanded:Boolean,selected:Boolean,hide:Boolean,loading:Boolean,onClick:Function,tmNode:{type:Object,required:!0}},setup(e){const{renderSwitcherIconRef:o}=b(ve,null);return()=>{const{clsPrefix:t,expanded:l,hide:r,indent:a,onClick:i}=e;return n("span",{"data-switcher":!0,class:[`${t}-tree-node-switcher`,l&&`${t}-tree-node-switcher--expanded`,r&&`${t}-tree-node-switcher--hide`],style:{width:`${a}px`},onClick:i},n("div",{class:`${t}-tree-node-switcher__icon`},n(R,null,{default:()=>{if(e.loading)return n(S,{clsPrefix:t,key:"loading",radius:85,strokeWidth:20});const{value:l}=o;return l?l({expanded:e.expanded,selected:e.selected,option:e.tmNode.rawNode}):n(N,{clsPrefix:t,key:"switcher"},{default:()=>n(de,null)})}})))}}}),ge=e({name:"NTreeNodeCheckbox",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},right:Boolean,focusable:Boolean,disabled:Boolean,checked:Boolean,indeterminate:Boolean,onCheck:Function},setup:e=>({handleUpdateValue:function(n){!function(n){const{onCheck:o}=e;o&&o(n)}(n)},mergedTheme:b(ve).mergedThemeRef}),render(){const{clsPrefix:e,mergedTheme:o,checked:t,indeterminate:l,disabled:r,focusable:a,indent:i,handleUpdateValue:d}=this;return n("span",{class:[`${e}-tree-node-checkbox`,this.right&&`${e}-tree-node-checkbox--right`],style:{width:`${i}px`},"data-checkbox":!0},n(he,{focusable:a,disabled:r,theme:o.peers.Checkbox,themeOverrides:o.peerOverrides.Checkbox,checked:t,indeterminate:l,onUpdateChecked:d}))}}),ke=e({name:"TreeNodeContent",props:{clsPrefix:{type:String,required:!0},disabled:Boolean,checked:Boolean,selected:Boolean,onClick:Function,onDragstart:Function,tmNode:{type:Object,required:!0},nodeProps:Object},setup(e){const{renderLabelRef:n,renderPrefixRef:o,renderSuffixRef:t,labelFieldRef:l}=b(ve);return{selfRef:f(null),renderLabel:n,renderPrefix:o,renderSuffix:t,labelField:l,handleClick:function(n){!function(n){const{onClick:o}=e;o&&o(n)}(n)}}},render(){const{clsPrefix:e,labelField:o,nodeProps:t,checked:l=!1,selected:r=!1,renderLabel:a,renderPrefix:i,renderSuffix:d,handleClick:c,onDragstart:s,tmNode:{rawNode:u,rawNode:{prefix:f,suffix:h,[o]:b}}}=this;return n("span",Object.assign({},t,{ref:"selfRef",class:[`${e}-tree-node-content`,null==t?void 0:t.class],onClick:c,draggable:void 0!==s||void 0,onDragstart:s}),i||f?n("div",{class:`${e}-tree-node-content__prefix`},i?i({option:u,selected:r,checked:l}):D(f)):null,n("div",{class:`${e}-tree-node-content__text`},a?a({option:u,selected:r,checked:l}):D(b)),d||h?n("div",{class:`${e}-tree-node-content__suffix`},d?d({option:u,selected:r,checked:l}):D(h)):null)}});function ye({position:e,offsetLevel:o,indent:t,el:l}){const r={position:"absolute",boxSizing:"border-box",right:0};if("inside"===e)r.left=0,r.top=0,r.bottom=0,r.borderRadius="inherit",r.boxShadow="inset 0 0 0 2px var(--n-drop-mark-color)";else{const n="before"===e?"top":"bottom";r[n]=0,r.left=l.offsetLeft+6-o*t+"px",r.height="2px",r.backgroundColor="var(--n-drop-mark-color)",r.transformOrigin=n,r.borderRadius="1px",r.transform="before"===e?"translateY(-4px)":"translateY(4px)"}return n("div",{style:r})}function me(e,n){return!!e.rawNode[n]}function xe(e,n,o,t){null==e||e.forEach((e=>{o(e),xe(e[n],n,o,t),t(e)}))}function we(e,n,o,t,l){const r=new Set,a=new Set,i=[];return xe(e,t,(e=>{if(i.push(e),l(n,e)){a.add(e[o]);for(let e=i.length-2;e>=0;--e){if(r.has(i[e][o]))return;r.add(i[e][o])}}}),(()=>{i.pop()})),{expandedKeys:Array.from(r),highlightKeySet:a}}if(G&&Image){(new Image).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}const Ce=e({name:"TreeNode",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const o=b(ve),{droppingNodeParentRef:t,droppingMouseNodeRef:l,draggingNodeRef:r,droppingPositionRef:a,droppingOffsetLevelRef:i,nodePropsRef:d,indentRef:c,blockLineRef:s,checkboxPlacementRef:u,checkOnClickRef:h,disabledFieldRef:v,showLineRef:g}=o,k=p((()=>!!e.tmNode.rawNode.checkboxDisabled)),y=p((()=>me(e.tmNode,v.value))),x=p((()=>o.disabledRef.value||y.value)),w=m((()=>{const{value:n}=d;if(n)return n({option:e.tmNode.rawNode})})),C=f(null),R={value:null};function S(){const{tmNode:n}=e;if(n.isLeaf||n.shallowLoaded)o.handleSwitcherClick(n);else{if(o.loadingKeysRef.value.has(n.key))return;o.loadingKeysRef.value.add(n.key);const{onLoadRef:{value:e}}=o;e&&e(n.rawNode).then((e=>{!1!==e&&o.handleSwitcherClick(n)})).finally((()=>{o.loadingKeysRef.value.delete(n.key)}))}}K((()=>{R.value=C.value.$el}));const N=p((()=>!y.value&&o.selectableRef.value&&(!o.internalTreeSelect||("child"!==o.mergedCheckStrategyRef.value||o.multipleRef.value&&o.cascadeRef.value||e.tmNode.isLeaf)))),D=p((()=>o.checkableRef.value&&(o.cascadeRef.value||"child"!==o.mergedCheckStrategyRef.value||e.tmNode.isLeaf))),F=p((()=>o.displayedCheckedKeysRef.value.includes(e.tmNode.key))),P=p((()=>{const{value:n}=D;if(!n)return!1;const{value:o}=h,{tmNode:t}=e;return"boolean"==typeof o?!t.disabled&&o:o(e.tmNode.rawNode)}));function A(n){const{value:t}=o.expandOnClickRef,{value:l}=N,{value:r}=P;if(!l&&!t&&!r)return;if(Q(n,"checkbox")||Q(n,"switcher"))return;const{tmNode:a}=e;l&&o.handleSelect(a),t&&!a.isLeaf&&S(),r&&T(!F.value)}function T(n){o.handleCheck(e.tmNode,n)}const O=m((()=>{const{clsPrefix:o}=e,{value:t}=c;if(g.value){const l=[];let r=e.tmNode.parent;for(;r;)r.isLastChild?l.push(n("div",{class:`${o}-tree-node-indent`},n("div",{style:{width:`${t}px`}}))):l.push(n("div",{class:[`${o}-tree-node-indent`,`${o}-tree-node-indent--show-line`]},n("div",{style:{width:`${t}px`}}))),r=r.parent;return l.reverse()}return L(e.tmNode.level,n("div",{class:`${e.clsPrefix}-tree-node-indent`},n("div",{style:{width:`${t}px`}})))}));return{showDropMark:p((()=>{const{value:n}=r;if(!n)return;const{value:o}=a;if(!o)return;const{value:t}=l;if(!t)return;const{tmNode:i}=e;return i.key===t.key})),showDropMarkAsParent:p((()=>{const{value:n}=t;if(!n)return!1;const{tmNode:o}=e,{value:l}=a;return("before"===l||"after"===l)&&n.key===o.key})),pending:p((()=>o.pendingNodeKeyRef.value===e.tmNode.key)),loading:p((()=>o.loadingKeysRef.value.has(e.tmNode.key))),highlight:p((()=>{var n;return null===(n=o.highlightKeySetRef.value)||void 0===n?void 0:n.has(e.tmNode.key)})),checked:F,indeterminate:p((()=>o.displayedIndeterminateKeysRef.value.includes(e.tmNode.key))),selected:p((()=>o.mergedSelectedKeysRef.value.includes(e.tmNode.key))),expanded:p((()=>o.mergedExpandedKeysRef.value.includes(e.tmNode.key))),disabled:x,checkable:D,mergedCheckOnClick:P,checkboxDisabled:k,selectable:N,expandOnClick:o.expandOnClickRef,internalScrollable:o.internalScrollableRef,draggable:o.draggableRef,blockLine:s,nodeProps:w,checkboxFocusable:o.internalCheckboxFocusableRef,droppingPosition:a,droppingOffsetLevel:i,indent:c,checkboxPlacement:u,showLine:g,contentInstRef:C,contentElRef:R,indentNodes:O,handleCheck:T,handleDrop:function(n){n.preventDefault(),null!==a.value&&o.handleDrop({event:n,node:e.tmNode,dropPosition:a.value})},handleDragStart:function(n){o.handleDragStart({event:n,node:e.tmNode})},handleDragEnter:function(n){n.currentTarget===n.target&&o.handleDragEnter({event:n,node:e.tmNode})},handleDragOver:function(n){n.preventDefault(),o.handleDragOver({event:n,node:e.tmNode})},handleDragEnd:function(n){o.handleDragEnd({event:n,node:e.tmNode})},handleDragLeave:function(n){n.currentTarget===n.target&&o.handleDragLeave({event:n,node:e.tmNode})},handleLineClick:function(e){var n,o;s.value&&(x.value||A(e),null===(o=null===(n=w.value)||void 0===n?void 0:n.onClick)||void 0===o||o.call(n,e))},handleContentClick:function(e){var n,o;s.value||(x.value||A(e),null===(o=null===(n=w.value)||void 0===n?void 0:n.onClick)||void 0===o||o.call(n,e))},handleSwitcherClick:S}},render(){const{tmNode:e,clsPrefix:o,checkable:t,expandOnClick:l,selectable:r,selected:a,checked:i,highlight:d,draggable:c,blockLine:s,indent:u,indentNodes:f,disabled:h,pending:b,internalScrollable:v,nodeProps:p,checkboxPlacement:g}=this,k=c&&!h?{onDragenter:this.handleDragEnter,onDragleave:this.handleDragLeave,onDragend:this.handleDragEnd,onDrop:this.handleDrop,onDragover:this.handleDragOver}:void 0,y=v?ie(e.key):void 0,m="right"===g,x=t?n(ge,{indent:u,right:m,focusable:this.checkboxFocusable,disabled:h||this.checkboxDisabled,clsPrefix:o,checked:this.checked,indeterminate:this.indeterminate,onCheck:this.handleCheck}):null;return n("div",Object.assign({class:`${o}-tree-node-wrapper`},k),n("div",Object.assign({},s?p:void 0,{class:[`${o}-tree-node`,{[`${o}-tree-node--selected`]:a,[`${o}-tree-node--checkable`]:t,[`${o}-tree-node--highlight`]:d,[`${o}-tree-node--pending`]:b,[`${o}-tree-node--disabled`]:h,[`${o}-tree-node--selectable`]:r,[`${o}-tree-node--clickable`]:r||l||this.mergedCheckOnClick},null==p?void 0:p.class],"data-key":y,draggable:c&&s,onClick:this.handleLineClick,onDragstart:c&&s&&!h?this.handleDragStart:void 0}),f,e.isLeaf&&this.showLine?n("div",{class:[`${o}-tree-node-indent`,`${o}-tree-node-indent--show-line`,e.isLeaf&&`${o}-tree-node-indent--is-leaf`,e.isLastChild&&`${o}-tree-node-indent--last-child`]},n("div",{style:{width:`${u}px`}})):n(pe,{clsPrefix:o,expanded:this.expanded,selected:a,loading:this.loading,hide:e.isLeaf,tmNode:this.tmNode,indent:u,onClick:this.handleSwitcherClick}),m?null:x,n(ke,{ref:"contentInstRef",clsPrefix:o,checked:i,selected:a,onClick:this.handleContentClick,nodeProps:s?void 0:p,onDragstart:!c||s||h?void 0:this.handleDragStart,tmNode:e}),c?this.showDropMark?ye({el:this.contentElRef.value,position:this.droppingPosition,offsetLevel:this.droppingOffsetLevel,indent:u}):this.showDropMarkAsParent?ye({el:this.contentElRef.value,position:"inside",offsetLevel:this.droppingOffsetLevel,indent:u}):null:null,m?x:null))}});const Re=e({name:"TreeMotionWrapper",props:{clsPrefix:{type:String,required:!0},height:Number,nodes:{type:Array,required:!0},mode:{type:String,required:!0},onAfterEnter:{type:Function,required:!0}},render(){const{clsPrefix:e}=this;return n(F,{onAfterEnter:this.onAfterEnter,appear:!0,reverse:"collapse"===this.mode},{default:()=>n("div",{class:[`${e}-tree-motion-wrapper`,`${e}-tree-motion-wrapper--${this.mode}`],style:{height:ne(this.height)}},this.nodes.map((o=>n(Ce,{clsPrefix:e,tmNode:o}))))})}}),Se=i(),Ne=l("tree","\n font-size: var(--n-font-size);\n outline: none;\n",[t("ul, li","\n margin: 0;\n padding: 0;\n list-style: none;\n "),t(">",[l("tree-node",[t("&:first-child","margin-top: 0;")])]),l("tree-motion-wrapper",[r("expand",[P({duration:"0.2s"})]),r("collapse",[P({duration:"0.2s",reverse:!0})])]),l("tree-node-wrapper","\n box-sizing: border-box;\n padding: var(--n-node-wrapper-padding);\n "),l("tree-node","\n transform: translate3d(0,0,0);\n position: relative;\n display: flex;\n border-radius: var(--n-node-border-radius);\n transition: background-color .3s var(--n-bezier);\n ",[r("highlight",[l("tree-node-content",[a("text","border-bottom-color: var(--n-node-text-color-disabled);")])]),r("disabled",[l("tree-node-content","\n color: var(--n-node-text-color-disabled);\n cursor: not-allowed;\n ")]),A("disabled",[r("clickable",[l("tree-node-content","\n cursor: pointer;\n ")])])]),r("block-node",[l("tree-node-content","\n flex: 1;\n min-width: 0;\n ")]),A("block-line",[l("tree-node",[A("disabled",[l("tree-node-content",[t("&:hover","background: var(--n-node-color-hover);")]),r("selectable",[l("tree-node-content",[t("&:active","background: var(--n-node-color-pressed);")])]),r("pending",[l("tree-node-content","\n background: var(--n-node-color-hover);\n ")]),r("selected",[l("tree-node-content","background: var(--n-node-color-active);")])])])]),r("block-line",[l("tree-node",[A("disabled",[t("&:hover","background: var(--n-node-color-hover);"),r("pending","\n background: var(--n-node-color-hover);\n "),r("selectable",[A("selected",[t("&:active","background: var(--n-node-color-pressed);")])]),r("selected","background: var(--n-node-color-active);")]),r("disabled","\n cursor: not-allowed;\n ")])]),l("tree-node-indent","\n flex-grow: 0;\n flex-shrink: 0;\n ",[r("show-line","position: relative",[t("&::before",'\n position: absolute;\n left: 50%;\n border-left: 1px solid var(--n-border-color);\n transition: border-color .3s var(--n-bezier);\n transform: translate(-50%);\n content: "";\n top: var(--n-line-offset-top);\n bottom: var(--n-line-offset-bottom);\n '),r("last-child",[t("&::before","\n bottom: 50%;\n ")]),r("is-leaf",[t("&::after",'\n position: absolute;\n content: "";\n left: calc(50% + 0.5px);\n right: 0;\n bottom: 50%;\n transition: border-color .3s var(--n-bezier);\n border-bottom: 1px solid var(--n-border-color);\n ')])]),A("show-line","height: 0;")]),l("tree-node-switcher","\n cursor: pointer;\n display: inline-flex;\n flex-shrink: 0;\n height: var(--n-node-content-height);\n align-items: center;\n justify-content: center;\n transition: transform .15s var(--n-bezier);\n vertical-align: bottom;\n ",[a("icon","\n position: relative;\n height: 14px;\n width: 14px;\n display: flex;\n color: var(--n-arrow-color);\n transition: color .3s var(--n-bezier);\n font-size: 14px;\n ",[l("icon",[Se]),l("base-loading","\n color: var(--n-loading-color);\n position: absolute;\n left: 0;\n top: 0;\n right: 0;\n bottom: 0;\n ",[Se]),l("base-icon",[Se])]),r("hide","visibility: hidden;"),r("expanded","transform: rotate(90deg);")]),l("tree-node-checkbox","\n display: inline-flex;\n height: var(--n-node-content-height);\n vertical-align: bottom;\n align-items: center;\n justify-content: center;\n "),l("tree-node-content","\n user-select: none;\n position: relative;\n display: inline-flex;\n align-items: center;\n min-height: var(--n-node-content-height);\n box-sizing: border-box;\n line-height: var(--n-line-height);\n vertical-align: bottom;\n padding: 0 6px 0 4px;\n cursor: default;\n border-radius: var(--n-node-border-radius);\n color: var(--n-node-text-color);\n transition:\n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n ",[t("&:last-child","margin-bottom: 0;"),a("prefix","\n display: inline-flex;\n margin-right: 8px;\n "),a("text","\n border-bottom: 1px solid #0000;\n transition: border-color .3s var(--n-bezier);\n flex-grow: 1;\n max-width: 100%;\n "),a("suffix","\n display: inline-flex;\n ")]),a("empty","margin: auto;")]);var De=globalThis&&globalThis.__awaiter||function(e,n,o,t){return new(o||(o=Promise))((function(l,r){function a(e){try{d(t.next(e))}catch(n){r(n)}}function i(e){try{d(t.throw(e))}catch(n){r(n)}}function d(e){var n;e.done?l(e.value):(n=e.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,i)}d((t=t.apply(e,n||[])).next())}))};const Ke={allowCheckingNotLoaded:Boolean,filter:Function,defaultExpandAll:Boolean,expandedKeys:Array,keyField:{type:String,default:"key"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},disabledField:{type:String,default:"disabled"},defaultExpandedKeys:{type:Array,default:()=>[]},indeterminateKeys:Array,renderSwitcherIcon:Function,onUpdateIndeterminateKeys:[Function,Array],"onUpdate:indeterminateKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],"onUpdate:expandedKeys":[Function,Array]},Le=e({name:"Tree",props:Object.assign(Object.assign(Object.assign(Object.assign({},g.props),{accordion:Boolean,showIrrelevantNodes:{type:Boolean,default:!0},data:{type:Array,default:()=>[]},expandOnDragenter:{type:Boolean,default:!0},expandOnClick:Boolean,checkOnClick:{type:[Boolean,Function],default:!1},cancelable:{type:Boolean,default:!0},checkable:Boolean,draggable:Boolean,blockNode:Boolean,blockLine:Boolean,showLine:Boolean,disabled:Boolean,checkedKeys:Array,defaultCheckedKeys:{type:Array,default:()=>[]},selectedKeys:Array,defaultSelectedKeys:{type:Array,default:()=>[]},multiple:Boolean,pattern:{type:String,default:""},onLoad:Function,cascade:Boolean,selectable:{type:Boolean,default:!0},scrollbarProps:Object,indent:{type:Number,default:24},allowDrop:{type:Function,default:function({dropPosition:e,node:n}){return!1===n.isLeaf||(!!n.children||"inside"!==e)}},animated:{type:Boolean,default:!0},checkboxPlacement:{type:String,default:"left"},virtualScroll:Boolean,watchProps:Array,renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,keyboard:{type:Boolean,default:!0},getChildren:Function,onDragenter:[Function,Array],onDragleave:[Function,Array],onDragend:[Function,Array],onDragstart:[Function,Array],onDragover:[Function,Array],onDrop:[Function,Array],onUpdateCheckedKeys:[Function,Array],"onUpdate:checkedKeys":[Function,Array],onUpdateSelectedKeys:[Function,Array],"onUpdate:selectedKeys":[Function,Array]}),Ke),{internalTreeSelect:Boolean,internalScrollable:Boolean,internalScrollablePadding:String,internalRenderEmpty:Function,internalHighlightKeySet:Object,internalUnifySelectCheck:Boolean,internalCheckboxFocusable:{type:Boolean,default:!0},internalFocusable:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},leafOnly:Boolean}),setup(e){s((()=>{e.leafOnly&&u("tree",'`leaf-only` is deprecated, please use `check-strategy="child"` instead')}));const{mergedClsPrefixRef:n,inlineThemeDisabled:o,mergedRtlRef:t}=h(e),l=y("Tree",t,n),r=g("Tree","-tree",Ne,B,e,n),a=f(null),i=f(null),d=f(null);const c=m((()=>{const{filter:n}=e;if(n)return n;const{labelField:o}=e;return(e,n)=>{if(!e.length)return!0;const t=n[o];return"string"==typeof t&&t.toLowerCase().includes(e.toLowerCase())}})),p=m((()=>{const{pattern:n}=e;return n&&n.length&&c.value?function(e,n,o,t,l){const r=new Set,a=new Set,i=new Set,d=[],c=[],s=[];return function e(d){d.forEach((d=>{if(s.push(d),n(o,d)){r.add(d[t]),i.add(d[t]);for(let e=s.length-2;e>=0;--e){const n=s[e][t];if(a.has(n))break;a.add(n),r.has(n)&&r.delete(n)}}const c=d[l];c&&e(c),s.pop()}))}(e),function e(n,o){n.forEach((n=>{const i=n[t],c=r.has(i),s=a.has(i);if(!c&&!s)return;const u=n[l];if(u)if(c)o.push(n);else{d.push(i);const t=Object.assign(Object.assign({},n),{[l]:[]});o.push(t),e(u,t[l])}else o.push(n)}))}(e,c),{filteredTree:c,highlightKeySet:i,expandedKeys:d}}(e.data,c.value,n,e.keyField,e.childrenField):{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}})),k=m((()=>{return J(e.showIrrelevantNodes?e.data:p.value.filteredTree,(n=e.keyField,o=e.childrenField,t=e.disabledField,{getIsGroup:()=>!1,getKey:e=>e[n],getChildren:e.getChildren||(e=>e[o]),getDisabled:e=>!(!e[t]&&!e.checkboxDisabled)}));var n,o,t})),x=b(be,null),C=e.internalTreeSelect?x.dataTreeMate:k,{watchProps:R}=e,S=f([]);(null==R?void 0:R.includes("defaultCheckedKeys"))?s((()=>{S.value=e.defaultCheckedKeys})):S.value=e.defaultCheckedKeys;const N=v(e,"checkedKeys"),D=V(N,S),K=m((()=>C.value.getCheckedKeys(D.value,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded}))),L=function(e){return m((()=>e.leafOnly?"child":e.checkStrategy))}(e),F=m((()=>K.value.checkedKeys)),P=m((()=>{const{indeterminateKeys:n}=e;return void 0!==n?n:K.value.indeterminateKeys})),A=f([]);(null==R?void 0:R.includes("defaultSelectedKeys"))?s((()=>{A.value=e.defaultSelectedKeys})):A.value=e.defaultSelectedKeys;const z=v(e,"selectedKeys"),j=V(z,A),I=f([]),U=n=>{I.value=e.defaultExpandAll?C.value.getNonLeafKeys():void 0===n?e.defaultExpandedKeys:n};(null==R?void 0:R.includes("defaultExpandedKeys"))?s((()=>{U(void 0)})):s((()=>{U(e.defaultExpandedKeys)}));const _=v(e,"expandedKeys"),M=V(_,I),q=m((()=>k.value.getFlattenedNodes(M.value))),{pendingNodeKeyRef:Y,handleKeydown:W}=function({props:e,fNodesRef:n,mergedExpandedKeysRef:o,mergedSelectedKeysRef:t,handleSelect:l,handleSwitcherClick:r}){const{value:a}=t,i=b(be,null),d=i?i.pendingNodeKeyRef:f(a.length?a[a.length-1]:null);return{pendingNodeKeyRef:d,handleKeydown:function(t){if(!e.keyboard)return;const{value:a}=d;if(null===a){if("ArrowDown"!==t.key&&"ArrowUp"!==t.key||t.preventDefault(),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(t.key)&&null===a){const{value:e}=n;let o=0;for(;o<e.length;){if(!e[o].disabled){d.value=e[o].key;break}o+=1}}}else{const{value:e}=n;let i=e.findIndex((e=>e.key===a));if(!~i)return;if("Enter"===t.key)l(e[i]);else if("ArrowDown"===t.key)for(t.preventDefault(),i+=1;i<e.length;){if(!e[i].disabled){d.value=e[i].key;break}i+=1}else if("ArrowUp"===t.key)for(t.preventDefault(),i-=1;i>=0;){if(!e[i].disabled){d.value=e[i].key;break}i-=1}else if("ArrowLeft"===t.key){const n=e[i];if(n.isLeaf||!o.value.includes(a)){const e=n.getParent();e&&(d.value=e.key)}else r(n)}else if("ArrowRight"===t.key){const n=e[i];if(n.isLeaf)return;if(o.value.includes(a))for(i+=1;i<e.length;){if(!e[i].disabled){d.value=e[i].key;break}i+=1}else r(n)}}}}}({props:e,mergedSelectedKeysRef:j,fNodesRef:q,mergedExpandedKeysRef:M,handleSelect:Ie,handleSwitcherClick:je});let X=null,G=null;const Q=f(new Set),le=m((()=>e.internalHighlightKeySet||p.value.highlightKeySet)),re=V(le,Q),ae=f(new Set),de=m((()=>M.value.filter((e=>!ae.value.has(e)))));let ce=0;const se=f(null),ue=f(null),fe=f(null),he=f(null),pe=f(0),ge=m((()=>{const{value:e}=ue;return e?e.parent:null}));T(v(e,"data"),(()=>{ae.value.clear(),Y.value=null,$e()}),{deep:!1});let ke=!1;const ye=()=>{ke=!0,$((()=>{ke=!1}))};let xe;function Ce(n){return De(this,void 0,void 0,(function*(){const{onLoad:o}=e;if(!o)return E("tree","There is unloaded node in data but props.onLoad is not specified."),void(yield Promise.resolve());const{value:t}=ae;if(!t.has(n.key)){t.add(n.key);try{!1===(yield o(n.rawNode))&&Ee()}catch(l){Ee()}t.delete(n.key)}}))}T(v(e,"pattern"),((n,o)=>{if(e.showIrrelevantNodes)if(xe=void 0,n){const{expandedKeys:n,highlightKeySet:o}=we(e.data,e.pattern,e.keyField,e.childrenField,c.value);Q.value=o,ye(),Ae(n,Pe(n),{node:null,action:"filter"})}else Q.value=new Set;else if(n.length){o.length||(xe=M.value);const{expandedKeys:e}=p.value;void 0!==e&&(ye(),Ae(e,Pe(e),{node:null,action:"filter"}))}else void 0!==xe&&(ye(),Ae(xe,Pe(xe),{node:null,action:"filter"}))})),s((()=>{var e;const{value:n}=k;if(!n)return;const{getNode:o}=n;null===(e=M.value)||void 0===e||e.forEach((e=>{const n=o(e);n&&!n.shallowLoaded&&Ce(n)}))}));const Re=f(!1),Se=f([]);T(de,((n,o)=>{if(!e.animated||ke)return void $(Fe);const t=te(r.value.self.nodeHeight),l=new Set(o);let i=null,c=null;for(const e of n)if(!l.has(e)){if(null!==i)return;i=e}const s=new Set(n);for(const e of o)if(!s.has(e)){if(null!==c)return;c=e}if(null===i&&null===c)return;const{virtualScroll:u}=e,f=(u?d.value.listElRef:a.value).offsetHeight,h=Math.ceil(f/t)+1;let b;if(null!==i&&(b=o),null!==c&&(b=void 0===b?n:b.filter((e=>e!==c))),Re.value=!0,Se.value=k.value.getFlattenedNodes(b),null!==i){const e=Se.value.findIndex((e=>e.key===i));if(~e){const o=Se.value[e].children;if(o){const l=Z(o,n);Se.value.splice(e+1,0,{__motion:!0,mode:"expand",height:u?l.length*t:void 0,nodes:u?l.slice(0,h):l})}}}if(null!==c){const e=Se.value.findIndex((e=>e.key===c));if(~e){const o=Se.value[e].children;if(!o)return;Re.value=!0;const l=Z(o,n);Se.value.splice(e+1,0,{__motion:!0,mode:"collapse",height:u?l.length*t:void 0,nodes:u?l.slice(0,h):l})}}}));const Ke=m((()=>ee(q.value))),Le=m((()=>Re.value?Se.value:q.value));function Fe(){const{value:e}=i;e&&e.sync()}function Pe(e){const{getNode:n}=C.value;return e.map((e=>{var o;return(null===(o=n(e))||void 0===o?void 0:o.rawNode)||null}))}function Ae(n,o,t){const{"onUpdate:expandedKeys":l,onUpdateExpandedKeys:r}=e;I.value=n,l&&H(l,n,o,t),r&&H(r,n,o,t)}function Te(n,o,t){const{"onUpdate:checkedKeys":l,onUpdateCheckedKeys:r}=e;S.value=n,r&&H(r,n,o,t),l&&H(l,n,o,t)}function Oe(n,o,t){const{"onUpdate:selectedKeys":l,onUpdateSelectedKeys:r}=e;A.value=n,r&&H(r,n,o,t),l&&H(l,n,o,t)}function $e(){se.value=null,Be()}function Be(){pe.value=0,ue.value=null,fe.value=null,he.value=null,Ee()}function Ee(){X&&(window.clearTimeout(X),X=null),G=null}function ze(n,o){if(e.disabled||me(n,e.disabledField))return;if(e.internalUnifySelectCheck&&!e.multiple)return void Ie(n);const t=o?"check":"uncheck",{checkedKeys:l,indeterminateKeys:r}=C.value[t](n.key,F.value,{cascade:e.cascade,checkStrategy:L.value,allowNotLoaded:e.allowCheckingNotLoaded});Te(l,Pe(l),{node:n.rawNode,action:t}),function(n,o){const{"onUpdate:indeterminateKeys":t,onUpdateIndeterminateKeys:l}=e;t&&H(t,n,o),l&&H(l,n,o)}(r,Pe(r))}function je(n){e.disabled||Re.value||function(n){if(e.disabled)return;const{key:o}=n,{value:t}=M,l=t.findIndex((e=>e===o));if(~l){const e=Array.from(t);e.splice(l,1),Ae(e,Pe(e),{node:n.rawNode,action:"collapse"})}else{const l=k.value.getNode(o);if(!l||l.isLeaf)return;let r;if(e.accordion){const e=new Set(n.siblings.map((({key:e})=>e)));r=t.filter((n=>!e.has(n))),r.push(o)}else r=t.concat(o);Ae(r,Pe(r),{node:n.rawNode,action:"expand"})}}(n)}function Ie(n){if(!e.disabled&&e.selectable){if(Y.value=n.key,e.internalUnifySelectCheck){const{value:{checkedKeys:o,indeterminateKeys:t}}=K;e.multiple?ze(n,!(o.includes(n.key)||t.includes(n.key))):Te([n.key],Pe([n.key]),{node:n.rawNode,action:"check"})}if(e.multiple){const o=Array.from(j.value),t=o.findIndex((e=>e===n.key));~t?e.cancelable&&o.splice(t,1):~t||o.push(n.key),Oe(o,Pe(o),{node:n.rawNode,action:~t?"unselect":"select"})}else{j.value.includes(n.key)?e.cancelable&&Oe([],[],{node:n.rawNode,action:"unselect"}):Oe([n.key],Pe([n.key]),{node:n.rawNode,action:"select"})}}}function Ue({event:n,node:o},t=!0){var l;if(!e.draggable||e.disabled||me(o,e.disabledField))return;const{value:r}=se;if(!r)return;const{allowDrop:a,indent:i}=e;t&&function(n){const{onDragover:o}=e;o&&H(o,n)}({event:n,node:o.rawNode});const d=n.currentTarget,{height:c,top:s}=d.getBoundingClientRect(),u=n.clientY-s;let f;f=a({node:o.rawNode,dropPosition:"inside",phase:"drag"})?u<=8?"before":u>=c-8?"after":"inside":u<=c/2?"before":"after";const{value:h}=Ke;let b,v;const p=h(o.key);if(null===p)return void Be();let g=!1;"inside"===f?(b=o,v="inside"):"before"===f?o.isFirstChild?(b=o,v="before"):(b=q.value[p-1],v="after"):(b=o,v="after"),!b.isLeaf&&M.value.includes(b.key)&&(g=!0,"after"===v&&(b=q.value[p+1],b?v="before":(b=o,v="inside")));const k=b;if(fe.value=k,!g&&r.isLastChild&&r.key===b.key&&(v="after"),"after"===v){let e=ce-n.clientX,o=0;for(;e>=i/2&&null!==b.parent&&b.isLastChild&&o<1;)e-=i,o+=1,b=b.parent;pe.value=o}else pe.value=0;if(!(r.contains(b)||"inside"===v&&(null===(l=r.parent)||void 0===l?void 0:l.key)===b.key)||r.key===k.key&&r.key===b.key)if(a({node:b.rawNode,dropPosition:v,phase:"drag"})){if(r.key===b.key)Ee();else if(G!==b.key)if("inside"===v){if(e.expandOnDragenter){if(function(e){if(X&&(window.clearTimeout(X),X=null),e.isLeaf)return;G=e.key;const n=()=>{if(G!==e.key)return;const{value:n}=fe;if(n&&n.key===e.key&&!M.value.includes(e.key)){const n=M.value.concat(e.key);Ae(n,Pe(n),{node:e.rawNode,action:"expand"})}X=null,G=null};X=e.shallowLoaded?window.setTimeout((()=>{n()}),1e3):window.setTimeout((()=>{Ce(e).then((()=>{n()}))}),1e3)}(b),!b.shallowLoaded&&G!==b.key)return void $e()}else if(!b.shallowLoaded)return void $e()}else Ee();else"inside"!==v&&Ee();he.value=v,ue.value=b}else Be();else Be()}T(Y,(n=>{var o,t;if(null!==n)if(e.virtualScroll)null===(o=d.value)||void 0===o||o.scrollTo({key:n});else if(e.internalScrollable){const{value:e}=i;if(null===e)return;const o=null===(t=e.contentRef)||void 0===t?void 0:t.querySelector(`[data-key="${ie(n)}"]`);if(!o)return;e.scrollTo({el:o})}})),O(ve,{loadingKeysRef:ae,highlightKeySetRef:re,displayedCheckedKeysRef:F,displayedIndeterminateKeysRef:P,mergedSelectedKeysRef:j,mergedExpandedKeysRef:M,mergedThemeRef:r,mergedCheckStrategyRef:L,nodePropsRef:v(e,"nodeProps"),disabledRef:v(e,"disabled"),checkableRef:v(e,"checkable"),selectableRef:v(e,"selectable"),expandOnClickRef:v(e,"expandOnClick"),onLoadRef:v(e,"onLoad"),draggableRef:v(e,"draggable"),blockLineRef:v(e,"blockLine"),indentRef:v(e,"indent"),cascadeRef:v(e,"cascade"),checkOnClickRef:v(e,"checkOnClick"),checkboxPlacementRef:e.checkboxPlacement,droppingMouseNodeRef:fe,droppingNodeParentRef:ge,draggingNodeRef:se,droppingPositionRef:he,droppingOffsetLevelRef:pe,fNodesRef:q,pendingNodeKeyRef:Y,showLineRef:v(e,"showLine"),disabledFieldRef:v(e,"disabledField"),internalScrollableRef:v(e,"internalScrollable"),internalCheckboxFocusableRef:v(e,"internalCheckboxFocusable"),internalTreeSelect:e.internalTreeSelect,renderLabelRef:v(e,"renderLabel"),renderPrefixRef:v(e,"renderPrefix"),renderSuffixRef:v(e,"renderSuffix"),renderSwitcherIconRef:v(e,"renderSwitcherIcon"),labelFieldRef:v(e,"labelField"),multipleRef:v(e,"multiple"),handleSwitcherClick:je,handleDragEnd:function({event:n,node:o}){$e(),!e.draggable||e.disabled||me(o,e.disabledField)||function(n){const{onDragend:o}=e;o&&H(o,n)}({event:n,node:o.rawNode})},handleDragEnter:function({event:n,node:o}){!e.draggable||e.disabled||me(o,e.disabledField)||(Ue({event:n,node:o},!1),function(n){const{onDragenter:o}=e;o&&H(o,n)}({event:n,node:o.rawNode}))},handleDragLeave:function({event:n,node:o}){!e.draggable||e.disabled||me(o,e.disabledField)||function(n){const{onDragleave:o}=e;o&&H(o,n)}({event:n,node:o.rawNode})},handleDragStart:function({event:n,node:o}){!e.draggable||e.disabled||me(o,e.disabledField)||(ce=n.clientX,se.value=o,function(n){const{onDragstart:o}=e;o&&H(o,n)}({event:n,node:o.rawNode}))},handleDrop:function({event:n,node:o,dropPosition:t}){if(!e.draggable||e.disabled||me(o,e.disabledField))return;const{value:l}=se,{value:r}=ue,{value:a}=he;if(l&&r&&a&&e.allowDrop({node:r.rawNode,dropPosition:a,phase:"drag"})&&l.key!==r.key){if("before"===a){const e=l.getNext({includeDisabled:!0});if(e&&e.key===r.key)return void Be()}if("after"===a){const e=l.getPrev({includeDisabled:!0});if(e&&e.key===r.key)return void Be()}!function(n){const{onDrop:o}=e;o&&H(o,n)}({event:n,node:r.rawNode,dragNode:l.rawNode,dropPosition:t}),$e()}},handleDragOver:Ue,handleSelect:Ie,handleCheck:ze});const _e={handleKeydown:W,scrollTo:function(e){var n;null===(n=d.value)||void 0===n||n.scrollTo(e)},getCheckedData:()=>{if(!e.checkable)return{keys:[],options:[]};const{checkedKeys:n}=K.value;return{keys:n,options:Pe(n)}},getIndeterminateData:()=>{if(!e.checkable)return{keys:[],options:[]};const{indeterminateKeys:n}=K.value;return{keys:n,options:Pe(n)}}},Me=m((()=>{const{common:{cubicBezierEaseInOut:e},self:{fontSize:n,nodeBorderRadius:o,nodeColorHover:t,nodeColorPressed:l,nodeColorActive:a,arrowColor:i,loadingColor:d,nodeTextColor:c,nodeTextColorDisabled:s,dropMarkColor:u,nodeWrapperPadding:f,nodeHeight:h,lineHeight:b}}=r.value,v=oe(f,"top"),p=oe(f,"bottom");return{"--n-arrow-color":i,"--n-loading-color":d,"--n-bezier":e,"--n-font-size":n,"--n-node-border-radius":o,"--n-node-color-active":a,"--n-node-color-hover":t,"--n-node-color-pressed":l,"--n-node-text-color":c,"--n-node-text-color-disabled":s,"--n-drop-mark-color":u,"--n-node-wrapper-padding":f,"--n-line-offset-top":`-${v}`,"--n-line-offset-bottom":`-${p}`,"--n-node-content-height":ne(te(h)-te(v)-te(p)),"--n-line-height":b}})),Ve=o?w("tree",void 0,Me,e):void 0;return Object.assign(Object.assign({},_e),{mergedClsPrefix:n,mergedTheme:r,rtlEnabled:l,fNodes:Le,aip:Re,selfElRef:a,virtualListInstRef:d,scrollbarInstRef:i,handleFocusout:function(n){var o;if(e.virtualScroll||e.internalScrollable){const{value:e}=i;if(null===(o=null==e?void 0:e.containerRef)||void 0===o?void 0:o.contains(n.relatedTarget))return;Y.value=null}else{const{value:e}=a;if(null==e?void 0:e.contains(n.relatedTarget))return;Y.value=null}},handleDragLeaveTree:function(e){e.target===e.currentTarget&&Be()},handleScroll:function(){Fe()},getScrollContainer:function(){var e;return null===(e=d.value)||void 0===e?void 0:e.listElRef},getScrollContent:function(){var e;return null===(e=d.value)||void 0===e?void 0:e.itemsElRef},handleAfterEnter:function(){Re.value=!1,e.virtualScroll&&$(Fe)},handleResize:function(){Fe()},cssVars:o?void 0:Me,themeClass:null==Ve?void 0:Ve.themeClass,onRender:null==Ve?void 0:Ve.onRender})},render(){var e;const{fNodes:o,internalRenderEmpty:t}=this;if(!o.length&&t)return t();const{mergedClsPrefix:l,blockNode:r,blockLine:a,draggable:i,disabled:d,internalFocusable:c,checkable:s,handleKeydown:u,rtlEnabled:f,handleFocusout:h,scrollbarProps:b}=this,v=c&&!d,p=v?"0":void 0,g=[`${l}-tree`,f&&`${l}-tree--rtl`,s&&`${l}-tree--checkable`,(a||r)&&`${l}-tree--block-node`,a&&`${l}-tree--block-line`],k=e=>"__motion"in e?n(Re,{height:e.height,nodes:e.nodes,clsPrefix:l,mode:e.mode,onAfterEnter:this.handleAfterEnter}):n(Ce,{key:e.key,tmNode:e,clsPrefix:l});if(this.virtualScroll){const{mergedTheme:e,internalScrollablePadding:o}=this,t=oe(o||"0");return n(X,Object.assign({},b,{ref:"scrollbarInstRef",onDragleave:i?this.handleDragLeaveTree:void 0,container:this.getScrollContainer,content:this.getScrollContent,class:g,theme:e.peers.Scrollbar,themeOverrides:e.peerOverrides.Scrollbar,tabindex:p,onKeydown:v?u:void 0,onFocusout:v?h:void 0}),{default:()=>{var o;return null===(o=this.onRender)||void 0===o||o.call(this),n(le,{ref:"virtualListInstRef",items:this.fNodes,itemSize:te(e.self.nodeHeight),ignoreItemResize:this.aip,paddingTop:t.top,paddingBottom:t.bottom,class:this.themeClass,style:[this.cssVars,{paddingLeft:t.left,paddingRight:t.right}],onScroll:this.handleScroll,onResize:this.handleResize,showScrollbar:!1,itemResizable:!0},{default:({item:e})=>k(e)})}})}const{internalScrollable:y}=this;return g.push(this.themeClass),null===(e=this.onRender)||void 0===e||e.call(this),y?n(X,Object.assign({},b,{class:g,tabindex:p,onKeydown:v?u:void 0,onFocusout:v?h:void 0,style:this.cssVars,contentStyle:{padding:this.internalScrollablePadding}}),{default:()=>n("div",{onDragleave:i?this.handleDragLeaveTree:void 0,ref:"selfElRef"},this.fNodes.map(k))}):n("div",{class:g,tabindex:p,ref:"selfElRef",style:this.cssVars,onKeydown:v?u:void 0,onFocusout:v?h:void 0,onDragleave:i?this.handleDragLeaveTree:void 0},o.length?o.map(k):Y(this.$slots.empty,(()=>[n(re,{class:`${l}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})])))}}),Fe=Symbol("mapViewer"),Pe="_resourceTree_rblci_38",Ae=e({name:"ResourceTree",setup(){const e=I(),n=f(null),{stateRef:o,nodeProps:t}=U(),l=b(Fe),r=new j(l.value);e.saveCesiumSourceLoader(r);const a=e=>{"ADD"===e?n.value.openModal(o.rightObj.key):"DELETE"===e?c():"FLY_TO"===e&&s(),o.showDropdown=!1},i=()=>{o.showDropdown=!1},d=({type:e,options:n})=>{r.addSource(e,n);const t=o.treeData.find((n=>n.key===e));null==t||t.children.push({label:n.name,key:n.id,isLeaf:!0,parentType:e})},c=()=>{const{key:e,parentType:n}=o.rightObj;r.deleteSource(e,n);const t=o.treeData.find((e=>e.key===n)),l=null==t?void 0:t.children.findIndex((n=>n.key===e));!l||l<0||null==t||t.children.splice(l,1)},s=()=>{const{key:e,parentType:n}=o.rightObj;r.flyTo(e,n)};return()=>z("div",{class:Pe},[z(Le,{data:o.treeData,"node-props":t,checkable:!0,"expand-on-click":!0,"default-expand-all":!0,selectable:!0},null),z(ae,{trigger:"manual",placement:"bottom-start",show:o.showDropdown,options:o.options,x:o.x,y:o.y,onSelect:a,onClickoutside:i},null),z(_,{ref:n,onLoadMapSource:d},null)])}}),Te=Object.freeze(Object.defineProperty({__proto__:null,default:Ae},Symbol.toStringTag,{value:"Module"}));export{Ae as R,Te as i,Fe as v};
//# sourceMappingURL=index-f8e0082a.js.map
