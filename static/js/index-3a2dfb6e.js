import{d as e,h as n,c as o,f as t,g as l,a5 as r,a4 as a,ah as i,ai as d,aj as c,z as s,ak as u,k as f,n as h,l as b,j as v,ac as p,u as g,al as k,a7 as y,m,am as x,p as w,ab as C,an as R,ao as S,N as D,ap as N,y as K,aq as F,aa as A,a6 as L,i as P,w as T,A as O,a1 as B,ar as E,a8 as z,B as $}from"./index-d4772ea6.js";import{C as j}from"./index-4e9aa72e.js";import{u as I}from"./index-8add2a7b.js";import{u as U,S as _}from"./source-modal-42fef418.js";import{u as M}from"./browser-09ad06cc.js";import{u as V,c as q,d as H}from"./use-merged-state-7905bfde.js";import{a as Y,X}from"./Scrollbar-674443ed.js";import{i as G}from"./is-browser-11820a37.js";import{h as W,f as Q,c as J,a as Z}from"./create-9f3e5028.js";import{p as ee,g as ne}from"./index-5871ef24.js";import{V as oe,c as te}from"./RadioGroup-332518ce.js";import{N as le}from"./Dropdown-f73ca8cb.js";function re(e){return"string"==typeof e?`s-${e}`:`n-${e}`}const ae=e({name:"Switcher",render:()=>n("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},n("path",{d:"M12 8l10 8l-10 8z"}))}),ie=n("svg",{viewBox:"0 0 64 64",class:"check-icon"},n("path",{d:"M50.42,16.76L22.34,39.45l-8.1-11.46c-1.12-1.58-3.3-1.96-4.88-0.84c-1.58,1.12-1.95,3.3-0.84,4.88l10.26,14.51  c0.56,0.79,1.42,1.31,2.38,1.45c0.16,0.02,0.32,0.03,0.48,0.03c0.8,0,1.57-0.27,2.2-0.78l30.99-25.03c1.5-1.21,1.74-3.42,0.52-4.92  C54.13,15.78,51.93,15.55,50.42,16.76z"})),de=n("svg",{viewBox:"0 0 100 100",class:"line-icon"},n("path",{d:"M80.2,55.5H21.4c-2.8,0-5.1-2.5-5.1-5.5l0,0c0-3,2.3-5.5,5.1-5.5h58.7c2.8,0,5.1,2.5,5.1,5.5l0,0C85.2,53.1,82.9,55.5,80.2,55.5z"})),ce=o("n-checkbox-group"),se=t([l("checkbox","\n line-height: var(--n-label-line-height);\n font-size: var(--n-font-size);\n outline: none;\n cursor: pointer;\n display: inline-flex;\n flex-wrap: nowrap;\n align-items: flex-start;\n word-break: break-word;\n --n-merged-color-table: var(--n-color-table);\n ",[t("&:hover",[l("checkbox-box",[r("border",{border:"var(--n-border-checked)"})])]),t("&:focus:not(:active)",[l("checkbox-box",[r("border","\n border: var(--n-border-focus);\n box-shadow: var(--n-box-shadow-focus);\n ")])]),a("inside-table",[l("checkbox-box","\n background-color: var(--n-merged-color-table);\n ")]),a("checked",[l("checkbox-box","\n background-color: var(--n-color-checked);\n ",[l("checkbox-icon",[t(".check-icon","\n opacity: 1;\n transform: scale(1);\n ")])])]),a("indeterminate",[l("checkbox-box",[l("checkbox-icon",[t(".check-icon","\n opacity: 0;\n transform: scale(.5);\n "),t(".line-icon","\n opacity: 1;\n transform: scale(1);\n ")])])]),a("checked, indeterminate",[t("&:focus:not(:active)",[l("checkbox-box",[r("border","\n border: var(--n-border-checked);\n box-shadow: var(--n-box-shadow-focus);\n ")])]),l("checkbox-box","\n background-color: var(--n-color-checked);\n border-left: 0;\n border-top: 0;\n ",[r("border",{border:"var(--n-border-checked)"})])]),a("disabled",{cursor:"not-allowed"},[a("checked",[l("checkbox-box","\n background-color: var(--n-color-disabled-checked);\n ",[r("border",{border:"var(--n-border-disabled-checked)"}),l("checkbox-icon",[t(".check-icon, .line-icon",{fill:"var(--n-check-mark-color-disabled-checked)"})])])]),l("checkbox-box","\n background-color: var(--n-color-disabled);\n ",[r("border",{border:"var(--n-border-disabled)"}),l("checkbox-icon",[t(".check-icon, .line-icon",{fill:"var(--n-check-mark-color-disabled)"})])]),r("label",{color:"var(--n-text-color-disabled)"})]),l("checkbox-box-wrapper","\n position: relative;\n width: var(--n-size);\n flex-shrink: 0;\n flex-grow: 0;\n user-select: none;\n -webkit-user-select: none;\n "),l("checkbox-box","\n position: absolute;\n left: 0;\n top: 50%;\n transform: translateY(-50%);\n height: var(--n-size);\n width: var(--n-size);\n display: inline-block;\n box-sizing: border-box;\n border-radius: var(--n-border-radius);\n background-color: var(--n-color);\n transition: background-color 0.3s var(--n-bezier);\n ",[r("border","\n transition:\n border-color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n border-radius: inherit;\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n border: var(--n-border);\n "),l("checkbox-icon","\n display: flex;\n align-items: center;\n justify-content: center;\n position: absolute;\n left: 1px;\n right: 1px;\n top: 1px;\n bottom: 1px;\n ",[t(".check-icon, .line-icon","\n width: 100%;\n fill: var(--n-check-mark-color);\n opacity: 0;\n transform: scale(0.5);\n transform-origin: center;\n transition:\n fill 0.3s var(--n-bezier),\n transform 0.3s var(--n-bezier),\n opacity 0.3s var(--n-bezier),\n border-color 0.3s var(--n-bezier);\n "),i({left:"1px",top:"1px"})])]),r("label","\n color: var(--n-text-color);\n transition: color .3s var(--n-bezier);\n user-select: none;\n -webkit-user-select: none;\n padding: var(--n-label-padding);\n font-weight: var(--n-label-font-weight);\n ",[t("&:empty",{display:"none"})])]),d(l("checkbox","\n --n-merged-color-table: var(--n-color-table-modal);\n ")),c(l("checkbox","\n --n-merged-color-table: var(--n-color-table-popover);\n "))]),ue=e({name:"Checkbox",props:Object.assign(Object.assign({},g.props),{size:String,checked:{type:[Boolean,String,Number],default:void 0},defaultChecked:{type:[Boolean,String,Number],default:!1},value:[String,Number],disabled:{type:Boolean,default:void 0},indeterminate:Boolean,label:String,focusable:{type:Boolean,default:!0},checkedValue:{type:[Boolean,String,Number],default:!0},uncheckedValue:{type:[Boolean,String,Number],default:!1},"onUpdate:checked":[Function,Array],onUpdateChecked:[Function,Array],privateInsideTable:Boolean,onChange:[Function,Array]}),setup(e){s((()=>{e.onChange&&u("checkbox","`on-change` is deprecated, please use `on-update:checked` instead.")}));const n=f(null),{mergedClsPrefixRef:o,inlineThemeDisabled:t,mergedRtlRef:l}=h(e),r=M(e,{mergedSize(n){const{size:o}=e;if(void 0!==o)return o;if(d){const{value:e}=d.mergedSizeRef;if(void 0!==e)return e}if(n){const{mergedSize:e}=n;if(void 0!==e)return e.value}return"medium"},mergedDisabled(n){const{disabled:o}=e;if(void 0!==o)return o;if(d){if(d.disabledRef.value)return!0;const{maxRef:{value:e},checkedCountRef:n}=d;if(void 0!==e&&n.value>=e&&!D.value)return!0;const{minRef:{value:o}}=d;if(void 0!==o&&n.value<=o&&D.value)return!0}return!!n&&n.disabled.value}}),{mergedDisabledRef:a,mergedSizeRef:i}=r,d=b(ce,null),c=f(e.defaultChecked),R=v(e,"checked"),S=V(R,c),D=p((()=>{if(d){const n=d.valueSetRef.value;return!(!n||void 0===e.value)&&n.has(e.value)}return S.value===e.checkedValue})),N=g("Checkbox","-checkbox",se,k,e,o);function K(n){if(d&&void 0!==e.value)d.toggleCheckbox(!D.value,e.value);else{const{onChange:o,"onUpdate:checked":t,onUpdateChecked:l}=e,{nTriggerFormInput:a,nTriggerFormChange:i}=r,d=D.value?e.uncheckedValue:e.checkedValue;t&&q(t,d,n),l&&q(l,d,n),o&&q(o,d,n),a(),i(),c.value=d}}const F={focus:()=>{var e;null===(e=n.value)||void 0===e||e.focus()},blur:()=>{var e;null===(e=n.value)||void 0===e||e.blur()}},A=y("Checkbox",l,o),L=m((()=>{const{value:e}=i,{common:{cubicBezierEaseInOut:n},self:{borderRadius:o,color:t,colorChecked:l,colorDisabled:r,colorTableHeader:a,colorTableHeaderModal:d,colorTableHeaderPopover:c,checkMarkColor:s,checkMarkColorDisabled:u,border:f,borderFocus:h,borderDisabled:b,borderChecked:v,boxShadowFocus:p,textColor:g,textColorDisabled:k,checkMarkColorDisabledChecked:y,colorDisabledChecked:m,borderDisabledChecked:w,labelPadding:C,labelLineHeight:R,labelFontWeight:S,[x("fontSize",e)]:D,[x("size",e)]:K}}=N.value;return{"--n-label-line-height":R,"--n-label-font-weight":S,"--n-size":K,"--n-bezier":n,"--n-border-radius":o,"--n-border":f,"--n-border-checked":v,"--n-border-focus":h,"--n-border-disabled":b,"--n-border-disabled-checked":w,"--n-box-shadow-focus":p,"--n-color":t,"--n-color-checked":l,"--n-color-table":a,"--n-color-table-modal":d,"--n-color-table-popover":c,"--n-color-disabled":r,"--n-color-disabled-checked":m,"--n-text-color":g,"--n-text-color-disabled":k,"--n-check-mark-color":s,"--n-check-mark-color-disabled":u,"--n-check-mark-color-disabled-checked":y,"--n-font-size":D,"--n-label-padding":C}})),P=t?w("checkbox",m((()=>i.value[0])),L,e):void 0;return Object.assign(r,F,{rtlEnabled:A,selfRef:n,mergedClsPrefix:o,mergedDisabled:a,renderedChecked:D,mergedTheme:N,labelId:C(),handleClick:function(e){a.value||K(e)},handleKeyUp:function(e){if(!a.value)switch(e.key){case" ":case"Enter":K(e)}},handleKeyDown:function(e){if(" "===e.key)e.preventDefault()},cssVars:t?void 0:L,themeClass:null==P?void 0:P.themeClass,onRender:null==P?void 0:P.onRender})},render(){var e;const{$slots:o,renderedChecked:t,mergedDisabled:l,indeterminate:r,privateInsideTable:a,cssVars:i,labelId:d,label:c,mergedClsPrefix:s,focusable:u,handleKeyUp:f,handleKeyDown:h,handleClick:b}=this;return null===(e=this.onRender)||void 0===e||e.call(this),n("div",{ref:"selfRef",class:[`${s}-checkbox`,this.themeClass,this.rtlEnabled&&`${s}-checkbox--rtl`,t&&`${s}-checkbox--checked`,l&&`${s}-checkbox--disabled`,r&&`${s}-checkbox--indeterminate`,a&&`${s}-checkbox--inside-table`],tabindex:l||!u?void 0:0,role:"checkbox","aria-checked":r?"mixed":t,"aria-labelledby":d,style:i,onKeyup:f,onKeydown:h,onClick:b,onMousedown:()=>{Y("selectstart",window,(e=>{e.preventDefault()}),{once:!0})}},n("div",{class:`${s}-checkbox-box-wrapper`},"Â ",n("div",{class:`${s}-checkbox-box`},n(R,null,{default:()=>this.indeterminate?n("div",{key:"indeterminate",class:`${s}-checkbox-icon`},de):n("div",{key:"check",class:`${s}-checkbox-icon`},ie)}),n("div",{class:`${s}-checkbox-box__border`}))),null!==c||o.default?n("span",{class:`${s}-checkbox__label`,id:d},o.default?o.default():c):null)}}),fe=o("n-tree-select"),he=o("n-tree"),be=e({name:"NTreeSwitcher",props:{clsPrefix:{type:String,required:!0},expanded:Boolean,selected:Boolean,hide:Boolean,loading:Boolean,onClick:Function},setup(e){const{renderSwitcherIconRef:o}=b(he,null);return()=>{const{clsPrefix:t}=e;return n("span",{"data-switcher":!0,class:[`${t}-tree-node-switcher`,e.expanded&&`${t}-tree-node-switcher--expanded`,e.hide&&`${t}-tree-node-switcher--hide`],onClick:e.onClick},n("div",{class:`${t}-tree-node-switcher__icon`},n(R,null,{default:()=>{if(e.loading)return n(S,{clsPrefix:t,key:"loading",radius:85,strokeWidth:20});const{value:l}=o;return l?l({expanded:e.expanded,selected:e.selected}):n(D,{clsPrefix:t,key:"switcher"},{default:()=>n(ae,null)})}})))}}}),ve=e({name:"NTreeNodeCheckbox",props:{clsPrefix:{type:String,required:!0},right:Boolean,focusable:Boolean,disabled:Boolean,checked:Boolean,indeterminate:Boolean,onCheck:Function},setup(e){function n(n){const{onCheck:o}=e;o&&o(n)}return{handleUpdateValue:function(o){e.indeterminate?n(!1):n(o)},mergedTheme:b(he).mergedThemeRef}},render(){const{clsPrefix:e,mergedTheme:o,checked:t,indeterminate:l,disabled:r,focusable:a,handleUpdateValue:i}=this;return n("span",{class:[`${e}-tree-node-checkbox`,this.right&&`${e}-tree-node-checkbox--right`],"data-checkbox":!0},n(ue,{focusable:a,disabled:r,theme:o.peers.Checkbox,themeOverrides:o.peerOverrides.Checkbox,checked:t,indeterminate:l,onUpdateChecked:i}))}}),pe=e({name:"TreeNodeContent",props:{clsPrefix:{type:String,required:!0},disabled:Boolean,checked:Boolean,selected:Boolean,onClick:Function,onDragstart:Function,tmNode:{type:Object,required:!0},nodeProps:Object},setup(e){const{renderLabelRef:n,renderPrefixRef:o,renderSuffixRef:t,labelFieldRef:l}=b(he);return{selfRef:f(null),renderLabel:n,renderPrefix:o,renderSuffix:t,labelField:l,handleClick:function(n){!function(n){const{onClick:o}=e;o&&o(n)}(n)}}},render(){const{clsPrefix:e,labelField:o,nodeProps:t,checked:l=!1,selected:r=!1,renderLabel:a,renderPrefix:i,renderSuffix:d,handleClick:c,onDragstart:s,tmNode:{rawNode:u,rawNode:{prefix:f,suffix:h,[o]:b}}}=this;return n("span",Object.assign({},t,{ref:"selfRef",class:[`${e}-tree-node-content`,null==t?void 0:t.class],onClick:c,draggable:void 0!==s||void 0,onDragstart:s}),i||f?n("div",{class:`${e}-tree-node-content__prefix`},i?i({option:u,selected:r,checked:l}):N(f)):null,n("div",{class:`${e}-tree-node-content__text`},a?a({option:u,selected:r,checked:l}):N(b)),d||h?n("div",{class:`${e}-tree-node-content__suffix`},d?d({option:u,selected:r,checked:l}):N(h)):null)}});function ge({position:e,offsetLevel:o,indent:t,el:l}){const r={position:"absolute",boxSizing:"border-box",right:0};if("inside"===e)r.left=0,r.top=0,r.bottom=0,r.borderRadius="inherit",r.boxShadow="inset 0 0 0 2px var(--n-drop-mark-color)";else{const n="before"===e?"top":"bottom";r[n]=0,r.left=l.offsetLeft+6-o*t+"px",r.height="2px",r.backgroundColor="var(--n-drop-mark-color)",r.transformOrigin=n,r.borderRadius="1px",r.transform="before"===e?"translateY(-4px)":"translateY(4px)"}return n("div",{style:r})}function ke(e,n){return!!e.rawNode[n]}function ye(e,n,o,t){null==e||e.forEach((e=>{o(e),ye(e[n],n,o,t),t(e)}))}function me(e,n,o,t,l){const r=new Set,a=new Set,i=[];return ye(e,t,(e=>{if(i.push(e),l(n,e)){a.add(e[o]);for(let e=i.length-2;e>=0;--e){if(r.has(i[e][o]))return;r.add(i[e][o])}}}),(()=>{i.pop()})),{expandedKeys:Array.from(r),highlightKeySet:a}}if(G&&Image){(new Image).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}const xe=e({name:"TreeNode",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const n=b(he),{droppingNodeParentRef:o,droppingMouseNodeRef:t,draggingNodeRef:l,droppingPositionRef:r,droppingOffsetLevelRef:a,nodePropsRef:i,indentRef:d,blockLineRef:c,checkboxPlacementRef:s,checkOnClickRef:u,disabledFieldRef:h}=n,v=p((()=>!!e.tmNode.rawNode.checkboxDisabled)),g=p((()=>ke(e.tmNode,h.value))),k=p((()=>n.disabledRef.value||g.value)),y=m((()=>{const{value:n}=i;if(n)return n({option:e.tmNode.rawNode})})),x=f(null),w={value:null};function C(){const{tmNode:o}=e;if(o.isLeaf||o.shallowLoaded)n.handleSwitcherClick(o);else{if(n.loadingKeysRef.value.has(o.key))return;n.loadingKeysRef.value.add(o.key);const{onLoadRef:{value:e}}=n;e&&e(o.rawNode).then((e=>{!1!==e&&n.handleSwitcherClick(o)})).finally((()=>{n.loadingKeysRef.value.delete(o.key)}))}}K((()=>{w.value=x.value.$el}));const R=p((()=>!g.value&&n.selectableRef.value&&(!n.internalTreeSelect||("child"!==n.mergedCheckStrategyRef.value||n.multipleRef.value&&n.cascadeRef.value||e.tmNode.isLeaf)))),S=p((()=>n.checkableRef.value&&(n.cascadeRef.value||"child"!==n.mergedCheckStrategyRef.value||e.tmNode.isLeaf))),D=p((()=>n.displayedCheckedKeysRef.value.includes(e.tmNode.key))),N=p((()=>{const{value:n}=S;if(!n)return!1;const{value:o}=u;return"boolean"==typeof o?o:o(e.tmNode.rawNode)}));function F(o){const{value:t}=n.expandOnClickRef,{value:l}=R,{value:r}=N;if(!l&&!t&&!r)return;if(W(o,"checkbox")||W(o,"switcher"))return;const{tmNode:a}=e;l&&n.handleSelect(a),t&&!a.isLeaf&&C(),r&&A(!D.value)}function A(o){n.handleCheck(e.tmNode,o)}return{showDropMark:p((()=>{const{value:n}=l;if(!n)return;const{value:o}=r;if(!o)return;const{value:a}=t;if(!a)return;const{tmNode:i}=e;return i.key===a.key})),showDropMarkAsParent:p((()=>{const{value:n}=o;if(!n)return!1;const{tmNode:t}=e,{value:l}=r;return("before"===l||"after"===l)&&n.key===t.key})),pending:p((()=>n.pendingNodeKeyRef.value===e.tmNode.key)),loading:p((()=>n.loadingKeysRef.value.has(e.tmNode.key))),highlight:p((()=>{var o;return null===(o=n.highlightKeySetRef.value)||void 0===o?void 0:o.has(e.tmNode.key)})),checked:D,indeterminate:p((()=>n.displayedIndeterminateKeysRef.value.includes(e.tmNode.key))),selected:p((()=>n.mergedSelectedKeysRef.value.includes(e.tmNode.key))),expanded:p((()=>n.mergedExpandedKeysRef.value.includes(e.tmNode.key))),disabled:k,checkable:S,mergedCheckOnClick:N,checkboxDisabled:v,selectable:R,expandOnClick:n.expandOnClickRef,internalScrollable:n.internalScrollableRef,draggable:n.draggableRef,blockLine:c,nodeProps:y,checkboxFocusable:n.internalCheckboxFocusableRef,droppingPosition:r,droppingOffsetLevel:a,indent:d,checkboxPlacement:s,contentInstRef:x,contentElRef:w,handleCheck:A,handleDrop:function(o){o.preventDefault(),null!==r.value&&n.handleDrop({event:o,node:e.tmNode,dropPosition:r.value})},handleDragStart:function(o){n.handleDragStart({event:o,node:e.tmNode})},handleDragEnter:function(o){o.currentTarget===o.target&&n.handleDragEnter({event:o,node:e.tmNode})},handleDragOver:function(o){o.preventDefault(),n.handleDragOver({event:o,node:e.tmNode})},handleDragEnd:function(o){n.handleDragEnd({event:o,node:e.tmNode})},handleDragLeave:function(o){o.currentTarget===o.target&&n.handleDragLeave({event:o,node:e.tmNode})},handleLineClick:function(e){var n,o;c.value&&(k.value||F(e),null===(o=null===(n=y.value)||void 0===n?void 0:n.onClick)||void 0===o||o.call(n,e))},handleContentClick:function(e){var n,o;c.value||(k.value||F(e),null===(o=null===(n=y.value)||void 0===n?void 0:n.onClick)||void 0===o||o.call(n,e))},handleSwitcherClick:C}},render(){const{tmNode:e,clsPrefix:o,checkable:t,expandOnClick:l,selectable:r,selected:a,checked:i,highlight:d,draggable:c,blockLine:s,indent:u,disabled:f,pending:h,internalScrollable:b,nodeProps:v,checkboxPlacement:p}=this,g=c&&!f?{onDragenter:this.handleDragEnter,onDragleave:this.handleDragLeave,onDragend:this.handleDragEnd,onDrop:this.handleDrop,onDragover:this.handleDragOver}:void 0,k=b?re(e.key):void 0,y="right"===p,m=t?n(ve,{right:y,focusable:this.checkboxFocusable,disabled:f||this.checkboxDisabled,clsPrefix:o,checked:this.checked,indeterminate:this.indeterminate,onCheck:this.handleCheck}):null;return n("div",Object.assign({class:`${o}-tree-node-wrapper`},g),n("div",Object.assign({},s?v:void 0,{class:[`${o}-tree-node`,{[`${o}-tree-node--selected`]:a,[`${o}-tree-node--checkable`]:t,[`${o}-tree-node--highlight`]:d,[`${o}-tree-node--pending`]:h,[`${o}-tree-node--disabled`]:f,[`${o}-tree-node--selectable`]:r,[`${o}-tree-node--clickable`]:r||l||this.mergedCheckOnClick},null==v?void 0:v.class],"data-key":k,draggable:c&&s,onClick:this.handleLineClick,onDragstart:c&&s&&!f?this.handleDragStart:void 0}),F(e.level,n("div",{class:`${o}-tree-node-indent`},n("div",{style:{width:`${u}px`}}))),n(be,{clsPrefix:o,expanded:this.expanded,selected:a,loading:this.loading,hide:e.isLeaf,onClick:this.handleSwitcherClick}),y?null:m,n(pe,{ref:"contentInstRef",clsPrefix:o,checked:i,selected:a,onClick:this.handleContentClick,nodeProps:s?void 0:v,onDragstart:!c||s||f?void 0:this.handleDragStart,tmNode:e}),c?this.showDropMark?ge({el:this.contentElRef.value,position:this.droppingPosition,offsetLevel:this.droppingOffsetLevel,indent:u}):this.showDropMarkAsParent?ge({el:this.contentElRef.value,position:"inside",offsetLevel:this.droppingOffsetLevel,indent:u}):null:null,y?m:null))}});const we=e({name:"TreeMotionWrapper",props:{clsPrefix:{type:String,required:!0},height:Number,nodes:{type:Array,required:!0},mode:{type:String,required:!0},onAfterEnter:{type:Function,required:!0}},render(){const{clsPrefix:e}=this;return n(A,{onAfterEnter:this.onAfterEnter,appear:!0,reverse:"collapse"===this.mode},{default:()=>n("div",{class:[`${e}-tree-motion-wrapper`,`${e}-tree-motion-wrapper--${this.mode}`],style:{height:ee(this.height)}},this.nodes.map((o=>n(xe,{clsPrefix:e,tmNode:o}))))})}}),Ce=l("tree","\n font-size: var(--n-font-size);\n outline: none;\n",[t("ul, li","\n margin: 0;\n padding: 0;\n list-style: none;\n "),t(">",[l("tree-node",[t("&:first-child",{marginTop:0})])]),l("tree-node-indent","\n flex-grow: 0;\n flex-shrink: 0;\n height: 0;\n "),l("tree-motion-wrapper",[a("expand",[L({duration:"0.2s"})]),a("collapse",[L({duration:"0.2s",reverse:!0})])]),l("tree-node-wrapper","\n box-sizing: border-box;\n padding: 3px 0;\n "),l("tree-node","\n transform: translate3d(0,0,0);\n position: relative;\n display: flex;\n border-radius: var(--n-node-border-radius);\n transition: background-color .3s var(--n-bezier);\n ",[a("highlight",[l("tree-node-content",[r("text",{borderBottomColor:"var(--n-node-text-color-disabled)"})])]),a("disabled",[l("tree-node-content","\n color: var(--n-node-text-color-disabled);\n cursor: not-allowed;\n ")]),P("disabled",[a("clickable",[l("tree-node-content","\n cursor: pointer;\n ")])])]),a("block-node",[l("tree-node-content","\n flex: 1;\n min-width: 0;\n ")]),P("block-line",[l("tree-node",[P("disabled",[l("tree-node-content",[t("&:hover",{backgroundColor:"var(--n-node-color-hover)"})]),a("selectable",[l("tree-node-content",[t("&:active",{backgroundColor:"var(--n-node-color-pressed)"})])]),a("pending",[l("tree-node-content","\n background-color: var(--n-node-color-hover);\n ")]),a("selected",[l("tree-node-content",{backgroundColor:"var(--n-node-color-active)"})])])])]),a("block-line",[l("tree-node",[P("disabled",[t("&:hover",{backgroundColor:"var(--n-node-color-hover)"}),a("pending","\n background-color: var(--n-node-color-hover);\n "),a("selectable",[P("selected",[t("&:active",{backgroundColor:"var(--n-node-color-pressed)"})])]),a("selected",{backgroundColor:"var(--n-node-color-active)"})]),a("disabled","\n cursor: not-allowed;\n ")])]),l("tree-node-switcher","\n cursor: pointer;\n display: inline-flex;\n flex-shrink: 0;\n height: 24px;\n width: 24px;\n align-items: center;\n justify-content: center;\n transition: transform .15s var(--n-bezier);\n vertical-align: bottom;\n ",[r("icon","\n position: relative;\n height: 14px;\n width: 14px;\n display: flex;\n color: var(--n-arrow-color);\n transition: color .3s var(--n-bezier);\n font-size: 14px;\n ",[l("icon",[i()]),l("base-loading","\n color: var(--n-loading-color);\n position: absolute;\n left: 0;\n top: 0;\n right: 0;\n bottom: 0;\n ",[i()]),l("base-icon",[i()])]),a("hide",{visibility:"hidden"}),a("expanded",{transform:"rotate(90deg)"})]),l("tree-node-checkbox","\n display: inline-flex;\n height: 24px;\n width: 16px;\n vertical-align: bottom;\n align-items: center;\n justify-content: center;\n margin-right: 4px;\n ",[a("right","margin-left: 4px;")]),a("checkable",[l("tree-node-content","\n padding: 0 6px;\n ")]),l("tree-node-content","\n position: relative;\n display: inline-flex;\n align-items: center;\n min-height: 24px;\n box-sizing: border-box;\n line-height: 1.5;\n vertical-align: bottom;\n padding: 0 6px 0 4px;\n cursor: default;\n border-radius: var(--n-node-border-radius);\n text-decoration-color: #0000;\n text-decoration-line: underline;\n color: var(--n-node-text-color);\n transition:\n color .3s var(--n-bezier),\n text-decoration-color .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n ",[t("&:last-child",{marginBottom:0}),r("prefix","\n display: inline-flex;\n margin-right: 8px;\n "),r("text","\n border-bottom: 1px solid #0000;\n transition: border-color .3s var(--n-bezier);\n flex-grow: 1;\n max-width: 100%;\n "),r("suffix","\n display: inline-flex;\n ")]),r("empty","margin: auto;")]);var Re=globalThis&&globalThis.__awaiter||function(e,n,o,t){return new(o||(o=Promise))((function(l,r){function a(e){try{d(t.next(e))}catch(n){r(n)}}function i(e){try{d(t.throw(e))}catch(n){r(n)}}function d(e){var n;e.done?l(e.value):(n=e.value,n instanceof o?n:new o((function(e){e(n)}))).then(a,i)}d((t=t.apply(e,n||[])).next())}))};const Se={allowCheckingNotLoaded:Boolean,filter:Function,defaultExpandAll:Boolean,expandedKeys:Array,keyField:{type:String,default:"key"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},disabledField:{type:String,default:"disabled"},defaultExpandedKeys:{type:Array,default:()=>[]},indeterminateKeys:Array,renderSwitcherIcon:Function,onUpdateIndeterminateKeys:[Function,Array],"onUpdate:indeterminateKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],"onUpdate:expandedKeys":[Function,Array]},De=e({name:"Tree",props:Object.assign(Object.assign(Object.assign(Object.assign({},g.props),{accordion:Boolean,showIrrelevantNodes:{type:Boolean,default:!0},data:{type:Array,default:()=>[]},expandOnDragenter:{type:Boolean,default:!0},expandOnClick:Boolean,checkOnClick:{type:[Boolean,Function],default:!1},cancelable:{type:Boolean,default:!0},checkable:Boolean,draggable:Boolean,blockNode:Boolean,blockLine:Boolean,disabled:Boolean,checkedKeys:Array,defaultCheckedKeys:{type:Array,default:()=>[]},selectedKeys:Array,defaultSelectedKeys:{type:Array,default:()=>[]},multiple:Boolean,pattern:{type:String,default:""},onLoad:Function,cascade:Boolean,selectable:{type:Boolean,default:!0},indent:{type:Number,default:16},allowDrop:{type:Function,default:function({dropPosition:e,node:n}){return!1===n.isLeaf||(!!n.children||"inside"!==e)}},animated:{type:Boolean,default:!0},checkboxPlacement:{type:String,default:"left"},virtualScroll:Boolean,watchProps:Array,renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,keyboard:{type:Boolean,default:!0},getChildren:Function,onDragenter:[Function,Array],onDragleave:[Function,Array],onDragend:[Function,Array],onDragstart:[Function,Array],onDragover:[Function,Array],onDrop:[Function,Array],onUpdateCheckedKeys:[Function,Array],"onUpdate:checkedKeys":[Function,Array],onUpdateSelectedKeys:[Function,Array],"onUpdate:selectedKeys":[Function,Array]}),Se),{internalTreeSelect:Boolean,internalScrollable:Boolean,internalScrollablePadding:String,internalRenderEmpty:Function,internalHighlightKeySet:Object,internalUnifySelectCheck:Boolean,internalCheckboxFocusable:{type:Boolean,default:!0},internalFocusable:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},leafOnly:Boolean}),setup(e){s((()=>{e.leafOnly&&u("tree",'`leaf-only` is deprecated, please use `check-strategy="child"` instead')}));const{mergedClsPrefixRef:n,inlineThemeDisabled:o,mergedRtlRef:t}=h(e),l=y("Tree",t,n),r=g("Tree","-tree",Ce,E,e,n),a=f(null),i=f(null),d=f(null);const c=m((()=>{const{filter:n}=e;if(n)return n;const{labelField:o}=e;return(e,n)=>{if(!e.length)return!0;const t=n[o];return"string"==typeof t&&t.toLowerCase().includes(e.toLowerCase())}})),p=m((()=>{const{pattern:n}=e;return n&&n.length&&c.value?function(e,n,o,t,l){const r=new Set,a=new Set,i=new Set,d=[],c=[],s=[];return function e(d){d.forEach((d=>{if(s.push(d),n(o,d)){r.add(d[t]),i.add(d[t]);for(let e=s.length-2;e>=0;--e){const n=s[e][t];if(a.has(n))break;a.add(n),r.has(n)&&r.delete(n)}}const c=d[l];c&&e(c),s.pop()}))}(e),function e(n,o){n.forEach((n=>{const i=n[t],c=r.has(i),s=a.has(i);if(!c&&!s)return;const u=n[l];if(u)if(c)o.push(n);else{d.push(i);const t=Object.assign(Object.assign({},n),{[l]:[]});o.push(t),e(u,t[l])}else o.push(n)}))}(e,c),{filteredTree:c,highlightKeySet:i,expandedKeys:d}}(e.data,c.value,n,e.keyField,e.childrenField):{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}})),k=m((()=>{return J(e.showIrrelevantNodes?e.data:p.value.filteredTree,(n=e.keyField,o=e.childrenField,t=e.disabledField,{getIsGroup:()=>!1,getKey:e=>e[n],getChildren:e.getChildren||(e=>e[o]),getDisabled:e=>!(!e[t]&&!e.checkboxDisabled)}));var n,o,t})),x=b(fe,null),C=e.internalTreeSelect?x.dataTreeMate:k,{watchProps:R}=e,S=f([]);(null==R?void 0:R.includes("defaultCheckedKeys"))?s((()=>{S.value=e.defaultCheckedKeys})):S.value=e.defaultCheckedKeys;const D=v(e,"checkedKeys"),N=V(D,S),K=m((()=>C.value.getCheckedKeys(N.value,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded}))),F=function(e){return m((()=>e.leafOnly?"child":e.checkStrategy))}(e),A=m((()=>K.value.checkedKeys)),L=m((()=>{const{indeterminateKeys:n}=e;return void 0!==n?n:K.value.indeterminateKeys})),P=f([]);(null==R?void 0:R.includes("defaultSelectedKeys"))?s((()=>{P.value=e.defaultSelectedKeys})):P.value=e.defaultSelectedKeys;const $=v(e,"selectedKeys"),j=V($,P),I=f([]),U=n=>{I.value=e.defaultExpandAll?C.value.getNonLeafKeys():void 0===n?e.defaultExpandedKeys:n};(null==R?void 0:R.includes("defaultExpandedKeys"))?s((()=>{U(void 0)})):s((()=>{U(e.defaultExpandedKeys)}));const _=v(e,"expandedKeys"),M=V(_,I),H=m((()=>k.value.getFlattenedNodes(M.value))),{pendingNodeKeyRef:Y,handleKeydown:X}=function({props:e,fNodesRef:n,mergedExpandedKeysRef:o,mergedSelectedKeysRef:t,handleSelect:l,handleSwitcherClick:r}){const{value:a}=t,i=b(fe,null),d=i?i.pendingNodeKeyRef:f(a.length?a[a.length-1]:null);return{pendingNodeKeyRef:d,handleKeydown:function(t){if(!e.keyboard)return;const{value:a}=d;if(null===a){if("ArrowDown"!==t.key&&"ArrowUp"!==t.key||t.preventDefault(),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(t.key)&&null===a){const{value:e}=n;let o=0;for(;o<e.length;){if(!e[o].disabled){d.value=e[o].key;break}o+=1}}}else{const{value:e}=n;let i=e.findIndex((e=>e.key===a));if(!~i)return;if("Enter"===t.key)l(e[i]);else if("ArrowDown"===t.key)for(t.preventDefault(),i+=1;i<e.length;){if(!e[i].disabled){d.value=e[i].key;break}i+=1}else if("ArrowUp"===t.key)for(t.preventDefault(),i-=1;i>=0;){if(!e[i].disabled){d.value=e[i].key;break}i-=1}else if("ArrowLeft"===t.key){const n=e[i];if(n.isLeaf||!o.value.includes(a)){const e=n.getParent();e&&(d.value=e.key)}else r(n)}else if("ArrowRight"===t.key){const n=e[i];if(n.isLeaf)return;if(o.value.includes(a))for(i+=1;i<e.length;){if(!e[i].disabled){d.value=e[i].key;break}i+=1}else r(n)}}}}}({props:e,mergedSelectedKeysRef:j,fNodesRef:H,mergedExpandedKeysRef:M,handleSelect:ze,handleSwitcherClick:Ee});let G=null,W=null;const ee=f(new Set),ne=m((()=>e.internalHighlightKeySet||p.value.highlightKeySet)),oe=V(ne,ee),te=f(new Set),le=m((()=>M.value.filter((e=>!te.value.has(e)))));let ae=0;const ie=f(null),de=f(null),ce=f(null),se=f(null),ue=f(0),be=m((()=>{const{value:e}=de;return e?e.parent:null}));T(v(e,"data"),(()=>{te.value.clear(),Y.value=null,Pe()}),{deep:!1});let ve=!1;const pe=()=>{ve=!0,B((()=>{ve=!1}))};let ge;function ye(n){return Re(this,void 0,void 0,(function*(){const{onLoad:o}=e;if(!o)return z("tree","There is unloaded node in data but props.onLoad is not specified."),void(yield Promise.resolve());const{value:t}=te;if(!t.has(n.key)){t.add(n.key);try{!1===(yield o(n.rawNode))&&Oe()}catch(l){Oe()}t.delete(n.key)}}))}T(v(e,"pattern"),((n,o)=>{if(e.showIrrelevantNodes)if(ge=void 0,n){const{expandedKeys:n,highlightKeySet:o}=me(e.data,e.pattern,e.keyField,e.childrenField,c.value);ee.value=o,pe(),Fe(n,Ke(n),{node:null,action:"filter"})}else ee.value=new Set;else if(n.length){o.length||(ge=M.value);const{expandedKeys:e}=p.value;void 0!==e&&(pe(),Fe(e,Ke(e),{node:null,action:"filter"}))}else void 0!==ge&&(pe(),Fe(ge,Ke(ge),{node:null,action:"filter"}))})),s((()=>{var e;const{value:n}=k;if(!n)return;const{getNode:o}=n;null===(e=M.value)||void 0===e||e.forEach((e=>{const n=o(e);n&&!n.shallowLoaded&&ye(n)}))}));const xe=f(!1),we=f([]);T(le,((n,o)=>{if(!e.animated||ve)return void B(Ne);const t=new Set(o);let l=null,r=null;for(const e of n)if(!t.has(e)){if(null!==l)return;l=e}const i=new Set(n);for(const e of o)if(!i.has(e)){if(null!==r)return;r=e}if(null===l&&null===r)return;const{virtualScroll:c}=e,s=(c?d.value.listElRef:a.value).offsetHeight,u=Math.ceil(s/30)+1;let f;if(null!==l&&(f=o),null!==r&&(f=void 0===f?n:f.filter((e=>e!==r))),xe.value=!0,we.value=k.value.getFlattenedNodes(f),null!==l){const e=we.value.findIndex((e=>e.key===l));if(~e){const o=we.value[e].children;if(o){const t=Q(o,n);we.value.splice(e+1,0,{__motion:!0,mode:"expand",height:c?30*t.length:void 0,nodes:c?t.slice(0,u):t})}}}if(null!==r){const e=we.value.findIndex((e=>e.key===r));if(~e){const o=we.value[e].children;if(!o)return;xe.value=!0;const t=Q(o,n);we.value.splice(e+1,0,{__motion:!0,mode:"collapse",height:c?30*t.length:void 0,nodes:c?t.slice(0,u):t})}}}));const Se=m((()=>Z(H.value))),De=m((()=>xe.value?we.value:H.value));function Ne(){const{value:e}=i;e&&e.sync()}function Ke(e){const{getNode:n}=C.value;return e.map((e=>{var o;return(null===(o=n(e))||void 0===o?void 0:o.rawNode)||null}))}function Fe(n,o,t){const{"onUpdate:expandedKeys":l,onUpdateExpandedKeys:r}=e;I.value=n,l&&q(l,n,o,t),r&&q(r,n,o,t)}function Ae(n,o,t){const{"onUpdate:checkedKeys":l,onUpdateCheckedKeys:r}=e;S.value=n,r&&q(r,n,o,t),l&&q(l,n,o,t)}function Le(n,o,t){const{"onUpdate:selectedKeys":l,onUpdateSelectedKeys:r}=e;P.value=n,r&&q(r,n,o,t),l&&q(l,n,o,t)}function Pe(){ie.value=null,Te()}function Te(){ue.value=0,de.value=null,ce.value=null,se.value=null,Oe()}function Oe(){G&&(window.clearTimeout(G),G=null),W=null}function Be(n,o){if(e.disabled||ke(n,e.disabledField))return;if(e.internalUnifySelectCheck&&!e.multiple)return void ze(n);const t=o?"check":"uncheck",{checkedKeys:l,indeterminateKeys:r}=C.value[t](n.key,A.value,{cascade:e.cascade,checkStrategy:F.value,allowNotLoaded:e.allowCheckingNotLoaded});Ae(l,Ke(l),{node:n.rawNode,action:t}),function(n,o){const{"onUpdate:indeterminateKeys":t,onUpdateIndeterminateKeys:l}=e;t&&q(t,n,o),l&&q(l,n,o)}(r,Ke(r))}function Ee(n){e.disabled||xe.value||function(n){if(e.disabled)return;const{key:o}=n,{value:t}=M,l=t.findIndex((e=>e===o));if(~l){const e=Array.from(t);e.splice(l,1),Fe(e,Ke(e),{node:n.rawNode,action:"collapse"})}else{const l=k.value.getNode(o);if(!l||l.isLeaf)return;let r;if(e.accordion){const e=new Set(n.siblings.map((({key:e})=>e)));r=t.filter((n=>!e.has(n))),r.push(o)}else r=t.concat(o);Fe(r,Ke(r),{node:n.rawNode,action:"expand"})}}(n)}function ze(n){if(!e.disabled&&e.selectable){if(Y.value=n.key,e.internalUnifySelectCheck){const{value:{checkedKeys:o,indeterminateKeys:t}}=K;e.multiple?Be(n,!(o.includes(n.key)||t.includes(n.key))):Ae([n.key],Ke([n.key]),{node:n.rawNode,action:"check"})}if(e.multiple){const o=Array.from(j.value),t=o.findIndex((e=>e===n.key));~t?e.cancelable&&o.splice(t,1):~t||o.push(n.key),Le(o,Ke(o),{node:n.rawNode,action:~t?"unselect":"select"})}else{j.value.includes(n.key)?e.cancelable&&Le([],[],{node:n.rawNode,action:"unselect"}):Le([n.key],Ke([n.key]),{node:n.rawNode,action:"select"})}}}function $e({event:n,node:o},t=!0){var l;if(!e.draggable||e.disabled||ke(o,e.disabledField))return;const{value:r}=ie;if(!r)return;const{allowDrop:a,indent:i}=e;t&&function(n){const{onDragover:o}=e;o&&q(o,n)}({event:n,node:o.rawNode});const d=n.currentTarget,{height:c,top:s}=d.getBoundingClientRect(),u=n.clientY-s;let f;f=a({node:o.rawNode,dropPosition:"inside",phase:"drag"})?u<=8?"before":u>=c-8?"after":"inside":u<=c/2?"before":"after";const{value:h}=Se;let b,v;const p=h(o.key);if(null===p)return void Te();let g=!1;"inside"===f?(b=o,v="inside"):"before"===f?o.isFirstChild?(b=o,v="before"):(b=H.value[p-1],v="after"):(b=o,v="after"),!b.isLeaf&&M.value.includes(b.key)&&(g=!0,"after"===v&&(b=H.value[p+1],b?v="before":(b=o,v="inside")));const k=b;if(ce.value=k,!g&&r.isLastChild&&r.key===b.key&&(v="after"),"after"===v){let e=ae-n.clientX,o=0;for(;e>=i/2&&null!==b.parent&&b.isLastChild&&o<1;)e-=i,o+=1,b=b.parent;ue.value=o}else ue.value=0;if(!(r.contains(b)||"inside"===v&&(null===(l=r.parent)||void 0===l?void 0:l.key)===b.key)||r.key===k.key&&r.key===b.key)if(a({node:b.rawNode,dropPosition:v,phase:"drag"})){if(r.key===b.key)Oe();else if(W!==b.key)if("inside"===v){if(e.expandOnDragenter){if(function(e){if(G&&(window.clearTimeout(G),G=null),e.isLeaf)return;W=e.key;const n=()=>{if(W!==e.key)return;const{value:n}=ce;if(n&&n.key===e.key&&!M.value.includes(e.key)){const n=M.value.concat(e.key);Fe(n,Ke(n),{node:e.rawNode,action:"expand"})}G=null,W=null};G=e.shallowLoaded?window.setTimeout((()=>{n()}),1e3):window.setTimeout((()=>{ye(e).then((()=>{n()}))}),1e3)}(b),!b.shallowLoaded&&W!==b.key)return void Pe()}else if(!b.shallowLoaded)return void Pe()}else Oe();else"inside"!==v&&Oe();se.value=v,de.value=b}else Te();else Te()}T(Y,(n=>{var o,t;if(null!==n)if(e.virtualScroll)null===(o=d.value)||void 0===o||o.scrollTo({key:n});else if(e.internalScrollable){const{value:e}=i;if(null===e)return;const o=null===(t=e.contentRef)||void 0===t?void 0:t.querySelector(`[data-key="${re(n)}"]`);if(!o)return;e.scrollTo({el:o})}})),O(he,{loadingKeysRef:te,highlightKeySetRef:oe,displayedCheckedKeysRef:A,displayedIndeterminateKeysRef:L,mergedSelectedKeysRef:j,mergedExpandedKeysRef:M,mergedThemeRef:r,mergedCheckStrategyRef:F,nodePropsRef:v(e,"nodeProps"),disabledRef:v(e,"disabled"),checkableRef:v(e,"checkable"),selectableRef:v(e,"selectable"),expandOnClickRef:v(e,"expandOnClick"),onLoadRef:v(e,"onLoad"),draggableRef:v(e,"draggable"),blockLineRef:v(e,"blockLine"),indentRef:v(e,"indent"),cascadeRef:v(e,"cascade"),checkOnClickRef:v(e,"checkOnClick"),checkboxPlacementRef:e.checkboxPlacement,droppingMouseNodeRef:ce,droppingNodeParentRef:be,draggingNodeRef:ie,droppingPositionRef:se,droppingOffsetLevelRef:ue,fNodesRef:H,pendingNodeKeyRef:Y,disabledFieldRef:v(e,"disabledField"),internalScrollableRef:v(e,"internalScrollable"),internalCheckboxFocusableRef:v(e,"internalCheckboxFocusable"),internalTreeSelect:e.internalTreeSelect,renderLabelRef:v(e,"renderLabel"),renderPrefixRef:v(e,"renderPrefix"),renderSuffixRef:v(e,"renderSuffix"),renderSwitcherIconRef:v(e,"renderSwitcherIcon"),labelFieldRef:v(e,"labelField"),multipleRef:v(e,"multiple"),handleSwitcherClick:Ee,handleDragEnd:function({event:n,node:o}){Pe(),!e.draggable||e.disabled||ke(o,e.disabledField)||function(n){const{onDragend:o}=e;o&&q(o,n)}({event:n,node:o.rawNode})},handleDragEnter:function({event:n,node:o}){!e.draggable||e.disabled||ke(o,e.disabledField)||($e({event:n,node:o},!1),function(n){const{onDragenter:o}=e;o&&q(o,n)}({event:n,node:o.rawNode}))},handleDragLeave:function({event:n,node:o}){!e.draggable||e.disabled||ke(o,e.disabledField)||function(n){const{onDragleave:o}=e;o&&q(o,n)}({event:n,node:o.rawNode})},handleDragStart:function({event:n,node:o}){!e.draggable||e.disabled||ke(o,e.disabledField)||(ae=n.clientX,ie.value=o,function(n){const{onDragstart:o}=e;o&&q(o,n)}({event:n,node:o.rawNode}))},handleDrop:function({event:n,node:o,dropPosition:t}){if(!e.draggable||e.disabled||ke(o,e.disabledField))return;const{value:l}=ie,{value:r}=de,{value:a}=se;if(l&&r&&a&&e.allowDrop({node:r.rawNode,dropPosition:a,phase:"drag"})&&l.key!==r.key){if("before"===a){const e=l.getNext({includeDisabled:!0});if(e&&e.key===r.key)return void Te()}if("after"===a){const e=l.getPrev({includeDisabled:!0});if(e&&e.key===r.key)return void Te()}!function(n){const{onDrop:o}=e;o&&q(o,n)}({event:n,node:r.rawNode,dragNode:l.rawNode,dropPosition:t}),Pe()}},handleDragOver:$e,handleSelect:ze,handleCheck:Be});const je={handleKeydown:X,scrollTo:function(e){var n;null===(n=d.value)||void 0===n||n.scrollTo(e)},getCheckedData:()=>{if(!e.checkable)return{keys:[],options:[]};const{checkedKeys:n}=K.value;return{keys:n,options:Ke(n)}},getIndeterminateData:()=>{if(!e.checkable)return{keys:[],options:[]};const{indeterminateKeys:n}=K.value;return{keys:n,options:Ke(n)}}},Ie=m((()=>{const{common:{cubicBezierEaseInOut:e},self:{fontSize:n,nodeBorderRadius:o,nodeColorHover:t,nodeColorPressed:l,nodeColorActive:a,arrowColor:i,loadingColor:d,nodeTextColor:c,nodeTextColorDisabled:s,dropMarkColor:u}}=r.value;return{"--n-arrow-color":i,"--n-loading-color":d,"--n-bezier":e,"--n-font-size":n,"--n-node-border-radius":o,"--n-node-color-active":a,"--n-node-color-hover":t,"--n-node-color-pressed":l,"--n-node-text-color":c,"--n-node-text-color-disabled":s,"--n-drop-mark-color":u}})),Ue=o?w("tree",void 0,Ie,e):void 0;return Object.assign(Object.assign({},je),{mergedClsPrefix:n,mergedTheme:r,rtlEnabled:l,fNodes:De,aip:xe,selfElRef:a,virtualListInstRef:d,scrollbarInstRef:i,handleFocusout:function(n){var o;if(e.virtualScroll||e.internalScrollable){const{value:e}=i;if(null===(o=null==e?void 0:e.containerRef)||void 0===o?void 0:o.contains(n.relatedTarget))return;Y.value=null}else{const{value:e}=a;if(null==e?void 0:e.contains(n.relatedTarget))return;Y.value=null}},handleDragLeaveTree:function(e){e.target===e.currentTarget&&Te()},handleScroll:function(){Ne()},getScrollContainer:function(){var e;return null===(e=d.value)||void 0===e?void 0:e.listElRef},getScrollContent:function(){var e;return null===(e=d.value)||void 0===e?void 0:e.itemsElRef},handleAfterEnter:function(){xe.value=!1,e.virtualScroll&&B(Ne)},handleResize:function(){Ne()},cssVars:o?void 0:Ie,themeClass:null==Ue?void 0:Ue.themeClass,onRender:null==Ue?void 0:Ue.onRender})},render(){var e;const{fNodes:o,internalRenderEmpty:t}=this;if(!o.length&&t)return t();const{mergedClsPrefix:l,blockNode:r,blockLine:a,draggable:i,disabled:d,internalFocusable:c,checkable:s,handleKeydown:u,rtlEnabled:f,handleFocusout:h}=this,b=c&&!d,v=b?"0":void 0,p=[`${l}-tree`,f&&`${l}-tree--rtl`,s&&`${l}-tree--checkable`,(a||r)&&`${l}-tree--block-node`,a&&`${l}-tree--block-line`],g=e=>"__motion"in e?n(we,{height:e.height,nodes:e.nodes,clsPrefix:l,mode:e.mode,onAfterEnter:this.handleAfterEnter}):n(xe,{key:e.key,tmNode:e,clsPrefix:l});if(this.virtualScroll){const{mergedTheme:e,internalScrollablePadding:o}=this,t=ne(o||"0");return n(X,{ref:"scrollbarInstRef",onDragleave:i?this.handleDragLeaveTree:void 0,container:this.getScrollContainer,content:this.getScrollContent,class:p,theme:e.peers.Scrollbar,themeOverrides:e.peerOverrides.Scrollbar,tabindex:v,onKeydown:b?u:void 0,onFocusout:b?h:void 0},{default:()=>{var e;return null===(e=this.onRender)||void 0===e||e.call(this),n(oe,{ref:"virtualListInstRef",items:this.fNodes,itemSize:30,ignoreItemResize:this.aip,paddingTop:t.top,paddingBottom:t.bottom,class:this.themeClass,style:[this.cssVars,{paddingLeft:t.left,paddingRight:t.right}],onScroll:this.handleScroll,onResize:this.handleResize,showScrollbar:!1,itemResizable:!0},{default:({item:e})=>g(e)})}})}const{internalScrollable:k}=this;return p.push(this.themeClass),null===(e=this.onRender)||void 0===e||e.call(this),k?n(X,{class:p,tabindex:v,onKeydown:b?u:void 0,onFocusout:b?h:void 0,style:this.cssVars,contentStyle:{padding:this.internalScrollablePadding}},{default:()=>n("div",{onDragleave:i?this.handleDragLeaveTree:void 0,ref:"selfElRef"},this.fNodes.map(g))}):n("div",{class:p,tabindex:v,ref:"selfElRef",style:this.cssVars,onKeydown:b?u:void 0,onFocusout:b?h:void 0,onDragleave:i?this.handleDragLeaveTree:void 0},o.length?o.map(g):H(this.$slots.empty,(()=>[n(te,{class:`${l}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})])))}}),Ne=Symbol("mapViewer"),Ke="_resourceTree_rblci_38",Fe=e({name:"ResourceTree",setup(){const e=I(),n=f(null),{stateRef:o,nodeProps:t}=U(),l=b(Ne),r=new j(l.value);e.saveCesiumSourceLoader(r);const a=e=>{"ADD"===e?n.value.openModal(o.rightObj.key):"DELETE"===e?c():"FLY_TO"===e&&s(),o.showDropdown=!1},i=()=>{o.showDropdown=!1},d=({type:e,options:n})=>{r.addSource(e,n);const t=o.treeData.find((n=>n.key===e));null==t||t.children.push({label:n.name,key:n.id,isLeaf:!0,parentType:e})},c=()=>{const{key:e,parentType:n}=o.rightObj;r.deleteSource(e,n);const t=o.treeData.find((e=>e.key===n)),l=null==t?void 0:t.children.findIndex((n=>n.key===e));!l||l<0||null==t||t.children.splice(l,1)},s=()=>{const{key:e,parentType:n}=o.rightObj;r.flyTo(e,n)};return()=>$("div",{class:Ke},[$(De,{data:o.treeData,"node-props":t,checkable:!0,"expand-on-click":!0,"default-expand-all":!0,selectable:!0},null),$(le,{trigger:"manual",placement:"bottom-start",show:o.showDropdown,options:o.options,x:o.x,y:o.y,onSelect:a,onClickoutside:i},null),$(_,{ref:n,onLoadMapSource:d},null)])}}),Ae=Object.freeze(Object.defineProperty({__proto__:null,default:Fe},Symbol.toStringTag,{value:"Module"}));export{Fe as R,Ae as i,Ne as v};
//# sourceMappingURL=index-3a2dfb6e.js.map
