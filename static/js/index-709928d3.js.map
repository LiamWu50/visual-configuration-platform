{"version":3,"file":"index-709928d3.js","sources":["../../../src/store/editor/index.ts"],"sourcesContent":["import { Primitive } from '@/primitives/primitive'\nimport { CanvasStyle } from '@/primitives/types'\n\nexport const useEditorStore = defineStore('editor', () => {\n  const canvasStyle = ref<CanvasStyle>({ width: 1920, height: 1080 })\n  const primitives = ref<Primitive[]>([])\n  const curPrimitive = ref<Primitive | null>(null)\n  const isClickPrimitive = ref<boolean>(false)\n  const editorScale = ref<number>(40)\n\n  /**\n   * 设置画布样式\n   * @param style CanvasStyle\n   */\n  const setCanvasStyle = (style: CanvasStyle) => {\n    console.log('style', style)\n\n    canvasStyle.value = style\n  }\n\n  /**\n   * 添加primitive到画布编辑器\n   * @param val Primitive\n   */\n  const addPrimitive = (val: Primitive) => {\n    primitives.value.push(val)\n  }\n\n  /**\n   * 清空画布\n   */\n  const clear = () => {\n    primitives.value.length = 0\n    curPrimitive.value = null\n    isClickPrimitive.value = false\n  }\n\n  /**\n   * 设置当前选中的primitive\n   * @param val Primitive\n   */\n  const setCurPrimitive = (val: Primitive | null) => {\n    curPrimitive.value = val\n  }\n\n  /**\n   * 删除当前选中的primitive\n   */\n  const deleteCurPrimitive = () => {\n    const index = curPrimitiveIndex.value\n    if (index > -1) primitives.value.splice(index, 1)\n    curPrimitive.value = null\n  }\n\n  /**\n   * 批量删除 primitive\n   * @param primitives Primitive[]\n   */\n  const batchDeletePrimitive = (data: Primitive[]) => {\n    data.forEach(({ id }) => {\n      const index = primitives.value.findIndex((p) => p.id === id)\n      primitives.value.splice(index, 1)\n    })\n  }\n\n  /**\n   * 设置当前是否点击primitive的状态\n   * @param status Boolean\n   */\n  const setClickPrimitiveStatus = (status: boolean) => {\n    isClickPrimitive.value = status\n  }\n\n  /**\n   * 当前选中primitive在数组中的下标\n   */\n  const curPrimitiveIndex = computed(() =>\n    primitives.value.findIndex(({ id }) => id === curPrimitive.value?.id)\n  )\n\n  /**\n   * 移动当前选中Primitive位置\n   * @param toIndex Number\n   */\n  const moveCurPrimitiveByIndex = (toIndex: number) => {\n    const indexToMove = curPrimitiveIndex.value\n\n    const [valueToMove] = primitives.value.splice(indexToMove, 1)\n    primitives.value.splice(indexToMove + toIndex, 0, valueToMove)\n  }\n\n  /**\n   * 置顶当前选中组件\n   */\n  const upCurComponent = () => {\n    const indexToMove = curPrimitiveIndex.value\n    const [valueToMove] = primitives.value.splice(indexToMove, 1)\n    primitives.value.push(valueToMove)\n  }\n\n  /**\n   * 置底当前选中组件\n   */\n  const downCurComponent = () => {\n    const indexToMove = curPrimitiveIndex.value\n    const [valueToMove] = primitives.value.splice(indexToMove, 1)\n    primitives.value.unshift(valueToMove)\n  }\n\n  /**\n   * 设置编辑器的缩放比\n   * @param scale Number\n   */\n  const setEditorScale = (scale: number) => {\n    editorScale.value = scale\n  }\n\n  return {\n    canvasStyle,\n    primitives,\n    setCanvasStyle,\n    curPrimitive,\n    isClickPrimitive,\n    editorScale,\n    addPrimitive,\n    clear,\n    deleteCurPrimitive,\n    batchDeletePrimitive,\n    setCurPrimitive,\n    setClickPrimitiveStatus,\n    moveCurPrimitiveByIndex,\n    upCurComponent,\n    downCurComponent,\n    setEditorScale\n  }\n})\n"],"names":["useEditorStore","defineStore","canvasStyle","ref","width","height","primitives","curPrimitive","isClickPrimitive","editorScale","curPrimitiveIndex","computed","value","findIndex","id","_a","setCanvasStyle","style","addPrimitive","val","push","clear","length","deleteCurPrimitive","index","splice","batchDeletePrimitive","data","forEach","p","setCurPrimitive","setClickPrimitiveStatus","status","moveCurPrimitiveByIndex","toIndex","indexToMove","valueToMove","upCurComponent","downCurComponent","unshift","setEditorScale","scale"],"mappings":"sDAGa,MAAAA,EAAiBC,EAAY,UAAU,KAClD,MAAMC,EAAcC,EAAiB,CAAEC,MAAO,KAAMC,OAAQ,OACtDC,EAAaH,EAAiB,IAC9BI,EAAeJ,EAAsB,MACrCK,EAAmBL,GAAa,GAChCM,EAAcN,EAAY,IAoE1BO,EAAoBC,GAAS,IACjCL,EAAWM,MAAMC,WAAU,EAAGC,eAAgB,OAAAA,KAAA,OAAAC,EAAAR,EAAaK,YAAO,EAAAG,EAAAD,GAAA,MAwC7D,MAAA,CACLZ,cACAI,aACAU,eA1GsBC,IAGtBf,EAAYU,MAAQK,CAAA,EAwGpBV,eACAC,mBACAC,cACAS,aApGoBC,IACTb,EAAAM,MAAMQ,KAAKD,EAAG,EAoGzBE,MA9FY,KACZf,EAAWM,MAAMU,OAAS,EAC1Bf,EAAaK,MAAQ,KACrBJ,EAAiBI,OAAQ,CAAA,EA4FzBW,mBA9EyB,KACzB,MAAMC,EAAQd,EAAkBE,MAC5BY,GAAQ,GAAelB,EAAAM,MAAMa,OAAOD,EAAO,GAC/CjB,EAAaK,MAAQ,IAAA,EA4ErBc,qBArE4BC,IAC5BA,EAAKC,SAAQ,EAAGd,SACR,MAAAU,EAAQlB,EAAWM,MAAMC,WAAWgB,GAAMA,EAAEf,KAAOA,IAC9CR,EAAAM,MAAMa,OAAOD,EAAO,EAAC,GACjC,EAkEDM,gBAvFuBX,IACvBZ,EAAaK,MAAQO,CAAA,EAuFrBY,wBA5D+BC,IAC/BxB,EAAiBI,MAAQoB,CAAA,EA4DzBC,wBA9C+BC,IAC/B,MAAMC,EAAczB,EAAkBE,OAE/BwB,GAAe9B,EAAWM,MAAMa,OAAOU,EAAa,GAC3D7B,EAAWM,MAAMa,OAAOU,EAAcD,EAAS,EAAGE,EAAW,EA2C7DC,eArCqB,KACrB,MAAMF,EAAczB,EAAkBE,OAC/BwB,GAAe9B,EAAWM,MAAMa,OAAOU,EAAa,GAChD7B,EAAAM,MAAMQ,KAAKgB,EAAW,EAmCjCE,iBA7BuB,KACvB,MAAMH,EAAczB,EAAkBE,OAC/BwB,GAAe9B,EAAWM,MAAMa,OAAOU,EAAa,GAChD7B,EAAAM,MAAM2B,QAAQH,EAAW,EA2BpCI,eApBsBC,IACtBhC,EAAYG,MAAQ6B,CAAA,EAmBpB"}