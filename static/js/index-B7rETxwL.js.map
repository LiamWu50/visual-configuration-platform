{"version":3,"file":"index-B7rETxwL.js","sources":["../../../src/views/preview/chart/index.tsx"],"sourcesContent":["import Scene from '@/components/Editor/Scene'\nimport { PrimitiveStyle } from '@/primitives/types'\nimport { usePreviewStore } from '@/store/preview'\nimport { getBoundBoxStyle, getStyle } from '@/utils/primitive'\n\nimport styles from './index.module.scss'\n\nconst Chart = defineComponent({\n  name: 'chart',\n  setup() {\n    const sceneRef = ref()\n    const previewStore = usePreviewStore()\n    const { chartForPreview, canvasScene } = storeToRefs(previewStore)\n\n    const styleFilterAttrs = ['width', 'height', 'top', 'left']\n\n    const canvasStyle = chartForPreview.value?.canvasStyle\n    const containerStyle = {\n      width: `${canvasStyle?.width}px`,\n      height: `${canvasStyle?.height}px`\n    }\n\n    // 获取每个组件的样式\n    const getPrimitiveStyle = (style: PrimitiveStyle) =>\n      getStyle(style, styleFilterAttrs)\n\n    onMounted(() => {\n      sceneRef.value.setEditorScene(canvasScene.value)\n    })\n\n    return {\n      sceneRef,\n      getBoundBoxStyle,\n      containerStyle,\n      primitives: chartForPreview.value?.primitives,\n      getPrimitiveStyle\n    }\n  },\n  render() {\n    return (\n      <div class={styles.container} style={this.containerStyle}>\n        <Scene ref='sceneRef' />\n        {this.primitives?.map((p) => (\n          <div class={styles.content} style={this.getBoundBoxStyle(p.style)}>\n            {h(resolveComponent(p.cName), {\n              id: `primitive${p.id}`,\n              class: styles.primitive,\n              style: this.getPrimitiveStyle(p.style),\n              dataSource: p\n            })}\n          </div>\n        ))}\n      </div>\n    )\n  }\n})\nexport default Chart\n"],"names":["Chart","defineComponent","name","setup","sceneRef","ref","previewStore","usePreviewStore","chartForPreview","canvasScene","storeToRefs","styleFilterAttrs","canvasStyle","value","containerStyle","width","height","onMounted","setEditorScene","getBoundBoxStyle","primitives","getPrimitiveStyle","style","getStyle","render","_createVNode","class","styles","this","Scene","_a","map","p","h","resolveComponent","cName","id","dataSource"],"mappings":"0bAOMA,EAAwBC,EAAA,CAC5BC,KAAM,QACNC,KAAAA,WACE,MAAMC,EAAWC,IACXC,EAAeC,KACfC,gBAAEA,EAAAA,YAAiBC,GAAgBC,EAAYJ,GAE/CK,EAAmB,CAAC,QAAS,SAAU,MAAO,QAE9CC,EAAcJ,OAAAA,EAAgBK,EAAAA,YAAOD,EAAAA,EAAAA,YACrCE,EAAiB,CACrBC,MAAQ,GAAEH,MAAAA,OAAAA,EAAAA,EAAaG,UACvBC,OAAS,GAAEJ,MAAAA,OAAAA,EAAAA,EAAaI,YAWnB,OAJPC,GAAU,KACCJ,EAAAA,MAAMK,eAAeT,EAAYI,MAAK,IAG1C,CACLT,WACAe,mBACAL,iBACAM,WAAYZ,OAAAA,EAAgBK,EAAAA,YAAOO,EAAAA,EAAAA,WACnCC,kBAZyBC,GACzBC,EAASD,EAAOX,GAanB,EACDa,MAAAA,SACE,OAAAC,EAAA,MAAA,CAAAC,MACcC,EAAgBL,MAASM,KAAKd,gBAAcW,CAAAA,EAAAI,EAAA,CAAAxB,IAAA,YAErD,MAAA,OAAAyB,EAAAF,KAAKR,iBAAYW,EAAAA,EAAAA,KAAMN,GAAAA,EAAA,MAAA,CAAAC,MACVC,EAAcL,MAASM,KAAKT,iBAAiBa,EAAEV,QACxDW,CAAAA,EAAEC,EAAiBF,EAAEG,OAAQ,CAC5BC,GAAK,YAAWJ,EAAEI,KAClBV,MAAOC,EACPL,MAAOM,KAAKP,kBAAkBW,EAAEV,OAChCe,WAAYL,SAMxB"}