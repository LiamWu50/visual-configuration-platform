{"version":3,"file":"index-1914ae78.js","sources":["../../../src/views/preview/chart/index.tsx"],"sourcesContent":["import Scene from '@/components/Editor/Scene'\nimport { PrimitiveStyle } from '@/primitives/types'\nimport { usePreviewStore } from '@/store/preview'\nimport { getBoundBoxStyle, getStyle } from '@/utils/primitive'\n\nimport styles from './index.module.scss'\n\nconst Chart = defineComponent({\n  name: 'chart',\n  setup() {\n    const sceneRef = ref()\n    const previewStore = usePreviewStore()\n    const { chartForPreview, canvasScene } = storeToRefs(previewStore)\n\n    const styleFilterAttrs = ['width', 'height', 'top', 'left']\n\n    const canvasStyle = chartForPreview.value?.canvasStyle\n    const containerStyle = {\n      width: `${canvasStyle?.width}px`,\n      height: `${canvasStyle?.height}px`\n    }\n\n    // 获取每个组件的样式\n    const getPrimitiveStyle = (style: PrimitiveStyle) =>\n      getStyle(style, styleFilterAttrs)\n\n    onMounted(() => {\n      sceneRef.value.setEditorScene(canvasScene.value)\n    })\n\n    return {\n      sceneRef,\n      getBoundBoxStyle,\n      containerStyle,\n      primitives: chartForPreview.value?.primitives,\n      getPrimitiveStyle\n    }\n  },\n  render() {\n    return (\n      <div class={styles.container} style={this.containerStyle}>\n        <Scene ref='sceneRef' />\n        {this.primitives?.map((p) => (\n          <div class={styles.content} style={this.getBoundBoxStyle(p.style)}>\n            {h(resolveComponent(p.cName), {\n              id: `primitive${p.id}`,\n              class: styles.primitive,\n              style: this.getPrimitiveStyle(p.style),\n              dataSource: p\n            })}\n          </div>\n        ))}\n      </div>\n    )\n  }\n})\nexport default Chart\n"],"names":["Chart","defineComponent","name","setup","sceneRef","ref","previewStore","usePreviewStore","canvasScene","storeToRefs","canvasStyle","_a","chartForPreview","value","containerStyle","width","height","onMounted","primitives","getPrimitiveStyle","render","_createVNode","style","this","getBoundBoxStyle","p","id","dataSource"],"mappings":"0bAOAA,EAAAC,EAAA,CACEC,KAAAA,QACAC,KAAAA,WACE,MAAAC,EAAAC,IACAC,EAAAC,mCACyBC,GAAYC,EAAAH,qCAIrCI,EAAA,OAAAC,EAAAC,EAAAC,YAAA,EAAAF,EAAAD,YACAI,EAAA,CACEC,MAAAA,GAAAA,MAAAA,OAAAA,EAAAA,EAAAA,UACAC,OAAAA,GAAAA,MAAAA,OAAAA,EAAAA,EAAAA,mBAOFC,GAAAA,wFAQEC,WAAAA,OAAAA,EAAAA,EAAAA,YAAAA,EAAAA,EAAAA,WACAC,8BAGJC,MAAAA,SACE,OAAAC,EAAA,MAAA,SAC8BC,MAAAC,KAAAT,sBAA4BT,IAAA,8EAG1BiB,MAAAC,KAAAC,iBAAAC,EAAAH,uBAEtBI,GAAAA,YAAAA,EAAAA,mDAGAC,WAAAA,SAMZ"}