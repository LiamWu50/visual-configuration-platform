{"version":3,"file":"index-b9a25a1d.js","sources":["../../../src/common/map-sources.ts","../../../src/views/design-space/chart/scene/index.tsx","../../../src/views/design-space/chart/scene/use-state.ts"],"sourcesContent":["export interface MapSources {\n  type: string\n  value: {\n    [key: string]: {\n      id: string\n      name: string\n      url: string\n      imageryType: string\n      altitudeType: string\n      terrainType: string\n      position: {\n        longitude: number\n        latitude: number\n        altitude: number\n      }\n      feature: {\n        markerSize: number\n        markerColor: string\n        stroke: string\n        strokeWidth: number\n        fill: string\n        clampToGround: boolean\n      }\n      special: {\n        icon: string\n        label: string\n        width: number\n        clampToGround: boolean\n      }\n    }\n  }\n}\n\nconst mapSources: MapSources[] = [\n  {\n    type: 'IMAGE_SERVICE',\n    value: {\n      B4ZT5FYYfwTA5BwpZDlRf: {\n        id: 'B4ZT5FYYfwTA5BwpZDlRf',\n        name: '影像服务',\n        url: 'http://127.0.0.1:8080/huairou-imagery',\n        imageryType: 'tileMapServer',\n        altitudeType: 'ON_TERRAIN',\n        terrainType: 'CesiumTerrain',\n        position: {\n          longitude: 116.411161,\n          latitude: 39.90607,\n          altitude: 2300\n        },\n        feature: {\n          markerSize: 6,\n          markerColor: '#ffbe76',\n          stroke: '#130f40',\n          strokeWidth: 2,\n          fill: '#3498db',\n          clampToGround: true\n        },\n        special: {\n          icon: '',\n          label: '',\n          width: 24,\n          clampToGround: true\n        }\n      }\n    }\n  },\n  {\n    type: 'TERRAIN_SERVICE',\n    value: {\n      B4ZT5FYYfwTA5BwpZDl: {\n        id: 'V5ul6jXpYr6Qv1S6e7_03',\n        name: '地形服务',\n        url: 'http://127.0.0.1:8080/huairou-terrain',\n        imageryType: 'tileMapServer',\n        altitudeType: 'ON_TERRAIN',\n        terrainType: 'CesiumTerrain',\n        position: {\n          longitude: 116.411161,\n          latitude: 39.90607,\n          altitude: 2300\n        },\n        feature: {\n          markerSize: 6,\n          markerColor: '#ffbe76',\n          stroke: '#130f40',\n          strokeWidth: 2,\n          fill: '#3498db',\n          clampToGround: true\n        },\n        special: {\n          icon: '',\n          label: '',\n          width: 24,\n          clampToGround: true\n        }\n      }\n    }\n  },\n  {\n    type: 'TILE_SET',\n    value: {\n      'Wif-BLfKXJ7qurrpXAV-q': {\n        id: 'Wif-BLfKXJ7qurrpXAV-q',\n        name: '倾斜模型',\n        url: 'http://resource.dvgis.cn/data/3dtiles/dayanta/tileset.json',\n        imageryType: 'tileMapServer',\n        altitudeType: 'ON_TERRAIN',\n        terrainType: 'CesiumTerrain',\n        position: {\n          longitude: 116.411161,\n          latitude: 39.90607,\n          altitude: 2300\n        },\n        feature: {\n          markerSize: 6,\n          markerColor: '#ffbe76',\n          stroke: '#130f40',\n          strokeWidth: 2,\n          fill: '#3498db',\n          clampToGround: true\n        },\n        special: {\n          icon: '',\n          label: '',\n          width: 24,\n          clampToGround: true\n        }\n      }\n    }\n  },\n  {\n    type: 'GLTF_MODEL',\n    value: {\n      _fiESatt4yUariXgjN98r: {\n        id: '_fiESatt4yUariXgjN98r',\n        name: '三维模型',\n        url: 'http://127.0.0.1:8080/building.glb',\n        imageryType: 'tileMapServer',\n        altitudeType: 'ON_TERRAIN',\n        terrainType: 'CesiumTerrain',\n        position: {\n          longitude: 116.411161,\n          latitude: 39.90607,\n          altitude: 2300\n        },\n        feature: {\n          markerSize: 6,\n          markerColor: '#ffbe76',\n          stroke: '#130f40',\n          strokeWidth: 2,\n          fill: '#3498db',\n          clampToGround: true\n        },\n        special: {\n          icon: '',\n          label: '',\n          width: 24,\n          clampToGround: true\n        }\n      }\n    }\n  },\n  {\n    type: 'FEATURE',\n    value: {\n      '1fYdnkQvF6aSBuMRhiHCO': {\n        id: '1fYdnkQvF6aSBuMRhiHCO',\n        name: '矢量服务',\n        url: 'http://127.0.0.1:8080/怀柔区.json',\n        imageryType: 'tileMapServer',\n        altitudeType: 'ON_TERRAIN',\n        terrainType: 'CesiumTerrain',\n        position: {\n          longitude: 116.411161,\n          latitude: 39.90607,\n          altitude: 2300\n        },\n        feature: {\n          markerSize: 6,\n          markerColor: '#ffbe76',\n          stroke: '#130f40',\n          strokeWidth: 2,\n          fill: '#3498db',\n          clampToGround: true\n        },\n        special: {\n          icon: '',\n          label: '',\n          width: 24,\n          clampToGround: true\n        }\n      }\n    }\n  },\n  {\n    type: 'SPECIAL_SUBJECT',\n    value: {\n      'e-2Fo6iY2Q4S6yt433yxJ': {\n        id: 'e-2Fo6iY2Q4S6yt433yxJ',\n        name: '专题服务',\n        url: 'http://127.0.0.1:8080/points.json',\n        imageryType: 'tileMapServer',\n        altitudeType: 'ON_TERRAIN',\n        terrainType: 'CesiumTerrain',\n        position: {\n          longitude: 116.411161,\n          latitude: 39.90607,\n          altitude: 2300\n        },\n        feature: {\n          markerSize: 6,\n          markerColor: '#ffbe76',\n          stroke: '#130f40',\n          strokeWidth: 2,\n          fill: '#3498db',\n          clampToGround: true\n        },\n        special: {\n          icon: 'http://127.0.0.1:8080/icon.png',\n          label: 'id',\n          width: 24,\n          clampToGround: true\n        }\n      }\n    }\n  }\n]\n\nexport default mapSources\n","import { CaretForwardOutline } from '@vicons/ionicons5'\n\nimport imageSrc from '@/assets/images/projects/gis-banner.png'\n\nimport styles from './index.module.scss'\nimport { Scene, SceneOptions, useState } from './use-state'\n\nexport default defineComponent({\n  name: 'Scene',\n  emits: ['setEditorScene'],\n  setup(props, ctx) {\n    const { state, getSceneOptions } = useState()\n\n    watchEffect(() => getSceneOptions())\n\n    const handleSelectScene = (val: Scene) => {\n      state.selectedScene = val\n      ctx.emit('setEditorScene', val)\n    }\n\n    const renderScenes = (item: SceneOptions) =>\n      item.scenes.map((item: Scene) => (\n        <div\n          key={item.id}\n          class={[\n            styles.scnene,\n            state.selectedScene?.id === item.id && styles.active\n          ]}\n          onClick={() => handleSelectScene(item)}\n        >\n          <span>{item.label}</span>\n          <img src={imageSrc} />\n        </div>\n      ))\n\n    return () => (\n      <div class={styles.container}>\n        <NCollapse\n          v-slots={{\n            arrow: () => (\n              <NIcon size={12}>\n                <CaretForwardOutline />\n              </NIcon>\n            )\n          }}\n        >\n          {state.sceneOptions.map((item) => (\n            <NCollapseItem title={item.label} name={item.key}>\n              <div class={styles.scnenes}>{renderScenes(item)}</div>\n            </NCollapseItem>\n          ))}\n        </NCollapse>\n      </div>\n    )\n  }\n})\n","import mapSources, { MapSources } from '@/common/map-sources'\nimport utils from '@/utils'\n\nexport interface Scene {\n  id: string\n  label: string\n  type: string\n  dataSource: MapSources[]\n}\n\nexport interface SceneOptions {\n  label: string\n  key: string\n  scenes: Scene[]\n}\n\nexport function useState() {\n  const state = reactive({\n    selectedScene: ref<Scene>(),\n    sceneOptions: ref<SceneOptions[]>([\n      {\n        label: '三维地图',\n        key: 'map',\n        scenes: []\n      },\n      {\n        label: '三维场景',\n        key: 'three',\n        scenes: []\n      }\n    ])\n  })\n\n  const getSceneOptions = () => {\n    state.sceneOptions.forEach((item) => {\n      item.scenes = [\n        {\n          id: utils.createId(),\n          label: '测试三维地图',\n          type: item.key,\n          dataSource: mapSources\n        },\n        {\n          id: utils.createId(),\n          label: '四川三维场景',\n          type: item.key,\n          dataSource: mapSources\n        }\n      ]\n    })\n  }\n\n  return {\n    state,\n    getSceneOptions\n  }\n}\n"],"names":["mapSources","type","value","B4ZT5FYYfwTA5BwpZDlRf","id","name","url","imageryType","altitudeType","terrainType","position","longitude","latitude","altitude","feature","markerSize","markerColor","stroke","strokeWidth","fill","clampToGround","special","icon","label","width","B4ZT5FYYfwTA5BwpZDl","_fiESatt4yUariXgjN98r","Scene","defineComponent","setup","getSceneOptions","state","reactive","selectedScene","ref","sceneOptions","key","scenes","forEach","item","utils","createId","dataSource","watchEffect","renderScenes","map","_createVNode","class","styles","_a","onClick","handleSelectScene","ctx","_resolveComponent","default","arrow"],"mappings":"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"}