import{g as e,f as r,a5 as t,d as n,n as o,a_ as a,h as l,a8 as i,b8 as s,b5 as u,b9 as d,ba as c,bb as p,bc as h,bd as b,k as g,m,c as v,l as f,z as x,be as k,bf as w,bg as y,bh as C,a4 as $,u as S,A as U,j as A,w as z,p as P,q as D,T as M,s as R,bi as V,a1 as _,b2 as F}from"./index-6455addc.js";import{a as q,o as B,g as I}from"./Scrollbar-d957449d.js";import{_ as j}from"./Input-1d15226d.js";import{f as O}from"./fade-in-scale-up.cssr-f76691ca.js";import{u as T}from"./browser-5c6ff8c6.js";import{u as H}from"./use-locale-ee5189cf.js";import{u as X,c as E}from"./use-merged-state-1589eac9.js";import{u as L,a as N,b as K,V as G,c as Y}from"./Follower-46ec2e6b.js";import{_ as W}from"./Button-d54f8193.js";function Z(e,r,t){t/=100;const n=(r/=100)*Math.min(t,1-t)+t;return[e,n?100*(2-2*t/n):0,100*n]}function J(e,r,t){const n=(t/=100)-t*(r/=100)/2,o=Math.min(n,1-n);return[e,o?(t-n)/o*100:0,100*n]}function Q(e,r,t){r/=100,t/=100;let n=(n,o=(n+e/60)%6)=>t-t*r*Math.max(Math.min(o,4-o,1),0);return[255*n(5),255*n(3),255*n(1)]}function ee(e,r,t){e/=255,r/=255,t/=255;let n=Math.max(e,r,t),o=n-Math.min(e,r,t),a=o&&(n==e?(r-t)/o:n==r?2+(t-e)/o:4+(e-r)/o);return[60*(a<0?a+6:a),n&&o/n*100,100*n]}function re(e,r,t){e/=255,r/=255,t/=255;let n=Math.max(e,r,t),o=n-Math.min(e,r,t),a=1-Math.abs(n+n-o-1),l=o&&(n==e?(r-t)/o:n==r?2+(t-e)/o:4+(e-r)/o);return[60*(l<0?l+6:l),a?o/a*100:0,50*(n+n-o)]}function te(e,r,t){t/=100;let n=(r/=100)*Math.min(t,1-t),o=(r,o=(r+e/30)%12)=>t-n*Math.max(Math.min(o-3,9-o,1),-1);return[255*o(0),255*o(8),255*o(4)]}const ne=e("input-group","\n display: inline-flex;\n width: 100%;\n flex-wrap: nowrap;\n vertical-align: bottom;\n",[r(">",[e("input",[r("&:not(:last-child)","\n border-top-right-radius: 0!important;\n border-bottom-right-radius: 0!important;\n "),r("&:not(:first-child)","\n border-top-left-radius: 0!important;\n border-bottom-left-radius: 0!important;\n margin-left: -1px!important;\n ")]),e("button",[r("&:not(:last-child)","\n border-top-right-radius: 0!important;\n border-bottom-right-radius: 0!important;\n ",[t("state-border, border","\n border-top-right-radius: 0!important;\n border-bottom-right-radius: 0!important;\n ")]),r("&:not(:first-child)","\n border-top-left-radius: 0!important;\n border-bottom-left-radius: 0!important;\n ",[t("state-border, border","\n border-top-left-radius: 0!important;\n border-bottom-left-radius: 0!important;\n ")])]),r("*",[r("&:not(:last-child)","\n border-top-right-radius: 0!important;\n border-bottom-right-radius: 0!important;\n ",[r(">",[e("input","\n border-top-right-radius: 0!important;\n border-bottom-right-radius: 0!important;\n "),e("base-selection",[e("base-selection-label","\n border-top-right-radius: 0!important;\n border-bottom-right-radius: 0!important;\n "),e("base-selection-tags","\n border-top-right-radius: 0!important;\n border-bottom-right-radius: 0!important;\n "),t("box-shadow, border, state-border","\n border-top-right-radius: 0!important;\n border-bottom-right-radius: 0!important;\n ")])])]),r("&:not(:first-child)","\n margin-left: -1px!important;\n border-top-left-radius: 0!important;\n border-bottom-left-radius: 0!important;\n ",[r(">",[e("input","\n border-top-left-radius: 0!important;\n border-bottom-left-radius: 0!important;\n "),e("base-selection",[e("base-selection-label","\n border-top-left-radius: 0!important;\n border-bottom-left-radius: 0!important;\n "),e("base-selection-tags","\n border-top-left-radius: 0!important;\n border-bottom-left-radius: 0!important;\n "),t("box-shadow, border, state-border","\n border-top-left-radius: 0!important;\n border-bottom-left-radius: 0!important;\n ")])])])])])]),oe=n({name:"InputGroup",props:{},setup(e){const{mergedClsPrefixRef:r}=o(e);return a("-input-group",ne,r),{mergedClsPrefix:r}},render(){const{mergedClsPrefix:e}=this;return l("div",{class:`${e}-input-group`},this.$slots)}});function ae(e){return null===e?null:/^ *#/.test(e)?"hex":e.includes("rgb")?"rgb":e.includes("hsl")?"hsl":e.includes("hsv")?"hsv":null}const le={rgb:{hex:e=>s(u(e)),hsl(e){const[r,t,n,o]=u(e);return d([...re(r,t,n),o])},hsv(e){const[r,t,n,o]=u(e);return c([...ee(r,t,n),o])}},hex:{rgb:e=>p(u(e)),hsl(e){const[r,t,n,o]=u(e);return d([...re(r,t,n),o])},hsv(e){const[r,t,n,o]=u(e);return c([...ee(r,t,n),o])}},hsl:{hex(e){const[r,t,n,o]=h(e);return s([...te(r,t,n),o])},rgb(e){const[r,t,n,o]=h(e);return p([...te(r,t,n),o])},hsv(e){const[r,t,n,o]=h(e);return c([...Z(r,t,n),o])}},hsv:{hex(e){const[r,t,n,o]=b(e);return s([...Q(r,t,n),o])},rgb(e){const[r,t,n,o]=b(e);return p([...Q(r,t,n),o])},hsl(e){const[r,t,n,o]=b(e);return d([...J(r,t,n),o])}}};function ie(e,r,t){if(!(t=t||ae(e)))return null;if(t===r)return e;return le[t][r](e)}const se="12px",ue="6px",de=n({name:"HueSlider",props:{clsPrefix:{type:String,required:!0},hue:{type:Number,required:!0},onUpdateHue:{type:Function,required:!0},onComplete:Function},setup(e){const r=g(null);function t(t){const{value:n}=r;if(!n)return;const{width:o,left:a}=n.getBoundingClientRect(),l=(i=(t.clientX-a-6)/(o-12)*360,(i=Math.round(i))>=360?359:i<0?0:i);var i;e.onUpdateHue(l)}function n(){var r;B("mousemove",document,t),B("mouseup",document,n),null===(r=e.onComplete)||void 0===r||r.call(e)}return{railRef:r,handleMouseDown:function(e){r.value&&(q("mousemove",document,t),q("mouseup",document,n),t(e))}}},render(){const{clsPrefix:e}=this;return l("div",{class:`${e}-color-picker-slider`,style:{height:se,borderRadius:ue}},l("div",{ref:"railRef",style:{boxShadow:"inset 0 0 2px 0 rgba(0, 0, 0, .24)",boxSizing:"border-box",backgroundImage:"linear-gradient(90deg,red,#ff0 16.66%,#0f0 33.33%,#0ff 50%,#00f 66.66%,#f0f 83.33%,red)",height:se,borderRadius:ue,position:"relative"},onMousedown:this.handleMouseDown},l("div",{style:{position:"absolute",left:ue,right:ue,top:0,bottom:0}},l("div",{class:`${e}-color-picker-handle`,style:{left:`calc((${this.hue}%) / 359 * 100 - ${ue})`,borderRadius:ue,width:se,height:se}},l("div",{class:`${e}-color-picker-handle__fill`,style:{backgroundColor:`hsl(${this.hue}, 100%, 50%)`,borderRadius:ue,width:se,height:se}})))))}}),ce="12px",pe="6px",he=n({name:"AlphaSlider",props:{clsPrefix:{type:String,required:!0},rgba:{type:Array,default:null},alpha:{type:Number,default:0},onUpdateAlpha:{type:Function,required:!0},onComplete:Function},setup(e){const r=g(null);function t(t){const{value:n}=r;if(!n)return;const{width:o,left:a}=n.getBoundingClientRect(),l=(t.clientX-a)/(o-12);var i;e.onUpdateAlpha((i=l,(i=Math.round(100*i)/100)>1?1:i<0?0:i))}function n(){var r;B("mousemove",document,t),B("mouseup",document,n),null===(r=e.onComplete)||void 0===r||r.call(e)}return{railRef:r,railBackgroundImage:m((()=>{const{rgba:r}=e;return r?`linear-gradient(to right, rgba(${r[0]}, ${r[1]}, ${r[2]}, 0) 0%, rgba(${r[0]}, ${r[1]}, ${r[2]}, 1) 100%)`:""})),handleMouseDown:function(o){r.value&&e.rgba&&(q("mousemove",document,t),q("mouseup",document,n),t(o))}}},render(){const{clsPrefix:e}=this;return l("div",{class:`${e}-color-picker-slider`,ref:"railRef",style:{height:ce,borderRadius:pe},onMousedown:this.handleMouseDown},l("div",{style:{borderRadius:pe,position:"absolute",left:0,right:0,top:0,bottom:0,overflow:"hidden"}},l("div",{class:`${e}-color-picker-checkboard`}),l("div",{class:`${e}-color-picker-slider__image`,style:{backgroundImage:this.railBackgroundImage}})),this.rgba&&l("div",{style:{position:"absolute",left:pe,right:pe,top:0,bottom:0}},l("div",{class:`${e}-color-picker-handle`,style:{left:`calc(${100*this.alpha}% - ${pe})`,borderRadius:pe,width:ce,height:ce}},l("div",{class:`${e}-color-picker-handle__fill`,style:{backgroundColor:p(this.rgba),borderRadius:pe,width:ce,height:ce}}))))}}),be="12px",ge="6px",me=n({name:"Pallete",props:{clsPrefix:{type:String,required:!0},rgba:{type:Array,default:null},displayedHue:{type:Number,required:!0},displayedSv:{type:Array,required:!0},onUpdateSV:{type:Function,required:!0},onComplete:Function},setup(e){const r=g(null);function t(t){const{value:n}=r;if(!n)return;const{width:o,height:a,left:l,bottom:i}=n.getBoundingClientRect(),s=(i-t.clientY)/a,u=(t.clientX-l)/o,d=100*(u>1?1:u<0?0:u),c=100*(s>1?1:s<0?0:s);e.onUpdateSV(d,c)}function n(){var r;B("mousemove",document,t),B("mouseup",document,n),null===(r=e.onComplete)||void 0===r||r.call(e)}return{palleteRef:r,handleColor:m((()=>{const{rgba:r}=e;return r?`rgb(${r[0]}, ${r[1]}, ${r[2]})`:""})),handleMouseDown:function(e){r.value&&(q("mousemove",document,t),q("mouseup",document,n),t(e))}}},render(){const{clsPrefix:e}=this;return l("div",{class:`${e}-color-picker-pallete`,onMousedown:this.handleMouseDown,ref:"palleteRef"},l("div",{class:`${e}-color-picker-pallete__layer`,style:{backgroundImage:`linear-gradient(90deg, white, hsl(${this.displayedHue}, 100%, 50%))`}}),l("div",{class:`${e}-color-picker-pallete__layer ${e}-color-picker-pallete__layer--shadowed`,style:{backgroundImage:"linear-gradient(180deg, rgba(0, 0, 0, 0%), rgba(0, 0, 0, 100%))"}}),this.rgba&&l("div",{class:`${e}-color-picker-handle`,style:{width:be,height:be,borderRadius:ge,left:`calc(${this.displayedSv[0]}% - ${ge})`,bottom:`calc(${this.displayedSv[1]}% - ${ge})`}},l("div",{class:`${e}-color-picker-handle__fill`,style:{backgroundColor:this.handleColor,borderRadius:ge,width:be,height:be}})))}}),ve=v("n-color-picker");const fe={paddingSmall:"0 4px"},xe=n({name:"ColorInputUnit",props:{label:{type:String,required:!0},value:{type:[Number,String],default:null},showAlpha:Boolean,onUpdateValue:{type:Function,required:!0}},setup(e){const r=g(""),{themeRef:t}=f(ve,null);function n(){const{value:r}=e;if(null===r)return"";const{label:t}=e;return"HEX"===t?r:"A"===t?`${Math.floor(100*r)}%`:String(Math.floor(r))}return x((()=>{r.value=n()})),{mergedTheme:t,inputValue:r,handleInputChange:function(t){let o,a;switch(e.label){case"HEX":a=function(e){const r=e.trim();return!!/^#[0-9a-fA-F]+$/.test(r)&&[4,5,7,9].includes(r.length)}(t),a&&e.onUpdateValue(t),r.value=n();break;case"H":o=function(e){return!!/^\d{1,3}\.?\d*$/.test(e.trim())&&Math.max(0,Math.min(parseInt(e),360))}(t),!1===o?r.value=n():e.onUpdateValue(o);break;case"S":case"L":case"V":o=function(e){return!!/^\d{1,3}\.?\d*$/.test(e.trim())&&Math.max(0,Math.min(parseInt(e),100))}(t),!1===o?r.value=n():e.onUpdateValue(o);break;case"A":o=function(e){return!!/^\d{1,3}\.?\d*%$/.test(e.trim())&&Math.max(0,Math.min(parseInt(e)/100,100))}(t),!1===o?r.value=n():e.onUpdateValue(o);break;case"R":case"G":case"B":o=function(e){return!!/^\d{1,3}\.?\d*$/.test(e.trim())&&Math.max(0,Math.min(parseInt(e),255))}(t),!1===o?r.value=n():e.onUpdateValue(o)}},handleInputUpdateValue:function(e){r.value=e}}},render(){const{mergedTheme:e}=this;return l(j,{size:"small",placeholder:this.label,theme:e.peers.Input,themeOverrides:e.peerOverrides.Input,builtinThemeOverrides:fe,value:this.inputValue,onUpdateValue:this.handleInputUpdateValue,onChange:this.handleInputChange,style:"A"===this.label?"flex-grow: 1.25;":""})}}),ke=n({name:"ColorInput",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},modes:{type:Array,required:!0},showAlpha:{type:Boolean,required:!0},value:{type:String,default:null},valueArr:{type:Array,default:null},onUpdateValue:{type:Function,required:!0},onUpdateMode:{type:Function,required:!0}},setup:e=>({handleUnitUpdateValue(r,t){const{showAlpha:n}=e;if("hex"===e.mode)return void e.onUpdateValue((n?s:k)(t));let o;switch(o=null===e.valueArr?[0,0,0,0]:Array.from(e.valueArr),e.mode){case"hsv":o[r]=t,e.onUpdateValue((n?c:C)(o));break;case"rgb":o[r]=t,e.onUpdateValue((n?p:y)(o));break;case"hsl":o[r]=t,e.onUpdateValue((n?d:w)(o))}}}),render(){const{clsPrefix:e,modes:r}=this;return l("div",{class:`${e}-color-picker-input`},l("div",{class:`${e}-color-picker-input__mode`,onClick:this.onUpdateMode,style:{cursor:1===r.length?"":"pointer"}},this.mode.toUpperCase()+(this.showAlpha?"A":"")),l(oe,null,{default:()=>{const{mode:e,valueArr:r,showAlpha:t}=this;if("hex"===e){let e=null;try{e=null===r?null:(t?s:k)(r)}catch(n){}return l(xe,{label:"HEX",showAlpha:t,value:e,onUpdateValue:e=>{this.handleUnitUpdateValue(0,e)}})}return(e+(t?"a":"")).split("").map(((e,t)=>l(xe,{label:e.toUpperCase(),value:null===r?null:r[t],onUpdateValue:e=>{this.handleUnitUpdateValue(t,e)}})))}}))}}),we=n({name:"ColorPickerTrigger",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:null},hsla:{type:Array,default:null},disabled:Boolean,onClick:Function},setup(e){const{colorPickerSlots:r,renderLabelRef:t}=f(ve,null);return()=>{const{hsla:n,value:o,clsPrefix:a,onClick:i,disabled:s}=e,u=r.label||t.value;return l("div",{class:[`${a}-color-picker-trigger`,s&&`${a}-color-picker-trigger--disabled`],onClick:s?void 0:i},l("div",{class:`${a}-color-picker-trigger__fill`},l("div",{class:`${a}-color-picker-checkboard`}),l("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:n?d(n):""}}),o&&n?l("div",{class:`${a}-color-picker-trigger__value`,style:{color:n[2]>50||n[3]<.5?"black":"white"}},u?u(o):o):null))}}});function ye(e,r){if("hsv"===r){const[r,t,n,o]=b(e);return p([...Q(r,t,n),o])}return e}const Ce=n({name:"ColorPickerSwatches",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},swatches:{type:Array,required:!0},onUpdateColor:{type:Function,required:!0}},setup(e){function r(r){const{mode:t}=e;let{value:n,mode:o}=r;return o||(o="hex",/^[a-zA-Z]+$/.test(n)?n=function(e){const r=document.createElement("canvas").getContext("2d");return r.fillStyle=e,r.fillStyle}(n):(i("color-picker",`color ${n} in swatches is invalid.`),n="#000000")),o===t?n:ie(n,t,o)}function t(t){e.onUpdateColor(r(t))}return{parsedSwatchesRef:m((()=>e.swatches.map((e=>{const r=ae(e);return{value:e,mode:r,legalValue:ye(e,r)}})))),handleSwatchSelect:t,handleSwatchKeyDown:function(e,r){"Enter"===e.key&&t(r)}}},render(){const{clsPrefix:e}=this;return l("div",{class:`${e}-color-picker-swatches`},this.parsedSwatchesRef.map((r=>l("div",{class:`${e}-color-picker-swatch`,tabindex:0,onClick:()=>{this.handleSwatchSelect(r)},onKeydown:e=>{this.handleSwatchKeyDown(e,r)}},l("div",{class:`${e}-color-picker-swatch__fill`,style:{background:r.legalValue}})))))}}),$e=n({name:"ColorPreview",props:{clsPrefix:{type:String,required:!0},mode:{type:String,required:!0},color:{type:String,default:null,validator:e=>{const r=ae(e);return Boolean(!e||r&&"hsv"!==r)}},onUpdateColor:{type:Function,required:!0}},setup:e=>({handleChange:function(r){var t;const n=r.target.value;null===(t=e.onUpdateColor)||void 0===t||t.call(e,ie(n.toUpperCase(),e.mode,"hex")),r.stopPropagation()}}),render(){const{clsPrefix:e}=this;return l("div",{class:`${e}-color-picker-preview__preview`},l("span",{class:`${e}-color-picker-preview__fill`,style:{background:this.color||"#000000"}}),l("input",{class:`${e}-color-picker-preview__input`,type:"color",value:this.color,onChange:this.handleChange}))}}),Se=r([e("color-picker","\n display: inline-block;\n box-sizing: border-box;\n height: var(--n-height);\n font-size: var(--n-font-size);\n width: 100%;\n position: relative;\n "),e("color-picker-panel","\n margin: 4px 0;\n width: 240px;\n font-size: var(--n-panel-font-size);\n color: var(--n-text-color);\n background-color: var(--n-color);\n transition:\n box-shadow .3s var(--n-bezier),\n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n border-radius: var(--n-border-radius);\n box-shadow: var(--n-box-shadow);\n ",[O(),e("input","\n text-align: center;\n ")]),e("color-picker-checkboard","\n background: white; \n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ",[r("&::after",'\n background-image: linear-gradient(45deg, #DDD 25%, #0000 25%), linear-gradient(-45deg, #DDD 25%, #0000 25%), linear-gradient(45deg, #0000 75%, #DDD 75%), linear-gradient(-45deg, #0000 75%, #DDD 75%);\n background-size: 12px 12px;\n background-position: 0 0, 0 6px, 6px -6px, -6px 0px;\n background-repeat: repeat;\n content: "";\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ')]),e("color-picker-slider","\n margin-bottom: 8px;\n position: relative;\n box-sizing: border-box;\n ",[t("image","\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n "),r("&::after",'\n content: "";\n position: absolute;\n border-radius: inherit;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n box-shadow: inset 0 0 2px 0 rgba(0, 0, 0, .24);\n pointer-events: none;\n ')]),e("color-picker-handle","\n z-index: 1;\n box-shadow: 0 0 2px 0 rgba(0, 0, 0, .45);\n position: absolute;\n background-color: white;\n overflow: hidden;\n ",[t("fill","\n box-sizing: border-box;\n border: 2px solid white;\n ")]),e("color-picker-pallete","\n height: 180px;\n position: relative;\n margin-bottom: 8px;\n cursor: crosshair;\n ",[t("layer","\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ",[$("shadowed","\n box-shadow: inset 0 0 2px 0 rgba(0, 0, 0, .24);\n ")])]),e("color-picker-preview","\n display: flex;\n ",[t("sliders","\n flex: 1 0 auto;\n "),t("preview","\n position: relative;\n height: 30px;\n width: 30px;\n margin: 0 0 8px 6px;\n border-radius: 50%;\n box-shadow: rgba(0, 0, 0, .15) 0px 0px 0px 1px inset;\n overflow: hidden;\n "),t("fill","\n display: block;\n width: 30px;\n height: 30px;\n "),t("input","\n position: absolute;\n top: 0;\n left: 0;\n width: 30px;\n height: 30px;\n opacity: 0;\n z-index: 1;\n ")]),e("color-picker-input","\n display: flex;\n align-items: center;\n ",[e("input","\n flex-grow: 1;\n flex-basis: 0;\n "),t("mode","\n width: 72px;\n text-align: center;\n ")]),e("color-picker-control","\n padding: 12px;\n "),e("color-picker-action","\n display: flex;\n margin-top: -4px;\n border-top: 1px solid var(--n-divider-color);\n padding: 8px 12px;\n justify-content: flex-end;\n ",[e("button","margin-left: 8px;")]),e("color-picker-trigger","\n border: var(--n-border);\n height: 100%;\n box-sizing: border-box;\n border-radius: var(--n-border-radius);\n transition: border-color .3s var(--n-bezier);\n cursor: pointer;\n ",[t("value","\n white-space: nowrap;\n position: relative;\n "),t("fill","\n border-radius: var(--n-border-radius);\n position: absolute;\n display: flex;\n align-items: center;\n justify-content: center;\n left: 4px;\n right: 4px;\n top: 4px;\n bottom: 4px;\n "),$("disabled","cursor: not-allowed"),e("color-picker-checkboard","\n border-radius: var(--n-border-radius);\n ",[r("&::after","\n --n-block-size: calc((var(--n-height) - 8px) / 3);\n background-size: calc(var(--n-block-size) * 2) calc(var(--n-block-size) * 2);\n background-position: 0 0, 0 var(--n-block-size), var(--n-block-size) calc(-1 * var(--n-block-size)), calc(-1 * var(--n-block-size)) 0px; \n ")])]),e("color-picker-swatches","\n display: grid;\n grid-gap: 8px;\n flex-wrap: wrap;\n position: relative;\n grid-template-columns: repeat(auto-fill, 18px);\n margin-top: 10px;\n ",[e("color-picker-swatch","\n width: 18px;\n height: 18px;\n background-image: linear-gradient(45deg, #DDD 25%, #0000 25%), linear-gradient(-45deg, #DDD 25%, #0000 25%), linear-gradient(45deg, #0000 75%, #DDD 75%), linear-gradient(-45deg, #0000 75%, #DDD 75%);\n background-size: 8px 8px;\n background-position: 0px 0, 0px 4px, 4px -4px, -4px 0px;\n background-repeat: repeat;\n ",[t("fill","\n position: relative;\n width: 100%;\n height: 100%;\n border-radius: 3px;\n box-shadow: rgba(0, 0, 0, .15) 0px 0px 0px 1px inset;\n cursor: pointer;\n "),r("&:focus","\n outline: none;\n ",[t("fill",[r("&::after",'\n position: absolute;\n top: 0;\n right: 0;\n bottom: 0;\n left: 0;\n background: inherit;\n filter: blur(2px);\n content: "";\n ')])])])])]),Ue=n({name:"ColorPicker",props:Object.assign(Object.assign({},S.props),{value:String,show:{type:Boolean,default:void 0},defaultShow:Boolean,defaultValue:String,modes:{type:Array,default:()=>["rgb","hex","hsl"]},placement:{type:String,default:"bottom-start"},to:L.propTo,showAlpha:{type:Boolean,default:!0},showPreview:Boolean,swatches:Array,disabled:{type:Boolean,default:void 0},actions:{type:Array,default:null},internalActions:Array,size:String,renderLabel:Function,onComplete:Function,onConfirm:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array]}),setup(e,{slots:r}){const t=g(null);let n=null;const a=T(e),{mergedSizeRef:v,mergedDisabledRef:f}=a,{localeRef:$}=H("global"),{mergedClsPrefixRef:M,namespaceRef:R,inlineThemeDisabled:q}=o(e),B=S("ColorPicker","-color-picker",Se,V,e,M);U(ve,{themeRef:B,renderLabelRef:A(e,"renderLabel"),colorPickerSlots:r});const j=g(e.defaultShow),O=X(A(e,"show"),j);function N(r){const{onUpdateShow:t,"onUpdate:show":n}=e;t&&E(t,r),n&&E(n,r),j.value=r}const{defaultValue:K}=e,G=g(void 0===K?function(e,r){switch(e[0]){case"hex":return r?"#000000FF":"#000000";case"rgb":return r?"rgba(0, 0, 0, 1)":"rgb(0, 0, 0)";case"hsl":return r?"hsla(0, 0%, 0%, 1)":"hsl(0, 0%, 0%)";case"hsv":return r?"hsva(0, 0%, 0%, 1)":"hsv(0, 0%, 0%)"}return i("color-picker","props.modes is invalid."),"#000000"}(e.modes,e.showAlpha):K),Y=X(A(e,"value"),G),ne=g([Y.value]),oe=g(0),le=m((()=>ae(Y.value))),{modes:ie}=e,se=g(ae(Y.value)||ie[0]||"rgb");function ue(){const{modes:r}=e,{value:t}=se,n=r.findIndex((e=>e===t));se.value=~n?r[(n+1)%r.length]:"rgb"}let ce,pe,be,ge,fe,xe,we,ye;const Ue=m((()=>{const{value:e}=Y;if(!e)return null;switch(le.value){case"hsv":return b(e);case"hsl":return[ce,pe,be,ye]=h(e),[...Z(ce,pe,be),ye];case"rgb":case"hex":return[fe,xe,we,ye]=u(e),[...ee(fe,xe,we),ye]}})),Ae=m((()=>{const{value:e}=Y;if(!e)return null;switch(le.value){case"rgb":case"hex":return u(e);case"hsv":return[ce,pe,ge,ye]=b(e),[...Q(ce,pe,ge),ye];case"hsl":return[ce,pe,be,ye]=h(e),[...te(ce,pe,be),ye]}})),ze=m((()=>{const{value:e}=Y;if(!e)return null;switch(le.value){case"hsl":return h(e);case"hsv":return[ce,pe,ge,ye]=b(e),[...J(ce,pe,ge),ye];case"rgb":case"hex":return[fe,xe,we,ye]=u(e),[...re(fe,xe,we),ye]}})),Pe=m((()=>{switch(se.value){case"rgb":case"hex":return Ae.value;case"hsv":return Ue.value;case"hsl":return ze.value}})),De=g(0),Me=g(1),Re=g([0,0]);function Ve(r,t){const{value:n}=Ue,o=De.value,a=n?n[3]:1;Re.value=[r,t];const{showAlpha:l}=e;switch(se.value){case"hsv":qe((l?c:C)([o,r,t,a]),"cursor");break;case"hsl":qe((l?d:w)([...J(o,r,t),a]),"cursor");break;case"rgb":qe((l?p:y)([...Q(o,r,t),a]),"cursor");break;case"hex":qe((l?s:k)([...Q(o,r,t),a]),"cursor")}}function _e(r){De.value=r;const{value:t}=Ue;if(!t)return;const[,n,o,a]=t,{showAlpha:l}=e;switch(se.value){case"hsv":qe((l?c:C)([r,n,o,a]),"cursor");break;case"rgb":qe((l?p:y)([...Q(r,n,o),a]),"cursor");break;case"hex":qe((l?s:k)([...Q(r,n,o),a]),"cursor");break;case"hsl":qe((l?d:w)([...J(r,n,o),a]),"cursor")}}function Fe(e){switch(se.value){case"hsv":[ce,pe,ge]=Ue.value,qe(c([ce,pe,ge,e]),"cursor");break;case"rgb":[fe,xe,we]=Ae.value,qe(p([fe,xe,we,e]),"cursor");break;case"hex":[fe,xe,we]=Ae.value,qe(s([fe,xe,we,e]),"cursor");break;case"hsl":[ce,pe,be]=ze.value,qe(d([ce,pe,be,e]),"cursor")}Me.value=e}function qe(r,t){n="cursor"===t?r:null;const{nTriggerFormChange:o,nTriggerFormInput:l}=a,{onUpdateValue:i,"onUpdate:value":s}=e;i&&E(i,r),s&&E(s,r),o(),l(),G.value=r}function Be(e){qe(e,"input"),_(Ie)}function Ie(r=!0){const{value:t}=Y;if(t){const{nTriggerFormChange:n,nTriggerFormInput:o}=a,{onComplete:l}=e;l&&l(t);const{value:i}=ne,{value:s}=oe;r&&(i.splice(s+1,i.length,t),oe.value=s+1),n(),o()}}function je(){const{value:e}=oe;e-1<0||(qe(ne.value[e-1],"input"),Ie(!1),oe.value=e-1)}function Oe(){const{value:e}=oe;e<0||e+1>=ne.value.length||(qe(ne.value[e+1],"input"),Ie(!1),oe.value=e+1)}function Te(){qe(null,"input"),N(!1)}function He(){const{value:r}=Y,{onConfirm:t}=e;t&&t(r),N(!1)}const Xe=m((()=>oe.value>=1)),Ee=m((()=>{const{value:e}=ne;return e.length>1&&oe.value<e.length-1}));z(O,(e=>{e||(ne.value=[Y.value],oe.value=0)})),x((()=>{if(n&&n===Y.value);else{const{value:e}=Ue;e&&(De.value=e[0],Me.value=e[3],Re.value=[e[1],e[2]])}n=null}));const Le=m((()=>{const{value:e}=v,{common:{cubicBezierEaseInOut:r},self:{textColor:t,color:n,panelFontSize:o,boxShadow:a,border:l,borderRadius:i,dividerColor:s,[F("height",e)]:u,[F("fontSize",e)]:d}}=B.value;return{"--n-bezier":r,"--n-text-color":t,"--n-color":n,"--n-panel-font-size":o,"--n-font-size":d,"--n-box-shadow":a,"--n-border":l,"--n-border-radius":i,"--n-height":u,"--n-divider-color":s}})),Ne=q?P("color-picker",m((()=>v.value[0])),Le,e):void 0;return{mergedClsPrefix:M,namespace:R,selfRef:t,hsla:ze,rgba:Ae,mergedShow:O,mergedDisabled:f,isMounted:D(),adjustedTo:L(e),mergedValue:Y,handleTriggerClick(){N(!0)},handleClickOutside(e){var r;(null===(r=t.value)||void 0===r?void 0:r.contains(I(e)))||N(!1)},renderPanel:function(){var t;const{value:n}=Ae,{value:o}=De,{internalActions:a,modes:i,actions:s}=e,{value:u}=B,{value:d}=M;return l("div",{class:[`${d}-color-picker-panel`,null==Ne?void 0:Ne.themeClass.value],onDragstart:e=>{e.preventDefault()},style:q?void 0:Le.value},l("div",{class:`${d}-color-picker-control`},l(me,{clsPrefix:d,rgba:n,displayedHue:o,displayedSv:Re.value,onUpdateSV:Ve,onComplete:Ie}),l("div",{class:`${d}-color-picker-preview`},l("div",{class:`${d}-color-picker-preview__sliders`},l(de,{clsPrefix:d,hue:o,onUpdateHue:_e,onComplete:Ie}),e.showAlpha?l(he,{clsPrefix:d,rgba:n,alpha:Me.value,onUpdateAlpha:Fe,onComplete:Ie}):null),e.showPreview?l($e,{clsPrefix:d,mode:se.value,color:Ae.value&&k(Ae.value),onUpdateColor:e=>{qe(e,"input")}}):null),l(ke,{clsPrefix:d,showAlpha:e.showAlpha,mode:se.value,modes:i,onUpdateMode:ue,value:Y.value,valueArr:Pe.value,onUpdateValue:Be}),(null===(t=e.swatches)||void 0===t?void 0:t.length)&&l(Ce,{clsPrefix:d,mode:se.value,swatches:e.swatches,onUpdateColor:e=>{qe(e,"input")}})),(null==s?void 0:s.length)?l("div",{class:`${d}-color-picker-action`},s.includes("confirm")&&l(W,{size:"small",onClick:He,theme:u.peers.Button,themeOverrides:u.peerOverrides.Button},{default:()=>$.value.confirm}),s.includes("clear")&&l(W,{size:"small",onClick:Te,disabled:!Y.value,theme:u.peers.Button,themeOverrides:u.peerOverrides.Button},{default:()=>$.value.clear})):null,r.action?l("div",{class:`${d}-color-picker-action`},{default:r.action}):a?l("div",{class:`${d}-color-picker-action`},a.includes("undo")&&l(W,{size:"small",onClick:je,disabled:!Xe.value,theme:u.peers.Button,themeOverrides:u.peerOverrides.Button},{default:()=>$.value.undo}),a.includes("redo")&&l(W,{size:"small",onClick:Oe,disabled:!Ee.value,theme:u.peers.Button,themeOverrides:u.peerOverrides.Button},{default:()=>$.value.redo})):null)},cssVars:q?void 0:Le,themeClass:null==Ne?void 0:Ne.themeClass,onRender:null==Ne?void 0:Ne.onRender}},render(){const{$slots:e,mergedClsPrefix:r,onRender:t}=this;return null==t||t(),l("div",{class:[this.themeClass,`${r}-color-picker`],ref:"selfRef",style:this.cssVars},l(N,null,{default:()=>[l(K,null,{default:()=>l(we,{clsPrefix:r,value:this.mergedValue,hsla:this.hsla,disabled:this.mergedDisabled,onClick:this.handleTriggerClick},{label:e.label})}),l(G,{placement:this.placement,show:this.mergedShow,containerClass:this.namespace,teleportDisabled:this.adjustedTo===L.tdkey,to:this.adjustedTo},{default:()=>l(M,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>this.mergedShow?R(this.renderPanel(),[[Y,this.handleClickOutside,void 0,{capture:!0}]]):null})})]}))}});export{Ue as _};
//# sourceMappingURL=ColorPicker-88bb8c55.js.map
