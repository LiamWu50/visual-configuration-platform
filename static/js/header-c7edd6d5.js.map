{"version":3,"file":"header-c7edd6d5.js","sources":["../../../node_modules/@vicons/material/es/PlayArrowRound.js","../../../src/views/design-space/layout/header.tsx","../../../src/hooks/use-preview.ts"],"sourcesContent":["import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, defineComponent } from 'vue'\nconst _hoisted_1 = {\n  xmlns: 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  viewBox: '0 0 24 24'\n}\nconst _hoisted_2 = /*#__PURE__*/ _createElementVNode(\n  'path',\n  {\n    d: 'M8 6.82v10.36c0 .79.87 1.27 1.54.84l8.14-5.18a1 1 0 0 0 0-1.69L9.54 5.98A.998.998 0 0 0 8 6.82z',\n    fill: 'currentColor'\n  },\n  null,\n  -1\n  /* HOISTED */\n)\nconst _hoisted_3 = [_hoisted_2]\nexport default defineComponent({\n  name: 'PlayArrowRound',\n  render: function render(_ctx, _cache) {\n    return _openBlock(), _createElementBlock('svg', _hoisted_1, _hoisted_3)\n  }\n})\n","import { PlayArrowRound } from '@vicons/material'\n\nimport { usePreview } from '@/hooks/use-preview'\n\nimport Breadcrumb from './breadcrumb'\nimport styles from './index.module.scss'\nimport NavMenu from './nav-menu'\nimport ResizeBox from './resize-box'\n\nexport default defineComponent({\n  name: 'TheHeader',\n  props: {\n    stage: {\n      type: String,\n      default: ''\n    }\n  },\n  setup(props) {\n    const { handlePreview } = usePreview(props.stage)\n\n    return {\n      handlePreview\n    }\n  },\n  render() {\n    return (\n      <div class={styles.header}>\n        <div class={styles.left}>\n          <NavMenu />\n          <Breadcrumb />\n        </div>\n        <div></div>\n        <div class={styles.right}>\n          <div class={styles.preview}>\n            <NTooltip\n              trigger='hover'\n              v-slots={{\n                trigger: () => (\n                  <NButton size='small' quaternary onClick={this.handlePreview}>\n                    <NIcon size='26'>\n                      <PlayArrowRound />\n                    </NIcon>\n                  </NButton>\n                )\n              }}\n            >\n              预览\n            </NTooltip>\n          </div>\n          {this.stage === 'chart' ? <ResizeBox /> : null}\n        </div>\n      </div>\n    )\n  }\n})\n","import type { Router } from 'vue-router'\nimport { useRouter } from 'vue-router'\n\nimport { useEditorStore } from '@/store/editor'\nimport { useMapStore } from '@/store/map'\nimport { usePreviewStore } from '@/store/preview'\nimport { ChartForPreview } from '@/store/preview/type'\n\nexport function usePreview(stage: string) {\n  const router: Router = useRouter()\n  const editorStore = useEditorStore()\n  const { canvasStyle, primitives } = storeToRefs(editorStore)\n  const previewStore = usePreviewStore()\n  const mapStore = useMapStore()\n\n  const typePreview = {\n    chart: saveCurChartPreview,\n    map: saveCurMappreview,\n    three: saveCurThreePreview\n  }\n\n  function saveCurChartPreview() {\n    const params = {\n      primitives: primitives.value,\n      canvasStyle: canvasStyle.value\n    } as ChartForPreview\n    previewStore.saveChartForPreview(params)\n  }\n\n  function saveCurMappreview() {\n    const dataSource = mapStore.cesiumSourceLoader?.getTypeDataSource()\n    console.log('dataSource', dataSource)\n    \n    previewStore.saveMapForPreview(dataSource as any)\n  }\n\n  function saveCurThreePreview() {}\n\n  // 预览页面\n  const handlePreview = () => {\n    const typeHandler = typePreview[stage as keyof typeof typePreview]\n    typeHandler()\n\n    const { href } = router.resolve({\n      name: 'preview',\n      query: { stage }\n    })\n    window.open(href, '_blank')\n  }\n\n  return {\n    handlePreview\n  }\n}\n"],"names":["_hoisted_1","xmlns","viewBox","_hoisted_3","_createElementVNode","d","fill","PlayArrowRound","defineComponent","name","render","_ctx","_cache","_openBlock","_createElementBlock","Header","props","stage","type","default","handlePreview","router","useRouter","editorStore","useEditorStore","canvasStyle","primitives","storeToRefs","previewStore","usePreviewStore","mapStore","useMapStore","typePreview","chart","params","value","saveChartForPreview","map","dataSource","_a","cesiumSourceLoader","getTypeDataSource","saveMapForPreview","three","href","resolve","query","window","open","usePreview","_createVNode","class","styles","header","left","right","preview","_resolveComponent","trigger","size","quaternary","onClick","this"],"mappings":"u6BACA,MAAMA,EAAa,CACjBC,MAAO,6BACP,cAAe,+BACfC,QAAS,aAYLC,EAAa,CAVcC,EAC/B,OACA,CACEC,EAAG,kGACHC,KAAM,gBAER,MACA,IAIFC,EAAeC,EAAgB,CAC7BC,KAAM,iBACNC,OAAQ,SAAgBC,EAAMC,GAC5B,OAAOC,IAAcC,EAAoB,MAAOd,EAAYG,EAC7D,ICZH,MAAAY,EAAAP,EAAA,CACEC,KAAAA,YACAO,MAAAA,CACEC,MAAAA,CACEC,KAAAA,OACAC,QAAAA,kCAIMC,GCVL,SAAoBH,GACzB,MAAMI,EAAiBC,IACjBC,EAAcC,KACdC,YAAEA,EAAAC,WAAaA,GAAeC,EAAYJ,GAC1CK,EAAeC,IACfC,EAAWC,IAEXC,EAAc,CAClBC,MAKF,WACE,MAAMC,EAAS,CACbR,WAAYA,EAAWS,MACvBV,YAAaA,EAAYU,OAE3BP,EAAaQ,oBAAoBF,EACnC,EAVEG,IAYF,iBACQ,MAAAC,EAAa,OAAAC,EAAST,EAAAU,yBAAoB,EAAAD,EAAAE,oBAGhDb,EAAac,kBAAkBJ,EACjC,EAhBEK,MAkBF,WAAgC,GAczB,MAAA,CACLvB,cAZoB,QACAY,EAAYf,MAGhC,MAAM2B,KAAEA,GAASvB,EAAOwB,QAAQ,CAC9BpC,KAAM,UACNqC,MAAO,CAAE7B,WAEJ8B,OAAAC,KAAKJ,EAAM,SAAQ,EAM9B,CDnC0BK,CAAAjC,EAAAC,cAGpBG,kBAGJV,MAAAA,GACE,OAAAwC,EAAA,MAAA,CAAAC,MAAAC,EAAAC,QAC2B,CAAAH,EAAA,MAAA,CAAAC,MAAAC,EAAAE,mEACAH,MAAAC,EAAAG,OAKC,CAAAL,EAAA,MAAA,CAAAC,MAAAC,EAAAI,YACIC,EAAA,CAAAC,QAAA,SAAA,uBAIpBA,QAAAA,IAAAA,EAASD,EAAA,CAAAE,KAAA,QAAAC,YAAA,EAAAC,QAAAC,KAAA1C,eACqD,CAAAD,QAAAA,IAAAA,CAAAA,EAAAsC,EAAA,CAAAE,KAAA,MAAA,CAAAxC,QAAAA,IAAAA,CAAAA,EAAAA,EAAAA,KAAAA,4DAe5E","x_google_ignoreList":[0]}