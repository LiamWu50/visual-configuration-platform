{"version":3,"file":"index-5590bebd.js","sources":["../../../node_modules/naive-ui/es/_utils/vue/create-data-key.js","../../../node_modules/naive-ui/es/_internal/icons/Switcher.js","../../../node_modules/naive-ui/es/checkbox/src/CheckMark.js","../../../node_modules/naive-ui/es/checkbox/src/LineMark.js","../../../node_modules/naive-ui/es/checkbox/src/CheckboxGroup.js","../../../node_modules/naive-ui/es/checkbox/src/styles/index.cssr.js","../../../node_modules/naive-ui/es/checkbox/src/Checkbox.js","../../../node_modules/naive-ui/es/tree-select/src/interface.js","../../../node_modules/naive-ui/es/tree/src/interface.js","../../../node_modules/naive-ui/es/tree/src/TreeNodeSwitcher.js","../../../node_modules/naive-ui/es/tree/src/TreeNodeCheckbox.js","../../../node_modules/naive-ui/es/tree/src/TreeNodeContent.js","../../../node_modules/naive-ui/es/tree/src/dnd.js","../../../node_modules/naive-ui/es/tree/src/utils.js","../../../node_modules/naive-ui/es/tree/src/TreeNode.js","../../../node_modules/naive-ui/es/tree/src/MotionWrapper.js","../../../node_modules/naive-ui/es/tree/src/styles/index.cssr.js","../../../node_modules/naive-ui/es/tree/src/Tree.js","../../../node_modules/naive-ui/es/tree/src/keyboard.js","../../../src/views/design-space/map/types.ts","../../../src/views/design-space/map/resource-tree/index.tsx"],"sourcesContent":["export function createDataKey(key) {\n    return typeof key === 'string' ? `s-${key}` : `n-${key}`;\n}\n","import { h, defineComponent } from 'vue';\nexport default defineComponent({\n    name: 'Switcher',\n    render() {\n        return (h(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 32 32\" },\n            h(\"path\", { d: \"M12 8l10 8l-10 8z\" })));\n    }\n});\n","import { h } from 'vue';\nexport default (h(\"svg\", { viewBox: \"0 0 64 64\", class: \"check-icon\" },\n    h(\"path\", { d: \"M50.42,16.76L22.34,39.45l-8.1-11.46c-1.12-1.58-3.3-1.96-4.88-0.84c-1.58,1.12-1.95,3.3-0.84,4.88l10.26,14.51  c0.56,0.79,1.42,1.31,2.38,1.45c0.16,0.02,0.32,0.03,0.48,0.03c0.8,0,1.57-0.27,2.2-0.78l30.99-25.03c1.5-1.21,1.74-3.42,0.52-4.92  C54.13,15.78,51.93,15.55,50.42,16.76z\" })));\n","import { h } from 'vue';\nexport default (h(\"svg\", { viewBox: \"0 0 100 100\", class: \"line-icon\" },\n    h(\"path\", { d: \"M80.2,55.5H21.4c-2.8,0-5.1-2.5-5.1-5.5l0,0c0-3,2.3-5.5,5.1-5.5h58.7c2.8,0,5.1,2.5,5.1,5.5l0,0C85.2,53.1,82.9,55.5,80.2,55.5z\" })));\n","import { h, defineComponent, provide, computed, toRef, ref, watchEffect } from 'vue';\nimport { useMergedState } from 'vooks';\nimport { useConfig, useFormItem } from '../../_mixins';\nimport { call, createInjectionKey, warnOnce } from '../../_utils';\nexport const checkboxGroupInjectionKey = createInjectionKey('n-checkbox-group');\nexport const checkboxGroupProps = {\n    min: Number,\n    max: Number,\n    size: String,\n    value: Array,\n    defaultValue: {\n        type: Array,\n        default: null\n    },\n    disabled: {\n        type: Boolean,\n        default: undefined\n    },\n    'onUpdate:value': [Function, Array],\n    onUpdateValue: [Function, Array],\n    // deprecated\n    onChange: [Function, Array]\n};\nexport default defineComponent({\n    name: 'CheckboxGroup',\n    props: checkboxGroupProps,\n    setup(props) {\n        if (process.env.NODE_ENV !== 'production') {\n            watchEffect(() => {\n                if (props.onChange !== undefined) {\n                    warnOnce('checkbox-group', '`on-change` is deprecated, please use `on-update:value` instead.');\n                }\n            });\n        }\n        const { mergedClsPrefixRef } = useConfig(props);\n        const formItem = useFormItem(props);\n        const { mergedSizeRef, mergedDisabledRef } = formItem;\n        const uncontrolledValueRef = ref(props.defaultValue);\n        const controlledValueRef = computed(() => props.value);\n        const mergedValueRef = useMergedState(controlledValueRef, uncontrolledValueRef);\n        const checkedCount = computed(() => {\n            var _a;\n            return ((_a = mergedValueRef.value) === null || _a === void 0 ? void 0 : _a.length) || 0;\n        });\n        const valueSetRef = computed(() => {\n            if (Array.isArray(mergedValueRef.value)) {\n                return new Set(mergedValueRef.value);\n            }\n            return new Set();\n        });\n        function toggleCheckbox(checked, checkboxValue) {\n            const { nTriggerFormInput, nTriggerFormChange } = formItem;\n            const { onChange, 'onUpdate:value': _onUpdateValue, onUpdateValue } = props;\n            if (Array.isArray(mergedValueRef.value)) {\n                const groupValue = Array.from(mergedValueRef.value);\n                const index = groupValue.findIndex((value) => value === checkboxValue);\n                if (checked) {\n                    if (!~index) {\n                        groupValue.push(checkboxValue);\n                        if (onUpdateValue) {\n                            call(onUpdateValue, groupValue, {\n                                actionType: 'check',\n                                value: checkboxValue\n                            });\n                        }\n                        if (_onUpdateValue) {\n                            call(_onUpdateValue, groupValue, {\n                                actionType: 'check',\n                                value: checkboxValue\n                            });\n                        }\n                        nTriggerFormInput();\n                        nTriggerFormChange();\n                        uncontrolledValueRef.value = groupValue;\n                        // deprecated\n                        if (onChange)\n                            call(onChange, groupValue);\n                    }\n                }\n                else {\n                    if (~index) {\n                        groupValue.splice(index, 1);\n                        if (onUpdateValue) {\n                            call(onUpdateValue, groupValue, {\n                                actionType: 'uncheck',\n                                value: checkboxValue\n                            });\n                        }\n                        if (_onUpdateValue) {\n                            call(_onUpdateValue, groupValue, {\n                                actionType: 'uncheck',\n                                value: checkboxValue\n                            });\n                        }\n                        if (onChange)\n                            call(onChange, groupValue); // deprecated\n                        uncontrolledValueRef.value = groupValue;\n                        nTriggerFormInput();\n                        nTriggerFormChange();\n                    }\n                }\n            }\n            else {\n                if (checked) {\n                    if (onUpdateValue) {\n                        call(onUpdateValue, [checkboxValue], {\n                            actionType: 'check',\n                            value: checkboxValue\n                        });\n                    }\n                    if (_onUpdateValue) {\n                        call(_onUpdateValue, [checkboxValue], {\n                            actionType: 'check',\n                            value: checkboxValue\n                        });\n                    }\n                    if (onChange)\n                        call(onChange, [checkboxValue]); // deprecated\n                    uncontrolledValueRef.value = [checkboxValue];\n                    nTriggerFormInput();\n                    nTriggerFormChange();\n                }\n                else {\n                    if (onUpdateValue) {\n                        call(onUpdateValue, [], {\n                            actionType: 'uncheck',\n                            value: checkboxValue\n                        });\n                    }\n                    if (_onUpdateValue) {\n                        call(_onUpdateValue, [], {\n                            actionType: 'uncheck',\n                            value: checkboxValue\n                        });\n                    }\n                    if (onChange)\n                        call(onChange, []); // deprecated\n                    uncontrolledValueRef.value = [];\n                    nTriggerFormInput();\n                    nTriggerFormChange();\n                }\n            }\n        }\n        provide(checkboxGroupInjectionKey, {\n            checkedCountRef: checkedCount,\n            maxRef: toRef(props, 'max'),\n            minRef: toRef(props, 'min'),\n            valueSetRef,\n            disabledRef: mergedDisabledRef,\n            mergedSizeRef,\n            toggleCheckbox\n        });\n        return {\n            mergedClsPrefix: mergedClsPrefixRef\n        };\n    },\n    render() {\n        return (h(\"div\", { class: `${this.mergedClsPrefix}-checkbox-group`, role: \"group\" }, this.$slots));\n    }\n});\n","import { c, cB, cE, cM, insideModal, insidePopover } from '../../../_utils/cssr';\nimport { iconSwitchTransition } from '../../../_styles/transitions/icon-switch.cssr';\n// vars:\n// --n-label-line-height\n// --n-bezier\n// --n-size\n// --n-border\n// --n-border-focus\n// --n-border-checked\n// --n-border-disabled\n// --n-border-disabled-checked\n// --n-box-shadow-focus\n// --n-color\n// --n-color-checked\n// --n-color-table\n// --n-color-table-modal\n// --n-color-disabled\n// --n-color-disabled-checked\n// --n-text-color\n// --n-text-color-disabled\n// --n-check-mark-color\n// --n-check-mark-color-disabled\n// --n-check-mark-color-disabled-checked\n// --n-border-radius\n// --n-font-size\n// --n-label-padding\nexport default c([cB('checkbox', `\n font-size: var(--n-font-size);\n outline: none;\n cursor: pointer;\n display: inline-flex;\n flex-wrap: nowrap;\n align-items: flex-start;\n word-break: break-word;\n line-height: var(--n-size);\n --n-merged-color-table: var(--n-color-table);\n `, [cM('show-label', 'line-height: var(--n-label-line-height);'), c('&:hover', [cB('checkbox-box', [cE('border', 'border: var(--n-border-checked);')])]), c('&:focus:not(:active)', [cB('checkbox-box', [cE('border', `\n border: var(--n-border-focus);\n box-shadow: var(--n-box-shadow-focus);\n `)])]), cM('inside-table', [cB('checkbox-box', `\n background-color: var(--n-merged-color-table);\n `)]), cM('checked', [cB('checkbox-box', `\n background-color: var(--n-color-checked);\n `, [cB('checkbox-icon', [\n// if not set width to 100%, safari & old chrome won't display the icon\nc('.check-icon', `\n opacity: 1;\n transform: scale(1);\n `)])])]), cM('indeterminate', [cB('checkbox-box', [cB('checkbox-icon', [c('.check-icon', `\n opacity: 0;\n transform: scale(.5);\n `), c('.line-icon', `\n opacity: 1;\n transform: scale(1);\n `)])])]), cM('checked, indeterminate', [c('&:focus:not(:active)', [cB('checkbox-box', [cE('border', `\n border: var(--n-border-checked);\n box-shadow: var(--n-box-shadow-focus);\n `)])]), cB('checkbox-box', `\n background-color: var(--n-color-checked);\n border-left: 0;\n border-top: 0;\n `, [cE('border', {\n  border: 'var(--n-border-checked)'\n})])]), cM('disabled', {\n  cursor: 'not-allowed'\n}, [cM('checked', [cB('checkbox-box', `\n background-color: var(--n-color-disabled-checked);\n `, [cE('border', {\n  border: 'var(--n-border-disabled-checked)'\n}), cB('checkbox-icon', [c('.check-icon, .line-icon', {\n  fill: 'var(--n-check-mark-color-disabled-checked)'\n})])])]), cB('checkbox-box', `\n background-color: var(--n-color-disabled);\n `, [cE('border', `\n border: var(--n-border-disabled);\n `), cB('checkbox-icon', [c('.check-icon, .line-icon', `\n fill: var(--n-check-mark-color-disabled);\n `)])]), cE('label', `\n color: var(--n-text-color-disabled);\n `)]), cB('checkbox-box-wrapper', `\n position: relative;\n width: var(--n-size);\n flex-shrink: 0;\n flex-grow: 0;\n user-select: none;\n -webkit-user-select: none;\n `), cB('checkbox-box', `\n position: absolute;\n left: 0;\n top: 50%;\n transform: translateY(-50%);\n height: var(--n-size);\n width: var(--n-size);\n display: inline-block;\n box-sizing: border-box;\n border-radius: var(--n-border-radius);\n background-color: var(--n-color);\n transition: background-color 0.3s var(--n-bezier);\n `, [cE('border', `\n transition:\n border-color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n border-radius: inherit;\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n border: var(--n-border);\n `), cB('checkbox-icon', `\n display: flex;\n align-items: center;\n justify-content: center;\n position: absolute;\n left: 1px;\n right: 1px;\n top: 1px;\n bottom: 1px;\n `, [c('.check-icon, .line-icon', `\n width: 100%;\n fill: var(--n-check-mark-color);\n opacity: 0;\n transform: scale(0.5);\n transform-origin: center;\n transition:\n fill 0.3s var(--n-bezier),\n transform 0.3s var(--n-bezier),\n opacity 0.3s var(--n-bezier),\n border-color 0.3s var(--n-bezier);\n `), iconSwitchTransition({\n  left: '1px',\n  top: '1px'\n})])]), cE('label', `\n color: var(--n-text-color);\n transition: color .3s var(--n-bezier);\n user-select: none;\n -webkit-user-select: none;\n padding: var(--n-label-padding);\n font-weight: var(--n-label-font-weight);\n `, [c('&:empty', {\n  display: 'none'\n})])]),\n// modal table header checkbox\ninsideModal(cB('checkbox', `\n --n-merged-color-table: var(--n-color-table-modal);\n `)),\n// popover table header checkbox\ninsidePopover(cB('checkbox', `\n --n-merged-color-table: var(--n-color-table-popover);\n `))]);","import { h, defineComponent, computed, inject, ref, toRef, watchEffect } from 'vue';\nimport { useMergedState, useMemo } from 'vooks';\nimport { createId } from 'seemly';\nimport { on } from 'evtd';\nimport { useConfig, useFormItem, useTheme, useThemeClass } from '../../_mixins';\nimport { NIconSwitchTransition } from '../../_internal';\nimport { call, createKey, warnOnce, resolveWrappedSlot } from '../../_utils';\nimport { checkboxLight } from '../styles';\nimport CheckMark from './CheckMark';\nimport LineMark from './LineMark';\nimport { checkboxGroupInjectionKey } from './CheckboxGroup';\nimport style from './styles/index.cssr';\nimport { useRtl } from '../../_mixins/use-rtl';\nexport const checkboxProps = Object.assign(Object.assign({}, useTheme.props), { size: String, checked: {\n        type: [Boolean, String, Number],\n        default: undefined\n    }, defaultChecked: {\n        type: [Boolean, String, Number],\n        default: false\n    }, value: [String, Number], disabled: {\n        type: Boolean,\n        default: undefined\n    }, indeterminate: Boolean, label: String, focusable: {\n        type: Boolean,\n        default: true\n    }, checkedValue: {\n        type: [Boolean, String, Number],\n        default: true\n    }, uncheckedValue: {\n        type: [Boolean, String, Number],\n        default: false\n    }, 'onUpdate:checked': [Function, Array], onUpdateChecked: [Function, Array], \n    // private\n    privateInsideTable: Boolean, \n    // deprecated\n    onChange: [Function, Array] });\nexport default defineComponent({\n    name: 'Checkbox',\n    props: checkboxProps,\n    setup(props) {\n        if (process.env.NODE_ENV !== 'production') {\n            watchEffect(() => {\n                if (props.onChange) {\n                    warnOnce('checkbox', '`on-change` is deprecated, please use `on-update:checked` instead.');\n                }\n            });\n        }\n        const selfRef = ref(null);\n        const { mergedClsPrefixRef, inlineThemeDisabled, mergedRtlRef } = useConfig(props);\n        const formItem = useFormItem(props, {\n            mergedSize(NFormItem) {\n                const { size } = props;\n                if (size !== undefined)\n                    return size;\n                if (NCheckboxGroup) {\n                    const { value: mergedSize } = NCheckboxGroup.mergedSizeRef;\n                    if (mergedSize !== undefined) {\n                        return mergedSize;\n                    }\n                }\n                if (NFormItem) {\n                    const { mergedSize } = NFormItem;\n                    if (mergedSize !== undefined)\n                        return mergedSize.value;\n                }\n                return 'medium';\n            },\n            mergedDisabled(NFormItem) {\n                const { disabled } = props;\n                if (disabled !== undefined)\n                    return disabled;\n                if (NCheckboxGroup) {\n                    if (NCheckboxGroup.disabledRef.value)\n                        return true;\n                    const { maxRef: { value: max }, checkedCountRef } = NCheckboxGroup;\n                    if (max !== undefined &&\n                        checkedCountRef.value >= max &&\n                        !renderedCheckedRef.value) {\n                        return true;\n                    }\n                    const { minRef: { value: min } } = NCheckboxGroup;\n                    if (min !== undefined &&\n                        checkedCountRef.value <= min &&\n                        renderedCheckedRef.value) {\n                        return true;\n                    }\n                }\n                if (NFormItem) {\n                    return NFormItem.disabled.value;\n                }\n                return false;\n            }\n        });\n        const { mergedDisabledRef, mergedSizeRef } = formItem;\n        const NCheckboxGroup = inject(checkboxGroupInjectionKey, null);\n        const uncontrolledCheckedRef = ref(props.defaultChecked);\n        const controlledCheckedRef = toRef(props, 'checked');\n        const mergedCheckedRef = useMergedState(controlledCheckedRef, uncontrolledCheckedRef);\n        const renderedCheckedRef = useMemo(() => {\n            if (NCheckboxGroup) {\n                const groupValueSet = NCheckboxGroup.valueSetRef.value;\n                if (groupValueSet && props.value !== undefined) {\n                    return groupValueSet.has(props.value);\n                }\n                return false;\n            }\n            else {\n                return mergedCheckedRef.value === props.checkedValue;\n            }\n        });\n        const themeRef = useTheme('Checkbox', '-checkbox', style, checkboxLight, props, mergedClsPrefixRef);\n        function toggle(e) {\n            if (NCheckboxGroup && props.value !== undefined) {\n                NCheckboxGroup.toggleCheckbox(!renderedCheckedRef.value, props.value);\n            }\n            else {\n                const { onChange, 'onUpdate:checked': _onUpdateCheck, onUpdateChecked } = props;\n                const { nTriggerFormInput, nTriggerFormChange } = formItem;\n                const nextChecked = renderedCheckedRef.value\n                    ? props.uncheckedValue\n                    : props.checkedValue;\n                if (_onUpdateCheck) {\n                    call(_onUpdateCheck, nextChecked, e);\n                }\n                if (onUpdateChecked) {\n                    call(onUpdateChecked, nextChecked, e);\n                }\n                if (onChange)\n                    call(onChange, nextChecked, e); // deprecated\n                nTriggerFormInput();\n                nTriggerFormChange();\n                uncontrolledCheckedRef.value = nextChecked;\n            }\n        }\n        function handleClick(e) {\n            if (!mergedDisabledRef.value) {\n                toggle(e);\n            }\n        }\n        function handleKeyUp(e) {\n            if (mergedDisabledRef.value)\n                return;\n            switch (e.key) {\n                case ' ':\n                case 'Enter':\n                    toggle(e);\n            }\n        }\n        function handleKeyDown(e) {\n            switch (e.key) {\n                case ' ':\n                    e.preventDefault();\n            }\n        }\n        const exposedMethods = {\n            focus: () => {\n                var _a;\n                (_a = selfRef.value) === null || _a === void 0 ? void 0 : _a.focus();\n            },\n            blur: () => {\n                var _a;\n                (_a = selfRef.value) === null || _a === void 0 ? void 0 : _a.blur();\n            }\n        };\n        const rtlEnabledRef = useRtl('Checkbox', mergedRtlRef, mergedClsPrefixRef);\n        const cssVarsRef = computed(() => {\n            const { value: mergedSize } = mergedSizeRef;\n            const { common: { cubicBezierEaseInOut }, self: { borderRadius, color, colorChecked, colorDisabled, colorTableHeader, colorTableHeaderModal, colorTableHeaderPopover, checkMarkColor, checkMarkColorDisabled, border, borderFocus, borderDisabled, borderChecked, boxShadowFocus, textColor, textColorDisabled, checkMarkColorDisabledChecked, colorDisabledChecked, borderDisabledChecked, labelPadding, labelLineHeight, labelFontWeight, [createKey('fontSize', mergedSize)]: fontSize, [createKey('size', mergedSize)]: size } } = themeRef.value;\n            return {\n                '--n-label-line-height': labelLineHeight,\n                '--n-label-font-weight': labelFontWeight,\n                '--n-size': size,\n                '--n-bezier': cubicBezierEaseInOut,\n                '--n-border-radius': borderRadius,\n                '--n-border': border,\n                '--n-border-checked': borderChecked,\n                '--n-border-focus': borderFocus,\n                '--n-border-disabled': borderDisabled,\n                '--n-border-disabled-checked': borderDisabledChecked,\n                '--n-box-shadow-focus': boxShadowFocus,\n                '--n-color': color,\n                '--n-color-checked': colorChecked,\n                '--n-color-table': colorTableHeader,\n                '--n-color-table-modal': colorTableHeaderModal,\n                '--n-color-table-popover': colorTableHeaderPopover,\n                '--n-color-disabled': colorDisabled,\n                '--n-color-disabled-checked': colorDisabledChecked,\n                '--n-text-color': textColor,\n                '--n-text-color-disabled': textColorDisabled,\n                '--n-check-mark-color': checkMarkColor,\n                '--n-check-mark-color-disabled': checkMarkColorDisabled,\n                '--n-check-mark-color-disabled-checked': checkMarkColorDisabledChecked,\n                '--n-font-size': fontSize,\n                '--n-label-padding': labelPadding\n            };\n        });\n        const themeClassHandle = inlineThemeDisabled\n            ? useThemeClass('checkbox', computed(() => mergedSizeRef.value[0]), cssVarsRef, props)\n            : undefined;\n        return Object.assign(formItem, exposedMethods, {\n            rtlEnabled: rtlEnabledRef,\n            selfRef,\n            mergedClsPrefix: mergedClsPrefixRef,\n            mergedDisabled: mergedDisabledRef,\n            renderedChecked: renderedCheckedRef,\n            mergedTheme: themeRef,\n            labelId: createId(),\n            handleClick,\n            handleKeyUp,\n            handleKeyDown,\n            cssVars: inlineThemeDisabled ? undefined : cssVarsRef,\n            themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass,\n            onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender\n        });\n    },\n    render() {\n        var _a;\n        const { $slots, renderedChecked, mergedDisabled, indeterminate, privateInsideTable, cssVars, labelId, label, mergedClsPrefix, focusable, handleKeyUp, handleKeyDown, handleClick } = this;\n        (_a = this.onRender) === null || _a === void 0 ? void 0 : _a.call(this);\n        const labelNode = resolveWrappedSlot($slots.default, (children) => {\n            if (label || children) {\n                return (h(\"span\", { class: `${mergedClsPrefix}-checkbox__label`, id: labelId }, label || children));\n            }\n            return null;\n        });\n        return (h(\"div\", { ref: \"selfRef\", class: [\n                `${mergedClsPrefix}-checkbox`,\n                this.themeClass,\n                this.rtlEnabled && `${mergedClsPrefix}-checkbox--rtl`,\n                renderedChecked && `${mergedClsPrefix}-checkbox--checked`,\n                mergedDisabled && `${mergedClsPrefix}-checkbox--disabled`,\n                indeterminate && `${mergedClsPrefix}-checkbox--indeterminate`,\n                privateInsideTable && `${mergedClsPrefix}-checkbox--inside-table`,\n                labelNode && `${mergedClsPrefix}-checkbox--show-label`\n            ], tabindex: mergedDisabled || !focusable ? undefined : 0, role: \"checkbox\", \"aria-checked\": indeterminate ? 'mixed' : renderedChecked, \"aria-labelledby\": labelId, style: cssVars, onKeyup: handleKeyUp, onKeydown: handleKeyDown, onClick: handleClick, onMousedown: () => {\n                on('selectstart', window, (e) => {\n                    e.preventDefault();\n                }, {\n                    once: true\n                });\n            } },\n            h(\"div\", { class: `${mergedClsPrefix}-checkbox-box-wrapper` },\n                \"\\u00A0\",\n                h(\"div\", { class: `${mergedClsPrefix}-checkbox-box` },\n                    h(NIconSwitchTransition, null, {\n                        default: () => this.indeterminate ? (h(\"div\", { key: \"indeterminate\", class: `${mergedClsPrefix}-checkbox-icon` }, LineMark)) : (h(\"div\", { key: \"check\", class: `${mergedClsPrefix}-checkbox-icon` }, CheckMark))\n                    }),\n                    h(\"div\", { class: `${mergedClsPrefix}-checkbox-box__border` }))),\n            labelNode));\n    }\n});\n","import { createInjectionKey } from '../../_utils';\nexport const treeSelectInjectionKey = createInjectionKey('n-tree-select');\n","import { createInjectionKey } from '../../_utils';\nexport const treeInjectionKey = createInjectionKey('n-tree');\n","import { h, defineComponent, inject } from 'vue';\nimport { SwitcherIcon } from '../../_internal/icons';\nimport { NIconSwitchTransition, NBaseLoading, NBaseIcon } from '../../_internal';\nimport { treeInjectionKey } from './interface';\nexport default defineComponent({\n    name: 'NTreeSwitcher',\n    props: {\n        clsPrefix: {\n            type: String,\n            required: true\n        },\n        indent: { type: Number, required: true },\n        expanded: Boolean,\n        selected: Boolean,\n        hide: Boolean,\n        loading: Boolean,\n        onClick: Function,\n        tmNode: {\n            type: Object,\n            required: true\n        }\n    },\n    setup(props) {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const { renderSwitcherIconRef } = inject(treeInjectionKey, null);\n        return () => {\n            const { clsPrefix, expanded, hide, indent, onClick } = props;\n            return (h(\"span\", { \"data-switcher\": true, class: [\n                    `${clsPrefix}-tree-node-switcher`,\n                    expanded && `${clsPrefix}-tree-node-switcher--expanded`,\n                    hide && `${clsPrefix}-tree-node-switcher--hide`\n                ], style: { width: `${indent}px` }, onClick: onClick },\n                h(\"div\", { class: `${clsPrefix}-tree-node-switcher__icon` },\n                    h(NIconSwitchTransition, null, {\n                        default: () => {\n                            if (props.loading) {\n                                return (h(NBaseLoading, { clsPrefix: clsPrefix, key: \"loading\", radius: 85, strokeWidth: 20 }));\n                            }\n                            const { value: renderSwitcherIcon } = renderSwitcherIconRef;\n                            return renderSwitcherIcon ? (renderSwitcherIcon({\n                                expanded: props.expanded,\n                                selected: props.selected,\n                                option: props.tmNode.rawNode\n                            })) : (h(NBaseIcon, { clsPrefix: clsPrefix, key: \"switcher\" }, { default: () => h(SwitcherIcon, null) }));\n                        }\n                    }))));\n        };\n    }\n});\n","import { h, defineComponent, inject } from 'vue';\nimport { NCheckbox } from '../../checkbox';\nimport { treeInjectionKey } from './interface';\nexport default defineComponent({\n    name: 'NTreeNodeCheckbox',\n    props: {\n        clsPrefix: {\n            type: String,\n            required: true\n        },\n        indent: {\n            type: Number,\n            required: true\n        },\n        right: Boolean,\n        focusable: Boolean,\n        disabled: Boolean,\n        checked: Boolean,\n        indeterminate: Boolean,\n        onCheck: Function\n    },\n    setup(props) {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const NTree = inject(treeInjectionKey);\n        function doCheck(value) {\n            const { onCheck } = props;\n            if (onCheck) {\n                onCheck(value);\n            }\n        }\n        function handleUpdateValue(value) {\n            doCheck(value);\n        }\n        return {\n            handleUpdateValue,\n            mergedTheme: NTree.mergedThemeRef\n        };\n    },\n    render() {\n        const { clsPrefix, mergedTheme, checked, indeterminate, disabled, focusable, indent, handleUpdateValue } = this;\n        return (h(\"span\", { class: [\n                `${clsPrefix}-tree-node-checkbox`,\n                this.right && `${clsPrefix}-tree-node-checkbox--right`\n            ], style: {\n                width: `${indent}px`\n            }, \"data-checkbox\": true },\n            h(NCheckbox, { focusable: focusable, disabled: disabled, theme: mergedTheme.peers.Checkbox, themeOverrides: mergedTheme.peerOverrides.Checkbox, checked: checked, indeterminate: indeterminate, onUpdateChecked: handleUpdateValue })));\n    }\n});\n","import { h, defineComponent, ref, inject } from 'vue';\nimport { render } from '../../_utils';\nimport { treeInjectionKey } from './interface';\nexport default defineComponent({\n    name: 'TreeNodeContent',\n    props: {\n        clsPrefix: {\n            type: String,\n            required: true\n        },\n        disabled: Boolean,\n        checked: Boolean,\n        selected: Boolean,\n        onClick: Function,\n        onDragstart: Function,\n        tmNode: {\n            type: Object,\n            required: true\n        },\n        nodeProps: Object\n    },\n    setup(props) {\n        const { renderLabelRef, renderPrefixRef, renderSuffixRef, labelFieldRef } = \n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        inject(treeInjectionKey);\n        const selfRef = ref(null);\n        function doClick(e) {\n            const { onClick } = props;\n            if (onClick)\n                onClick(e);\n        }\n        function handleClick(e) {\n            doClick(e);\n        }\n        return {\n            selfRef,\n            renderLabel: renderLabelRef,\n            renderPrefix: renderPrefixRef,\n            renderSuffix: renderSuffixRef,\n            labelField: labelFieldRef,\n            handleClick\n        };\n    },\n    render() {\n        const { clsPrefix, labelField, nodeProps, checked = false, selected = false, renderLabel, renderPrefix, renderSuffix, handleClick, onDragstart, tmNode: { rawNode, rawNode: { prefix, suffix, [labelField]: label } } } = this;\n        return (h(\"span\", Object.assign({}, nodeProps, { ref: \"selfRef\", class: [`${clsPrefix}-tree-node-content`, nodeProps === null || nodeProps === void 0 ? void 0 : nodeProps.class], onClick: handleClick, draggable: onDragstart === undefined ? undefined : true, onDragstart: onDragstart }),\n            renderPrefix || prefix ? (h(\"div\", { class: `${clsPrefix}-tree-node-content__prefix` }, renderPrefix\n                ? renderPrefix({\n                    option: rawNode,\n                    selected,\n                    checked\n                })\n                : render(prefix))) : null,\n            h(\"div\", { class: `${clsPrefix}-tree-node-content__text` }, renderLabel\n                ? renderLabel({\n                    option: rawNode,\n                    selected,\n                    checked\n                })\n                : render(label)),\n            renderSuffix || suffix ? (h(\"div\", { class: `${clsPrefix}-tree-node-content__suffix` }, renderSuffix\n                ? renderSuffix({\n                    option: rawNode,\n                    selected,\n                    checked\n                })\n                : render(suffix))) : null));\n    }\n});\n","import { h } from 'vue';\nexport function renderDropMark({ position, offsetLevel, indent, el }) {\n    const style = {\n        position: 'absolute',\n        boxSizing: 'border-box',\n        right: 0\n    };\n    if (position === 'inside') {\n        style.left = 0;\n        style.top = 0;\n        style.bottom = 0;\n        style.borderRadius = 'inherit';\n        style.boxShadow = 'inset 0 0 0 2px var(--n-drop-mark-color)';\n    }\n    else {\n        const cssPosition = position === 'before' ? 'top' : 'bottom';\n        style[cssPosition] = 0;\n        // The left prop should be modified when tree's style is changed\n        // Maybe it is possible to use content left\n        style.left = `${el.offsetLeft + 6 - offsetLevel * indent}px`;\n        style.height = '2px';\n        style.backgroundColor = 'var(--n-drop-mark-color)';\n        style.transformOrigin = cssPosition;\n        style.borderRadius = '1px';\n        style.transform =\n            position === 'before' ? 'translateY(-4px)' : 'translateY(4px)';\n    }\n    return h(\"div\", { style: style });\n}\nexport function defaultAllowDrop({ dropPosition, node }) {\n    if (node.isLeaf === false)\n        return true;\n    if (node.children) {\n        return true;\n    }\n    return dropPosition !== 'inside';\n}\n","import { computed } from 'vue';\nimport { isBrowser } from '../../_utils';\nexport function useMergedCheckStrategy(props) {\n    return computed(() => (props.leafOnly ? 'child' : props.checkStrategy));\n}\nexport function isNodeDisabled(node, disabledField) {\n    return !!node.rawNode[disabledField];\n}\nfunction traverse(nodes, childrenField, callback, callbackAfter) {\n    nodes === null || nodes === void 0 ? void 0 : nodes.forEach((node) => {\n        callback(node);\n        traverse(node[childrenField], childrenField, callback, callbackAfter);\n        callbackAfter(node);\n    });\n}\nexport function keysWithFilter(nodes, pattern, keyField, childrenField, filter) {\n    const keys = new Set();\n    const highlightKeySet = new Set();\n    const path = [];\n    traverse(nodes, childrenField, (node) => {\n        path.push(node);\n        if (filter(pattern, node)) {\n            highlightKeySet.add(node[keyField]);\n            for (let i = path.length - 2; i >= 0; --i) {\n                if (!keys.has(path[i][keyField])) {\n                    keys.add(path[i][keyField]);\n                }\n                else {\n                    return;\n                }\n            }\n        }\n    }, () => {\n        path.pop();\n    });\n    return {\n        expandedKeys: Array.from(keys),\n        highlightKeySet\n    };\n}\nconst emptyImage = null;\nif (isBrowser && Image) {\n    const emptyImage = new Image();\n    emptyImage.src =\n        'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n}\nexport { emptyImage };\nexport function filterTree(tree, filter, pattern, keyField, childrenField) {\n    const visitedTailKeys = new Set();\n    const visitedNonTailKeys = new Set();\n    const highlightKeySet = new Set();\n    const expandedKeys = [];\n    const filteredTree = [];\n    const path = [];\n    function visit(t) {\n        t.forEach((n) => {\n            path.push(n);\n            if (filter(pattern, n)) {\n                visitedTailKeys.add(n[keyField]);\n                highlightKeySet.add(n[keyField]);\n                for (let i = path.length - 2; i >= 0; --i) {\n                    const key = path[i][keyField];\n                    if (!visitedNonTailKeys.has(key)) {\n                        visitedNonTailKeys.add(key);\n                        if (visitedTailKeys.has(key)) {\n                            visitedTailKeys.delete(key);\n                        }\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n            const children = n[childrenField];\n            if (children) {\n                visit(children);\n            }\n            path.pop();\n        });\n    }\n    visit(tree);\n    function build(t, sibs) {\n        t.forEach((n) => {\n            const key = n[keyField];\n            const isVisitedTail = visitedTailKeys.has(key);\n            const isVisitedNonTail = visitedNonTailKeys.has(key);\n            if (!isVisitedTail && !isVisitedNonTail)\n                return;\n            const children = n[childrenField];\n            if (children) {\n                if (isVisitedTail) {\n                    // If it is visited path tail, use origin node\n                    sibs.push(n);\n                }\n                else {\n                    // It it is not visited path tail, use cloned node\n                    expandedKeys.push(key);\n                    const clonedNode = Object.assign(Object.assign({}, n), { [childrenField]: [] });\n                    sibs.push(clonedNode);\n                    build(children, clonedNode[childrenField]);\n                }\n            }\n            else {\n                sibs.push(n);\n            }\n        });\n    }\n    build(tree, filteredTree);\n    return {\n        filteredTree,\n        highlightKeySet,\n        expandedKeys\n    };\n}\n","import { h, inject, computed, defineComponent, ref, onMounted } from 'vue';\nimport { useMemo } from 'vooks';\nimport { happensIn, repeat } from 'seemly';\nimport { createDataKey } from '../../_utils';\nimport NTreeNodeSwitcher from './TreeNodeSwitcher';\nimport NTreeNodeCheckbox from './TreeNodeCheckbox';\nimport NTreeNodeContent from './TreeNodeContent';\nimport { treeInjectionKey } from './interface';\nimport { renderDropMark } from './dnd';\nimport { isNodeDisabled } from './utils';\nconst TreeNode = defineComponent({\n    name: 'TreeNode',\n    props: {\n        clsPrefix: {\n            type: String,\n            required: true\n        },\n        tmNode: {\n            type: Object,\n            required: true\n        }\n    },\n    setup(props) {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const NTree = inject(treeInjectionKey);\n        const { droppingNodeParentRef, droppingMouseNodeRef, draggingNodeRef, droppingPositionRef, droppingOffsetLevelRef, nodePropsRef, indentRef, blockLineRef, checkboxPlacementRef, checkOnClickRef, disabledFieldRef, showLineRef } = NTree;\n        const checkboxDisabledRef = useMemo(() => !!props.tmNode.rawNode.checkboxDisabled);\n        const nodeIsDisabledRef = useMemo(() => {\n            return isNodeDisabled(props.tmNode, disabledFieldRef.value);\n        });\n        const disabledRef = useMemo(() => NTree.disabledRef.value || nodeIsDisabledRef.value);\n        const resolvedNodePropsRef = computed(() => {\n            const { value: nodeProps } = nodePropsRef;\n            if (!nodeProps)\n                return undefined;\n            return nodeProps({ option: props.tmNode.rawNode });\n        });\n        // used for drag and drop\n        const contentInstRef = ref(null);\n        // must be non-reactive\n        const contentElRef = { value: null };\n        onMounted(() => {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            contentElRef.value = contentInstRef.value.$el;\n        });\n        function handleSwitcherClick() {\n            const { tmNode } = props;\n            if (!tmNode.isLeaf && !tmNode.shallowLoaded) {\n                if (!NTree.loadingKeysRef.value.has(tmNode.key)) {\n                    NTree.loadingKeysRef.value.add(tmNode.key);\n                }\n                else {\n                    return;\n                }\n                const { onLoadRef: { value: onLoad } } = NTree;\n                if (onLoad) {\n                    void onLoad(tmNode.rawNode)\n                        .then((value) => {\n                        if (value !== false) {\n                            NTree.handleSwitcherClick(tmNode);\n                        }\n                    })\n                        .finally(() => {\n                        NTree.loadingKeysRef.value.delete(tmNode.key);\n                    });\n                }\n            }\n            else {\n                NTree.handleSwitcherClick(tmNode);\n            }\n        }\n        const selectableRef = useMemo(() => !nodeIsDisabledRef.value &&\n            NTree.selectableRef.value &&\n            (NTree.internalTreeSelect\n                ? NTree.mergedCheckStrategyRef.value !== 'child' ||\n                    (NTree.multipleRef.value && NTree.cascadeRef.value) ||\n                    props.tmNode.isLeaf\n                : true));\n        const checkableRef = useMemo(() => NTree.checkableRef.value &&\n            (NTree.cascadeRef.value ||\n                NTree.mergedCheckStrategyRef.value !== 'child' ||\n                props.tmNode.isLeaf));\n        const checkedRef = useMemo(() => NTree.displayedCheckedKeysRef.value.includes(props.tmNode.key));\n        const mergedCheckOnClickRef = useMemo(() => {\n            const { value: checkable } = checkableRef;\n            if (!checkable)\n                return false;\n            const { value: checkOnClick } = checkOnClickRef;\n            const { tmNode } = props;\n            if (typeof checkOnClick === 'boolean') {\n                return !tmNode.disabled && checkOnClick;\n            }\n            return checkOnClick(props.tmNode.rawNode);\n        });\n        function _handleClick(e) {\n            const { value: expandOnClick } = NTree.expandOnClickRef;\n            const { value: selectable } = selectableRef;\n            const { value: mergedCheckOnClick } = mergedCheckOnClickRef;\n            if (!selectable && !expandOnClick && !mergedCheckOnClick)\n                return;\n            if (happensIn(e, 'checkbox') || happensIn(e, 'switcher'))\n                return;\n            const { tmNode } = props;\n            if (selectable) {\n                NTree.handleSelect(tmNode);\n            }\n            if (expandOnClick && !tmNode.isLeaf) {\n                handleSwitcherClick();\n            }\n            if (mergedCheckOnClick) {\n                handleCheck(!checkedRef.value);\n            }\n        }\n        function handleContentClick(e) {\n            var _a, _b;\n            if (blockLineRef.value)\n                return;\n            if (!disabledRef.value)\n                _handleClick(e);\n            (_b = (_a = resolvedNodePropsRef.value) === null || _a === void 0 ? void 0 : _a.onClick) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        }\n        function handleLineClick(e) {\n            var _a, _b;\n            if (!blockLineRef.value)\n                return;\n            if (!disabledRef.value) {\n                _handleClick(e);\n            }\n            (_b = (_a = resolvedNodePropsRef.value) === null || _a === void 0 ? void 0 : _a.onClick) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        }\n        function handleCheck(checked) {\n            NTree.handleCheck(props.tmNode, checked);\n        }\n        // Dnd\n        function handleDragStart(e) {\n            NTree.handleDragStart({\n                event: e,\n                node: props.tmNode\n            });\n        }\n        function handleDragEnter(e) {\n            if (e.currentTarget !== e.target) {\n                return;\n            }\n            NTree.handleDragEnter({\n                event: e,\n                node: props.tmNode\n            });\n        }\n        function handleDragOver(e) {\n            e.preventDefault(); // if not prevent, drop event won't be fired...\n            NTree.handleDragOver({\n                event: e,\n                node: props.tmNode\n            });\n        }\n        function handleDragEnd(e) {\n            NTree.handleDragEnd({\n                event: e,\n                node: props.tmNode\n            });\n        }\n        function handleDragLeave(e) {\n            if (e.currentTarget !== e.target) {\n                return;\n            }\n            NTree.handleDragLeave({\n                event: e,\n                node: props.tmNode\n            });\n        }\n        function handleDrop(e) {\n            e.preventDefault();\n            if (droppingPositionRef.value !== null) {\n                NTree.handleDrop({\n                    event: e,\n                    node: props.tmNode,\n                    dropPosition: droppingPositionRef.value\n                });\n            }\n        }\n        const indentNodes = computed(() => {\n            const { clsPrefix } = props;\n            const { value: indent } = indentRef;\n            if (showLineRef.value) {\n                const indentNodes = [];\n                let cursor = props.tmNode.parent;\n                while (cursor) {\n                    if (cursor.isLastChild) {\n                        indentNodes.push(h(\"div\", { class: `${clsPrefix}-tree-node-indent` },\n                            h(\"div\", { style: { width: `${indent}px` } })));\n                    }\n                    else {\n                        indentNodes.push(h(\"div\", { class: [\n                                `${clsPrefix}-tree-node-indent`,\n                                `${clsPrefix}-tree-node-indent--show-line`\n                            ] },\n                            h(\"div\", { style: { width: `${indent}px` } })));\n                    }\n                    cursor = cursor.parent;\n                }\n                return indentNodes.reverse();\n            }\n            else {\n                return repeat(props.tmNode.level, h(\"div\", { class: `${props.clsPrefix}-tree-node-indent` },\n                    h(\"div\", { style: { width: `${indent}px` } })));\n            }\n        });\n        return {\n            showDropMark: useMemo(() => {\n                const { value: draggingNode } = draggingNodeRef;\n                if (!draggingNode)\n                    return;\n                const { value: droppingPosition } = droppingPositionRef;\n                if (!droppingPosition)\n                    return;\n                const { value: droppingMouseNode } = droppingMouseNodeRef;\n                if (!droppingMouseNode) {\n                    return;\n                }\n                const { tmNode } = props;\n                if (tmNode.key === droppingMouseNode.key)\n                    return true;\n                return false;\n            }),\n            showDropMarkAsParent: useMemo(() => {\n                const { value: droppingNodeParent } = droppingNodeParentRef;\n                if (!droppingNodeParent)\n                    return false;\n                const { tmNode } = props;\n                const { value: droppingPosition } = droppingPositionRef;\n                if (droppingPosition === 'before' || droppingPosition === 'after') {\n                    return droppingNodeParent.key === tmNode.key;\n                }\n                return false;\n            }),\n            pending: useMemo(() => NTree.pendingNodeKeyRef.value === props.tmNode.key),\n            loading: useMemo(() => NTree.loadingKeysRef.value.has(props.tmNode.key)),\n            highlight: useMemo(() => {\n                var _a;\n                return (_a = NTree.highlightKeySetRef.value) === null || _a === void 0 ? void 0 : _a.has(props.tmNode.key);\n            }),\n            checked: checkedRef,\n            indeterminate: useMemo(() => NTree.displayedIndeterminateKeysRef.value.includes(props.tmNode.key)),\n            selected: useMemo(() => NTree.mergedSelectedKeysRef.value.includes(props.tmNode.key)),\n            expanded: useMemo(() => NTree.mergedExpandedKeysRef.value.includes(props.tmNode.key)),\n            disabled: disabledRef,\n            checkable: checkableRef,\n            mergedCheckOnClick: mergedCheckOnClickRef,\n            checkboxDisabled: checkboxDisabledRef,\n            selectable: selectableRef,\n            expandOnClick: NTree.expandOnClickRef,\n            internalScrollable: NTree.internalScrollableRef,\n            draggable: NTree.draggableRef,\n            blockLine: blockLineRef,\n            nodeProps: resolvedNodePropsRef,\n            checkboxFocusable: NTree.internalCheckboxFocusableRef,\n            droppingPosition: droppingPositionRef,\n            droppingOffsetLevel: droppingOffsetLevelRef,\n            indent: indentRef,\n            checkboxPlacement: checkboxPlacementRef,\n            showLine: showLineRef,\n            contentInstRef,\n            contentElRef,\n            indentNodes,\n            handleCheck,\n            handleDrop,\n            handleDragStart,\n            handleDragEnter,\n            handleDragOver,\n            handleDragEnd,\n            handleDragLeave,\n            handleLineClick,\n            handleContentClick,\n            handleSwitcherClick\n        };\n    },\n    render() {\n        const { tmNode, clsPrefix, checkable, expandOnClick, selectable, selected, checked, highlight, draggable, blockLine, indent, indentNodes, disabled, pending, internalScrollable, nodeProps, checkboxPlacement } = this;\n        // drag start not inside\n        // it need to be append to node itself, not wrapper\n        const dragEventHandlers = draggable && !disabled\n            ? {\n                onDragenter: this.handleDragEnter,\n                onDragleave: this.handleDragLeave,\n                onDragend: this.handleDragEnd,\n                onDrop: this.handleDrop,\n                onDragover: this.handleDragOver\n            }\n            : undefined;\n        // In non virtual mode, there's no evidence that which element should be\n        // scrolled to, so we need data-key to query the target element.\n        const dataKey = internalScrollable ? createDataKey(tmNode.key) : undefined;\n        const checkboxOnRight = checkboxPlacement === 'right';\n        const checkboxNode = checkable ? (h(NTreeNodeCheckbox, { indent: indent, right: checkboxOnRight, focusable: this.checkboxFocusable, disabled: disabled || this.checkboxDisabled, clsPrefix: clsPrefix, checked: this.checked, indeterminate: this.indeterminate, onCheck: this.handleCheck })) : null;\n        return (h(\"div\", Object.assign({ class: `${clsPrefix}-tree-node-wrapper` }, dragEventHandlers),\n            h(\"div\", Object.assign({}, (blockLine ? nodeProps : undefined), { class: [\n                    `${clsPrefix}-tree-node`,\n                    {\n                        [`${clsPrefix}-tree-node--selected`]: selected,\n                        [`${clsPrefix}-tree-node--checkable`]: checkable,\n                        [`${clsPrefix}-tree-node--highlight`]: highlight,\n                        [`${clsPrefix}-tree-node--pending`]: pending,\n                        [`${clsPrefix}-tree-node--disabled`]: disabled,\n                        [`${clsPrefix}-tree-node--selectable`]: selectable,\n                        [`${clsPrefix}-tree-node--clickable`]: selectable || expandOnClick || this.mergedCheckOnClick\n                    },\n                    nodeProps === null || nodeProps === void 0 ? void 0 : nodeProps.class\n                ], \"data-key\": dataKey, draggable: draggable && blockLine, onClick: this.handleLineClick, onDragstart: draggable && blockLine && !disabled\n                    ? this.handleDragStart\n                    : undefined }),\n                indentNodes,\n                tmNode.isLeaf && this.showLine ? (h(\"div\", { class: [\n                        `${clsPrefix}-tree-node-indent`,\n                        `${clsPrefix}-tree-node-indent--show-line`,\n                        tmNode.isLeaf && `${clsPrefix}-tree-node-indent--is-leaf`,\n                        tmNode.isLastChild &&\n                            `${clsPrefix}-tree-node-indent--last-child`\n                    ] },\n                    h(\"div\", { style: { width: `${indent}px` } }))) : (h(NTreeNodeSwitcher, { clsPrefix: clsPrefix, expanded: this.expanded, selected: selected, loading: this.loading, hide: tmNode.isLeaf, tmNode: this.tmNode, indent: indent, onClick: this.handleSwitcherClick })),\n                !checkboxOnRight ? checkboxNode : null,\n                h(NTreeNodeContent, { ref: \"contentInstRef\", clsPrefix: clsPrefix, checked: checked, selected: selected, onClick: this.handleContentClick, nodeProps: blockLine ? undefined : nodeProps, onDragstart: draggable && !blockLine && !disabled\n                        ? this.handleDragStart\n                        : undefined, tmNode: tmNode }),\n                draggable\n                    ? this.showDropMark\n                        ? renderDropMark({\n                            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                            el: this.contentElRef.value,\n                            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                            position: this.droppingPosition,\n                            offsetLevel: this.droppingOffsetLevel,\n                            indent\n                        })\n                        : this.showDropMarkAsParent\n                            ? renderDropMark({\n                                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                                el: this.contentElRef.value,\n                                position: 'inside',\n                                offsetLevel: this.droppingOffsetLevel,\n                                indent\n                            })\n                            : null\n                    : null,\n                checkboxOnRight ? checkboxNode : null)));\n    }\n});\nexport default TreeNode;\n","import { h, defineComponent } from 'vue';\nimport { pxfy } from 'seemly';\nimport FadeInExpandTransition from '../../_internal/fade-in-expand-transition';\nimport TreeNode from './TreeNode';\nexport default defineComponent({\n    name: 'TreeMotionWrapper',\n    props: {\n        clsPrefix: {\n            type: String,\n            required: true\n        },\n        height: Number,\n        nodes: {\n            type: Array,\n            required: true\n        },\n        mode: {\n            type: String,\n            required: true\n        },\n        onAfterEnter: {\n            type: Function,\n            required: true\n        }\n    },\n    render() {\n        const { clsPrefix } = this;\n        return (h(FadeInExpandTransition, { onAfterEnter: this.onAfterEnter, appear: true, reverse: this.mode === 'collapse' }, {\n            default: () => (h(\"div\", { class: [\n                    `${clsPrefix}-tree-motion-wrapper`,\n                    `${clsPrefix}-tree-motion-wrapper--${this.mode}`\n                ], style: {\n                    height: pxfy(this.height)\n                } }, this.nodes.map((node) => (h(TreeNode, { clsPrefix: clsPrefix, tmNode: node })))))\n        }));\n    }\n});\n","import { c, cB, cE, cM, cNotM } from '../../../_utils/cssr';\nimport { iconSwitchTransition } from '../../../_styles/transitions/icon-switch.cssr';\nimport { fadeInHeightExpandTransition } from '../../../_styles/transitions/fade-in-height-expand.cssr';\nconst iconSwitchTransitionNode = iconSwitchTransition();\n// vars:\n// --n-arrow-color\n// --n-bezier\n// --n-font-size\n// --n-node-border-radius\n// --n-node-color-active\n// --n-node-color-hover\n// --n-node-color-pressed\n// --n-node-text-color\n// --n-node-text-color-disabled\n// --n-node-wrapper-padding\n// --n-line-offset-top\n// --n-line-offset-bottom\n// --n-node-content-height\n// --n-line-height\nexport default cB('tree', `\n font-size: var(--n-font-size);\n outline: none;\n`, [c('ul, li', `\n margin: 0;\n padding: 0;\n list-style: none;\n `), c('>', [cB('tree-node', [c('&:first-child', 'margin-top: 0;')])]), cB('tree-motion-wrapper', [cM('expand', [fadeInHeightExpandTransition({\n  duration: '0.2s'\n})]), cM('collapse', [fadeInHeightExpandTransition({\n  duration: '0.2s',\n  reverse: true\n})])]), cB('tree-node-wrapper', `\n box-sizing: border-box;\n padding: var(--n-node-wrapper-padding);\n `), cB('tree-node', `\n transform: translate3d(0,0,0);\n position: relative;\n display: flex;\n border-radius: var(--n-node-border-radius);\n transition: background-color .3s var(--n-bezier);\n `, [cM('highlight', [cB('tree-node-content', [cE('text', 'border-bottom-color: var(--n-node-text-color-disabled);')])]), cM('disabled', [cB('tree-node-content', `\n color: var(--n-node-text-color-disabled);\n cursor: not-allowed;\n `)]), cNotM('disabled', [cM('clickable', [cB('tree-node-content', `\n cursor: pointer;\n `)])])]), cM('block-node', [cB('tree-node-content', `\n flex: 1;\n min-width: 0;\n `)]), cNotM('block-line', [cB('tree-node', [cNotM('disabled', [cB('tree-node-content', [c('&:hover', 'background: var(--n-node-color-hover);')]), cM('selectable', [cB('tree-node-content', [c('&:active', 'background: var(--n-node-color-pressed);')])]), cM('pending', [cB('tree-node-content', `\n background: var(--n-node-color-hover);\n `)]), cM('selected', [cB('tree-node-content', 'background: var(--n-node-color-active);')])])])]), cM('block-line', [cB('tree-node', [cNotM('disabled', [c('&:hover', 'background: var(--n-node-color-hover);'), cM('pending', `\n background: var(--n-node-color-hover);\n `), cM('selectable', [cNotM('selected', [c('&:active', 'background: var(--n-node-color-pressed);')])]), cM('selected', 'background: var(--n-node-color-active);')]), cM('disabled', `\n cursor: not-allowed;\n `)])]), cB('tree-node-indent', `\n flex-grow: 0;\n flex-shrink: 0;\n `, [cM('show-line', 'position: relative', [c('&::before', `\n position: absolute;\n left: 50%;\n border-left: 1px solid var(--n-border-color);\n transition: border-color .3s var(--n-bezier);\n transform: translate(-50%);\n content: \"\";\n top: var(--n-line-offset-top);\n bottom: var(--n-line-offset-bottom);\n `), cM('last-child', [c('&::before', `\n bottom: 50%;\n `)]), cM('is-leaf', [c('&::after', `\n position: absolute;\n content: \"\";\n left: calc(50% + 0.5px);\n right: 0;\n bottom: 50%;\n transition: border-color .3s var(--n-bezier);\n border-bottom: 1px solid var(--n-border-color);\n `)])]), cNotM('show-line', 'height: 0;')]), cB('tree-node-switcher', `\n cursor: pointer;\n display: inline-flex;\n flex-shrink: 0;\n height: var(--n-node-content-height);\n align-items: center;\n justify-content: center;\n transition: transform .15s var(--n-bezier);\n vertical-align: bottom;\n `, [cE('icon', `\n position: relative;\n height: 14px;\n width: 14px;\n display: flex;\n color: var(--n-arrow-color);\n transition: color .3s var(--n-bezier);\n font-size: 14px;\n `, [cB('icon', [iconSwitchTransitionNode]), cB('base-loading', `\n color: var(--n-loading-color);\n position: absolute;\n left: 0;\n top: 0;\n right: 0;\n bottom: 0;\n `, [iconSwitchTransitionNode]), cB('base-icon', [iconSwitchTransitionNode])]), cM('hide', 'visibility: hidden;'), cM('expanded', 'transform: rotate(90deg);')]), cB('tree-node-checkbox', `\n display: inline-flex;\n height: var(--n-node-content-height);\n vertical-align: bottom;\n align-items: center;\n justify-content: center;\n `), cB('tree-node-content', `\n user-select: none;\n position: relative;\n display: inline-flex;\n align-items: center;\n min-height: var(--n-node-content-height);\n box-sizing: border-box;\n line-height: var(--n-line-height);\n vertical-align: bottom;\n padding: 0 6px 0 4px;\n cursor: default;\n border-radius: var(--n-node-border-radius);\n color: var(--n-node-text-color);\n transition:\n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n `, [c('&:last-child', 'margin-bottom: 0;'), cE('prefix', `\n display: inline-flex;\n margin-right: 8px;\n `), cE('text', `\n border-bottom: 1px solid #0000;\n transition: border-color .3s var(--n-bezier);\n flex-grow: 1;\n max-width: 100%;\n `), cE('suffix', `\n display: inline-flex;\n `)]), cE('empty', 'margin: auto;')]);","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { h, ref, toRef, computed, defineComponent, provide, watch, nextTick, watchEffect, inject } from 'vue';\nimport { createTreeMate, flatten, createIndexGetter } from 'treemate';\nimport { useMergedState } from 'vooks';\nimport { VVirtualList } from 'vueuc';\nimport { depx, getPadding, pxfy } from 'seemly';\nimport { treeSelectInjectionKey } from '../../tree-select/src/interface';\nimport { useConfig, useTheme, useThemeClass, useRtl } from '../../_mixins';\nimport { call, createDataKey, resolveSlot, warn, warnOnce } from '../../_utils';\nimport { NxScrollbar } from '../../_internal';\nimport { treeLight } from '../styles';\nimport { NEmpty } from '../../empty';\nimport NTreeNode from './TreeNode';\nimport { keysWithFilter, emptyImage, filterTree, isNodeDisabled, useMergedCheckStrategy } from './utils';\nimport { useKeyboard } from './keyboard';\nimport { treeInjectionKey } from './interface';\nimport MotionWrapper from './MotionWrapper';\nimport { defaultAllowDrop } from './dnd';\nimport style from './styles/index.cssr';\nexport function createTreeMateOptions(keyField, childrenField, disabledField, getChildren) {\n    const settledGetChildren = getChildren ||\n        ((node) => {\n            return node[childrenField];\n        });\n    return {\n        getIsGroup() {\n            return false;\n        },\n        getKey(node) {\n            return node[keyField];\n        },\n        getChildren: settledGetChildren,\n        getDisabled(node) {\n            return !!(node[disabledField] || node.checkboxDisabled);\n        }\n    };\n}\nexport const treeSharedProps = {\n    allowCheckingNotLoaded: Boolean,\n    filter: Function,\n    defaultExpandAll: Boolean,\n    expandedKeys: Array,\n    keyField: {\n        type: String,\n        default: 'key'\n    },\n    labelField: {\n        type: String,\n        default: 'label'\n    },\n    childrenField: {\n        type: String,\n        default: 'children'\n    },\n    disabledField: {\n        type: String,\n        default: 'disabled'\n    },\n    defaultExpandedKeys: {\n        type: Array,\n        default: () => []\n    },\n    indeterminateKeys: Array,\n    renderSwitcherIcon: Function,\n    onUpdateIndeterminateKeys: [Function, Array],\n    'onUpdate:indeterminateKeys': [Function, Array],\n    onUpdateExpandedKeys: [Function, Array],\n    'onUpdate:expandedKeys': [Function, Array]\n};\nexport const treeProps = Object.assign(Object.assign(Object.assign(Object.assign({}, useTheme.props), { accordion: Boolean, showIrrelevantNodes: { type: Boolean, default: true }, data: {\n        type: Array,\n        default: () => []\n    }, expandOnDragenter: {\n        type: Boolean,\n        default: true\n    }, expandOnClick: Boolean, checkOnClick: {\n        type: [Boolean, Function],\n        default: false\n    }, cancelable: {\n        type: Boolean,\n        default: true\n    }, checkable: Boolean, draggable: Boolean, blockNode: Boolean, blockLine: Boolean, showLine: Boolean, disabled: Boolean, checkedKeys: Array, defaultCheckedKeys: {\n        type: Array,\n        default: () => []\n    }, selectedKeys: Array, defaultSelectedKeys: {\n        type: Array,\n        default: () => []\n    }, multiple: Boolean, pattern: {\n        type: String,\n        default: ''\n    }, onLoad: Function, cascade: Boolean, selectable: {\n        type: Boolean,\n        default: true\n    }, scrollbarProps: Object, indent: {\n        type: Number,\n        default: 24\n    }, allowDrop: {\n        type: Function,\n        default: defaultAllowDrop\n    }, animated: {\n        type: Boolean,\n        default: true\n    }, checkboxPlacement: {\n        type: String,\n        default: 'left'\n    }, virtualScroll: Boolean, watchProps: Array, renderLabel: Function, renderPrefix: Function, renderSuffix: Function, nodeProps: Function, keyboard: {\n        type: Boolean,\n        default: true\n    }, getChildren: Function, onDragenter: [Function, Array], onDragleave: [Function, Array], onDragend: [Function, Array], onDragstart: [Function, Array], onDragover: [Function, Array], onDrop: [Function, Array], onUpdateCheckedKeys: [Function, Array], 'onUpdate:checkedKeys': [Function, Array], onUpdateSelectedKeys: [Function, Array], 'onUpdate:selectedKeys': [Function, Array] }), treeSharedProps), { \n    // internal props for tree-select\n    internalTreeSelect: Boolean, internalScrollable: Boolean, internalScrollablePadding: String, \n    // use it to display\n    internalRenderEmpty: Function, internalHighlightKeySet: Object, internalUnifySelectCheck: Boolean, internalCheckboxFocusable: {\n        type: Boolean,\n        default: true\n    }, internalFocusable: {\n        // Make tree-select take over keyboard operations\n        type: Boolean,\n        default: true\n    }, checkStrategy: {\n        type: String,\n        default: 'all'\n    }, \n    /**\n     * @deprecated\n     */\n    leafOnly: Boolean });\nexport default defineComponent({\n    name: 'Tree',\n    props: treeProps,\n    setup(props) {\n        if (process.env.NODE_ENV !== 'production') {\n            watchEffect(() => {\n                if (props.leafOnly) {\n                    warnOnce('tree', '`leaf-only` is deprecated, please use `check-strategy=\"child\"` instead');\n                }\n            });\n        }\n        const { mergedClsPrefixRef, inlineThemeDisabled, mergedRtlRef } = useConfig(props);\n        const rtlEnabledRef = useRtl('Tree', mergedRtlRef, mergedClsPrefixRef);\n        const themeRef = useTheme('Tree', '-tree', style, treeLight, props, mergedClsPrefixRef);\n        const selfElRef = ref(null);\n        const scrollbarInstRef = ref(null);\n        const virtualListInstRef = ref(null);\n        function getScrollContainer() {\n            var _a;\n            return (_a = virtualListInstRef.value) === null || _a === void 0 ? void 0 : _a.listElRef;\n        }\n        function getScrollContent() {\n            var _a;\n            return (_a = virtualListInstRef.value) === null || _a === void 0 ? void 0 : _a.itemsElRef;\n        }\n        const mergedFilterRef = computed(() => {\n            const { filter } = props;\n            if (filter)\n                return filter;\n            const { labelField } = props;\n            return (pattern, node) => {\n                if (!pattern.length)\n                    return true;\n                const label = node[labelField];\n                if (typeof label === 'string') {\n                    return label.toLowerCase().includes(pattern.toLowerCase());\n                }\n                return false;\n            };\n        });\n        const filteredTreeInfoRef = computed(() => {\n            const { pattern } = props;\n            if (!pattern) {\n                return {\n                    filteredTree: props.data,\n                    highlightKeySet: null,\n                    expandedKeys: undefined\n                };\n            }\n            if (!pattern.length || !mergedFilterRef.value) {\n                return {\n                    filteredTree: props.data,\n                    highlightKeySet: null,\n                    expandedKeys: undefined\n                };\n            }\n            return filterTree(props.data, mergedFilterRef.value, pattern, props.keyField, props.childrenField);\n        });\n        // We don't expect data source to change so we just determine it once\n        const displayTreeMateRef = computed(() => createTreeMate(props.showIrrelevantNodes\n            ? props.data\n            : filteredTreeInfoRef.value.filteredTree, createTreeMateOptions(props.keyField, props.childrenField, props.disabledField, props.getChildren)));\n        const treeSelectInjection = inject(treeSelectInjectionKey, null);\n        const dataTreeMateRef = props.internalTreeSelect\n            ? treeSelectInjection.dataTreeMate\n            : displayTreeMateRef;\n        const { watchProps } = props;\n        const uncontrolledCheckedKeysRef = ref([]);\n        if (watchProps === null || watchProps === void 0 ? void 0 : watchProps.includes('defaultCheckedKeys')) {\n            watchEffect(() => {\n                uncontrolledCheckedKeysRef.value = props.defaultCheckedKeys;\n            });\n        }\n        else {\n            uncontrolledCheckedKeysRef.value = props.defaultCheckedKeys;\n        }\n        const controlledCheckedKeysRef = toRef(props, 'checkedKeys');\n        const mergedCheckedKeysRef = useMergedState(controlledCheckedKeysRef, uncontrolledCheckedKeysRef);\n        const checkedStatusRef = computed(() => {\n            const value = dataTreeMateRef.value.getCheckedKeys(mergedCheckedKeysRef.value, {\n                cascade: props.cascade,\n                allowNotLoaded: props.allowCheckingNotLoaded\n            });\n            return value;\n        });\n        const mergedCheckStrategyRef = useMergedCheckStrategy(props);\n        const displayedCheckedKeysRef = computed(() => {\n            return checkedStatusRef.value.checkedKeys;\n        });\n        const displayedIndeterminateKeysRef = computed(() => {\n            const { indeterminateKeys } = props;\n            if (indeterminateKeys !== undefined)\n                return indeterminateKeys;\n            return checkedStatusRef.value.indeterminateKeys;\n        });\n        const uncontrolledSelectedKeysRef = ref([]);\n        if (watchProps === null || watchProps === void 0 ? void 0 : watchProps.includes('defaultSelectedKeys')) {\n            watchEffect(() => {\n                uncontrolledSelectedKeysRef.value = props.defaultSelectedKeys;\n            });\n        }\n        else {\n            uncontrolledSelectedKeysRef.value = props.defaultSelectedKeys;\n        }\n        const controlledSelectedKeysRef = toRef(props, 'selectedKeys');\n        const mergedSelectedKeysRef = useMergedState(controlledSelectedKeysRef, uncontrolledSelectedKeysRef);\n        const uncontrolledExpandedKeysRef = ref([]);\n        const initUncontrolledExpandedKeys = (keys) => {\n            uncontrolledExpandedKeysRef.value = props.defaultExpandAll\n                ? dataTreeMateRef.value.getNonLeafKeys()\n                : keys === undefined\n                    ? props.defaultExpandedKeys\n                    : keys;\n        };\n        if (watchProps === null || watchProps === void 0 ? void 0 : watchProps.includes('defaultExpandedKeys')) {\n            // if watching defaultExpandedKeys, we use access props.defaultExpandedKeys inside initiator\n            watchEffect(() => {\n                initUncontrolledExpandedKeys(undefined);\n            });\n        }\n        else {\n            // We by default watchEffect since if defaultExpandAll is true, we should remain tree expand if data changes\n            watchEffect(() => {\n                initUncontrolledExpandedKeys(props.defaultExpandedKeys);\n            });\n        }\n        const controlledExpandedKeysRef = toRef(props, 'expandedKeys');\n        const mergedExpandedKeysRef = useMergedState(controlledExpandedKeysRef, uncontrolledExpandedKeysRef);\n        const fNodesRef = computed(() => displayTreeMateRef.value.getFlattenedNodes(mergedExpandedKeysRef.value));\n        const { pendingNodeKeyRef, handleKeydown } = useKeyboard({\n            props,\n            mergedSelectedKeysRef,\n            fNodesRef,\n            mergedExpandedKeysRef,\n            handleSelect,\n            handleSwitcherClick\n        });\n        let expandTimerId = null;\n        let nodeKeyToBeExpanded = null;\n        const uncontrolledHighlightKeySetRef = ref(new Set());\n        const controlledHighlightKeySetRef = computed(() => {\n            return (props.internalHighlightKeySet ||\n                filteredTreeInfoRef.value.highlightKeySet);\n        });\n        const mergedHighlightKeySetRef = useMergedState(controlledHighlightKeySetRef, uncontrolledHighlightKeySetRef);\n        const loadingKeysRef = ref(new Set());\n        const expandedNonLoadingKeysRef = computed(() => {\n            return mergedExpandedKeysRef.value.filter((key) => !loadingKeysRef.value.has(key));\n        });\n        let dragStartX = 0;\n        const draggingNodeRef = ref(null);\n        const droppingNodeRef = ref(null);\n        const droppingMouseNodeRef = ref(null);\n        const droppingPositionRef = ref(null);\n        const droppingOffsetLevelRef = ref(0);\n        const droppingNodeParentRef = computed(() => {\n            const { value: droppingNode } = droppingNodeRef;\n            if (!droppingNode)\n                return null;\n            // May avoid overlap between line mark of first child & rect mark of parent\n            // if (droppingNode.isFirstChild && droppingPositionRef.value === 'before') {\n            //   return null\n            // }\n            return droppingNode.parent;\n        });\n        // shallow watch data\n        watch(toRef(props, 'data'), () => {\n            loadingKeysRef.value.clear();\n            pendingNodeKeyRef.value = null;\n            resetDndState();\n        }, {\n            deep: false\n        });\n        let expandAnimationDisabled = false;\n        const disableExpandAnimationForOneTick = () => {\n            expandAnimationDisabled = true;\n            void nextTick(() => {\n                expandAnimationDisabled = false;\n            });\n        };\n        let memoizedExpandedKeys;\n        watch(toRef(props, 'pattern'), (value, oldValue) => {\n            if (props.showIrrelevantNodes) {\n                memoizedExpandedKeys = undefined;\n                if (value) {\n                    const { expandedKeys: expandedKeysAfterChange, highlightKeySet } = keysWithFilter(props.data, props.pattern, props.keyField, props.childrenField, mergedFilterRef.value);\n                    uncontrolledHighlightKeySetRef.value = highlightKeySet;\n                    disableExpandAnimationForOneTick();\n                    doUpdateExpandedKeys(expandedKeysAfterChange, getOptionsByKeys(expandedKeysAfterChange), { node: null, action: 'filter' });\n                }\n                else {\n                    uncontrolledHighlightKeySetRef.value = new Set();\n                }\n            }\n            else {\n                if (!value.length) {\n                    if (memoizedExpandedKeys !== undefined) {\n                        disableExpandAnimationForOneTick();\n                        doUpdateExpandedKeys(memoizedExpandedKeys, getOptionsByKeys(memoizedExpandedKeys), { node: null, action: 'filter' });\n                    }\n                }\n                else {\n                    if (!oldValue.length) {\n                        memoizedExpandedKeys = mergedExpandedKeysRef.value;\n                    }\n                    const { expandedKeys } = filteredTreeInfoRef.value;\n                    if (expandedKeys !== undefined) {\n                        disableExpandAnimationForOneTick();\n                        doUpdateExpandedKeys(expandedKeys, getOptionsByKeys(expandedKeys), {\n                            node: null,\n                            action: 'filter'\n                        });\n                    }\n                }\n            }\n        });\n        function triggerLoading(node) {\n            return __awaiter(this, void 0, void 0, function* () {\n                const { onLoad } = props;\n                if (!onLoad) {\n                    if (process.env.NODE_ENV !== 'production') {\n                        warn('tree', 'There is unloaded node in data but props.onLoad is not specified.');\n                    }\n                    yield Promise.resolve();\n                    return;\n                }\n                const { value: loadingKeys } = loadingKeysRef;\n                if (!loadingKeys.has(node.key)) {\n                    loadingKeys.add(node.key);\n                    try {\n                        const loadResult = yield onLoad(node.rawNode);\n                        if (loadResult === false) {\n                            resetDragExpandState();\n                        }\n                    }\n                    catch (loadError) {\n                        console.error(loadError);\n                        resetDragExpandState();\n                    }\n                    loadingKeys.delete(node.key);\n                }\n            });\n        }\n        watchEffect(() => {\n            var _a;\n            const { value: displayTreeMate } = displayTreeMateRef;\n            if (!displayTreeMate)\n                return;\n            const { getNode } = displayTreeMate;\n            (_a = mergedExpandedKeysRef.value) === null || _a === void 0 ? void 0 : _a.forEach((key) => {\n                const node = getNode(key);\n                if (node && !node.shallowLoaded) {\n                    void triggerLoading(node);\n                }\n            });\n        });\n        // animation in progress\n        const aipRef = ref(false);\n        // animation flattened nodes\n        const afNodesRef = ref([]);\n        // Note: Since the virtual list depends on min height, if there's a node\n        // whose height starts from 0, the virtual list will have a wrong height\n        // during animation. This will seldom cause wired scrollbar status. It is\n        // fixable and need some changes in vueuc, I've no time so I just leave it\n        // here. Maybe the bug won't be fixed during the life time of the project.\n        watch(expandedNonLoadingKeysRef, (value, prevValue) => {\n            if (!props.animated || expandAnimationDisabled) {\n                void nextTick(syncScrollbar);\n                return;\n            }\n            const nodeHeight = depx(themeRef.value.self.nodeHeight);\n            const prevVSet = new Set(prevValue);\n            let addedKey = null;\n            let removedKey = null;\n            for (const expandedKey of value) {\n                if (!prevVSet.has(expandedKey)) {\n                    if (addedKey !== null)\n                        return; // multi expand, not triggered by click\n                    addedKey = expandedKey;\n                }\n            }\n            const currentVSet = new Set(value);\n            for (const expandedKey of prevValue) {\n                if (!currentVSet.has(expandedKey)) {\n                    if (removedKey !== null)\n                        return; // multi collapse, not triggered by click\n                    removedKey = expandedKey;\n                }\n            }\n            if (addedKey === null && removedKey === null) {\n                // 1. multi action, not triggered by click\n                // 2. no action, don't know what happened\n                return;\n            }\n            const { virtualScroll } = props;\n            const viewportHeight = (virtualScroll ? virtualListInstRef.value.listElRef : selfElRef.value).offsetHeight;\n            const viewportItemCount = Math.ceil(viewportHeight / nodeHeight) + 1;\n            // play add animation\n            let baseExpandedKeys;\n            if (addedKey !== null) {\n                baseExpandedKeys = prevValue;\n            }\n            if (removedKey !== null) {\n                if (baseExpandedKeys === undefined) {\n                    baseExpandedKeys = value;\n                }\n                else {\n                    baseExpandedKeys = baseExpandedKeys.filter((key) => key !== removedKey);\n                }\n            }\n            aipRef.value = true;\n            afNodesRef.value =\n                displayTreeMateRef.value.getFlattenedNodes(baseExpandedKeys);\n            if (addedKey !== null) {\n                const expandedNodeIndex = afNodesRef.value.findIndex((node) => node.key === addedKey);\n                if (~expandedNodeIndex) {\n                    const children = // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                     afNodesRef.value[expandedNodeIndex].children;\n                    // sometimes user will pass leaf keys in\n                    if (children) {\n                        const expandedChildren = flatten(children, value);\n                        afNodesRef.value.splice(expandedNodeIndex + 1, 0, {\n                            __motion: true,\n                            mode: 'expand',\n                            height: virtualScroll\n                                ? expandedChildren.length * nodeHeight\n                                : undefined,\n                            nodes: virtualScroll\n                                ? expandedChildren.slice(0, viewportItemCount)\n                                : expandedChildren\n                        });\n                    }\n                }\n            }\n            if (removedKey !== null) {\n                const collapsedNodeIndex = afNodesRef.value.findIndex((node) => node.key === removedKey);\n                if (~collapsedNodeIndex) {\n                    const collapsedNodeChildren = afNodesRef.value[collapsedNodeIndex].children;\n                    // Sometime the whole tree is change, remove a key doesn't mean it is collapsed,\n                    // but maybe children removed\n                    if (!collapsedNodeChildren)\n                        return;\n                    // play remove animation\n                    aipRef.value = true;\n                    const collapsedChildren = flatten(collapsedNodeChildren, value);\n                    afNodesRef.value.splice(collapsedNodeIndex + 1, 0, {\n                        __motion: true,\n                        mode: 'collapse',\n                        height: virtualScroll\n                            ? collapsedChildren.length * nodeHeight\n                            : undefined,\n                        nodes: virtualScroll\n                            ? collapsedChildren.slice(0, viewportItemCount)\n                            : collapsedChildren\n                    });\n                }\n            }\n        });\n        const getFIndexRef = computed(() => {\n            return createIndexGetter(fNodesRef.value);\n        });\n        const mergedFNodesRef = computed(() => {\n            if (aipRef.value)\n                return afNodesRef.value;\n            else\n                return fNodesRef.value;\n        });\n        function syncScrollbar() {\n            const { value: scrollbarInst } = scrollbarInstRef;\n            if (scrollbarInst)\n                scrollbarInst.sync();\n        }\n        function handleAfterEnter() {\n            aipRef.value = false;\n            if (props.virtualScroll) {\n                // If virtual scroll, we won't listen to resize during animation, so\n                // resize callback of virtual list won't be called and as a result\n                // scrollbar won't sync. We need to sync scrollbar manually.\n                void nextTick(syncScrollbar);\n            }\n        }\n        function getOptionsByKeys(keys) {\n            const { getNode } = dataTreeMateRef.value;\n            return keys.map((key) => { var _a; return ((_a = getNode(key)) === null || _a === void 0 ? void 0 : _a.rawNode) || null; });\n        }\n        function doUpdateExpandedKeys(value, option, meta) {\n            const { 'onUpdate:expandedKeys': _onUpdateExpandedKeys, onUpdateExpandedKeys } = props;\n            uncontrolledExpandedKeysRef.value = value;\n            if (_onUpdateExpandedKeys) {\n                call(_onUpdateExpandedKeys, value, option, meta);\n            }\n            if (onUpdateExpandedKeys) {\n                call(onUpdateExpandedKeys, value, option, meta);\n            }\n        }\n        function doUpdateCheckedKeys(value, option, meta) {\n            const { 'onUpdate:checkedKeys': _onUpdateCheckedKeys, onUpdateCheckedKeys } = props;\n            uncontrolledCheckedKeysRef.value = value;\n            if (onUpdateCheckedKeys) {\n                call(onUpdateCheckedKeys, value, option, meta);\n            }\n            if (_onUpdateCheckedKeys) {\n                call(_onUpdateCheckedKeys, value, option, meta);\n            }\n        }\n        function doUpdateIndeterminateKeys(value, option) {\n            const { 'onUpdate:indeterminateKeys': _onUpdateIndeterminateKeys, onUpdateIndeterminateKeys } = props;\n            if (_onUpdateIndeterminateKeys) {\n                call(_onUpdateIndeterminateKeys, value, option);\n            }\n            if (onUpdateIndeterminateKeys) {\n                call(onUpdateIndeterminateKeys, value, option);\n            }\n        }\n        function doUpdateSelectedKeys(value, option, meta) {\n            const { 'onUpdate:selectedKeys': _onUpdateSelectedKeys, onUpdateSelectedKeys } = props;\n            uncontrolledSelectedKeysRef.value = value;\n            if (onUpdateSelectedKeys) {\n                call(onUpdateSelectedKeys, value, option, meta);\n            }\n            if (_onUpdateSelectedKeys) {\n                call(_onUpdateSelectedKeys, value, option, meta);\n            }\n        }\n        // Drag & Drop\n        function doDragEnter(info) {\n            const { onDragenter } = props;\n            if (onDragenter)\n                call(onDragenter, info);\n        }\n        function doDragLeave(info) {\n            const { onDragleave } = props;\n            if (onDragleave)\n                call(onDragleave, info);\n        }\n        function doDragEnd(info) {\n            const { onDragend } = props;\n            if (onDragend)\n                call(onDragend, info);\n        }\n        function doDragStart(info) {\n            const { onDragstart } = props;\n            if (onDragstart)\n                call(onDragstart, info);\n        }\n        function doDragOver(info) {\n            const { onDragover } = props;\n            if (onDragover)\n                call(onDragover, info);\n        }\n        function doDrop(info) {\n            const { onDrop } = props;\n            if (onDrop)\n                call(onDrop, info);\n        }\n        function resetDndState() {\n            resetDragState();\n            resetDropState();\n        }\n        function resetDragState() {\n            draggingNodeRef.value = null;\n        }\n        function resetDropState() {\n            droppingOffsetLevelRef.value = 0;\n            droppingNodeRef.value = null;\n            droppingMouseNodeRef.value = null;\n            droppingPositionRef.value = null;\n            resetDragExpandState();\n        }\n        function resetDragExpandState() {\n            if (expandTimerId) {\n                window.clearTimeout(expandTimerId);\n                expandTimerId = null;\n            }\n            nodeKeyToBeExpanded = null;\n        }\n        function handleCheck(node, checked) {\n            // We don't guard for leaf only since we have done it in view layer\n            if (props.disabled || isNodeDisabled(node, props.disabledField)) {\n                return;\n            }\n            if (props.internalUnifySelectCheck && !props.multiple) {\n                handleSelect(node);\n                return;\n            }\n            const checkedAction = checked ? 'check' : 'uncheck';\n            const { checkedKeys, indeterminateKeys } = dataTreeMateRef.value[checkedAction](node.key, displayedCheckedKeysRef.value, {\n                cascade: props.cascade,\n                checkStrategy: mergedCheckStrategyRef.value,\n                allowNotLoaded: props.allowCheckingNotLoaded\n            });\n            doUpdateCheckedKeys(checkedKeys, getOptionsByKeys(checkedKeys), {\n                node: node.rawNode,\n                action: checkedAction\n            });\n            doUpdateIndeterminateKeys(indeterminateKeys, getOptionsByKeys(indeterminateKeys));\n        }\n        function toggleExpand(node) {\n            if (props.disabled)\n                return;\n            const { key } = node;\n            const { value: mergedExpandedKeys } = mergedExpandedKeysRef;\n            const index = mergedExpandedKeys.findIndex((expandNodeId) => expandNodeId === key);\n            if (~index) {\n                const expandedKeysAfterChange = Array.from(mergedExpandedKeys);\n                expandedKeysAfterChange.splice(index, 1);\n                doUpdateExpandedKeys(expandedKeysAfterChange, getOptionsByKeys(expandedKeysAfterChange), {\n                    node: node.rawNode,\n                    action: 'collapse'\n                });\n            }\n            else {\n                const nodeToBeExpanded = displayTreeMateRef.value.getNode(key);\n                if (!nodeToBeExpanded || nodeToBeExpanded.isLeaf) {\n                    return;\n                }\n                let nextKeys;\n                if (props.accordion) {\n                    const siblingKeySet = new Set(node.siblings.map(({ key }) => key));\n                    nextKeys = mergedExpandedKeys.filter((expandedKey) => {\n                        return !siblingKeySet.has(expandedKey);\n                    });\n                    nextKeys.push(key);\n                }\n                else {\n                    nextKeys = mergedExpandedKeys.concat(key);\n                }\n                doUpdateExpandedKeys(nextKeys, getOptionsByKeys(nextKeys), {\n                    node: node.rawNode,\n                    action: 'expand'\n                });\n            }\n        }\n        function handleSwitcherClick(node) {\n            if (props.disabled || aipRef.value)\n                return;\n            toggleExpand(node);\n        }\n        function handleSelect(node) {\n            if (props.disabled || !props.selectable) {\n                return;\n            }\n            pendingNodeKeyRef.value = node.key;\n            if (props.internalUnifySelectCheck) {\n                const { value: { checkedKeys, indeterminateKeys } } = checkedStatusRef;\n                if (props.multiple) {\n                    handleCheck(node, !(checkedKeys.includes(node.key) ||\n                        indeterminateKeys.includes(node.key)));\n                }\n                else {\n                    doUpdateCheckedKeys([node.key], getOptionsByKeys([node.key]), {\n                        node: node.rawNode,\n                        action: 'check'\n                    });\n                }\n            }\n            if (props.multiple) {\n                const selectedKeys = Array.from(mergedSelectedKeysRef.value);\n                const index = selectedKeys.findIndex((key) => key === node.key);\n                if (~index) {\n                    if (props.cancelable) {\n                        selectedKeys.splice(index, 1);\n                    }\n                }\n                else if (!~index) {\n                    selectedKeys.push(node.key);\n                }\n                doUpdateSelectedKeys(selectedKeys, getOptionsByKeys(selectedKeys), {\n                    node: node.rawNode,\n                    action: ~index ? 'unselect' : 'select'\n                });\n            }\n            else {\n                const selectedKeys = mergedSelectedKeysRef.value;\n                if (selectedKeys.includes(node.key)) {\n                    if (props.cancelable) {\n                        doUpdateSelectedKeys([], [], {\n                            node: node.rawNode,\n                            action: 'unselect'\n                        });\n                    }\n                }\n                else {\n                    doUpdateSelectedKeys([node.key], getOptionsByKeys([node.key]), {\n                        node: node.rawNode,\n                        action: 'select'\n                    });\n                }\n            }\n        }\n        function expandDragEnterNode(node) {\n            if (expandTimerId) {\n                window.clearTimeout(expandTimerId);\n                expandTimerId = null;\n            }\n            // Don't expand leaf node.\n            if (node.isLeaf)\n                return;\n            nodeKeyToBeExpanded = node.key;\n            const expand = () => {\n                if (nodeKeyToBeExpanded !== node.key)\n                    return;\n                const { value: droppingMouseNode } = droppingMouseNodeRef;\n                if (droppingMouseNode &&\n                    droppingMouseNode.key === node.key &&\n                    !mergedExpandedKeysRef.value.includes(node.key)) {\n                    const nextKeys = mergedExpandedKeysRef.value.concat(node.key);\n                    doUpdateExpandedKeys(nextKeys, getOptionsByKeys(nextKeys), {\n                        node: node.rawNode,\n                        action: 'expand'\n                    });\n                }\n                expandTimerId = null;\n                nodeKeyToBeExpanded = null;\n            };\n            if (!node.shallowLoaded) {\n                expandTimerId = window.setTimeout(() => {\n                    void triggerLoading(node).then(() => {\n                        expand();\n                    });\n                }, 1000);\n            }\n            else {\n                expandTimerId = window.setTimeout(() => {\n                    expand();\n                }, 1000);\n            }\n        }\n        // Dnd\n        function handleDragEnter({ event, node }) {\n            // node should be a tmNode\n            if (!props.draggable ||\n                props.disabled ||\n                isNodeDisabled(node, props.disabledField)) {\n                return;\n            }\n            handleDragOver({ event, node }, false);\n            doDragEnter({ event, node: node.rawNode });\n        }\n        function handleDragLeave({ event, node }) {\n            if (!props.draggable ||\n                props.disabled ||\n                isNodeDisabled(node, props.disabledField)) {\n                return;\n            }\n            doDragLeave({ event, node: node.rawNode });\n        }\n        function handleDragLeaveTree(e) {\n            if (e.target !== e.currentTarget)\n                return;\n            resetDropState();\n        }\n        // Dragend is ok, we don't need to add global listener to reset drag status\n        function handleDragEnd({ event, node }) {\n            resetDndState();\n            if (!props.draggable ||\n                props.disabled ||\n                isNodeDisabled(node, props.disabledField)) {\n                return;\n            }\n            doDragEnd({ event, node: node.rawNode });\n        }\n        function handleDragStart({ event, node }) {\n            var _a;\n            if (!props.draggable ||\n                props.disabled ||\n                isNodeDisabled(node, props.disabledField)) {\n                return;\n            }\n            // Most of time, the image will block user's view\n            emptyImage && ((_a = event.dataTransfer) === null || _a === void 0 ? void 0 : _a.setDragImage(emptyImage, 0, 0));\n            dragStartX = event.clientX;\n            draggingNodeRef.value = node;\n            doDragStart({ event, node: node.rawNode });\n        }\n        function handleDragOver({ event, node }, emit = true) {\n            var _a;\n            if (!props.draggable ||\n                props.disabled ||\n                isNodeDisabled(node, props.disabledField)) {\n                return;\n            }\n            const { value: draggingNode } = draggingNodeRef;\n            if (!draggingNode)\n                return;\n            const { allowDrop, indent } = props;\n            if (emit)\n                doDragOver({ event, node: node.rawNode });\n            // Update dropping node\n            const el = event.currentTarget;\n            const { height: elOffsetHeight, top: elClientTop } = el.getBoundingClientRect();\n            const eventOffsetY = event.clientY - elClientTop;\n            let mousePosition;\n            const allowDropInside = allowDrop({\n                node: node.rawNode,\n                dropPosition: 'inside',\n                phase: 'drag'\n            });\n            if (allowDropInside) {\n                if (eventOffsetY <= 8) {\n                    mousePosition = 'before';\n                }\n                else if (eventOffsetY >= elOffsetHeight - 8) {\n                    mousePosition = 'after';\n                }\n                else {\n                    mousePosition = 'inside';\n                }\n            }\n            else {\n                if (eventOffsetY <= elOffsetHeight / 2) {\n                    mousePosition = 'before';\n                }\n                else {\n                    mousePosition = 'after';\n                }\n            }\n            const { value: getFindex } = getFIndexRef;\n            /** determine the drop position and drop node */\n            /** the dropping node needn't to be the mouse hovering node! */\n            /**\n             * if there is something i've learned from implementing a complex\n             * drag & drop. that is never write unit test before you really figure\n             * out what behavior is exactly you want.\n             */\n            let finalDropNode;\n            let finalDropPosition;\n            const hoverNodeFIndex = getFindex(node.key);\n            if (hoverNodeFIndex === null) {\n                resetDropState();\n                return;\n            }\n            let mouseAtExpandedNonLeafNode = false;\n            if (mousePosition === 'inside') {\n                finalDropNode = node;\n                finalDropPosition = 'inside';\n            }\n            else {\n                if (mousePosition === 'before') {\n                    if (node.isFirstChild) {\n                        finalDropNode = node;\n                        finalDropPosition = 'before';\n                    }\n                    else {\n                        finalDropNode = fNodesRef.value[hoverNodeFIndex - 1];\n                        finalDropPosition = 'after';\n                    }\n                }\n                else {\n                    finalDropNode = node;\n                    finalDropPosition = 'after';\n                }\n            }\n            // If the node is non-leaf and it is expanded, we don't allow it to\n            // drop after it and change it to drop before its next view sibling\n            if (!finalDropNode.isLeaf &&\n                mergedExpandedKeysRef.value.includes(finalDropNode.key)) {\n                mouseAtExpandedNonLeafNode = true;\n                if (finalDropPosition === 'after') {\n                    finalDropNode = fNodesRef.value[hoverNodeFIndex + 1];\n                    if (!finalDropNode) {\n                        // maybe there is no next view sibling when non-leaf node has no\n                        // children and it is the last node in the tree\n                        finalDropNode = node;\n                        finalDropPosition = 'inside';\n                    }\n                    else {\n                        finalDropPosition = 'before';\n                    }\n                }\n            }\n            const droppingMouseNode = finalDropNode;\n            droppingMouseNodeRef.value = droppingMouseNode;\n            // This is a speacial case, user is dragging a last child itself, so we\n            // only view it as they are trying to drop after it.\n            // There are some relevant codes in bailout 1's child branch.\n            // Also, the expand bailout should have a high priority. If it's non-leaf\n            // node and expanded, keep its origin drop position\n            if (!mouseAtExpandedNonLeafNode &&\n                draggingNode.isLastChild &&\n                draggingNode.key === finalDropNode.key) {\n                finalDropPosition = 'after';\n            }\n            if (finalDropPosition === 'after') {\n                let offset = dragStartX - event.clientX; // drag left => > 0\n                let offsetLevel = 0;\n                while (offset >= indent / 2 && // divide by 2 to make it easier to trigger\n                    finalDropNode.parent !== null &&\n                    finalDropNode.isLastChild &&\n                    offsetLevel < 1) {\n                    offset -= indent;\n                    offsetLevel += 1;\n                    finalDropNode = finalDropNode.parent;\n                }\n                droppingOffsetLevelRef.value = offsetLevel;\n            }\n            else {\n                droppingOffsetLevelRef.value = 0;\n            }\n            // Bailout 1\n            // Drag self into self\n            // Drag it into direct parent\n            if (draggingNode.contains(finalDropNode) ||\n                (finalDropPosition === 'inside' &&\n                    ((_a = draggingNode.parent) === null || _a === void 0 ? void 0 : _a.key) === finalDropNode.key)) {\n                if (draggingNode.key === droppingMouseNode.key &&\n                    draggingNode.key === finalDropNode.key) {\n                    // This is special case that we want ui to show a mark to guide user\n                    // to start dragging. Nor they will think nothing happens.\n                    // However this is an invalid drop, we need to guard it inside\n                    // handleDrop\n                }\n                else {\n                    resetDropState();\n                    return;\n                }\n            }\n            // Bailout 3\n            if (!allowDrop({\n                node: finalDropNode.rawNode,\n                dropPosition: finalDropPosition,\n                phase: 'drag'\n            })) {\n                resetDropState();\n                return;\n            }\n            if (draggingNode.key === finalDropNode.key) {\n                // don't expand when drag on itself\n                resetDragExpandState();\n            }\n            else {\n                if (nodeKeyToBeExpanded !== finalDropNode.key) {\n                    if (finalDropPosition === 'inside') {\n                        if (props.expandOnDragenter) {\n                            expandDragEnterNode(finalDropNode);\n                            // Bailout 4\n                            // not try to loading\n                            if (!finalDropNode.shallowLoaded &&\n                                nodeKeyToBeExpanded !== finalDropNode.key) {\n                                resetDndState();\n                                return;\n                            }\n                        }\n                        else {\n                            // Bailout 5\n                            // never expands on drag\n                            if (!finalDropNode.shallowLoaded) {\n                                resetDndState();\n                                return;\n                            }\n                        }\n                    }\n                    else {\n                        resetDragExpandState();\n                    }\n                }\n                else {\n                    if (finalDropPosition !== 'inside') {\n                        resetDragExpandState();\n                    }\n                }\n            }\n            droppingPositionRef.value = finalDropPosition;\n            droppingNodeRef.value = finalDropNode;\n        }\n        function handleDrop({ event, node, dropPosition }) {\n            if (!props.draggable ||\n                props.disabled ||\n                isNodeDisabled(node, props.disabledField)) {\n                return;\n            }\n            const { value: draggingNode } = draggingNodeRef;\n            const { value: droppingNode } = droppingNodeRef;\n            const { value: droppingPosition } = droppingPositionRef;\n            if (!draggingNode || !droppingNode || !droppingPosition) {\n                return;\n            }\n            // Bailout 1\n            if (!props.allowDrop({\n                node: droppingNode.rawNode,\n                dropPosition: droppingPosition,\n                phase: 'drag'\n            })) {\n                return;\n            }\n            // Bailout 2\n            // This is a special case to guard since we want ui to show the status\n            // but not to emit a event\n            if (draggingNode.key === droppingNode.key) {\n                return;\n            }\n            // Bailout 3\n            // insert before its next node\n            // insert after its prev node\n            if (droppingPosition === 'before') {\n                const nextNode = draggingNode.getNext({ includeDisabled: true });\n                if (nextNode) {\n                    if (nextNode.key === droppingNode.key) {\n                        resetDropState();\n                        return;\n                    }\n                }\n            }\n            if (droppingPosition === 'after') {\n                const prevNode = draggingNode.getPrev({ includeDisabled: true });\n                if (prevNode) {\n                    if (prevNode.key === droppingNode.key) {\n                        resetDropState();\n                        return;\n                    }\n                }\n            }\n            doDrop({\n                event,\n                node: droppingNode.rawNode,\n                dragNode: draggingNode.rawNode,\n                dropPosition\n            });\n            resetDndState();\n        }\n        function handleScroll() {\n            syncScrollbar();\n        }\n        function handleResize() {\n            syncScrollbar();\n        }\n        function handleFocusout(e) {\n            var _a;\n            if (props.virtualScroll || props.internalScrollable) {\n                const { value: scrollbarInst } = scrollbarInstRef;\n                if ((_a = scrollbarInst === null || scrollbarInst === void 0 ? void 0 : scrollbarInst.containerRef) === null || _a === void 0 ? void 0 : _a.contains(e.relatedTarget)) {\n                    return;\n                }\n                pendingNodeKeyRef.value = null;\n            }\n            else {\n                const { value: selfEl } = selfElRef;\n                if (selfEl === null || selfEl === void 0 ? void 0 : selfEl.contains(e.relatedTarget))\n                    return;\n                pendingNodeKeyRef.value = null;\n            }\n        }\n        watch(pendingNodeKeyRef, (value) => {\n            var _a, _b;\n            if (value === null)\n                return;\n            if (props.virtualScroll) {\n                (_a = virtualListInstRef.value) === null || _a === void 0 ? void 0 : _a.scrollTo({ key: value });\n            }\n            else if (props.internalScrollable) {\n                const { value: scrollbarInst } = scrollbarInstRef;\n                if (scrollbarInst === null)\n                    return;\n                const targetEl = (_b = scrollbarInst.contentRef) === null || _b === void 0 ? void 0 : _b.querySelector(`[data-key=\"${createDataKey(value)}\"]`);\n                if (!targetEl)\n                    return;\n                scrollbarInst.scrollTo({\n                    el: targetEl\n                });\n            }\n        });\n        provide(treeInjectionKey, {\n            loadingKeysRef,\n            highlightKeySetRef: mergedHighlightKeySetRef,\n            displayedCheckedKeysRef,\n            displayedIndeterminateKeysRef,\n            mergedSelectedKeysRef,\n            mergedExpandedKeysRef,\n            mergedThemeRef: themeRef,\n            mergedCheckStrategyRef,\n            nodePropsRef: toRef(props, 'nodeProps'),\n            disabledRef: toRef(props, 'disabled'),\n            checkableRef: toRef(props, 'checkable'),\n            selectableRef: toRef(props, 'selectable'),\n            expandOnClickRef: toRef(props, 'expandOnClick'),\n            onLoadRef: toRef(props, 'onLoad'),\n            draggableRef: toRef(props, 'draggable'),\n            blockLineRef: toRef(props, 'blockLine'),\n            indentRef: toRef(props, 'indent'),\n            cascadeRef: toRef(props, 'cascade'),\n            checkOnClickRef: toRef(props, 'checkOnClick'),\n            checkboxPlacementRef: props.checkboxPlacement,\n            droppingMouseNodeRef,\n            droppingNodeParentRef,\n            draggingNodeRef,\n            droppingPositionRef,\n            droppingOffsetLevelRef,\n            fNodesRef,\n            pendingNodeKeyRef,\n            showLineRef: toRef(props, 'showLine'),\n            disabledFieldRef: toRef(props, 'disabledField'),\n            internalScrollableRef: toRef(props, 'internalScrollable'),\n            internalCheckboxFocusableRef: toRef(props, 'internalCheckboxFocusable'),\n            internalTreeSelect: props.internalTreeSelect,\n            renderLabelRef: toRef(props, 'renderLabel'),\n            renderPrefixRef: toRef(props, 'renderPrefix'),\n            renderSuffixRef: toRef(props, 'renderSuffix'),\n            renderSwitcherIconRef: toRef(props, 'renderSwitcherIcon'),\n            labelFieldRef: toRef(props, 'labelField'),\n            multipleRef: toRef(props, 'multiple'),\n            handleSwitcherClick,\n            handleDragEnd,\n            handleDragEnter,\n            handleDragLeave,\n            handleDragStart,\n            handleDrop,\n            handleDragOver,\n            handleSelect,\n            handleCheck\n        });\n        function scrollTo(options) {\n            var _a;\n            (_a = virtualListInstRef.value) === null || _a === void 0 ? void 0 : _a.scrollTo(options);\n        }\n        const exposedMethods = {\n            handleKeydown,\n            scrollTo,\n            getCheckedData: () => {\n                if (!props.checkable)\n                    return { keys: [], options: [] };\n                const { checkedKeys } = checkedStatusRef.value;\n                return {\n                    keys: checkedKeys,\n                    options: getOptionsByKeys(checkedKeys)\n                };\n            },\n            getIndeterminateData: () => {\n                if (!props.checkable)\n                    return { keys: [], options: [] };\n                const { indeterminateKeys } = checkedStatusRef.value;\n                return {\n                    keys: indeterminateKeys,\n                    options: getOptionsByKeys(indeterminateKeys)\n                };\n            }\n        };\n        const cssVarsRef = computed(() => {\n            const { common: { cubicBezierEaseInOut }, self: { fontSize, nodeBorderRadius, nodeColorHover, nodeColorPressed, nodeColorActive, arrowColor, loadingColor, nodeTextColor, nodeTextColorDisabled, dropMarkColor, nodeWrapperPadding, nodeHeight, lineHeight } } = themeRef.value;\n            const lineOffsetTop = getPadding(nodeWrapperPadding, 'top');\n            const lineOffsetBottom = getPadding(nodeWrapperPadding, 'bottom');\n            const nodeContentHeight = pxfy(depx(nodeHeight) - depx(lineOffsetTop) - depx(lineOffsetBottom));\n            return {\n                '--n-arrow-color': arrowColor,\n                '--n-loading-color': loadingColor,\n                '--n-bezier': cubicBezierEaseInOut,\n                '--n-font-size': fontSize,\n                '--n-node-border-radius': nodeBorderRadius,\n                '--n-node-color-active': nodeColorActive,\n                '--n-node-color-hover': nodeColorHover,\n                '--n-node-color-pressed': nodeColorPressed,\n                '--n-node-text-color': nodeTextColor,\n                '--n-node-text-color-disabled': nodeTextColorDisabled,\n                '--n-drop-mark-color': dropMarkColor,\n                '--n-node-wrapper-padding': nodeWrapperPadding,\n                '--n-line-offset-top': `-${lineOffsetTop}`,\n                '--n-line-offset-bottom': `-${lineOffsetBottom}`,\n                '--n-node-content-height': nodeContentHeight,\n                '--n-line-height': lineHeight\n            };\n        });\n        const themeClassHandle = inlineThemeDisabled\n            ? useThemeClass('tree', undefined, cssVarsRef, props)\n            : undefined;\n        return Object.assign(Object.assign({}, exposedMethods), { mergedClsPrefix: mergedClsPrefixRef, mergedTheme: themeRef, rtlEnabled: rtlEnabledRef, fNodes: mergedFNodesRef, aip: aipRef, selfElRef,\n            virtualListInstRef,\n            scrollbarInstRef,\n            handleFocusout,\n            handleDragLeaveTree,\n            handleScroll,\n            getScrollContainer,\n            getScrollContent,\n            handleAfterEnter,\n            handleResize, cssVars: inlineThemeDisabled ? undefined : cssVarsRef, themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass, onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender });\n    },\n    render() {\n        var _a;\n        const { fNodes, internalRenderEmpty } = this;\n        if (!fNodes.length && internalRenderEmpty) {\n            return internalRenderEmpty();\n        }\n        const { mergedClsPrefix, blockNode, blockLine, draggable, disabled, internalFocusable, checkable, handleKeydown, rtlEnabled, handleFocusout, scrollbarProps } = this;\n        const mergedFocusable = internalFocusable && !disabled;\n        const tabindex = mergedFocusable ? '0' : undefined;\n        const treeClass = [\n            `${mergedClsPrefix}-tree`,\n            rtlEnabled && `${mergedClsPrefix}-tree--rtl`,\n            checkable && `${mergedClsPrefix}-tree--checkable`,\n            (blockLine || blockNode) && `${mergedClsPrefix}-tree--block-node`,\n            blockLine && `${mergedClsPrefix}-tree--block-line`\n        ];\n        const createNode = (tmNode) => {\n            return '__motion' in tmNode ? (h(MotionWrapper, { height: tmNode.height, nodes: tmNode.nodes, clsPrefix: mergedClsPrefix, mode: tmNode.mode, onAfterEnter: this.handleAfterEnter })) : (h(NTreeNode, { key: tmNode.key, tmNode: tmNode, clsPrefix: mergedClsPrefix }));\n        };\n        if (this.virtualScroll) {\n            const { mergedTheme, internalScrollablePadding } = this;\n            const padding = getPadding(internalScrollablePadding || '0');\n            return (h(NxScrollbar, Object.assign({}, scrollbarProps, { ref: \"scrollbarInstRef\", onDragleave: draggable ? this.handleDragLeaveTree : undefined, container: this.getScrollContainer, content: this.getScrollContent, class: treeClass, theme: mergedTheme.peers.Scrollbar, themeOverrides: mergedTheme.peerOverrides.Scrollbar, tabindex: tabindex, onKeydown: mergedFocusable ? handleKeydown : undefined, onFocusout: mergedFocusable ? handleFocusout : undefined }), {\n                default: () => {\n                    var _a;\n                    (_a = this.onRender) === null || _a === void 0 ? void 0 : _a.call(this);\n                    return (h(VVirtualList, { ref: \"virtualListInstRef\", items: this.fNodes, itemSize: depx(mergedTheme.self.nodeHeight), ignoreItemResize: this.aip, paddingTop: padding.top, paddingBottom: padding.bottom, class: this.themeClass, style: [\n                            this.cssVars,\n                            {\n                                paddingLeft: padding.left,\n                                paddingRight: padding.right\n                            }\n                        ], onScroll: this.handleScroll, onResize: this.handleResize, showScrollbar: false, itemResizable: true }, {\n                        default: ({ item }) => createNode(item)\n                    }));\n                }\n            }));\n        }\n        const { internalScrollable } = this;\n        treeClass.push(this.themeClass);\n        (_a = this.onRender) === null || _a === void 0 ? void 0 : _a.call(this);\n        if (internalScrollable) {\n            return (h(NxScrollbar, Object.assign({}, scrollbarProps, { class: treeClass, tabindex: tabindex, onKeydown: mergedFocusable ? handleKeydown : undefined, onFocusout: mergedFocusable ? handleFocusout : undefined, style: this.cssVars, contentStyle: { padding: this.internalScrollablePadding } }), {\n                default: () => (h(\"div\", { onDragleave: draggable ? this.handleDragLeaveTree : undefined, ref: \"selfElRef\" }, this.fNodes.map(createNode)))\n            }));\n        }\n        else {\n            return (h(\"div\", { class: treeClass, tabindex: tabindex, ref: \"selfElRef\", style: this.cssVars, onKeydown: mergedFocusable ? handleKeydown : undefined, onFocusout: mergedFocusable ? handleFocusout : undefined, onDragleave: draggable ? this.handleDragLeaveTree : undefined }, !fNodes.length\n                ? resolveSlot(this.$slots.empty, () => [\n                    h(NEmpty, { class: `${mergedClsPrefix}-tree__empty`, theme: this.mergedTheme.peers.Empty, themeOverrides: this.mergedTheme.peerOverrides.Empty })\n                ])\n                : fNodes.map(createNode)));\n        }\n    }\n});\n","import { inject, ref } from 'vue';\nimport { treeSelectInjectionKey } from '../../tree-select/src/interface';\nexport function useKeyboard({ props, fNodesRef, mergedExpandedKeysRef, mergedSelectedKeysRef, handleSelect, handleSwitcherClick }) {\n    const { value: mergedSelectedKeys } = mergedSelectedKeysRef;\n    // If it's used in tree-select, make it take over pending state\n    const treeSelectInjection = inject(treeSelectInjectionKey, null);\n    const pendingNodeKeyRef = treeSelectInjection\n        ? treeSelectInjection.pendingNodeKeyRef\n        : ref(mergedSelectedKeys.length\n            ? mergedSelectedKeys[mergedSelectedKeys.length - 1]\n            : null);\n    function handleKeydown(e) {\n        if (!props.keyboard)\n            return;\n        const { value: pendingNodeKey } = pendingNodeKeyRef;\n        if (pendingNodeKey === null) {\n            if (e.key === 'ArrowDown' || e.key === 'ArrowUp') {\n                e.preventDefault();\n            }\n            if (['ArrowDown', 'ArrowUp', 'ArrowLeft', 'ArrowRight'].includes(e.key)) {\n                if (pendingNodeKey === null) {\n                    const { value: fNodes } = fNodesRef;\n                    let fIndex = 0;\n                    while (fIndex < fNodes.length) {\n                        if (!fNodes[fIndex].disabled) {\n                            pendingNodeKeyRef.value = fNodes[fIndex].key;\n                            break;\n                        }\n                        fIndex += 1;\n                    }\n                }\n            }\n        }\n        else {\n            const { value: fNodes } = fNodesRef;\n            let fIndex = fNodes.findIndex((tmNode) => tmNode.key === pendingNodeKey);\n            if (!~fIndex)\n                return;\n            if (e.key === 'Enter') {\n                handleSelect(fNodes[fIndex]);\n            }\n            else if (e.key === 'ArrowDown') {\n                e.preventDefault();\n                fIndex += 1;\n                while (fIndex < fNodes.length) {\n                    if (!fNodes[fIndex].disabled) {\n                        pendingNodeKeyRef.value = fNodes[fIndex].key;\n                        break;\n                    }\n                    fIndex += 1;\n                }\n            }\n            else if (e.key === 'ArrowUp') {\n                e.preventDefault();\n                fIndex -= 1;\n                while (fIndex >= 0) {\n                    if (!fNodes[fIndex].disabled) {\n                        pendingNodeKeyRef.value = fNodes[fIndex].key;\n                        break;\n                    }\n                    fIndex -= 1;\n                }\n            }\n            else if (e.key === 'ArrowLeft') {\n                const pendingNode = fNodes[fIndex];\n                if (pendingNode.isLeaf ||\n                    !mergedExpandedKeysRef.value.includes(pendingNodeKey)) {\n                    const parentTmNode = pendingNode.getParent();\n                    if (parentTmNode) {\n                        pendingNodeKeyRef.value = parentTmNode.key;\n                    }\n                }\n                else {\n                    handleSwitcherClick(pendingNode);\n                }\n            }\n            else if (e.key === 'ArrowRight') {\n                const pendingNode = fNodes[fIndex];\n                if (pendingNode.isLeaf)\n                    return;\n                if (!mergedExpandedKeysRef.value.includes(pendingNodeKey)) {\n                    handleSwitcherClick(pendingNode);\n                }\n                else {\n                    // Tha same as ArrowDown\n                    fIndex += 1;\n                    while (fIndex < fNodes.length) {\n                        if (!fNodes[fIndex].disabled) {\n                            pendingNodeKeyRef.value = fNodes[fIndex].key;\n                            break;\n                        }\n                        fIndex += 1;\n                    }\n                }\n            }\n        }\n    }\n    return {\n        pendingNodeKeyRef,\n        handleKeydown\n    };\n}\n","import * as Cesium from 'cesium'\nimport type { InjectionKey, Ref } from 'vue'\n\nexport const viewerKey: InjectionKey<Ref<Cesium.Viewer>> = Symbol('mapViewer')\n","import { MapSourceType, MapSourceTypeEnum } from '@/common/map-base'\nimport CesiumSourceLoader from '@/helper/cesium-source-loader'\nimport { useMapStore } from '@/store/map'\n\nimport { viewerKey } from '../types'\nimport styles from './index.module.scss'\nimport SourceModal from './source-modal'\nimport { useResourceTree } from './use-resource-tree'\n\nexport default defineComponent({\n  name: 'ResourceTree',\n  setup() {\n    const mapStore = useMapStore()\n    const resourceModalRef = ref<typeof SourceModal | null>(null)\n    const { stateRef, nodeProps } = useResourceTree()\n\n    const mapViewer = inject(viewerKey)\n    const cesiumSourceLoader = new CesiumSourceLoader(mapViewer!.value)\n    mapStore.saveCesiumSourceLoader(cesiumSourceLoader)\n\n    const handleSelect = (key: string | number) => {\n      if (key === 'ADD') {\n        resourceModalRef.value!.openModal(stateRef.rightObj.key)\n      } else if (key === 'DELETE') {\n        deleteMapSource()\n      } else if (key === 'FLY_TO') {\n        flyToMapSource()\n      }\n\n      stateRef.showDropdown = false\n    }\n\n    const handleClickoutside = () => {\n      stateRef.showDropdown = false\n    }\n\n    /**\n     * \n     */\n    const loadMapSource = ({\n      type,\n      options\n    }: {\n      type: keyof typeof MapSourceType\n      options: any\n    }) => {\n      // \n      cesiumSourceLoader.addSource(type, options)\n\n      // \n      const parentNode = stateRef.treeData.find((t) => t.key === type)\n      parentNode?.children!.push({\n        label: options.name,\n        key: options.id,\n        isLeaf: true,\n        parentType: type\n      })\n    }\n\n    /**\n     * \n     */\n    const deleteMapSource = () => {\n      // \n      const { key, parentType } = stateRef.rightObj\n      cesiumSourceLoader.deleteSource(key as string, parentType as string)\n\n      // \n      const parentNode = stateRef.treeData.find((t) => t.key === parentType)\n      const index = parentNode?.children!.findIndex((c) => c.key === key)\n      if (!index || index < 0) return\n      parentNode?.children!.splice(index, 1)\n    }\n\n    /**\n     * \n     */\n    const flyToMapSource = () => {\n      const { key, parentType } = stateRef.rightObj\n      cesiumSourceLoader.flyTo(key as string, parentType as MapSourceTypeEnum)\n    }\n\n    return () => (\n      <div class={styles.resourceTree}>\n        <NTree\n          data={stateRef.treeData}\n          node-props={nodeProps}\n          checkable\n          expand-on-click\n          default-expand-all\n          selectable\n        />\n        <NDropdown\n          trigger='manual'\n          placement='bottom-start'\n          show={stateRef.showDropdown}\n          options={stateRef.options as any}\n          x={stateRef.x}\n          y={stateRef.y}\n          onSelect={handleSelect}\n          onClickoutside={handleClickoutside}\n        />\n        <SourceModal ref={resourceModalRef} onLoadMapSource={loadMapSource} />\n      </div>\n    )\n  }\n})\n"],"names":["createDataKey","key","SwitcherIcon","defineComponent","name","render","h","xmlns","viewBox","d","CheckMark","class","LineMark","checkboxGroupInjectionKey","createInjectionKey","style$1","c","cB","cM","cE","border","cursor","fill","iconSwitchTransition","left","top","display","insideModal","insidePopover","NCheckbox","props","Object","assign","useTheme","size","String","checked","type","Boolean","Number","default","defaultChecked","value","disabled","indeterminate","label","focusable","checkedValue","uncheckedValue","Function","Array","onUpdateChecked","privateInsideTable","onChange","setup","watchEffect","warnOnce","selfRef","ref","mergedClsPrefixRef","inlineThemeDisabled","mergedRtlRef","useConfig","formItem","useFormItem","mergedSize","NFormItem","NCheckboxGroup","mergedSizeRef","mergedDisabled","disabledRef","maxRef","max","checkedCountRef","renderedCheckedRef","minRef","min","mergedDisabledRef","inject","uncontrolledCheckedRef","controlledCheckedRef","toRef","mergedCheckedRef","useMergedState","useMemo","groupValueSet","valueSetRef","has","themeRef","style","checkboxLight","toggle","e","toggleCheckbox","_onUpdateCheck","nTriggerFormInput","nTriggerFormChange","nextChecked","call","exposedMethods","focus","_a","blur","rtlEnabledRef","useRtl","cssVarsRef","computed","common","cubicBezierEaseInOut","self","borderRadius","color","colorChecked","colorDisabled","colorTableHeader","colorTableHeaderModal","colorTableHeaderPopover","checkMarkColor","checkMarkColorDisabled","borderFocus","borderDisabled","borderChecked","boxShadowFocus","textColor","textColorDisabled","checkMarkColorDisabledChecked","colorDisabledChecked","borderDisabledChecked","labelPadding","labelLineHeight","labelFontWeight","createKey","fontSize","themeClassHandle","useThemeClass","rtlEnabled","mergedClsPrefix","renderedChecked","mergedTheme","labelId","createId","handleClick","handleKeyUp","handleKeyDown","preventDefault","cssVars","themeClass","onRender","$slots","this","labelNode","resolveWrappedSlot","children","id","tabindex","role","onKeyup","onKeydown","onClick","onMousedown","on","window","once","NIconSwitchTransition","treeSelectInjectionKey","treeInjectionKey","NTreeNodeSwitcher","clsPrefix","required","indent","expanded","selected","hide","loading","tmNode","renderSwitcherIconRef","width","NBaseLoading","radius","strokeWidth","renderSwitcherIcon","option","rawNode","NBaseIcon","NTreeNodeCheckbox","right","onCheck","handleUpdateValue","doCheck","mergedThemeRef","theme","peers","Checkbox","themeOverrides","peerOverrides","NTreeNodeContent","onDragstart","nodeProps","renderLabelRef","renderPrefixRef","renderSuffixRef","labelFieldRef","renderLabel","renderPrefix","renderSuffix","labelField","doClick","prefix","suffix","draggable","renderDropMark","position","offsetLevel","el","boxSizing","bottom","boxShadow","cssPosition","offsetLeft","height","backgroundColor","transformOrigin","transform","isNodeDisabled","node","disabledField","traverse","nodes","childrenField","callback","callbackAfter","forEach","keysWithFilter","pattern","keyField","filter","keys","Set","highlightKeySet","path","push","add","i","length","pop","expandedKeys","from","isBrowser","Image","src","NTreeNode","NTree","droppingNodeParentRef","droppingMouseNodeRef","draggingNodeRef","droppingPositionRef","droppingOffsetLevelRef","nodePropsRef","indentRef","blockLineRef","checkboxPlacementRef","checkOnClickRef","disabledFieldRef","showLineRef","checkboxDisabledRef","checkboxDisabled","nodeIsDisabledRef","resolvedNodePropsRef","contentInstRef","contentElRef","handleSwitcherClick","isLeaf","shallowLoaded","loadingKeysRef","onLoadRef","onLoad","then","finally","delete","onMounted","$el","selectableRef","internalTreeSelect","mergedCheckStrategyRef","multipleRef","cascadeRef","checkableRef","checkedRef","displayedCheckedKeysRef","includes","mergedCheckOnClickRef","checkable","checkOnClick","_handleClick","expandOnClick","expandOnClickRef","selectable","mergedCheckOnClick","happensIn","handleSelect","handleCheck","indentNodes","parent","isLastChild","reverse","repeat","level","showDropMark","draggingNode","droppingPosition","droppingMouseNode","showDropMarkAsParent","droppingNodeParent","pending","pendingNodeKeyRef","highlight","highlightKeySetRef","displayedIndeterminateKeysRef","mergedSelectedKeysRef","mergedExpandedKeysRef","internalScrollable","internalScrollableRef","draggableRef","blockLine","checkboxFocusable","internalCheckboxFocusableRef","droppingOffsetLevel","checkboxPlacement","showLine","handleDrop","event","dropPosition","handleDragStart","handleDragEnter","currentTarget","target","handleDragOver","handleDragEnd","handleDragLeave","handleLineClick","_b","handleContentClick","dragEventHandlers","onDragenter","onDragleave","onDragend","onDrop","onDragover","dataKey","checkboxOnRight","checkboxNode","MotionWrapper","mode","onAfterEnter","FadeInExpandTransition","appear","pxfy","map","TreeNode","iconSwitchTransitionNode","fadeInHeightExpandTransition","duration","cNotM","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","apply","treeSharedProps","allowCheckingNotLoaded","defaultExpandAll","defaultExpandedKeys","indeterminateKeys","onUpdateIndeterminateKeys","onUpdateExpandedKeys","__unplugin_components_0","accordion","showIrrelevantNodes","data","expandOnDragenter","cancelable","blockNode","checkedKeys","defaultCheckedKeys","selectedKeys","defaultSelectedKeys","multiple","cascade","scrollbarProps","allowDrop","animated","virtualScroll","watchProps","keyboard","getChildren","onUpdateCheckedKeys","onUpdateSelectedKeys","internalScrollablePadding","internalRenderEmpty","internalHighlightKeySet","internalUnifySelectCheck","internalCheckboxFocusable","internalFocusable","checkStrategy","leafOnly","treeLight","selfElRef","scrollbarInstRef","virtualListInstRef","mergedFilterRef","toLowerCase","filteredTreeInfoRef","tree","visitedTailKeys","visitedNonTailKeys","filteredTree","visit","t","n","build","sibs","isVisitedTail","isVisitedNonTail","clonedNode","filterTree","displayTreeMateRef","createTreeMate","getIsGroup","getKey","getDisabled","treeSelectInjection","dataTreeMateRef","dataTreeMate","uncontrolledCheckedKeysRef","controlledCheckedKeysRef","mergedCheckedKeysRef","checkedStatusRef","getCheckedKeys","allowNotLoaded","useMergedCheckStrategy","uncontrolledSelectedKeysRef","controlledSelectedKeysRef","uncontrolledExpandedKeysRef","initUncontrolledExpandedKeys","getNonLeafKeys","controlledExpandedKeysRef","fNodesRef","getFlattenedNodes","handleKeydown","mergedSelectedKeys","pendingNodeKey","fNodes","fIndex","findIndex","pendingNode","parentTmNode","getParent","useKeyboard","expandTimerId","nodeKeyToBeExpanded","uncontrolledHighlightKeySetRef","controlledHighlightKeySetRef","mergedHighlightKeySetRef","expandedNonLoadingKeysRef","dragStartX","droppingNodeRef","droppingNode","watch","clear","deep","expandAnimationDisabled","disableExpandAnimationForOneTick","nextTick","memoizedExpandedKeys","triggerLoading","warn","loadingKeys","loadError","oldValue","expandedKeysAfterChange","doUpdateExpandedKeys","getOptionsByKeys","action","displayTreeMate","getNode","aipRef","afNodesRef","prevValue","syncScrollbar","nodeHeight","depx","prevVSet","addedKey","removedKey","expandedKey","currentVSet","viewportHeight","listElRef","offsetHeight","viewportItemCount","Math","ceil","baseExpandedKeys","expandedNodeIndex","expandedChildren","flatten","splice","__motion","slice","collapsedNodeIndex","collapsedNodeChildren","collapsedChildren","getFIndexRef","createIndexGetter","mergedFNodesRef","scrollbarInst","sync","meta","_onUpdateExpandedKeys","doUpdateCheckedKeys","_onUpdateCheckedKeys","doUpdateSelectedKeys","_onUpdateSelectedKeys","resetDndState","resetDropState","resetDragExpandState","clearTimeout","checkedAction","_onUpdateIndeterminateKeys","doUpdateIndeterminateKeys","mergedExpandedKeys","index","expandNodeId","nodeToBeExpanded","nextKeys","siblingKeySet","siblings","concat","toggleExpand","emit","info","doDragOver","elOffsetHeight","elClientTop","getBoundingClientRect","eventOffsetY","clientY","mousePosition","phase","getFindex","finalDropNode","finalDropPosition","hoverNodeFIndex","mouseAtExpandedNonLeafNode","isFirstChild","offset","clientX","contains","expand","setTimeout","expandDragEnterNode","scrollTo","targetEl","contentRef","querySelector","provide","doDragEnd","doDragEnter","doDragLeave","doDragStart","nextNode","getNext","includeDisabled","prevNode","getPrev","doDrop","dragNode","options","getCheckedData","getIndeterminateData","nodeBorderRadius","nodeColorHover","nodeColorPressed","nodeColorActive","arrowColor","loadingColor","nodeTextColor","nodeTextColorDisabled","dropMarkColor","nodeWrapperPadding","lineHeight","lineOffsetTop","getPadding","lineOffsetBottom","aip","handleFocusout","containerRef","relatedTarget","selfEl","handleDragLeaveTree","handleScroll","getScrollContainer","getScrollContent","itemsElRef","handleAfterEnter","handleResize","mergedFocusable","treeClass","createNode","padding","NxScrollbar","container","content","Scrollbar","onFocusout","VVirtualList","items","itemSize","ignoreItemResize","paddingTop","paddingBottom","paddingLeft","paddingRight","onScroll","onResize","showScrollbar","itemResizable","item","contentStyle","resolveSlot","empty","NEmpty","Empty","viewerKey","Symbol","ResourceTree","mapStore","useMapStore","resourceModalRef","mapViewer","cesiumSourceLoader","parentNode","stateRef","treeData","find","parentType","_createVNode","styles","_resolveComponent","trigger","placement","onSelect"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]}