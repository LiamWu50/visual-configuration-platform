{"version":3,"file":"Form-JBtvXfpy.js","sources":["../../../node_modules/naive-ui/es/form/src/styles/form.cssr.mjs","../../../node_modules/naive-ui/es/form/src/Form.mjs"],"sourcesContent":["import { c, cB, cM } from \"../../../_utils/cssr/index.mjs\";\nexport default cB('form', [cM('inline', `\n width: 100%;\n display: inline-flex;\n align-items: flex-start;\n align-content: space-around;\n `, [cB('form-item', {\n  width: 'auto',\n  marginRight: '18px'\n}, [c('&:last-child', {\n  marginRight: 0\n})])])]);","var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nimport { h, defineComponent, provide, ref } from 'vue';\nimport { useConfig, useTheme } from \"../../_mixins/index.mjs\";\nimport { formLight } from \"../styles/index.mjs\";\nimport style from \"./styles/form.cssr.mjs\";\nimport { keysOf } from \"../../_utils/index.mjs\";\nimport { formInjectionKey, formItemInstsInjectionKey } from \"./context.mjs\";\nexport const formProps = Object.assign(Object.assign({}, useTheme.props), {\n  inline: Boolean,\n  labelWidth: [Number, String],\n  labelAlign: String,\n  labelPlacement: {\n    type: String,\n    default: 'top'\n  },\n  model: {\n    type: Object,\n    default: () => {}\n  },\n  rules: Object,\n  disabled: Boolean,\n  size: String,\n  showRequireMark: {\n    type: Boolean,\n    default: undefined\n  },\n  requireMarkPlacement: String,\n  showFeedback: {\n    type: Boolean,\n    default: true\n  },\n  onSubmit: {\n    type: Function,\n    default: e => {\n      e.preventDefault();\n    }\n  },\n  showLabel: {\n    type: Boolean,\n    default: undefined\n  },\n  validateMessages: Object\n});\nexport default defineComponent({\n  name: 'Form',\n  props: formProps,\n  setup(props) {\n    const {\n      mergedClsPrefixRef\n    } = useConfig(props);\n    useTheme('Form', '-form', style, formLight, props, mergedClsPrefixRef);\n    // from path to form-item\n    const formItems = {};\n    // for label-width = 'auto'\n    const maxChildLabelWidthRef = ref(undefined);\n    const deriveMaxChildLabelWidth = currentWidth => {\n      const currentMaxChildLabelWidth = maxChildLabelWidthRef.value;\n      if (currentMaxChildLabelWidth === undefined || currentWidth >= currentMaxChildLabelWidth) {\n        maxChildLabelWidthRef.value = currentWidth;\n      }\n    };\n    function validate(validateCallback, shouldRuleBeApplied = () => true) {\n      return __awaiter(this, void 0, void 0, function* () {\n        return yield new Promise((resolve, reject) => {\n          const formItemValidationPromises = [];\n          for (const key of keysOf(formItems)) {\n            const formItemInstances = formItems[key];\n            for (const formItemInstance of formItemInstances) {\n              if (formItemInstance.path) {\n                formItemValidationPromises.push(formItemInstance.internalValidate(null, shouldRuleBeApplied));\n              }\n            }\n          }\n          void Promise.all(formItemValidationPromises).then(results => {\n            const formInvalid = results.some(result => !result.valid);\n            const errors = [];\n            const warnings = [];\n            results.forEach(result => {\n              var _a, _b;\n              if ((_a = result.errors) === null || _a === void 0 ? void 0 : _a.length) {\n                errors.push(result.errors);\n              }\n              if ((_b = result.warnings) === null || _b === void 0 ? void 0 : _b.length) {\n                warnings.push(result.warnings);\n              }\n            });\n            if (validateCallback) {\n              validateCallback(errors.length ? errors : undefined, {\n                warnings: warnings.length ? warnings : undefined\n              });\n            }\n            if (formInvalid) {\n              reject(errors.length ? errors : undefined);\n            } else {\n              resolve({\n                warnings: warnings.length ? warnings : undefined\n              });\n            }\n          });\n        });\n      });\n    }\n    function restoreValidation() {\n      for (const key of keysOf(formItems)) {\n        const formItemInstances = formItems[key];\n        for (const formItemInstance of formItemInstances) {\n          formItemInstance.restoreValidation();\n        }\n      }\n    }\n    provide(formInjectionKey, {\n      props,\n      maxChildLabelWidthRef,\n      deriveMaxChildLabelWidth\n    });\n    provide(formItemInstsInjectionKey, {\n      formItems\n    });\n    const formExposedMethod = {\n      validate,\n      restoreValidation\n    };\n    return Object.assign(formExposedMethod, {\n      mergedClsPrefix: mergedClsPrefixRef\n    });\n  },\n  render() {\n    const {\n      mergedClsPrefix\n    } = this;\n    return h(\"form\", {\n      class: [`${mergedClsPrefix}-form`, this.inline && `${mergedClsPrefix}-form--inline`],\n      onSubmit: this.onSubmit\n    }, this.$slots);\n  }\n});"],"names":["style","cB","cM","width","marginRight","c","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__unplugin_components_1","defineComponent","name","props","Object","assign","useTheme","inline","Boolean","labelWidth","Number","String","labelAlign","labelPlacement","type","default","model","rules","disabled","size","showRequireMark","requireMarkPlacement","showFeedback","onSubmit","Function","preventDefault","showLabel","validateMessages","setup","mergedClsPrefixRef","useConfig","formLight","formItems","maxChildLabelWidthRef","ref","provide","formInjectionKey","deriveMaxChildLabelWidth","currentWidth","currentMaxChildLabelWidth","formItemInstsInjectionKey","formExposedMethod","validate","validateCallback","shouldRuleBeApplied","this","formItemValidationPromises","key","keysOf","formItemInstances","formItemInstance","path","push","internalValidate","all","results","formInvalid","some","valid","errors","warnings","forEach","_a","_b","length","restoreValidation","mergedClsPrefix","render","h","class","$slots"],"mappings":"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","x_google_ignoreList":[0,1]}