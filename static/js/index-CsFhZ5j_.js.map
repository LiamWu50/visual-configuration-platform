{"version":3,"file":"index-CsFhZ5j_.js","sources":["../../../src/store/area-select/index.ts","../../../src/components/Editor/AreaSelect/index.tsx","../../../src/utils/event-emitter.ts","../../../src/components/Editor/AuxiliaryLine/index.tsx","../../../src/components/Editor/BoundBox/index.tsx","../../../src/components/Editor/BoundBox/use-boundbox.ts","../../../src/components/Editor/ContextMenu/use-context-menu.ts","../../../src/components/Editor/hooks/use-compose.ts","../../../src/components/Editor/ContextMenu/index.tsx","../../../src/components/Editor/hooks/use-mouse-event.ts","../../../src/components/Editor/hooks/use-group.ts","../../../node_modules/vue3-sketch-ruler/lib/index.mjs","../../../src/assets/images/editor/eye.png","../../../src/assets/images/editor/eyeOffSharp.png","../../../src/components/Editor/SketchRuler/index.tsx","../../../src/components/Editor/index.tsx","../../../src/views/design-space/chart/container/index.tsx","../../../src/views/design-space/chart/container/use-container.ts"],"sourcesContent":["import { Primitive } from '@/primitives/primitive'\nimport { PrimitiveStyle } from '@/primitives/types'\n\nexport const useAreaSelectStore = defineStore('areaSelect', () => {\n  const groupStyle = ref<PrimitiveStyle | null>(null)\n  const selectedPrimitives = ref<Primitive[]>([])\n  const areaSelectVisible = ref(false)\n\n  /**\n   * 保存框选中的 primitive 以及包围框的样式\n   * @param style  包围和样式\n   * @param primitives 选中的 primitive\n   */\n  const setAreaSelectOptions = (\n    style: PrimitiveStyle | null,\n    primitives: Primitive[]\n  ) => {\n    groupStyle.value = style\n    selectedPrimitives.value = primitives\n  }\n\n  /**\n   * 清除selectedPrimitives\n   */\n  const clearPrimitives = () => {\n    selectedPrimitives.value = []\n  }\n\n  /**\n   * 设置包围盒可见性\n   * @param visible Boolean\n   */\n  const setAreaSelectVisible = (visible: boolean) => {\n    areaSelectVisible.value = visible\n  }\n\n  return {\n    groupStyle,\n    selectedPrimitives,\n    areaSelectVisible,\n    clearPrimitives,\n    setAreaSelectOptions,\n    setAreaSelectVisible\n  }\n})\n","import styles from './index.module.scss'\n\nexport default defineComponent({\n  name: 'AreaSelect',\n  props: {\n    options: {\n      type: Object,\n      default: () => {}\n    }\n  },\n  setup(props) {\n    return {\n      style: computed(() => ({\n        left: props.options.start.x + 'px',\n        top: props.options.start.y + 'px',\n        width: props.options.width + 'px',\n        height: props.options.height + 'px'\n      }))\n    }\n  },\n  render() {\n    return <div style={this.style} class={styles.areaSelect}></div>\n  }\n})\n","class EventEmitter {\n  private events: Record<string, Function[]> = {}\n\n  // 监听事件\n  on(eventName: string, callback: Function) {\n    if (!this.events[eventName]) {\n      this.events[eventName] = []\n    }\n    if (!this.events[eventName].includes(callback)) {\n      this.events[eventName].push(callback)\n    }\n  }\n\n  // 取消监听事件\n  off(eventName: string, callback: Function) {\n    const eventCallbacks = this.events[eventName]\n    if (eventCallbacks) {\n      this.events[eventName] = eventCallbacks.filter(\n        (item) => item !== callback\n      )\n    }\n  }\n\n  // 触发事件\n  emit(eventName: string, arg?: any) {\n    const eventCallbacks = this.events[eventName]\n    if (eventCallbacks && eventCallbacks.length > 0) {\n      for (const callback of eventCallbacks) {\n        callback(arg)\n      }\n    } else {\n      console.log(`no listener for event: ${eventName}`)\n    }\n  }\n\n  // 只监听一次事件\n  once(eventName: string, callback: Function) {\n    const onceCallback = (arg: any) => {\n      callback(arg)\n      this.off(eventName, onceCallback)\n    }\n    this.on(eventName, onceCallback)\n  }\n}\n\nexport default new EventEmitter()\n","// 导入类型和工具函数\nimport type { Location } from '@/primitives/types'\nimport { useEditorStore } from '@/store/editor'\nimport eventEmitter from '@/utils/event-emitter'\nimport { calcPrimitiveAxis } from '@/utils/primitive'\n\nimport styles from './index.module.scss'\n\n// 定义一些类型和常量\nexport type StyleObject = {\n  [key: string]: any\n}\n\ninterface LineStatus {\n  [key: string]: boolean\n}\n\ntype Condition = Record<\n  'isNearly' | 'lineNode' | 'line' | 'dragShift' | 'lineShift',\n  any\n>\n\ntype RecordWithAnyKey<T> = {\n  [key: string]: T\n}\n\nexport default defineComponent({\n  name: 'AuxiliaryLine',\n  setup() {\n    const editorStore = useEditorStore()\n    const lineElementsRef = ref<(HTMLElement | null)[]>([])\n    const LINE_NAMES = ['xt', 'xc', 'xb', 'yl', 'yc', 'yr']\n    const NEAR_THRESHOLD = ref<number>(3)\n    const lineStatus = reactive<LineStatus>({\n      xt: false,\n      xc: false,\n      xb: false,\n      yl: false,\n      yc: false,\n      yr: false\n    })\n\n    const setLineElementRef = (element: any) => {\n      lineElementsRef.value.push(element)\n    }\n\n    // 隐藏辅助线\n    const hideLines = () => {\n      Object.keys(lineStatus).forEach((line) => {\n        lineStatus[line] = false\n      })\n    }\n\n    const showLines = (isDownward: boolean, isRightward: boolean) => {\n      const { primitives } = editorStore\n      const currentPrimitive = editorStore.curPrimitive\n      if (!currentPrimitive) return\n\n      const {\n        top: theTop,\n        left: theLeft,\n        right: theRight,\n        bottom: theBottom\n      }: Location = calcPrimitiveAxis(currentPrimitive.style)\n\n      const currentPrimitiveHalfWidth = (theRight - theLeft) / 2\n      const currentPrimitiveHalfHeight = (theBottom - theTop) / 2\n\n      hideLines()\n      primitives.forEach((primitive) => {\n        if (primitive == currentPrimitive) return\n\n        const primitiveStyle = calcPrimitiveAxis(primitive.style)\n        const { top, left, bottom, right } = primitiveStyle\n        const primitiveHalfWidth = (right - left!) / 2\n        const primitiveHalfHeight = (bottom - top!) / 2\n\n        const conditions: RecordWithAnyKey<Condition[]> = {\n          top: [\n            {\n              isNearly: isNearly(theTop, top),\n              lineNode: lineElementsRef.value[0], // xt\n              line: 'xt',\n              dragShift: top,\n              lineShift: top\n            },\n            {\n              isNearly: isNearly(theBottom, top),\n              lineNode: lineElementsRef.value[0], // xt\n              line: 'xt',\n              dragShift: top - (theBottom - theTop || 0),\n              lineShift: top\n            },\n            {\n              // 组件与拖拽节点的中间是否对齐\n              isNearly: isNearly(\n                (theTop || 0) + currentPrimitiveHalfHeight,\n                top + primitiveHalfHeight\n              ),\n              lineNode: lineElementsRef.value[1], // xc\n              line: 'xc',\n              dragShift: top + primitiveHalfHeight - currentPrimitiveHalfHeight,\n              lineShift: top + primitiveHalfHeight\n            },\n            {\n              isNearly: isNearly(theTop, bottom),\n              lineNode: lineElementsRef.value[2], // xb\n              line: 'xb',\n              dragShift: bottom,\n              lineShift: bottom\n            },\n            {\n              isNearly: isNearly(theBottom, bottom),\n              lineNode: lineElementsRef.value[2], // xb\n              line: 'xb',\n              dragShift: bottom - (theBottom - theTop || 0),\n              lineShift: bottom\n            }\n          ],\n          left: [\n            {\n              isNearly: isNearly(theLeft, left),\n              lineNode: lineElementsRef.value[3], // yl\n              line: 'yl',\n              dragShift: left,\n              lineShift: left\n            },\n            {\n              isNearly: isNearly(theRight, left),\n              lineNode: lineElementsRef.value[3], // yl\n              line: 'yl',\n              dragShift: left - (theRight - theLeft || 0),\n              lineShift: left\n            },\n            {\n              // 组件与拖拽节点的中间是否对齐\n              isNearly: isNearly(\n                (theLeft || 0) + currentPrimitiveHalfWidth,\n                left + primitiveHalfWidth\n              ),\n              lineNode: lineElementsRef.value[4], // yc\n              line: 'yc',\n              dragShift: left + primitiveHalfWidth - currentPrimitiveHalfWidth,\n              lineShift: left + primitiveHalfWidth\n            },\n            {\n              isNearly: isNearly(theLeft, right),\n              lineNode: lineElementsRef.value[5], // yr\n              line: 'yr',\n              dragShift: right,\n              lineShift: right\n            },\n            {\n              isNearly: isNearly(theRight, right),\n              lineNode: lineElementsRef.value[5], // yr\n              line: 'yr',\n              dragShift: right - (theRight - theLeft || 0),\n              lineShift: right\n            }\n          ]\n        }\n\n        const needToShow: string[] = []\n\n        Object.keys(conditions).forEach((key) => {\n          // 遍历符合的条件并处理\n          conditions[key].forEach((condition: Condition) => {\n            if (!condition.isNearly) return\n            // 修改当前组件位移\n            currentPrimitive.updateStyleByKey(key, condition.dragShift)\n            condition.lineNode.style[key] = `${condition.lineShift}px`\n            needToShow.push(condition.line)\n          })\n        })\n\n        // 同一方向上同时显示一条线可能不太美观，因此采取选择逻辑\n        chooseTheTrueLine(needToShow, isDownward, isRightward)\n      })\n    }\n\n    const chooseTheTrueLine = (\n      needToShow: string[],\n      isDownward: boolean,\n      isRightward: boolean\n    ) => {\n      // 根据鼠标移动方向决定显示哪条线\n      if (isRightward) {\n        if (needToShow.includes('yr')) {\n          lineStatus.yr = true\n        } else if (needToShow.includes('yc')) {\n          lineStatus.yc = true\n        } else if (needToShow.includes('yl')) {\n          lineStatus.yl = true\n        }\n      } else {\n        if (needToShow.includes('yl')) {\n          lineStatus.yl = true\n        } else if (needToShow.includes('yc')) {\n          lineStatus.yc = true\n        } else if (needToShow.includes('yr')) {\n          lineStatus.yr = true\n        }\n      }\n\n      if (isDownward) {\n        if (needToShow.includes('xb')) {\n          lineStatus.xb = true\n        } else if (needToShow.includes('xc')) {\n          lineStatus.xc = true\n        } else if (needToShow.includes('xt')) {\n          lineStatus.xt = true\n        }\n      } else {\n        if (needToShow.includes('xt')) {\n          lineStatus.xt = true\n        } else if (needToShow.includes('xc')) {\n          lineStatus.xc = true\n        } else if (needToShow.includes('xb')) {\n          lineStatus.xb = true\n        }\n      }\n    }\n\n    const isNearly = (dragValue: number, targetValue: number) =>\n      Math.abs(dragValue - targetValue) <= NEAR_THRESHOLD.value\n\n    watchEffect(() => {\n      // 监听事件\n      eventEmitter.on('move', ({ isDownward, isRightward }: any) => {\n        showLines(isDownward, isRightward)\n      })\n      eventEmitter.on('unmove', () => {\n        hideLines()\n      })\n      showLines(false, false)\n    })\n\n    return () => (\n      // 渲染线条\n      <div class={styles.markLine}>\n        {LINE_NAMES.map((lineName) => (\n          <div\n            key={lineName}\n            v-show={lineStatus[lineName]}\n            ref={setLineElementRef}\n            class={`${styles.line} ${\n              lineName.includes('x') ? styles.xline : styles.yline\n            }`}\n          ></div>\n        ))}\n      </div>\n    )\n  }\n})\n","import { ceil } from 'lodash'\nimport { type PropType } from 'vue'\n\nimport { useEditorScale } from '@/hooks/use-editor-scale'\nimport { Primitive } from '@/primitives/primitive'\nimport { PrimitiveStyle } from '@/primitives/types'\nimport { useAreaSelectStore } from '@/store/area-select/index'\nimport { useEditorStore } from '@/store/editor/index'\nimport eventEmitter from '@/utils/event-emitter'\nimport { mod360 } from '@/utils/translate'\n\nimport styles from './index.module.scss'\nimport { useBoundBox } from './use-boundbox'\n\ntype CursorRes = {\n  [key: string]: string\n}\n\nconst props = {\n  primitive: {\n    type: Object as PropType<Primitive>,\n    default: () => {}\n  },\n  pStyle: {\n    type: Object as PropType<PrimitiveStyle>,\n    default: () => {}\n  },\n  index: {\n    required: true,\n    type: Number,\n    default: 0\n  }\n}\n\nexport default defineComponent({\n  name: 'BoundBox',\n  props,\n  emits: ['closeContextmenu'],\n  setup(props, { slots, emit }) {\n    const editorStore = useEditorStore()\n    const areaSelectStore = useAreaSelectStore()\n\n    const { curPrimitive } = storeToRefs(editorStore)\n    const { areaSelectVisible } = storeToRefs(areaSelectStore)\n    const { transByCurScale } = useEditorScale()\n\n    const { curRef, cursors, angleToCursor, drawPoints, pointStyle } =\n      useBoundBox()\n\n    // 获取每个位置的光标的角度\n    const getCursorStyle = () => {\n      const result: CursorRes = {}\n      let lastMatchIndex = -1\n\n      for (const key in drawPoints) {\n        const angle = mod360(drawPoints[key])\n\n        for (let i = 0; i < angleToCursor.length; i++) {\n          lastMatchIndex = (lastMatchIndex + 1) % angleToCursor.length\n          const angleLimit = angleToCursor[lastMatchIndex]\n\n          if (angle < 23 || angle >= 338) {\n            result[key] = 'nw-resize'\n            break\n          }\n\n          if (angleLimit.start <= angle && angle < angleLimit.end) {\n            result[key] = angleLimit.cursor + '-resize'\n            break\n          }\n        }\n      }\n\n      return result\n    }\n\n    // 鼠标按下primitive\n    const handleMouseDownEvent = (e: MouseEvent) => {\n      e.stopPropagation()\n      e.preventDefault()\n\n      // 如果当前是在组合的模式下，就取消该方法\n      if (areaSelectVisible.value) return\n\n      editorStore.setClickPrimitiveStatus(true)\n      editorStore.setCurPrimitive(props.primitive)\n      cursors.value = getCursorStyle()\n\n      const style = props.pStyle\n      const startY = e.clientY\n      const startX = e.clientX\n      const startTop = style.top || 0\n      const startLeft = style.left || 0\n      //鼠标移动事件 用来调整primitive的位置\n\n      const mouseMoveEvent = (event: MouseEvent) => {\n        const curX = event.clientX\n        const curY = event.clientY\n        const top = transByCurScale(event.clientY - startY) + startTop\n        const left = transByCurScale(event.clientX - startX) + startLeft\n\n        props.primitive.updateStyle({\n          top: ceil(top),\n          left: ceil(left)\n        } as PrimitiveStyle)\n\n        const isDownward = curY - startY > 0\n        const isRightward = curX - startX > 0\n        eventEmitter.emit('move', { isDownward, isRightward })\n      }\n\n      // 鼠标抬起事件\n      const mouseUpEvent = () => {\n        // 触发元素停止移动事件，用于隐藏标线\n        eventEmitter.emit('unmove')\n        document.removeEventListener('mousemove', mouseMoveEvent)\n        document.removeEventListener('mouseup', mouseUpEvent)\n      }\n\n      document.addEventListener('mousemove', mouseMoveEvent)\n      document.addEventListener('mouseup', mouseUpEvent)\n    }\n\n    // 调整包围盒和内部组件的大小\n    const handleAdjustSize = (pType: string, e: MouseEvent) => {\n      e.stopPropagation()\n      e.preventDefault()\n\n      const { pStyle } = props\n      const { height = 0, width = 0, top = 0, left = 0 } = pStyle\n      const startX = e.clientX\n      const startY = e.clientY\n      const mouseMoveEvent = (moveEvent: MouseEvent) => {\n        const curX = moveEvent.clientX\n        const curY = moveEvent.clientY\n        const disY = curY - startY\n        const disX = curX - startX\n        const hasT = /t/.test(pType)\n        const hasB = /b/.test(pType)\n        const hasL = /l/.test(pType)\n        const hasR = /r/.test(pType)\n        const newHeight =\n          height + transByCurScale(hasT ? -disY : hasB ? disY : 0)\n        const newWidth = width + transByCurScale(hasL ? -disX : hasR ? disX : 0)\n        Object.assign(pStyle, {\n          height: Math.max(Number(newHeight.toFixed(0)), 0),\n          width: Math.max(Number(newWidth.toFixed(0)), 0),\n          left: left + (hasL ? disX : 0),\n          top: top + (hasT ? disY : 0)\n        })\n      }\n      const mouseUpEvent = () => {\n        document.removeEventListener('mousemove', mouseMoveEvent)\n        document.removeEventListener('mouseup', mouseUpEvent)\n      }\n      document.addEventListener('mousemove', mouseMoveEvent)\n      document.addEventListener('mouseup', mouseUpEvent)\n    }\n\n    onMounted(() => {\n      // 用于 Group 组件\n      if (curPrimitive.value) {\n        cursors.value = getCursorStyle()\n      }\n    })\n\n    // 点击当前包围盒\n    const handleClickBoundBox = (e: MouseEvent) => {\n      e.stopPropagation()\n      e.preventDefault()\n      emit('closeContextmenu')\n    }\n\n    // 当前组件是否选中\n    const isSelected = computed(\n      () => curPrimitive.value?.id === props.primitive.id\n    )\n\n    const renderDrawPoints = () =>\n      Object.keys(drawPoints).map((key: string) => (\n        <div\n          key={key}\n          class={styles.point}\n          style={pointStyle(key as string, props.pStyle)}\n          onMousedown={(e) => handleAdjustSize(key as string, e)}\n        ></div>\n      ))\n\n    return () => (\n      <div\n        ref={curRef}\n        class={[styles.boundBox, isSelected.value && styles.active]}\n        onClick={handleClickBoundBox}\n        onMousedown={handleMouseDownEvent}\n      >\n        {isSelected.value ? renderDrawPoints() : null}\n        {slots.default?.()}\n      </div>\n    )\n  }\n})\n","import { PrimitiveStyle } from '@/primitives/types'\n\ntype Directions = {\n  [key: string]: number\n}\n\nexport function useBoundBox() {\n  const curRef = ref<HTMLElement | null>(null)\n  const cursors = ref<any>({})\n\n  const drawPoints: Directions = {\n    lt: 0,\n    t: 45,\n    rt: 90,\n    r: 135,\n    rb: 180,\n    b: 225,\n    lb: 270,\n    l: 315\n  }\n\n  // 每个范围的角度对应的光标\n  const angleToCursor = [\n    { start: 338, end: 23, cursor: 'nw' },\n    { start: 23, end: 68, cursor: 'n' },\n    { start: 68, end: 113, cursor: 'ne' },\n    { start: 113, end: 158, cursor: 'e' },\n    { start: 158, end: 203, cursor: 'se' },\n    { start: 203, end: 248, cursor: 's' },\n    { start: 248, end: 293, cursor: 'sw' },\n    { start: 293, end: 338, cursor: 'w' }\n  ]\n\n  // 位置点的样式\n  const pointStyle = (pointStr: string, pStyle: PrimitiveStyle) => {\n    const { width = 0, height = 0 } = pStyle\n    const hasT = pointStr.includes('t')\n    const hasB = pointStr.includes('b')\n    const hasL = pointStr.includes('l')\n    const hasR = pointStr.includes('r')\n    let newLeft = hasL ? 0 : width\n    let newTop = hasT ? 0 : height\n\n    if ((hasT || hasB) && !(hasL || hasR)) {\n      newLeft = width / 2\n      newTop = hasT ? 0 : height\n    } else if (!(hasT || hasB) && (hasL || hasR)) {\n      newLeft = hasL ? 0 : width\n      newTop = Math.floor(height / 2)\n    }\n\n    return {\n      marginLeft: '-4px',\n      marginTop: '-4px',\n      left: `${newLeft}px`,\n      top: `${newTop}px`,\n      cursor: cursors.value[pointStr]\n    }\n  }\n\n  return {\n    curRef,\n    cursors,\n    angleToCursor,\n    drawPoints,\n    pointStyle\n  }\n}\n","import { cloneDeep } from 'lodash'\n\nimport { Primitive } from '@/primitives/primitive'\nimport { useEditorStore } from '@/store/editor'\nimport utils from '@/utils'\n\nimport { useCompose } from '../hooks/use-compose'\n\nexport const useContextMenu = () => {\n  const menuState = reactive({\n    top: ref(0),\n    left: ref(0),\n    copyData: ref<Primitive | null>(null)\n  })\n\n  const editorStore = useEditorStore()\n  const { curPrimitive } = storeToRefs(editorStore)\n  const { handleCompose, handleDecompose } = useCompose()\n\n  /**\n   * 复制\n   */\n  const handleCopy = () => {\n    const primitive = cloneDeep(curPrimitive.value)\n    primitive!.id = utils.createId()\n    menuState.copyData = primitive\n    window.$message.success('复制成功！')\n  }\n\n  /**\n   * 粘贴\n   */\n  const handlePaste = () => {\n    if (!menuState.copyData) {\n      window.$message.warning('请选择组件！')\n      return\n    }\n\n    const primitive = menuState.copyData\n    primitive.style.top = menuState.top\n    primitive.style.left = menuState.left\n\n    editorStore.addPrimitive(primitive as Primitive)\n  }\n\n  /**\n   * 清空粘贴板\n   */\n  const handleClearCanvas = () => {\n    editorStore.clear()\n  }\n\n  /**\n   * 删除\n   */\n  const handelDelete = () => {\n    editorStore.deleteCurPrimitive()\n    window.$message.success('删除成功！')\n  }\n\n  /**\n   * 置顶\n   */\n  const handleUp = () => {\n    editorStore.upCurComponent()\n  }\n\n  /**\n   * 置底\n   */\n  const handleDown = () => {\n    editorStore.downCurComponent()\n  }\n\n  /**\n   * 上移\n   */\n  const handleTop = () => {\n    editorStore.moveCurPrimitiveByIndex(1)\n  }\n\n  /**\n   * 下移\n   */\n  const handleBottom = () => {\n    editorStore.moveCurPrimitiveByIndex(-1)\n  }\n\n  /**\n   * 创建分组\n   */\n  const handleCreateGroup = () => {\n    handleCompose()\n  }\n\n  /**\n   * 删除分组\n   */\n  const handleDeleteGroup = () => {\n    handleDecompose()\n  }\n\n  return {\n    menuState,\n    operations: {\n      handleCopy,\n      handlePaste,\n      handleClearCanvas,\n      handelDelete,\n      handleUp,\n      handleDown,\n      handleTop,\n      handleBottom,\n      handleCreateGroup,\n      handleDeleteGroup\n    }\n  }\n}\n","import GroupPrimitive from '@/primitives/components/group/primitive'\nimport { Primitive } from '@/primitives/primitive'\nimport { PrimitiveStyle } from '@/primitives/types'\nimport { useAreaSelectStore } from '@/store/area-select/index'\nimport { useEditorStore } from '@/store/editor/index'\nimport { createGroupStyle, decomposePrimitive } from '@/utils/primitive'\n\nexport function useCompose() {\n  const editorStore = useEditorStore()\n  const areaSelectStore = useAreaSelectStore()\n  const { curPrimitive } = storeToRefs(editorStore)\n  const { groupStyle, selectedPrimitives } = storeToRefs(areaSelectStore)\n\n  // 合并 primitive\n  const handleCompose = () => {\n    const allPrimitives: Primitive[] = []\n    const primitives = selectedPrimitives.value as Primitive[]\n    const editor = document.querySelector('#editor')\n    const editorRect = editor!.getBoundingClientRect()\n\n    primitives.forEach((primitive) => {\n      // 如果要组合的组件中，已经存在组合数据，则需要提前拆分\n      if (primitive.cName === 'Group') {\n        const parentStyle = { ...primitive.style }\n\n        primitive.childPrimitives?.forEach((primitive) => {\n          decomposePrimitive(primitive, editorRect, parentStyle)\n          allPrimitives.push(primitive)\n        })\n      } else {\n        allPrimitives.push(primitive)\n      }\n    })\n\n    // 实例化一个 groupPrimitive\n    const deletePrimitives = selectedPrimitives.value as Primitive[]\n    const groupPrimitive = new GroupPrimitive()\n    groupPrimitive.childPrimitives = allPrimitives\n    groupPrimitive.style = { ...groupStyle.value } as PrimitiveStyle\n\n    createGroupStyle(groupPrimitive)\n\n    editorStore.addPrimitive(groupPrimitive)\n    editorStore.setCurPrimitive(groupPrimitive)\n    editorStore.batchDeletePrimitive(deletePrimitives)\n    areaSelectStore.setAreaSelectVisible(false)\n    areaSelectStore.clearPrimitives()\n  }\n\n  // 解除合并 primitive\n  const handleDecompose = () => {\n    const parentStyle = { ...curPrimitive.value?.style } as PrimitiveStyle\n    const primitives = curPrimitive.value?.childPrimitives as Primitive[]\n    const editor = document.querySelector('#editor')\n    const editorRect = editor?.getBoundingClientRect() as DOMRect\n    editorStore.deleteCurPrimitive()\n\n    primitives.forEach((primitive) => {\n      decomposePrimitive(primitive, editorRect, parentStyle)\n      editorStore.addPrimitive(primitive)\n    })\n  }\n\n  return {\n    handleCompose,\n    handleDecompose\n  }\n}\n","import { Teleport } from 'vue'\n\nimport { useAreaSelectStore } from '@/store/area-select/index'\nimport { useEditorStore } from '@/store/editor'\n\nimport styles from './index.module.scss'\nimport { useContextMenu } from './use-context-menu'\n\ninterface ContextOptions {\n  label: string\n  handler: () => void\n  disabled?: boolean\n}\n\nexport default defineComponent({\n  name: 'ContextMenu',\n  setup(props, { expose }) {\n    const { menuState, operations } = useContextMenu()\n    const editorStore = useEditorStore()\n    const areaSelectStore = useAreaSelectStore()\n\n    const { areaSelectVisible } = storeToRefs(areaSelectStore)\n\n    const variables = reactive({\n      visible: ref(false),\n      contextType: ref(''),\n      contextOptions: ref<ContextOptions[]>([])\n    })\n\n    // 显示右键菜单\n    const show = ({\n      top,\n      left,\n      contextType\n    }: {\n      top: number\n      left: number\n      contextType: string\n    }) => {\n      menuState.top = top\n      menuState.left = left\n      variables.contextType = contextType\n      getContextOptions()\n      variables.visible = true\n    }\n\n    // 关闭右键菜单\n    const close = () => {\n      variables.visible = false\n    }\n\n    // 点击菜单时不取消当前组件的选中状态\n    const handleMouseUp = () => {\n      editorStore.setClickPrimitiveStatus(true)\n    }\n\n    const defaultOptions = [\n      {\n        label: '复制',\n        handler: operations.handleCopy\n      },\n      {\n        label: '粘贴',\n        handler: operations.handlePaste\n      },\n      {\n        label: '删除',\n        handler: operations.handelDelete\n      },\n      {\n        label: '置顶',\n        handler: operations.handleUp\n      },\n      {\n        label: '置底',\n        handler: operations.handleDown\n      },\n      {\n        label: '上移',\n        handler: operations.handleTop\n      },\n      {\n        label: '下移',\n        handler: operations.handleBottom\n      }\n    ]\n\n    const groupOptions = [\n      {\n        label: '组合',\n        handler: operations.handleCreateGroup\n      },\n      {\n        label: '删除',\n        handler: operations.handleDeleteGroup\n      }\n    ]\n\n    const editorOptions = [\n      {\n        label: '粘贴',\n        handler: operations.handlePaste\n      },\n      {\n        label: '清空画布',\n        handler: operations.handleClearCanvas\n      }\n    ]\n\n    const getContextOptions = () => {\n      if (areaSelectVisible.value) {\n        variables.contextOptions = [...groupOptions]\n      } else if (variables.contextType === 'Editor') {\n        variables.contextOptions = [...editorOptions]\n      } else {\n        variables.contextOptions = [...defaultOptions]\n        if (variables.contextType === 'Group') {\n          variables.contextOptions.unshift({\n            label: '解除分组',\n            handler: operations.handleDeleteGroup\n          })\n        }\n      }\n    }\n\n    // 右键菜单样式\n    const contextStyle = computed(() => ({\n      top: `${menuState.top}px`,\n      left: `${menuState.left}px`\n    }))\n\n    expose({ show, close })\n\n    return () => (\n      <Teleport to='body'>\n        <div\n          v-show={variables.visible}\n          class={styles.contextmenu}\n          style={contextStyle.value}\n        >\n          <ul\n            onMouseup={handleMouseUp}\n            onMousedown={(e) => e.stopPropagation()}\n          >\n            {variables.contextOptions.map((item) => (\n              <li\n                onClick={() => {\n                  item.handler(), (variables.visible = false)\n                }}\n              >\n                {item.label} {item.disabled}\n              </li>\n            ))}\n          </ul>\n        </div>\n      </Teleport>\n    )\n  }\n})\n","import { useEditorStore } from '@/store/editor/index'\n\nimport ContextMenu from '../ContextMenu/index'\nimport SketchRuler from '../SketchRuler/index'\nimport { useGroup } from './use-group'\n\nexport function useMouseEvent() {\n  const state = reactive({\n    lastX: 0, // 上一次鼠标横向位置\n    lastY: 0, // 上一次鼠标纵向位置\n    isSpaceDown: ref(false), // 键盘Space键是否按下\n    isMouseDown: ref(false) // 鼠标左键是否按下\n  })\n\n  const screenRef = ref<HTMLDivElement | null>(null)\n  const editorRef = ref<HTMLDivElement | null>(null)\n  const contextMenuRef = ref<typeof ContextMenu | null>(null)\n  const sketchRulerRef = ref<typeof SketchRuler | null>(null)\n  const editorContaineRef = ref<HTMLElement | null>(null)\n\n  const { groupState, onDrawGroupBoundry } = useGroup()\n  const editorStore = useEditorStore()\n  const { curPrimitive, primitives, editorScale } = storeToRefs(editorStore)\n\n  // 页面滚动事件\n  const handleMouseScroll = () => {\n    sketchRulerRef.value?.handleResizeRuler()\n  }\n\n  // 鼠标滚轮事件\n  const handleMouseWheel = (e: any) => {\n    if (e.ctrlKey || e.metaKey) {\n      e.preventDefault()\n\n      let scaleValue = editorScale.value\n\n      if (e.wheelDelta >= 0 && scaleValue < 200) {\n        scaleValue = scaleValue + 5\n        editorStore.setEditorScale(scaleValue)\n        return\n      }\n\n      if (e.wheelDelta < 0 && scaleValue > 10) {\n        scaleValue = scaleValue - 5\n        editorStore.setEditorScale(scaleValue)\n      }\n\n      sketchRulerRef.value?.handleResizeRuler()\n    }\n  }\n\n  // 开启右键菜单\n  const handleShowContextMenu = (e: MouseEvent) => {\n    e.stopPropagation()\n    e.preventDefault()\n    if (!e.target) return\n\n    const top = e.clientY\n    const left = e.clientX\n    const contextType = getContextElementType(e.target as Element)\n    contextMenuRef.value?.show({ top, left, contextType })\n  }\n\n  // 获取当前鼠标右键点击的节点是画布、普通 primitive 还是 groupPrimitive\n  const getContextElementType = (element: Element): string | undefined => {\n    if (!element || !element.parentNode) return\n    const parentNode = element.parentNode as Element\n    if (!parentNode.getAttribute) return\n    const dataType = parentNode.getAttribute('data-context')\n    if (dataType) return dataType\n    return getContextElementType(parentNode)\n  }\n\n  // 按下鼠标左键事件\n  const handleMouseDown = (e: MouseEvent) => {\n    // 如果不是鼠标左键触发的就取消\n    if (e.button !== 0) return\n    state.isMouseDown = true\n\n    // 如果当前按下了键盘的 Space 键就执行拖动画布的操作\n    if (state.isSpaceDown) {\n      state.lastX = e.clientX\n      state.lastY = e.clientY\n    } else {\n      editorStore.setClickPrimitiveStatus(false)\n      if (!curPrimitive) e.preventDefault()\n      onDrawGroupBoundry(e)\n    }\n  }\n\n  // 取消当前选中的primitive\n  const handleMouseUp = (e: MouseEvent) => {\n    if (!editorStore.isClickPrimitive) editorStore.setCurPrimitive(null)\n    // 如果不是右键的话就把右键菜单关闭\n    if (e.button !== 2) contextMenuRef.value?.close()\n    state.isMouseDown = false\n  }\n\n  const mouseMoveEvent = (e: MouseEvent) => {\n    if (!state.isMouseDown) return\n    const deltaX = e.clientX - state.lastX\n    const deltaY = e.clientY - state.lastY\n    screenRef.value?.scrollBy(-deltaX, -deltaY)\n    state.lastX = e.clientX\n    state.lastY = e.clientY\n  }\n\n  // 处理键盘事件\n  const { space } = useMagicKeys({\n    passive: false,\n    onEventFired(e) {\n      if (e.code === 'Space' && e.type === 'keydown') {\n        e.preventDefault()\n      }\n    }\n  })\n\n  watch(space, (v) => {\n    state.isSpaceDown = v\n    editorRef.value!.style.cursor = v ? 'pointer' : 'default'\n    if (v) {\n      document.addEventListener('mousemove', mouseMoveEvent)\n    } else {\n      document.removeEventListener('mousemove', mouseMoveEvent)\n    }\n  })\n\n  onMounted(() => {\n    // 设计区域滚动居中\n    const containerRect = editorContaineRef.value!.getBoundingClientRect()\n    screenRef.value!.scrollLeft = containerRect.width / 2 - 100\n    screenRef.value!.scrollTop = containerRect.height / 2 - 160\n  })\n\n  return {\n    groupState,\n    editorScale,\n    contextMenuRef,\n    primitives,\n    screenRef,\n    editorRef,\n    sketchRulerRef,\n    editorContaineRef,\n    handleMouseUp,\n    handleMouseDown,\n    handleMouseWheel,\n    handleMouseScroll,\n    handleShowContextMenu\n  }\n}\n","import { useEditorScale } from '@/hooks/use-editor-scale'\nimport { Primitive } from '@/primitives/primitive'\nimport { Location } from '@/primitives/types'\nimport { useAreaSelectStore } from '@/store/area-select/index'\nimport { useEditorStore } from '@/store/editor/index'\nimport { getPrimitiveLocation } from '@/utils/primitive'\n\nexport function useGroup() {\n  const editorStore = useEditorStore()\n  const { transByCurScale, transAbsByCurScale } = useEditorScale()\n  const areaSelectStore = useAreaSelectStore()\n  const { primitives } = storeToRefs(editorStore)\n  const variables = reactive({\n    editorX: 0,\n    editorY: 0,\n    start: {\n      x: 0,\n      y: 0\n    },\n    width: 0,\n    height: 0\n  })\n\n  /**\n   * 开始绘制包围盒范围\n   * @param e MouseEvent\n   */\n  const onDrawGroupBoundry = (e: MouseEvent) => {\n    hideAreaSelect()\n\n    const editor = document.getElementById('editor')\n    const rectInfo = editor!.getBoundingClientRect()\n    const startX = e.clientX\n    const startY = e.clientY\n\n    variables.editorX = rectInfo.x\n    variables.editorY = rectInfo.y\n    variables.start.x = transByCurScale(startX - variables.editorX)\n    variables.start.y = transByCurScale(startY - variables.editorY)\n\n    areaSelectStore.setAreaSelectVisible(true)\n\n    const move = (moveEvent: MouseEvent) => {\n      variables.width = transAbsByCurScale(moveEvent.clientX - startX)\n      variables.height = transAbsByCurScale(moveEvent.clientY - startY)\n      if (moveEvent.clientX < startX) {\n        variables.start.x = transAbsByCurScale(\n          moveEvent.clientX - variables.editorX\n        )\n      }\n\n      if (moveEvent.clientY < startY) {\n        variables.start.y = transAbsByCurScale(\n          moveEvent.clientY - variables.editorY\n        )\n      }\n    }\n\n    const up = (e: MouseEvent) => {\n      document.removeEventListener('mousemove', move)\n      document.removeEventListener('mouseup', up)\n\n      if (e.clientX == startX && e.clientY == startY) {\n        hideAreaSelect()\n        return\n      }\n\n      saveAreaSelectData()\n    }\n\n    document.addEventListener('mousemove', move)\n    document.addEventListener('mouseup', up)\n  }\n\n  /**\n   * 隐藏包围盒子\n   */\n  const hideAreaSelect = () => {\n    variables.width = 0\n    variables.height = 0\n    areaSelectStore.setAreaSelectVisible(false)\n    areaSelectStore.setAreaSelectOptions(null, [])\n  }\n\n  /**\n   * 保存区域选择的数据\n   */\n  const saveAreaSelectData = () => {\n    // 获取选中区域的组件数据\n    const primitives = getInternalPrimitives()\n\n    if (primitives.length <= 1) {\n      hideAreaSelect()\n      return\n    }\n\n    let top = Infinity,\n      left = Infinity,\n      right = -Infinity,\n      bottom = -Infinity\n\n    primitives.forEach((primitive) => {\n      let style = {} as Location\n      if (primitive.cName === 'group') {\n        primitive.childPrimitives?.forEach((item: Primitive) => {\n          const element = document.getElementById(`primitive${item.id}`)\n          const rectInfo = element!.getBoundingClientRect()\n\n          style.left = rectInfo.left - variables.editorX\n          style.top = rectInfo.top - variables.editorY\n          style.right = rectInfo.right - variables.editorX\n          style.bottom = rectInfo.bottom - variables.editorY\n\n          if (style.left < left) left = style.left\n          if (style.top < top) top = style.top\n          if (style.right > right) right = style.right\n          if (style.bottom > bottom) bottom = style.bottom\n        })\n      } else {\n        style = getPrimitiveLocation(primitive.style)\n      }\n      if (style.left < left) left = style.left\n      if (style.top < top) top = style.top\n      if (style.right > right) right = style.right\n      if (style.bottom > bottom) bottom = style.bottom\n    })\n\n    variables.start.x = left\n    variables.start.y = top\n    variables.width = right - left\n    variables.height = bottom - top\n\n    const style = {\n      left,\n      top,\n      width: variables.width,\n      height: variables.height\n    }\n    areaSelectStore.setAreaSelectOptions(style, primitives)\n  }\n\n  /**\n   * 获取当前回执包围盒内部的 primitive\n   * @returns Pimitive[]\n   */\n  const getInternalPrimitives = () => {\n    const { x, y } = variables.start\n    const allPrimitives = primitives.value as Primitive[]\n\n    return allPrimitives.filter((primitive) => {\n      const { left, top, width, height } = primitive.style\n      if (\n        x <= left &&\n        y <= top &&\n        left + width <= x + variables.width &&\n        top + height <= y + variables.height\n      )\n        return primitive\n    })\n  }\n\n  return {\n    groupState: variables,\n    onDrawGroupBoundry\n  }\n}\n","import { defineComponent as p, ref as S, onMounted as P, computed as N, reactive as W, watch as O } from \"vue-demi\";\r\nimport { withDirectives as I, openBlock as y, createElementBlock as B, normalizeStyle as E, createElementVNode as w, toDisplayString as G, vShow as U, resolveComponent as D, normalizeClass as Z, createVNode as V, Fragment as j, renderList as J, createBlock as x } from \"vue\";\r\n/*!vue3-sketch-ruler v1.3.152024年2月Mon Feb 19 2024 15:43:31 GMT+0800 (中国标准时间)制作*/\r\nconst _ = p({\r\n  name: \"LineRuler\",\r\n  props: {\r\n    scale: Number,\r\n    thick: Number,\r\n    palette: Object,\r\n    index: Number,\r\n    start: Number,\r\n    vertical: Boolean,\r\n    value: Number,\r\n    isShowReferLine: Boolean\r\n  },\r\n  emits: [\"onMouseDown\", \"onRelease\", \"onRemove\"],\r\n  setup(e, { emit: t }) {\r\n    const r = S(0), s = S(!0);\r\n    P(() => {\r\n      r.value = e.value;\r\n    });\r\n    const i = (n) => {\r\n      s.value = n >= 0;\r\n    }, u = N(() => {\r\n      const n = (r.value - e.start) * e.scale;\r\n      i(n);\r\n      const c = n + \"px\";\r\n      return e.vertical ? { top: c } : { left: c };\r\n    }), o = N(() => {\r\n      var f;\r\n      const n = `1px solid ${(f = e.palette) == null ? void 0 : f.lineColor}`, c = e.vertical ? { borderTop: n } : { borderLeft: n };\r\n      return {\r\n        cursor: e.isShowReferLine ? e.vertical ? \"ns-resize\" : \"ew-resize\" : \"none\",\r\n        ...c\r\n      };\r\n    }), d = N(() => e.vertical ? { left: e.thick + \"px\" } : { top: e.thick + \"px\" });\r\n    return {\r\n      startValue: r,\r\n      showLine: s,\r\n      offset: u,\r\n      borderCursor: o,\r\n      actionStyle: d,\r\n      handleDown: (n) => {\r\n        const c = e.vertical ? n.clientY : n.clientX, h = r.value;\r\n        t(\"onMouseDown\");\r\n        const f = (A) => {\r\n          const b = e.vertical ? A.clientY : A.clientX, k = Math.round(h + (b - c) / e.scale);\r\n          r.value = k;\r\n        }, g = () => {\r\n          t(\"onRelease\", r.value, e.index), document.removeEventListener(\"mousemove\", f), document.removeEventListener(\"mouseup\", g);\r\n        };\r\n        document.addEventListener(\"mousemove\", f), document.addEventListener(\"mouseup\", g);\r\n      },\r\n      handleRemove: () => {\r\n        t(\"onRemove\", e.index);\r\n      }\r\n    };\r\n  }\r\n}), Y = (e, t) => {\r\n  const r = e.__vccOpts || e;\r\n  for (const [s, i] of t)\r\n    r[s] = i;\r\n  return r;\r\n}, ee = { class: \"value\" };\r\nfunction te(e, t, r, s, i, u) {\r\n  return I((y(), B(\"div\", {\r\n    class: \"line\",\r\n    style: E([e.offset, e.borderCursor]),\r\n    onMousedown: t[1] || (t[1] = (...o) => e.handleDown && e.handleDown(...o))\r\n  }, [\r\n    w(\"div\", {\r\n      class: \"action\",\r\n      style: E(e.actionStyle)\r\n    }, [\r\n      w(\"span\", {\r\n        class: \"del\",\r\n        onClick: t[0] || (t[0] = (...o) => e.handleRemove && e.handleRemove(...o))\r\n      }, \"×\"),\r\n      w(\"span\", ee, G(e.startValue), 1)\r\n    ], 4)\r\n  ], 36)), [\r\n    [U, e.showLine]\r\n  ]);\r\n}\r\nconst ne = /* @__PURE__ */ Y(_, [[\"render\", te], [\"__scopeId\", \"data-v-053590ce\"]]), ae = (e) => e <= 0.25 ? 40 : e <= 0.5 ? 20 : e <= 1 ? 10 : e <= 2 ? 5 : e <= 4 ? 2 : 1, M = 0.83, oe = (e, t, r, s, i, u) => {\r\n  const { scale: o, width: d, height: l, ratio: a, palette: n } = i, { bgColor: c, fontColor: h, shadowColor: f, longfgColor: g, shortfgColor: A } = n, b = u ? i.startNumX : i.startNumY, k = u ? i.endNumX : i.endNumY;\r\n  if (e.scale(a, a), e.clearRect(0, 0, d, l), e.fillStyle = c, e.fillRect(0, 0, d, l), s) {\r\n    const v = (r - t) * o, X = s * o;\r\n    e.fillStyle = f, u ? e.fillRect(v, 0, X, l * 3 / 8) : e.fillRect(0, v, d * 3 / 8, X);\r\n  }\r\n  const C = ae(o), $ = C * o, R = C * 10, Q = R * o, T = Math.floor(t / C) * C, F = Math.floor(t / R) * R, H = (T - t) / C * $, q = (F - t) / R * Q, K = t + Math.ceil((u ? d : l) / o);\r\n  e.beginPath(), e.fillStyle = h, e.strokeStyle = g;\r\n  for (let v = F, X = 0; v < K; v += R, X++) {\r\n    if (v >= b && v <= k) {\r\n      const m = q + X * Q + 0.5;\r\n      u ? e.moveTo(m, 0) : e.moveTo(0, m), e.save(), u ? e.translate(m, l * 0.4) : e.translate(d * 0.4, m), u || e.rotate(-Math.PI / 2), e.scale(M / a, M / a), e.fillText(v.toString(), 4 * a, 7 * a), e.restore(), u ? e.lineTo(m, l * 9 / 16) : e.lineTo(d * 9 / 16, m);\r\n    }\r\n    e.stroke(), e.closePath(), e.beginPath(), e.strokeStyle = A;\r\n    for (let m = T, z = 0; m < K; m += C, z++)\r\n      if (m >= b && m <= k) {\r\n        const L = H + z * $ + 0.5;\r\n        u ? e.moveTo(L, 0) : e.moveTo(0, L), m % R !== 0 && (u ? e.lineTo(L, l * 1 / 4) : e.lineTo(d * 1 / 4, L));\r\n      }\r\n    e.stroke(), e.closePath(), e.setTransform(1, 0, 0, 1, 0, 0);\r\n  }\r\n}, re = p({\r\n  name: \"CanvasRuler\",\r\n  props: {\r\n    showIndicator: Boolean,\r\n    valueNum: Number,\r\n    scale: Number,\r\n    ratio: Number,\r\n    palette: Object,\r\n    vertical: Boolean,\r\n    start: Number,\r\n    width: Number,\r\n    height: Number,\r\n    selectStart: Number,\r\n    selectLength: Number,\r\n    startNumX: Number,\r\n    endNumX: Number,\r\n    startNumY: Number,\r\n    endNumY: Number\r\n  },\r\n  emits: [\"onAddLine\", \"update:showIndicator\", \"update:valueNum\"],\r\n  setup(e, { emit: t }) {\r\n    const r = W({\r\n      canvasContext: null\r\n    });\r\n    let s = 1;\r\n    const i = S(null);\r\n    P(() => {\r\n      s = e.ratio || window.devicePixelRatio || 1, u(), o(s), d(s);\r\n    });\r\n    const u = () => {\r\n      r.canvasContext = i.value && i.value.getContext(\"2d\");\r\n    }, o = (a) => {\r\n      if (i.value) {\r\n        i.value.width = e.width * a, i.value.height = e.height * a;\r\n        const n = r.canvasContext;\r\n        n && (n.font = `${12 * a}px -apple-system,\r\n                \"Helvetica Neue\", \".SFNSText-Regular\",\r\n                \"SF UI Text\", Arial, \"PingFang SC\", \"Hiragino Sans GB\",\r\n                \"Microsoft YaHei\", \"WenQuanYi Zen Hei\", sans-serif`, n.lineWidth = 1, n.textBaseline = \"middle\");\r\n      }\r\n    }, d = (a) => {\r\n      const n = {\r\n        scale: e.scale,\r\n        width: e.width,\r\n        height: e.height,\r\n        palette: e.palette,\r\n        startNumX: e.startNumX,\r\n        endNumX: e.endNumX,\r\n        startNumY: e.startNumY,\r\n        endNumY: e.endNumY,\r\n        ratio: a\r\n      };\r\n      r.canvasContext && oe(\r\n        r.canvasContext,\r\n        e.start,\r\n        e.selectStart,\r\n        e.selectLength,\r\n        n,\r\n        !e.vertical\r\n      );\r\n    };\r\n    return O(\r\n      () => e.start,\r\n      () => d(s)\r\n    ), O([() => e.width, () => e.height], () => {\r\n      o(s), d(s);\r\n    }), {\r\n      handle: (a, n) => {\r\n        const c = (g, A, b) => Math.round(A + g / b), h = e.vertical ? a.offsetY : a.offsetX, f = c(h, e.start, e.scale);\r\n        switch (n) {\r\n          case \"click\":\r\n            t(\"onAddLine\", f);\r\n            break;\r\n          case \"enter\":\r\n            t(\"update:valueNum\", f), t(\"update:showIndicator\", !0);\r\n            break;\r\n          default:\r\n            t(\"update:valueNum\", f);\r\n            break;\r\n        }\r\n      },\r\n      canvas: i\r\n    };\r\n  }\r\n});\r\nfunction le(e, t, r, s, i, u) {\r\n  return y(), B(\"canvas\", {\r\n    ref: \"canvas\",\r\n    class: \"ruler\",\r\n    onClick: t[0] || (t[0] = (o) => e.handle(o, \"click\")),\r\n    onMouseenter: t[1] || (t[1] = (o) => e.handle(o, \"enter\")),\r\n    onMousemove: t[2] || (t[2] = (o) => e.handle(o, \"move\")),\r\n    onMouseleave: t[3] || (t[3] = (o) => e.$emit(\"update:showIndicator\", !1))\r\n  }, null, 544);\r\n}\r\nconst se = /* @__PURE__ */ Y(re, [[\"render\", le]]), ie = {\r\n  scale: Number,\r\n  ratio: Number,\r\n  thick: Number,\r\n  startNumX: Number,\r\n  endNumX: Number,\r\n  startNumY: Number,\r\n  endNumY: Number,\r\n  palette: Object,\r\n  vertical: {\r\n    type: Boolean,\r\n    default: !0\r\n  },\r\n  width: {\r\n    type: Number,\r\n    default: 200\r\n  },\r\n  height: {\r\n    type: Number,\r\n    default: 200\r\n  },\r\n  start: {\r\n    type: Number,\r\n    default: 0\r\n  },\r\n  lines: {\r\n    type: Array,\r\n    default: () => []\r\n  },\r\n  selectStart: {\r\n    type: Number\r\n  },\r\n  selectLength: {\r\n    type: Number\r\n  },\r\n  isShowReferLine: {\r\n    type: Boolean\r\n  }\r\n}, ue = p({\r\n  name: \"RulerWrapper\",\r\n  components: {\r\n    CanvasRuler: se,\r\n    RulerLine: ne\r\n  },\r\n  props: ie,\r\n  setup(e) {\r\n    const t = S(!1), r = S(0), s = N(() => e.vertical ? \"v-container\" : \"h-container\"), i = N(() => {\r\n      const a = {\r\n        width: `calc(100% - ${e.thick}px)`,\r\n        height: `${e.thick + 1}px`,\r\n        left: `${e.thick}px`\r\n      }, n = {\r\n        width: `${e.thick && e.thick + 1}px`,\r\n        height: `calc(100% - ${e.thick}px)`,\r\n        top: `${e.thick}px`\r\n      };\r\n      return e.vertical ? n : a;\r\n    }), u = N(() => {\r\n      var h;\r\n      const a = (r.value - e.start) * e.scale;\r\n      let n = \"top\", c = \"borderLeft\";\r\n      return n = e.vertical ? \"top\" : \"left\", c = e.vertical ? \"borderBottom\" : \"borderLeft\", {\r\n        [n]: a + \"px\",\r\n        [c]: `1px solid ${(h = e.palette) == null ? void 0 : h.lineColor}`\r\n      };\r\n    }), o = (a) => {\r\n      e.lines.push(a);\r\n    }, d = (a, n) => {\r\n      const c = a - e.start, h = (e.vertical ? e.height : e.width) / e.scale;\r\n      c < 0 || c > h ? l(n) : e.lines[n] = a;\r\n    }, l = (a) => {\r\n      e.lines.splice(a, 1);\r\n    };\r\n    return {\r\n      showIndicator: t,\r\n      valueNum: r,\r\n      rwClassName: s,\r\n      rwStyle: i,\r\n      indicatorStyle: u,\r\n      handleNewLine: o,\r\n      handleLineRelease: d,\r\n      handleLineRemove: l\r\n    };\r\n  }\r\n}), de = { class: \"lines\" }, ce = { class: \"value\" };\r\nfunction he(e, t, r, s, i, u) {\r\n  const o = D(\"CanvasRuler\"), d = D(\"RulerLine\");\r\n  return y(), B(\"div\", {\r\n    class: Z(e.rwClassName),\r\n    style: E(e.rwStyle)\r\n  }, [\r\n    V(o, {\r\n      vertical: e.vertical,\r\n      scale: e.scale,\r\n      width: e.width,\r\n      height: e.height,\r\n      start: e.start,\r\n      ratio: e.ratio,\r\n      startNumX: e.startNumX,\r\n      endNumX: e.endNumX,\r\n      startNumY: e.startNumY,\r\n      endNumY: e.endNumY,\r\n      \"select-start\": e.selectStart,\r\n      \"select-length\": e.selectLength,\r\n      palette: e.palette,\r\n      valueNum: e.valueNum,\r\n      \"onUpdate:valueNum\": t[0] || (t[0] = (l) => e.valueNum = l),\r\n      showIndicator: e.showIndicator,\r\n      \"onUpdate:showIndicator\": t[1] || (t[1] = (l) => e.showIndicator = l),\r\n      onOnAddLine: e.handleNewLine\r\n    }, null, 8, [\"vertical\", \"scale\", \"width\", \"height\", \"start\", \"ratio\", \"startNumX\", \"endNumX\", \"startNumY\", \"endNumY\", \"select-start\", \"select-length\", \"palette\", \"valueNum\", \"showIndicator\", \"onOnAddLine\"]),\r\n    I(w(\"div\", de, [\r\n      (y(!0), B(j, null, J(e.lines, (l, a) => (y(), x(d, {\r\n        key: l + a,\r\n        index: a,\r\n        value: l >> 0,\r\n        scale: e.scale,\r\n        start: e.start,\r\n        thick: e.thick,\r\n        palette: e.palette,\r\n        vertical: e.vertical,\r\n        \"is-show-refer-line\": e.isShowReferLine,\r\n        onOnRemove: e.handleLineRemove,\r\n        onOnRelease: e.handleLineRelease\r\n      }, null, 8, [\"index\", \"value\", \"scale\", \"start\", \"thick\", \"palette\", \"vertical\", \"is-show-refer-line\", \"onOnRemove\", \"onOnRelease\"]))), 128))\r\n    ], 512), [\r\n      [U, e.isShowReferLine]\r\n    ]),\r\n    I(w(\"div\", {\r\n      class: \"indicator\",\r\n      style: E(e.indicatorStyle)\r\n    }, [\r\n      w(\"div\", ce, G(e.valueNum), 1)\r\n    ], 4), [\r\n      [U, e.showIndicator]\r\n    ])\r\n  ], 6);\r\n}\r\nconst me = /* @__PURE__ */ Y(ue, [[\"render\", he], [\"__scopeId\", \"data-v-9da5477e\"]]), fe = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAAAXNSR0IArs4c6QAAAopJREFUOE/FlE9IVEEcx7+/N9ouds1Mu0QUSFZYdIgoUqQoKPBQHsKozpXE7jbTO/U8xLJvn6usBHWQ6hBFXupSkQeVbh0KJEPp0sH+eLGTsKs77xcj78m0ax0E8cHjzZv5zef3/c33xxA24KENYGJzoEEQbNNaN4Zh2OQ4znwYhr9c1/39vwrXVDo0NNS0tLR0GYB5D64BmAMwzMyvlFKz1es10Hw+f4mZ7wHYBeA9gNdENFepVOaEEM3M3OI4Thczn41gt6WUgQ3+C+r7/h0AWQD3mXnYqPA8L9nQ0HCemduIaFpKOWoAhUJhT6VSuQXgOjP3K6W8GLwKzeVyp4jonR0QBEErM48w8zFLyayUsjX+z+VyHhHdZebTSqkxM78CHRgYOKS1/ghgVErZY214RkQ7ADyRUj72ff8qgCtmXUrZGcf5vv8CwEUhxOF0Ov1pBRpla5dSdseBhUJhpznH6tIsZb1KqacW+BGArUaUXX63UuplHJTNZjuEEONSyhozfd/n6mQ1RkXZL2itz7mu+80EDA4ONi8vL/8AcM2UbikyR2BU9cSmmTU70YqKIAj2hWFo2uenlHK/BRg3Y2aeNO5GyU8S0ZbFxcUuz/NKEXAGQKPjOCcymcyX1dIi8DSAiWQyeaavr68cbSgCuBknYubnQoj+TCYzUywWE6VS6S2ADsdx2gxw1X3L7SNENMbMnwE8qK+vf5NKpRaMaeVyeW8ikfiaSqW+R7BuZr5BRMe11p2u607U9Gk8kc/ntzPzQwCmExYATDLzVBiGE0KIowAOADDf3QA+aK2VDaxRajto3K+rq+tl5nYAzQBamHmeiOYBTGmtR6ph/1Rqg9c73pz7dD1qN0TpHyNQRCUDJXrAAAAAAElFTkSuQmCC\", ve = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAAAXNSR0IArs4c6QAAAjtJREFUOE/NlD9oFEEUxn9v9ghC0hpRUogIAUmniGAT/5Q2FrETPSNRJILg7RwimI0ox85eQFCEBGIUO1PYpFM0jSConQoBEZGgGPsgl+w+2eM2bC57SopAFqYZ3v7m+977ZoQt+GQLmGxPaBiGgYiMWWvXBHZUGoZhH3BERPYC+4F+4Keq/urt7b1RLpf/ZEBVHa9Wq0HWyg3QKIoGVPU8cA7wgK/pUtXPQJ8xZk+pVBpuNBqXUoUiEvi+P56fzTpo6+SbwHNg1lo7WzTITGEKXFlZeeB53tVCpa3CK8AFa+1cBgvD8LKIXAQOJkkyICJDeYVBEJS6u7s/qeoLa+1o+l9TqXNuBLhmjDlbqVQ+5ICjInIfOBPH8W9jzGCR5YmJiRNxHM+papgqzqDvgSlr7VTernPuO3An3c9bBt74vv+yrdaKyLDv+/1Sq9UGPc97nY9EVuycU2AQOA7cAm4Dr4D5TvVxHB9rKo2iaEFVp621Ln96FEUngaOqGmSxabVqsh3a2h+x1h5qQjNrae/yE4+iaCwDJkky73neTuBZe129Xk+H+BS4l7ZqLVIZ2BhzuFKpvMsDVXXWGPMxFdAedOfcKeCRqj7MYrUhpz09PfXl5eXrectFWXXODQHpOq2qd/95o/JXr6ura3J1dXU6SZIfwKKIHAD2tVYMPBGRx77vN10UXtO85fTkmZmZHUtLSzUR2QXsBhaAL6r6DXhbrVYXi1yss59GqOgub/bN3Z7v6X/tb9Zmp/q/kN8s+lJb8oEAAAAASUVORK5CYII=\", Ne = {\r\n  eyeIcon: {\r\n    type: String\r\n  },\r\n  closeEyeIcon: {\r\n    type: String\r\n  },\r\n  scale: {\r\n    type: Number,\r\n    default: 1\r\n  },\r\n  ratio: {\r\n    type: Number\r\n    // default: window.devicePixelRatio || 1\r\n  },\r\n  thick: {\r\n    type: Number,\r\n    default: 16\r\n  },\r\n  palette: Object,\r\n  startX: {\r\n    type: Number\r\n  },\r\n  startY: {\r\n    type: Number,\r\n    default: 0\r\n  },\r\n  width: {\r\n    type: Number,\r\n    default: 200\r\n  },\r\n  height: {\r\n    type: Number,\r\n    default: 200\r\n  },\r\n  shadow: {\r\n    type: Object,\r\n    default: () => ({\r\n      x: 0,\r\n      y: 0,\r\n      width: 0,\r\n      height: 0\r\n    })\r\n  },\r\n  lines: {\r\n    type: Object,\r\n    default: () => ({\r\n      h: [],\r\n      v: []\r\n    })\r\n  },\r\n  isShowReferLine: {\r\n    type: Boolean,\r\n    default: !0\r\n  },\r\n  startNumX: {\r\n    type: Number,\r\n    default: -1 / 0\r\n  },\r\n  endNumX: {\r\n    type: Number,\r\n    default: 1 / 0\r\n  },\r\n  startNumY: {\r\n    type: Number,\r\n    default: -1 / 0\r\n  },\r\n  endNumY: {\r\n    type: Number,\r\n    default: 1 / 0\r\n  }\r\n}, we = p({\r\n  name: \"SketchRule\",\r\n  components: {\r\n    RulerWrapper: me\r\n  },\r\n  props: Ne,\r\n  emits: [\"onCornerClick\"],\r\n  setup(e, { emit: t }) {\r\n    let r = S(!0);\r\n    r.value = e.isShowReferLine;\r\n    const s = N(() => {\r\n      function o(l, a) {\r\n        return Object.keys(l).forEach((n) => {\r\n          n && l.hasOwnProperty(n) && (typeof a[n] == \"object\" ? l[n] = o(l[n], a[n]) : a.hasOwnProperty(n) && (l[n] = a[n]));\r\n        }), l;\r\n      }\r\n      return o(\r\n        {\r\n          bgColor: \"rgba(225,225,225, 0)\",\r\n          // ruler bg color\r\n          longfgColor: \"#BABBBC\",\r\n          // ruler longer mark color\r\n          shortfgColor: \"#C8CDD0\",\r\n          // ruler shorter mark color\r\n          fontColor: \"#7D8694\",\r\n          // ruler font color\r\n          shadowColor: \"#E8E8E8\",\r\n          // ruler shadow color\r\n          lineColor: \"#EB5648\",\r\n          borderColor: \"#DADADC\",\r\n          cornerActiveColor: \"rgb(235, 86, 72, 0.6)\",\r\n          menu: {\r\n            bgColor: \"#fff\",\r\n            dividerColor: \"#DBDBDB\",\r\n            listItem: {\r\n              textColor: \"#415058\",\r\n              hoverTextColor: \"#298DF8\",\r\n              disabledTextColor: \"rgba(65, 80, 88, 0.4)\",\r\n              bgColor: \"#fff\",\r\n              hoverBgColor: \"#F2F2F2\"\r\n            }\r\n          }\r\n        },\r\n        e.palette || {}\r\n      );\r\n    }), i = N(() => ({\r\n      backgroundImage: r.value ? `url(${e.eyeIcon || fe})` : `url(${e.closeEyeIcon || ve})`,\r\n      width: e.thick + \"px\",\r\n      height: e.thick + \"px\",\r\n      borderRight: `1px solid ${s.value.borderColor}`,\r\n      borderBottom: `1px solid ${s.value.borderColor}`\r\n    })), u = (o) => {\r\n      r.value = !r.value, t(\"onCornerClick\", r.value);\r\n    };\r\n    return O([() => e.isShowReferLine], () => {\r\n      r.value = e.isShowReferLine;\r\n    }), {\r\n      showReferLine: r,\r\n      paletteCpu: s,\r\n      cornerStyle: i,\r\n      onCornerClick: u\r\n    };\r\n  }\r\n}), ge = {\r\n  id: \"mb-ruler\",\r\n  class: \"style-ruler mb-ruler\"\r\n};\r\nfunction Ae(e, t, r, s, i, u) {\r\n  const o = D(\"RulerWrapper\");\r\n  return y(), B(\"div\", ge, [\r\n    V(o, {\r\n      vertical: !1,\r\n      width: e.width,\r\n      height: e.thick,\r\n      \"is-show-refer-line\": e.showReferLine,\r\n      thick: e.thick,\r\n      ratio: e.ratio,\r\n      start: e.startX,\r\n      lines: e.lines.h,\r\n      \"select-start\": e.shadow.x,\r\n      \"select-length\": e.shadow.width,\r\n      scale: e.scale,\r\n      palette: e.paletteCpu,\r\n      startNumX: e.startNumX,\r\n      endNumX: e.endNumX\r\n    }, null, 8, [\"width\", \"height\", \"is-show-refer-line\", \"thick\", \"ratio\", \"start\", \"lines\", \"select-start\", \"select-length\", \"scale\", \"palette\", \"startNumX\", \"endNumX\"]),\r\n    V(o, {\r\n      vertical: !0,\r\n      width: e.thick,\r\n      height: e.height,\r\n      \"is-show-refer-line\": e.showReferLine,\r\n      thick: e.thick,\r\n      ratio: e.ratio,\r\n      start: e.startY,\r\n      lines: e.lines.v,\r\n      \"select-start\": e.shadow.y,\r\n      \"select-length\": e.shadow.height,\r\n      scale: e.scale,\r\n      palette: e.paletteCpu,\r\n      startNumY: e.startNumY,\r\n      endNumY: e.endNumY\r\n    }, null, 8, [\"width\", \"height\", \"is-show-refer-line\", \"thick\", \"ratio\", \"start\", \"lines\", \"select-start\", \"select-length\", \"scale\", \"palette\", \"startNumY\", \"endNumY\"]),\r\n    w(\"a\", {\r\n      class: \"corner\",\r\n      style: E(e.cornerStyle),\r\n      onClick: t[0] || (t[0] = (...d) => e.onCornerClick && e.onCornerClick(...d))\r\n    }, null, 4)\r\n  ]);\r\n}\r\nconst Re = /* @__PURE__ */ Y(we, [[\"render\", Ae]]);\r\nexport {\r\n  Re as SketchRule,\r\n  Re as default\r\n};\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAA7ElEQVQ4je3SvS5EURSG4ccMmXYUQ0hoRoErEXMJ4iaE6GVqYlTojWugEf8/LZdApRLKCcVZh5PJOScTjUjmTb5irb3X2t/eezHkXzGHHTzhI/SIbTSLiio5uSrauMIbVtAIreId19iKvaVU0MUJJkr2TeIURwWmvtnEGWoRj+MAL3jGPuqxVsM5NspOfcVMxKO4xS6mQh3c+LnqbNQ08hquh5uUVjjIMoJLLGdyh1hLg+z9F3Cciedx39fwE3exltLFYp7Dflq4GMDhwFQlb9jBdGhPMjKF41L25T0sSX7zITQW7nq/cTjkj/gC6vIqCPem75wAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAABEUlEQVQ4jdXTu0oDQRiG4ccDBqw8YAIWWkgaBcHeYrG1iQRyARbegdjnAhRLRUEQjHoLIoh4QBRRFCvRWo2Fhb1FJjAGlqSIYF5YZv+Z4eX7d2foJO6RtFM4izfM/XtpgvcwTuAB3+F5xGqYb5luHARBXTqAfsygrNZFGT3NZF2o4BjFKGkjORxhLwRIZQVnyIS6GCWdxwYGw1oGp1hOk+XwgfFQ9+IWO1HSRVyENRhDFSN1SfwNlvCJ3VAXMI0FXOMQm3hFFs/4Qh6juNTQ/xT2ozqPq/B+glKQvuA82lfBZFrbMYUgiklCqqQVQSN9uMGaWktZrONJ+t9vyhC2g6CKLQz7ffjbRmfd/bt2Cv+WH7FAOwOy5F6RAAAAAElFTkSuQmCC\"","import 'vue3-sketch-ruler/lib/style.css'\n\nimport { SketchRule } from 'vue3-sketch-ruler'\n\nimport eyeIcon from '@/assets/images/editor/eye.png'\nimport closeEyeIcon from '@/assets/images/editor/eyeOffSharp.png'\nimport { useEditorScale } from '@/hooks/use-editor-scale'\nimport { useEditorStore } from '@/store/editor/index'\nimport { useThemeStore } from '@/store/theme'\n\nimport styles from './index.module.scss'\n\nexport default defineComponent({\n  name: 'SketchRuler',\n  setup() {\n    const state = reactive({\n      thick: 16,\n      startX: ref(0),\n      startY: ref(0),\n      lines: reactive({ h: [], v: [] })\n    })\n\n    const editorStore = useEditorStore()\n    const themeStore = useThemeStore()\n    const { editorScale } = storeToRefs(editorStore)\n    const { transByCurScale } = useEditorScale()\n\n    // 页面滚动事件\n    const handleResizeRuler = () => {\n      const screensRect = document\n        .querySelector('#screen')\n        ?.getBoundingClientRect()\n      const canvasRect = document\n        .querySelector('#editor')\n        ?.getBoundingClientRect()\n\n      // 标尺开始的刻度\n      state.startX = transByCurScale(\n        screensRect!.left + state.thick - canvasRect!.left\n      )\n\n      state.startY = transByCurScale(\n        screensRect!.top + state.thick - canvasRect!.top\n      )\n    }\n\n    // 计算画布大小\n    const containerRect = computed(() => {\n      const screenRef = document.getElementById('screen')\n      return {\n        width: screenRef?.clientWidth,\n        height: screenRef?.clientHeight\n      }\n    })\n\n    const paletteStyle = computed(() =>\n      themeStore.darkTheme\n        ? {\n            bgColor: '#18181c',\n            longfgColor: '#4d4d4d',\n            shortfgColor: '#4d4d4d',\n            fontColor: '#4d4d4d',\n            shadowColor: '#18181c',\n            borderColor: '#18181c',\n            cornerActiveColor: '#18181c'\n          }\n        : {\n            bgColor: '#fff',\n            longfgColor: '#cbcbcb',\n            shortfgColor: '#cbcbcb',\n            fontColor: '#ababab',\n            shadowColor: '#fff',\n            borderColor: '#e2e2e2',\n            cornerActiveColor: 'blue'\n          }\n    )\n\n    return {\n      ...toRefs(state),\n      editorScale,\n      containerRect,\n      handleResizeRuler,\n      paletteStyle,\n      eyeIcon,\n      closeEyeIcon\n    }\n  },\n  render() {\n    return (\n      <SketchRule\n        class={styles.sketchRule}\n        thick={this.thick}\n        eyeIcon={eyeIcon}\n        closeEyeIcon={closeEyeIcon}\n        scale={this.editorScale / 100}\n        width={this.containerRect?.width}\n        height={this.containerRect?.height}\n        startX={this.startX}\n        startY={this.startY}\n        lines={this.lines}\n        cornerActive={true}\n      />\n    )\n  }\n})\n","import { Primitive } from '@/primitives/primitive'\nimport { PrimitiveStyle } from '@/primitives/types'\nimport { useAreaSelectStore } from '@/store/area-select'\nimport { useEditorStore } from '@/store/editor'\nimport { getBoundBoxStyle, getStyle } from '@/utils/primitive'\nimport { Scene as IScene } from '@/views/design-space/chart/scene/use-state'\n\nimport AreaSelect from './AreaSelect'\nimport AuxiliaryLine from './AuxiliaryLine/index'\nimport BoundBox from './BoundBox/index'\nimport ContextMenu from './ContextMenu/index'\nimport { useMouseEvent } from './hooks/use-mouse-event'\nimport styles from './index.module.scss'\nimport Scene from './Scene/index'\nimport SketchRuler from './SketchRuler/index'\n\nexport default defineComponent({\n  name: 'Editor',\n  setup() {\n    const sceneRef = ref()\n    const rulerVisible = ref(false)\n    const areaSelectStore = useAreaSelectStore()\n    const editorStore = useEditorStore()\n    const { areaSelectVisible } = storeToRefs(areaSelectStore)\n    const { canvasStyle } = storeToRefs(editorStore)\n    const styleFilterAttrs = ['width', 'height', 'top', 'left']\n\n    const { groupState, editorScale, contextMenuRef, ...rest } = useMouseEvent()\n\n    // 设置场景背景\n    const setEditorScene = (val: IScene) => {\n      sceneRef.value.setEditorScene(val)\n    }\n\n    // 关闭右键菜单\n    const handleCloseContextMenu = () => {\n      contextMenuRef.value?.close()\n    }\n\n    // 编辑器样式\n    const editorStyle = computed(() => ({\n      width: `${canvasStyle.value.width}px`,\n      height: `${canvasStyle.value.height}px`,\n      transform: `scale(${editorScale.value / 100})`\n    }))\n\n    // 获取每个组件的样式\n    const getPrimitiveStyle = (style: PrimitiveStyle) =>\n      getStyle(style, styleFilterAttrs)\n\n    nextTick(() => (rulerVisible.value = true))\n\n    return {\n      ...rest,\n      sceneRef,\n      groupState,\n      editorStyle,\n      rulerVisible,\n      setEditorScene,\n      contextMenuRef,\n      getPrimitiveStyle,\n      areaSelectVisible,\n      handleCloseContextMenu\n    }\n  },\n  render() {\n    const renderPrimitive = (item: Primitive) =>\n      h(resolveComponent(item.cName), {\n        id: `primitive${item.id}`,\n        class: styles.primitive,\n        style: this.getPrimitiveStyle(item.style),\n        'data-context': item.cName,\n        dataSource: item\n      })\n\n    const renderPrimitives = () =>\n      this.primitives.map((item, index) => (\n        <BoundBox\n          index={index}\n          style={getBoundBoxStyle(item.style)}\n          primitive={item as Primitive}\n          pStyle={item.style}\n          onCloseContextmenu={this.handleCloseContextMenu}\n        >\n          {renderPrimitive(item as Primitive)}\n        </BoundBox>\n      ))\n\n    return (\n      <>\n        <div\n          id='screen'\n          ref='screenRef'\n          class={styles.screen}\n          onWheel={this.handleMouseWheel}\n          onScroll={this.handleMouseScroll}\n        >\n          <div\n            id='editorContainer'\n            ref='editorContaineRef'\n            class={styles.container}\n          >\n            <div\n              id='editor'\n              ref='editorRef'\n              data-context='Editor'\n              class={styles.editor}\n              style={this.editorStyle}\n              onMousedown={this.handleMouseDown}\n              onMouseup={this.handleMouseUp}\n              onContextmenu={this.handleShowContextMenu}\n            >\n              <AreaSelect\n                v-show={this.areaSelectVisible}\n                options={this.groupState}\n              />\n              <AuxiliaryLine />\n              <ContextMenu ref='contextMenuRef' />\n              <Scene ref='sceneRef' class={styles.scene} />\n              {renderPrimitives()}\n            </div>\n          </div>\n        </div>\n        {this.rulerVisible ? <SketchRuler ref='sketchRulerRef' /> : null}\n      </>\n    )\n  }\n})\n","import Editor from '@/components/Editor/index'\n\nimport { Scene } from '../scene/use-state'\nimport styles from './index.module.scss'\nimport { useContainer } from './use-container'\n\nexport default defineComponent({\n  name: 'Container',\n  components: { Editor },\n  setup() {\n    const editorRef = ref()\n    const { ...restFunc } = useContainer()\n\n    const setEditorScene = (val: Scene) => {\n      editorRef.value.setEditorScene(val)\n    }\n\n    return {\n      editorRef,\n      ...restFunc,\n      setEditorScene\n    }\n  },\n  render() {\n    return (\n      <>\n        <div\n          class={styles.container}\n          onDrop={this.handleDrop}\n          onDragover={this.handleDragOver}\n          onMousedown={this.handleMouseDown}\n          onMouseup={this.handleMouseUp}\n        >\n          <Editor ref='editorRef' />\n        </div>\n      </>\n    )\n  }\n})\n","import { ceil } from 'lodash'\n\nimport { useEditorScale } from '@/hooks/use-editor-scale'\nimport { primitivesList } from '@/primitives/loader'\nimport { Primitive } from '@/primitives/primitive'\nimport { PrimitiveStyle } from '@/primitives/types'\nimport { useEditorStore } from '@/store/editor/index'\n\nexport const useContainer = () => {\n  const editorStore = useEditorStore()\n  const { transByCurScale } = useEditorScale()\n\n  // 拖动结束事件\n  const handleDrop = (e: DragEvent) => {\n    e.preventDefault()\n    e.stopPropagation()\n\n    const name = e.dataTransfer!.getData('name')\n    const editorRef = document.querySelector('#editor')!\n    const editorRefRec = editorRef.getBoundingClientRect()\n\n    const primitive: Primitive = new primitivesList[name]()\n    const style = {\n      top: ceil(transByCurScale(e.clientY - editorRefRec.y)),\n      left: ceil(transByCurScale(e.clientX - editorRefRec.x))\n    } as PrimitiveStyle\n\n    primitive.updateStyle(style)\n    editorStore.addPrimitive(primitive)\n  }\n\n  const handleDragOver = (e: DragEvent) => {\n    e.preventDefault()\n    e.dataTransfer!.dropEffect = 'copy'\n  }\n\n  const handleMouseDown = (e: MouseEvent) => {\n    e.stopPropagation()\n  }\n\n  const handleMouseUp = () => {}\n\n  return {\n    handleDrop,\n    handleDragOver,\n    handleMouseDown,\n    handleMouseUp\n  }\n}\n"],"names":["useAreaSelectStore","defineStore","groupStyle","ref","selectedPrimitives","areaSelectVisible","clearPrimitives","value","setAreaSelectOptions","style","primitives","setAreaSelectVisible","visible","defineComponent","name","props","options","type","Object","default","setup","computed","left","start","x","top","y","width","height","render","_createVNode","this","class","styles","eventEmitter","constructor","__publicField","on","eventName","callback","events","includes","push","off","eventCallbacks","filter","item","emit","arg","length","once","onceCallback","editorStore","useEditorStore","lineElementsRef","LINE_NAMES","NEAR_THRESHOLD","lineStatus","reactive","xt","xc","xb","yl","yc","yr","setLineElementRef","element","hideLines","keys","forEach","line","showLines","isDownward","isRightward","currentPrimitive","curPrimitive","theTop","theLeft","right","theRight","bottom","theBottom","calcPrimitiveAxis","currentPrimitiveHalfWidth","currentPrimitiveHalfHeight","primitive","primitiveStyle","primitiveHalfWidth","primitiveHalfHeight","conditions","isNearly","lineNode","dragShift","lineShift","needToShow","key","condition","updateStyleByKey","chooseTheTrueLine","dragValue","targetValue","Math","abs","watchEffect","map","_withDirectives","lineName","_vShow","pStyle","index","required","Number","emits","slots","areaSelectStore","storeToRefs","transByCurScale","useEditorScale","curRef","cursors","angleToCursor","drawPoints","pointStyle","end","cursor","lt","t","rt","r","rb","b","lb","l","pointStr","hasT","hasB","hasL","hasR","newLeft","newTop","floor","marginLeft","marginTop","useBoundBox","getCursorStyle","result","lastMatchIndex","angle","mod360","i","angleLimit","handleMouseDownEvent","e","stopPropagation","preventDefault","setClickPrimitiveStatus","setCurPrimitive","startY","clientY","startX","clientX","startTop","startLeft","mouseMoveEvent","event","curX","curY","updateStyle","ceil","mouseUpEvent","removeEventListener","addEventListener","onMounted","handleClickBoundBox","isSelected","id","renderDrawPoints","onMousedown","handleAdjustSize","pType","moveEvent","disY","disX","test","newHeight","newWidth","assign","max","toFixed","onClick","useContextMenu","menuState","copyData","handleCompose","handleDecompose","allPrimitives","editorRect","document","querySelector","getBoundingClientRect","cName","parentStyle","_a","childPrimitives","deletePrimitives","groupPrimitive","GroupPrimitive","createGroupStyle","addPrimitive","batchDeletePrimitive","_b","editor","deleteCurPrimitive","useCompose","operations","handleCopy","cloneDeep","utils","createId","window","$message","success","handlePaste","warning","handleClearCanvas","clear","handelDelete","handleUp","upCurComponent","handleDown","downCurComponent","handleTop","moveCurPrimitiveByIndex","handleBottom","handleCreateGroup","handleDeleteGroup","expose","variables","contextType","contextOptions","handleMouseUp","defaultOptions","label","handler","groupOptions","editorOptions","getContextOptions","unshift","contextStyle","show","close","Teleport","to","onMouseup","_createTextVNode","disabled","useMouseEvent","state","lastX","lastY","isSpaceDown","isMouseDown","screenRef","editorRef","contextMenuRef","sketchRulerRef","editorContaineRef","groupState","onDrawGroupBoundry","transAbsByCurScale","editorX","editorY","hideAreaSelect","saveAreaSelectData","getInternalPrimitives","Infinity","primitives2","rectInfo","getElementById","style2","getPrimitiveLocation","move","up","useGroup","editorScale","getContextElementType","parentNode","getAttribute","dataType","deltaX","deltaY","scrollBy","space","useMagicKeys","passive","onEventFired","code","watch","v","containerRect","scrollLeft","scrollTop","isClickPrimitive","button","handleMouseDown","handleMouseWheel","ctrlKey","metaKey","scaleValue","wheelDelta","setEditorScale","handleResizeRuler","handleMouseScroll","handleShowContextMenu","target","_","p","scale","thick","palette","vertical","Boolean","isShowReferLine","S","s","P","u","N","n","c","o","f","lineColor","borderTop","borderLeft","d","startValue","showLine","offset","borderCursor","actionStyle","h","A","k","round","g","handleRemove","Y","__vccOpts","ee","ne","I","B","E","w","G","U","re","showIndicator","valueNum","ratio","selectStart","selectLength","startNumX","endNumX","startNumY","endNumY","W","canvasContext","devicePixelRatio","getContext","a","font","lineWidth","textBaseline","bgColor","fontColor","shadowColor","longfgColor","shortfgColor","clearRect","fillStyle","fillRect","X","C","ae","$","R","Q","T","F","H","q","K","beginPath","strokeStyle","m","moveTo","save","translate","rotate","PI","fillText","toString","restore","lineTo","stroke","closePath","z","L","setTransform","oe","O","handle","offsetY","offsetX","canvas","ue","components","CanvasRuler","onMouseenter","onMousemove","onMouseleave","$emit","RulerLine","lines","Array","splice","rwClassName","rwStyle","indicatorStyle","handleNewLine","handleLineRelease","handleLineRemove","de","ce","we","RulerWrapper","D","Z","V","onOnAddLine","j","J","onOnRemove","onOnRelease","eyeIcon","String","closeEyeIcon","shadow","hasOwnProperty","borderColor","cornerActiveColor","menu","dividerColor","listItem","textColor","hoverTextColor","disabledTextColor","hoverBgColor","backgroundImage","borderRight","borderBottom","showReferLine","paletteCpu","cornerStyle","onCornerClick","ge","Re","themeStore","useThemeStore","clientWidth","clientHeight","paletteStyle","darkTheme","toRefs","screensRect","canvasRect","SketchRule","cornerActive","sceneRef","rulerVisible","canvasStyle","styleFilterAttrs","rest","editorStyle","transform","nextTick","setEditorScene","val","getPrimitiveStyle","getStyle","handleCloseContextMenu","renderPrimitive","resolveComponent","dataSource","_Fragment","screen","onWheel","onScroll","container","onContextmenu","AreaSelect","AuxiliaryLine","ContextMenu","Scene","scene","renderPrimitives","_slot","BoundBox","getBoundBoxStyle","onCloseContextmenu","_isVNode","prototype","call","SketchRuler","Editor","restFunc","handleDrop","dataTransfer","getData","editorRefRec","primitivesList","handleDragOver","dropEffect","useContainer","onDrop","onDragover"],"mappings":"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","x_google_ignoreList":[11]}