import{u as t}from"./index-0ddafba1.js";import{C as e,d as o,k as i,B as n,a1 as r}from"./index-3908b95d.js";import{C as s}from"./index-e5622c65.js";import{u as a}from"./use-cesium-source-loader-9445a53f.js";import{u as l}from"./index-25a38a21.js";function c(){const o=t(),{editorScale:i}=e(o);return{transByCurScale:t=>100*t/i.value,transAbsByCurScale:t=>100*Math.abs(t)/i.value}}function u(t){return(t+360)%360}function h(t){return 100*t+"%"}const p=["fontSize","width","height","top","left","borderWidth","letterSpacing","borderRadius"];function d(t){return{top:t.top,left:t.left,right:t.left+t.width,bottom:t.top+t.height}}function f(t,e=[]){const o={};return Object.keys(t).forEach((i=>{e.includes(i)||t[i]&&(o[i]=t[i],p.includes(i)&&(o[i]+="px"))})),o}function g(t){const e={};for(const[o,i]of Object.entries(t))i&&(e[o]=`${i}px`);return e}function y(t){const e=t.top+t.height,o=t.left+t.width;return{left:t.left,top:t.top,right:o,bottom:e}}function m(t,e,o){const{transByCurScale:i}=c(),n=document.getElementById(`primitive${t.id}`).getBoundingClientRect(),r=i(n.left-e.left+n.width/2),s=i(n.top-e.top+n.height/2);t.style.width=parseFloat(t.groupStyle.width)/100*o.width,t.style.height=parseFloat(t.groupStyle.height)/100*o.height,t.style.left=r-t.style.width/2,t.style.top=s-t.style.height/2,t.groupStyle={}}function S(t){var e;const o=t.style;null==(e=t.childPrimitives)||e.forEach((t=>{if(!Object.keys(t.groupStyle).length){const e={...t.style};t.groupStyle=f(e),t.groupStyle.left=h((e.left-o.left)/o.width),t.groupStyle.top=h((e.top-o.top)/o.height),t.groupStyle.width=h(e.width/o.width),t.groupStyle.height=h(e.height/o.height)}}))}const w="_container_pcchd_38",v=o({name:"scene",setup(){const t=i(),e=i(),o=l(),{loadCesiumSource:n}=a(e);return{sceneType:t,setEditorScene:async i=>{t.value=i.type,await r(),"map"===i.type&&(e.value=s.initViewer("mapScene"),n(i.dataSource),o.saveCanvasScene({type:"map",scene:i.dataSource}))}}},render(){return n("div",{class:w},["map"===this.sceneType?n("div",{id:"mapScene"},null):n("div",{id:"threeScene"},null)])}});export{v as S,S as a,f as b,d as c,m as d,g as e,y as g,u as m,c as u};
//# sourceMappingURL=index-2bf89f4a.js.map
