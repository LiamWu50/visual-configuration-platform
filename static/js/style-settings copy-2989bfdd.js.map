{"version":3,"file":"style-settings copy-2989bfdd.js","sources":["../../../src/views/design-space/chart/configuration/style-settings copy.tsx"],"sourcesContent":["import { debounce } from 'lodash'\nimport {\n  NCollapse,\n  NCollapseItem,\n  NForm,\n  NFormItem,\n  NInputNumber\n} from 'naive-ui'\n\nimport { AttrFormTypes } from '@/common/attr-form-types'\nimport { AttrType, StyleAttrs } from '@/primitives/types'\nimport { useEditorStore } from '@/store/editor'\nimport utils from '@/utils'\n\nimport styles from './index.module.scss'\n\nconst { defaultValue } = utils\n\nexport default defineComponent({\n  name: 'StyleSettings',\n  setup() {\n    const editorStore = useEditorStore()\n\n    const { curPrimitive } = storeToRefs(editorStore)\n    const curStyleAttrs = computed(() => curPrimitive.value?.styleAttrs)\n\n    // 监听表单变化，动态修改primitive样式\n    const handleChangStyle = debounce((key: string, val: any) => {\n      const locationKeys = ['top', 'left', 'width', 'height']\n      if (locationKeys.includes(key)) {\n        curPrimitive.value?.updateStyleByKey(key, val)\n      }\n    }, 300)\n\n    const renderFormItem = (item: AttrType) => {\n      switch (item.type) {\n        case AttrFormTypes.NUMBER:\n          const numberMax = defaultValue(item.options['max'], 999999)\n          const numberMin = defaultValue(item.options['min'], -999999)\n          const precision = defaultValue(item.options['precision'], undefined)\n\n          return (\n            <NInputNumber\n              v-model:value={item.options.value}\n              onUpdateValue={(event) => handleChangStyle(item.prop, event)}\n              max={numberMax}\n              min={numberMin}\n              precision={precision}\n              clearable={true}\n              placeholder='请输入'\n            />\n          )\n      }\n    }\n\n    const renderForm = (data: StyleAttrs) => (\n      <NForm size='small' labelPlacement='left' labelAlign='left'>\n        {data.children.map((item) => (\n          <NFormItem\n            key={`${curPrimitive.value?.id}${item.prop}`}\n            label={item.label}\n            showLabel={item.showLabel}\n          >\n            {renderFormItem(item)}\n          </NFormItem>\n        ))}\n      </NForm>\n    )\n\n    return () => (\n      <div class={styles.chart}>\n        <NCollapse default-expanded-names='0' accordion>\n          {curStyleAttrs.value?.map((item, index) => (\n            <NCollapseItem\n              key={index}\n              title={item.label}\n              name={index}\n              v-slots={{\n                default: () => renderForm(item)\n              }}\n            ></NCollapseItem>\n          ))}\n        </NCollapse>\n      </div>\n    )\n  }\n})\n"],"names":["_isSlot","s","Object","prototype","toString","call","_isVNode","defaultValue","utils","styleSettings_copy","defineComponent","name","setup","editorStore","useEditorStore","curPrimitive","storeToRefs","includes","key","_slot2","size","labelPlacement","labelAlign","_slot","showLabel","item","numberMax","options","numberMin","precision","value","max","min","clearable","placeholder","_createVNode","class","styles","chart","accordion","default","index"],"mappings":"mmBAcwC,SAAAA,EAAAC,GAAA,MAAA,mBAAAA,GAAA,oBAAAC,OAAAC,UAAAC,SAAAC,KAAAJ,KAAAK,EAAAL,EAAA,CAExC,MAAAM,aAAQA,GAAaC,EAErBC,EAAAC,EAAA,CACEC,KAAAA,gBACAC,KAAAA,GACE,MAAAC,EAAAC,kBAEQC,GAAaC,EAAAH,+HAMnBI,SAAAC,gDAEA,cAwBkC,IAAAC,cAAAC,KAAA,QAAAC,eAAA,OAAAC,WAAA,sCAER,IAAAC,4EAGHC,UAAAC,EAAAD,0CAvBnB,MAAAE,EAAAnB,EAAAkB,EAAAE,QAAA,IAAA,QACAC,EAAArB,EAAAkB,EAAAE,QAAA,KAAA,QACAE,EAAAtB,EAAAkB,EAAAE,QAAA,eAAA,eAEAG,MAAAL,EAAAE,QAAAG,yEAGgEC,IAAAL,EAC9CM,IAAAJ,EACAC,UAAAA,EACMI,WAAA,EACLC,YAAA,OAAA,KAAA,CAIvB,2BAW2B,yBAEvB,EAIN,MAAA,IAAAC,EAAA,MAAA,CAAOC,MAAAC,EAAAC,aACmB,yBAAA,IAAAC,WAAA,GAAA,CAAAC,QAAAA,WAAAA,MAAAA,CAAAA,OAAAA,EAAAA,EAAAA,YAAAA,EAAAA,EAAAA,KAAAA,CAAAA,EAAAA,IAAAA,EAAAA,EAAAA,CAEkBtB,IAAAuB,yBAMhCD,QAAAA,IAAAA,EAAAA,OACF,KAMZ"}