{"version":3,"file":"index-9354a9ca.js","sources":["../../../src/store/editor/index.ts"],"sourcesContent":["import { Primitive } from '@/primitives/primitive'\nimport { CanvasScene } from '@/primitives/types'\nimport { CanvasStyle } from '@/primitives/types'\n\nexport const useEditorStore = defineStore(\n  'editor',\n  () => {\n    const canvasStyle = ref<CanvasStyle>({ width: 1920, height: 1080 })\n    const primitives = ref<Primitive[]>([])\n    const curPrimitive = ref<Primitive | null>(null)\n    const isClickPrimitive = ref<boolean>(false)\n    const editorScale = ref<number>(40)\n    const canvasScene = ref<CanvasScene>()\n\n    /**\n     * 设置画布样式\n     * @param style CanvasStyle\n     */\n    const setCanvasStyle = (style: CanvasStyle) => {\n      canvasStyle.value = style\n    }\n\n    /**\n     * 添加primitive到画布编辑器\n     * @param val Primitive\n     */\n    const addPrimitive = (val: Primitive) => {\n      primitives.value.push(val)\n    }\n\n    /**\n     * 清空画布\n     */\n    const clear = () => {\n      primitives.value.length = 0\n      curPrimitive.value = null\n      isClickPrimitive.value = false\n    }\n\n    /**\n     * 设置当前选中的primitive\n     * @param val Primitive\n     */\n    const setCurPrimitive = (val: Primitive | null) => {\n      curPrimitive.value = val\n    }\n\n    /**\n     * 删除当前选中的primitive\n     */\n    const deleteCurPrimitive = () => {\n      const index = curPrimitiveIndex.value\n      if (index > -1) primitives.value.splice(index, 1)\n      curPrimitive.value = null\n    }\n\n    /**\n     * 批量删除 primitive\n     * @param primitives Primitive[]\n     */\n    const batchDeletePrimitive = (data: Primitive[]) => {\n      data.forEach(({ id }) => {\n        const index = primitives.value.findIndex((p) => p.id === id)\n        primitives.value.splice(index, 1)\n      })\n    }\n\n    /**\n     * 设置当前是否点击primitive的状态\n     * @param status Boolean\n     */\n    const setClickPrimitiveStatus = (status: boolean) => {\n      isClickPrimitive.value = status\n    }\n\n    /**\n     * 当前选中primitive在数组中的下标\n     */\n    const curPrimitiveIndex = computed(() =>\n      primitives.value.findIndex(({ id }) => id === curPrimitive.value?.id)\n    )\n\n    /**\n     * 移动当前选中Primitive位置\n     * @param toIndex Number\n     */\n    const moveCurPrimitiveByIndex = (toIndex: number) => {\n      const indexToMove = curPrimitiveIndex.value\n\n      const [valueToMove] = primitives.value.splice(indexToMove, 1)\n      primitives.value.splice(indexToMove + toIndex, 0, valueToMove)\n    }\n\n    /**\n     * 置顶当前选中组件\n     */\n    const upCurComponent = () => {\n      const indexToMove = curPrimitiveIndex.value\n      const [valueToMove] = primitives.value.splice(indexToMove, 1)\n      primitives.value.push(valueToMove)\n    }\n\n    /**\n     * 置底当前选中组件\n     */\n    const downCurComponent = () => {\n      const indexToMove = curPrimitiveIndex.value\n      const [valueToMove] = primitives.value.splice(indexToMove, 1)\n      primitives.value.unshift(valueToMove)\n    }\n\n    /**\n     * 设置编辑器的缩放比\n     * @param scale Number\n     */\n    const setEditorScale = (scale: number) => {\n      editorScale.value = scale\n    }\n\n    /**\n     * 保存画布的场景\n     * @param scene CanvasScene\n     */\n    const saveCanvasScene = (scene: CanvasScene) => {\n      console.log('canvasScene', scene)\n\n      canvasScene.value = scene\n    }\n\n    return {\n      canvasStyle,\n      canvasScene,\n      primitives,\n      setCanvasStyle,\n      curPrimitive,\n      isClickPrimitive,\n      editorScale,\n      addPrimitive,\n      clear,\n      deleteCurPrimitive,\n      batchDeletePrimitive,\n      setCurPrimitive,\n      setClickPrimitiveStatus,\n      moveCurPrimitiveByIndex,\n      upCurComponent,\n      downCurComponent,\n      setEditorScale,\n      saveCanvasScene\n    }\n  },\n  {\n    persist: true\n  }\n)\n"],"names":["useEditorStore","defineStore","canvasStyle","ref","width","height","primitives","curPrimitive","isClickPrimitive","editorScale","canvasScene","curPrimitiveIndex","computed","value","findIndex","id","_a","setCanvasStyle","style","addPrimitive","val","push","clear","length","deleteCurPrimitive","index","splice","batchDeletePrimitive","data","forEach","p","setCurPrimitive","setClickPrimitiveStatus","status","moveCurPrimitiveByIndex","toIndex","indexToMove","valueToMove","upCurComponent","downCurComponent","unshift","setEditorScale","scale","saveCanvasScene","scene","persist"],"mappings":"sDAIO,MAAMA,EAAiBC,EAC5B,UACA,KACE,MAAMC,EAAcC,EAAiB,CAAEC,MAAO,KAAMC,OAAQ,OACtDC,EAAaH,EAAiB,IAC9BI,EAAeJ,EAAsB,MACrCK,EAAmBL,GAAa,GAChCM,EAAcN,EAAY,IAC1BO,EAAcP,IAkEdQ,EAAoBC,GAAS,IACjCN,EAAWO,MAAMC,WAAU,EAAGC,eAAgB,OAAAA,KAAA,OAAAC,EAAAT,EAAaM,YAAO,EAAAG,EAAAD,GAAA,MAkD7D,MAAA,CACLb,cACAQ,cACAJ,aACAW,eAnHsBC,IACtBhB,EAAYW,MAAQK,CAAA,EAmHpBX,eACAC,mBACAC,cACAU,aA/GoBC,IACTd,EAAAO,MAAMQ,KAAKD,EAAG,EA+GzBE,MAzGY,KACZhB,EAAWO,MAAMU,OAAS,EAC1BhB,EAAaM,MAAQ,KACrBL,EAAiBK,OAAQ,CAAA,EAuGzBW,mBAzFyB,KACzB,MAAMC,EAAQd,EAAkBE,MAC5BY,GAAQ,GAAenB,EAAAO,MAAMa,OAAOD,EAAO,GAC/ClB,EAAaM,MAAQ,IAAA,EAuFrBc,qBAhF4BC,IAC5BA,EAAKC,SAAQ,EAAGd,SACR,MAAAU,EAAQnB,EAAWO,MAAMC,WAAWgB,GAAMA,EAAEf,KAAOA,IAC9CT,EAAAO,MAAMa,OAAOD,EAAO,EAAC,GACjC,EA6EDM,gBAlGuBX,IACvBb,EAAaM,MAAQO,CAAA,EAkGrBY,wBAvE+BC,IAC/BzB,EAAiBK,MAAQoB,CAAA,EAuEzBC,wBAzD+BC,IAC/B,MAAMC,EAAczB,EAAkBE,OAE/BwB,GAAe/B,EAAWO,MAAMa,OAAOU,EAAa,GAC3D9B,EAAWO,MAAMa,OAAOU,EAAcD,EAAS,EAAGE,EAAW,EAsD7DC,eAhDqB,KACrB,MAAMF,EAAczB,EAAkBE,OAC/BwB,GAAe/B,EAAWO,MAAMa,OAAOU,EAAa,GAChD9B,EAAAO,MAAMQ,KAAKgB,EAAW,EA8CjCE,iBAxCuB,KACvB,MAAMH,EAAczB,EAAkBE,OAC/BwB,GAAe/B,EAAWO,MAAMa,OAAOU,EAAa,GAChD9B,EAAAO,MAAM2B,QAAQH,EAAW,EAsCpCI,eA/BsBC,IACtBjC,EAAYI,MAAQ6B,CAAA,EA+BpBC,gBAxBuBC,IAGvBlC,EAAYG,MAAQ+B,CAAA,EAqBpB,GAGJ,CACEC,SAAS"}