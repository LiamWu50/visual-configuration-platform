import{c as t,l as e,k as r,y as o,o as n,ac as l,H as a,F as s,ar as i,d,A as u,as as f,s as p,j as h,m as c,h as m,S as g,at as v,w as x,q as b,a1 as y}from"./index-6455addc.js";import{a as w,o as $}from"./Scrollbar-d957449d.js";import{b as M}from"./VResizeObserver-24ff23d9.js";import{u as z}from"./use-false-until-truthy-4cf4cfa9.js";import{c as I,o as T,a as S}from"./cssr-67ce2f74.js";const B=t("n-internal-select-menu"),E=t("n-internal-select-menu-body"),R=t("n-modal-body"),Z=t("n-modal"),L=t("n-drawer-body"),X=t("n-popover-body"),Y="__disabled__";function A(t){const a=e(R,null),s=e(L,null),i=e(X,null),d=e(E,null),u=r();if("undefined"!=typeof document){u.value=document.fullscreenElement;const t=()=>{u.value=document.fullscreenElement};o((()=>{w("fullscreenchange",document,t)})),n((()=>{$("fullscreenchange",document,t)}))}return l((()=>{var e;const{to:r}=t;return void 0!==r?!1===r?Y:!0===r?u.value||"body":r:(null==a?void 0:a.value)?null!==(e=a.value.$el)&&void 0!==e?e:a.value:(null==s?void 0:s.value)?s.value:(null==i?void 0:i.value)?i.value:(null==d?void 0:d.value)?d.value:null!=r?r:u.value||"body"}))}function C(t,e,r="default"){const o=e[r];if(void 0===o)throw new Error(`[vueuc/${t}]: slot[${r}] is empty.`);return o()}function j(t,e=!0,r=[]){return t.forEach((t=>{if(null!==t)if("object"==typeof t)if(Array.isArray(t))j(t,e,r);else if(t.type===s){if(null===t.children)return;Array.isArray(t.children)&&j(t.children,e,r)}else t.type!==i&&r.push(t);else"string"!=typeof t&&"number"!=typeof t||r.push(a(String(t)))})),r}function k(t,e,r="default"){const o=e[r];if(void 0===o)throw new Error(`[vueuc/${t}]: slot[${r}] is empty.`);const n=j(o());if(1===n.length)return n[0];throw new Error(`[vueuc/${t}]: slot[${r}] should have exactly one child.`)}A.tdkey=Y,A.propTo={type:[String,Object,Boolean],default:void 0};let P=null;function V(){if(null===P&&(P=document.getElementById("v-binder-view-measurer"),null===P)){P=document.createElement("div"),P.id="v-binder-view-measurer";const{style:t}=P;t.position="fixed",t.left="0",t.right="0",t.top="0",t.bottom="0",t.pointerEvents="none",t.visibility="hidden",document.body.appendChild(P)}return P.getBoundingClientRect()}function W(t){const e=t.getBoundingClientRect(),r=V();return{left:e.left-r.left,top:e.top-r.top,bottom:r.height+r.top-e.bottom,right:r.width+r.left-e.right,width:e.width,height:e.height}}function q(t){if(null===t)return null;const e=function(t){return 9===t.nodeType?null:t.parentNode}(t);if(null===e)return null;if(9===e.nodeType)return document;if(1===e.nodeType){const{overflow:t,overflowX:r,overflowY:o}=getComputedStyle(e);if(/(auto|scroll|overlay)/.test(t+o+r))return e}return q(e)}const D=d({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(t){var o;u("VBinder",null===(o=f())||void 0===o?void 0:o.proxy);const l=e("VBinder",null),a=r(null);let s=[];const i=()=>{for(const t of s)$("scroll",t,p,!0);s=[]},d=new Set,p=()=>{M(h)},h=()=>{d.forEach((t=>t()))},c=new Set,m=()=>{c.forEach((t=>t()))};return n((()=>{$("resize",window,m),i()})),{targetRef:a,setTargetRef:e=>{a.value=e,l&&t.syncTargetWithParent&&l.setTargetRef(e)},addScrollListener:t=>{0===d.size&&(()=>{let t=a.value;for(;t=q(t),null!==t;)s.push(t);for(const e of s)w("scroll",e,p,!0)})(),d.has(t)||d.add(t)},removeScrollListener:t=>{d.has(t)&&d.delete(t),0===d.size&&i()},addResizeListener:t=>{0===c.size&&w("resize",window,m),c.has(t)||c.add(t)},removeResizeListener:t=>{c.has(t)&&c.delete(t),0===c.size&&$("resize",window,m)}}},render(){return C("binder",this.$slots)}}),N=d({name:"Target",setup(){const{setTargetRef:t,syncTarget:r}=e("VBinder");return{syncTarget:r,setTargetDirective:{mounted:t,updated:t}}},render(){const{syncTarget:t,setTargetDirective:e}=this;return t?p(k("follower",this.$slots),[[e]]):k("follower",this.$slots)}}),O="@@coContext",_={mounted(t,{value:e,modifiers:r}){t[O]={handler:void 0},"function"==typeof e&&(t[O].handler=e,w("clickoutside",t,e,{capture:r.capture}))},updated(t,{value:e,modifiers:r}){const o=t[O];"function"==typeof e?o.handler?o.handler!==e&&($("clickoutside",t,o.handler,{capture:r.capture}),o.handler=e,w("clickoutside",t,e,{capture:r.capture})):(t[O].handler=e,w("clickoutside",t,e,{capture:r.capture})):o.handler&&($("clickoutside",t,o.handler,{capture:r.capture}),o.handler=void 0)},unmounted(t,{modifiers:e}){const{handler:r}=t[O];r&&$("clickoutside",t,r,{capture:e.capture}),t[O].handler=void 0}};const F=new class{constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(t,e){const{elementZIndex:r}=this;if(void 0!==e)return t.style.zIndex=`${e}`,void r.delete(t);const{nextZIndex:o}=this;if(r.has(t)){if(r.get(t)+1===this.nextZIndex)return}t.style.zIndex=`${o}`,r.set(t,o),this.nextZIndex=o+1,this.squashState()}unregister(t,e){const{elementZIndex:r}=this;r.has(t)&&r.delete(t),this.squashState()}squashState(){const{elementCount:t}=this;t||(this.nextZIndex=2e3),this.nextZIndex-t>2500&&this.rearrange()}rearrange(){const t=Array.from(this.elementZIndex.entries());t.sort(((t,e)=>t[1]-e[1])),this.nextZIndex=2e3,t.forEach((t=>{const e=t[0],r=this.nextZIndex++;`${r}`!==e.style.zIndex&&(e.style.zIndex=`${r}`)}))}},H="@@ziContext",G={mounted(t,e){const{value:r={}}=e,{zIndex:o,enabled:n}=r;t[H]={enabled:!!n,initialized:!1},n&&(F.ensureZIndex(t,o),t[H].initialized=!0)},updated(t,e){const{value:r={}}=e,{zIndex:o,enabled:n}=r,l=t[H].enabled;n&&!l&&(F.ensureZIndex(t,o),t[H].initialized=!0),t[H].enabled=!!n},unmounted(t,e){if(!t[H].initialized)return;const{value:r={}}=e,{zIndex:o}=r;F.unregister(t,o)}},J=d({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup:t=>({showTeleport:z(h(t,"show")),mergedTo:c((()=>{const{to:e}=t;return null!=e?e:"body"}))}),render(){return this.showTeleport?this.disabled?C("lazy-teleport",this.$slots):m(g,{disabled:this.disabled,to:this.mergedTo},C("lazy-teleport",this.$slots)):null}}),K={top:"bottom",bottom:"top",left:"right",right:"left"},Q={start:"end",center:"center",end:"start"},U={top:"height",bottom:"height",left:"width",right:"width"},tt={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},et={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},rt={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},ot={top:!0,bottom:!1,left:!0,right:!1},nt={top:"end",bottom:"start",left:"end",right:"start"};const lt=S([S(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),S(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[S("> *",{pointerEvents:"all"})])]),at=d({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(t){const a=e("VBinder"),s=l((()=>void 0!==t.enabled?t.enabled:t.show)),i=r(null),d=r(null),u=()=>{const{syncTrigger:e}=t;e.includes("scroll")&&a.addScrollListener(c),e.includes("resize")&&a.addResizeListener(c)},f=()=>{a.removeScrollListener(c),a.removeResizeListener(c)};o((()=>{s.value&&(c(),u())}));const p=v();lt.mount({id:"vueuc/binder",head:!0,anchorMetaName:I,ssr:p}),n((()=>{f()})),T((()=>{s.value&&c()}));const c=()=>{if(!s.value)return;const e=i.value;if(null===e)return;const r=a.targetRef,{x:o,y:n,overlap:l}=t,u=void 0!==o&&void 0!==n?function(t,e){const r=V();return{top:e,left:t,height:0,width:0,right:r.width-t,bottom:r.height-e}}(o,n):W(r);e.style.setProperty("--v-target-width",`${Math.round(u.width)}px`),e.style.setProperty("--v-target-height",`${Math.round(u.height)}px`);const{width:f,minWidth:p,placement:h,internalShift:c,flip:m}=t;e.setAttribute("v-placement",h),l?e.setAttribute("v-overlap",""):e.removeAttribute("v-overlap");const{style:g}=e;g.width="target"===f?`${u.width}px`:void 0!==f?f:"",g.minWidth="target"===p?`${u.width}px`:void 0!==p?p:"";const v=W(e),x=W(d.value),{left:b,top:y,placement:w}=function(t,e,r,o,n,l){if(!n||l)return{placement:t,top:0,left:0};const[a,s]=t.split("-");let i=null!=s?s:"center",d={top:0,left:0};const u=(t,n,l)=>{let a=0,s=0;const i=r[t]-e[n]-e[t];return i>0&&o&&(l?s=ot[n]?i:-i:a=ot[n]?i:-i),{left:a,top:s}},f="left"===a||"right"===a;if("center"!==i){const o=rt[t],n=K[o],l=U[o];if(r[l]>e[l]){if(e[o]+e[l]<r[l]){const t=(r[l]-e[l])/2;e[o]<t||e[n]<t?e[o]<e[n]?(i=Q[s],d=u(l,n,f)):d=u(l,o,f):i="center"}}else r[l]<e[l]&&e[n]<0&&e[o]>e[n]&&(i=Q[s])}else{const t="bottom"===a||"top"===a?"left":"top",o=K[t],n=U[t],l=(r[n]-e[n])/2;(e[t]<l||e[o]<l)&&(e[t]>e[o]?(i=nt[t],d=u(n,t,f)):(i=nt[o],d=u(n,o,f)))}let p=a;return e[a]<r[U[a]]&&e[a]<e[K[a]]&&(p=K[a]),{placement:"center"!==i?`${p}-${i}`:p,left:d.left,top:d.top}}(h,u,v,c,m,l),$=function(t,e){return e?et[t]:tt[t]}(w,l),{left:M,top:z,transform:I}=function(t,e,r,o,n,l){if(l)switch(t){case"bottom-start":case"left-end":return{top:`${Math.round(r.top-e.top+r.height)}px`,left:`${Math.round(r.left-e.left)}px`,transform:"translateY(-100%)"};case"bottom-end":case"right-end":return{top:`${Math.round(r.top-e.top+r.height)}px`,left:`${Math.round(r.left-e.left+r.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":case"left-start":return{top:`${Math.round(r.top-e.top)}px`,left:`${Math.round(r.left-e.left)}px`,transform:""};case"top-end":case"right-start":return{top:`${Math.round(r.top-e.top)}px`,left:`${Math.round(r.left-e.left+r.width)}px`,transform:"translateX(-100%)"};case"top":return{top:`${Math.round(r.top-e.top)}px`,left:`${Math.round(r.left-e.left+r.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(r.top-e.top+r.height/2)}px`,left:`${Math.round(r.left-e.left+r.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(r.top-e.top+r.height/2)}px`,left:`${Math.round(r.left-e.left)}px`,transform:"translateY(-50%)"};default:return{top:`${Math.round(r.top-e.top+r.height)}px`,left:`${Math.round(r.left-e.left+r.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(t){case"bottom-start":return{top:`${Math.round(r.top-e.top+r.height+o)}px`,left:`${Math.round(r.left-e.left+n)}px`,transform:""};case"bottom-end":return{top:`${Math.round(r.top-e.top+r.height+o)}px`,left:`${Math.round(r.left-e.left+r.width+n)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(r.top-e.top+o)}px`,left:`${Math.round(r.left-e.left+n)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(r.top-e.top+o)}px`,left:`${Math.round(r.left-e.left+r.width+n)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(r.top-e.top+o)}px`,left:`${Math.round(r.left-e.left+r.width+n)}px`,transform:""};case"right-end":return{top:`${Math.round(r.top-e.top+r.height+o)}px`,left:`${Math.round(r.left-e.left+r.width+n)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(r.top-e.top+o)}px`,left:`${Math.round(r.left-e.left+n)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(r.top-e.top+r.height+o)}px`,left:`${Math.round(r.left-e.left+n)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(r.top-e.top+o)}px`,left:`${Math.round(r.left-e.left+r.width/2+n)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(r.top-e.top+r.height/2+o)}px`,left:`${Math.round(r.left-e.left+r.width+n)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(r.top-e.top+r.height/2+o)}px`,left:`${Math.round(r.left-e.left+n)}px`,transform:"translateY(-50%) translateX(-100%)"};default:return{top:`${Math.round(r.top-e.top+r.height+o)}px`,left:`${Math.round(r.left-e.left+r.width/2+n)}px`,transform:"translateX(-50%)"}}}(w,x,u,y,b,l);e.setAttribute("v-placement",w),e.style.setProperty("--v-offset-left",`${Math.round(b)}px`),e.style.setProperty("--v-offset-top",`${Math.round(y)}px`),e.style.transform=`translateX(${M}) translateY(${z}) ${I}`,e.style.setProperty("--v-transform-origin",$),e.style.transformOrigin=$};x(s,(t=>{t?(u(),m()):f()}));const m=()=>{y().then(c).catch((t=>{}))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach((e=>{x(h(t,e),c)})),["teleportDisabled"].forEach((e=>{x(h(t,e),m)})),x(h(t,"syncTrigger"),(t=>{t.includes("resize")?a.addResizeListener(c):a.removeResizeListener(c),t.includes("scroll")?a.addScrollListener(c):a.removeScrollListener(c)}));const g=b(),w=l((()=>{const{to:e}=t;if(void 0!==e)return e;g.value}));return{VBinder:a,mergedEnabled:s,offsetContainerRef:d,followerRef:i,mergedTo:w,syncPosition:c}},render(){return m(J,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var t,e;const r=m("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[m("div",{class:"v-binder-follower-content",ref:"followerRef"},null===(e=(t=this.$slots).default)||void 0===e?void 0:e.call(t))]);return this.zindexable?p(r,[[G,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):r}})}});export{J as L,at as V,D as a,N as b,_ as c,L as d,E as e,Z as f,B as i,R as m,X as p,A as u,G as z};
//# sourceMappingURL=Follower-46ec2e6b.js.map
