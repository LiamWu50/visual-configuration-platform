{"version":3,"file":"index-eb1c0fd8.js","sources":["../../../src/helper/cesium-source-loader/feature-layer-manager.ts","../../../src/helper/cesium-source-loader/gltf-model-manager.ts","../../../src/helper/cesium-source-loader/imagery-provider.ts","../../../src/helper/cesium-source-loader/imagery-layer-manager.ts","../../../src/helper/cesium-source-loader/special-layer-manager.ts","../../../src/helper/cesium-source-loader/terrain-manager.ts","../../../src/helper/cesium-source-loader/tileset-layer-manager.ts","../../../src/helper/cesium-source-loader/index.ts"],"sourcesContent":["import * as Cesium from 'cesium'\n\nimport { MapSourceType } from '@/common/map-base'\n\nexport default class FeatureLayerManager {\n  private viewer: Cesium.Viewer\n  private dataSource: Map<string, Cesium.GeoJsonDataSource>\n  private options: Map<string, any>\n\n  constructor(viewer: Cesium.Viewer) {\n    this.viewer = viewer\n    this.dataSource = new Map() // 存储地图数据实例\n    this.options = new Map() // 存储地图数据配置项\n  }\n\n  /**\n   * 加载矢量数据\n   * @param options Object\n   */\n  public async add(options: any) {\n    const style = options.feature\n\n    const layer = await Cesium.GeoJsonDataSource.load(options.url, {\n      stroke: style.stroke || Cesium.Color.HOTPINK,\n      strokeWidth: style.strokeWidth || 3,\n      fill:\n        Cesium.Color.fromCssColorString(style.fill).withAlpha(0.6) ||\n        Cesium.Color.PINK.withAlpha(0.6),\n      markerColor:\n        Cesium.Color.fromCssColorString(style.markerColor) || Cesium.Color.PINK,\n      clampToGround: style.clampToGround || true\n    })\n    this.viewer.dataSources.add(layer)\n    this.dataSource.set(options.id, layer)\n    this.options.set(options.id, options)\n    this.viewer.flyTo(layer)\n  }\n\n  /**\n   * 通过ID获取矢量要素\n   * @param id String\n   * @returns Cesium.GeoJsonDataSource\n   */\n  public getLayerById(id: string) {\n    return this.dataSource.get(id)\n  }\n\n  /**\n   * 删除矢量数据\n   * @param id string\n   */\n  public delete(id: string) {\n    const layer = this.getLayerById(id)\n    if (!layer) return\n    this.viewer.dataSources.remove(layer as Cesium.GeoJsonDataSource)\n    this.options.delete(id)\n  }\n\n  /**\n   * 设置矢量数据的可见性\n   * @param id String\n   * @param visible Boolean\n   */\n  public setVisibleById(id: string, visible: boolean) {\n    const layer = this.getLayerById(id)\n    if (layer) layer.show = visible\n  }\n\n  /**\n   * 飞行到矢量图层\n   * @param id string\n   */\n  public flyTo(id: string) {\n    const layer = this.getLayerById(id)\n    if (layer) this.viewer.flyTo(layer)\n  }\n\n  /**\n   * 获取加载的资源\n   */\n  public getLoadedSource() {\n    return {\n      type: MapSourceType.FEATURE,\n      value: Object.fromEntries(this.options)\n    }\n  }\n}\n","import * as Cesium from 'cesium'\n\nimport { MapSourceType } from '@/common/map-base'\n\nexport default class GltfModelManager {\n  private viewer: Cesium.Viewer\n  private dataSource: Map<string, Cesium.Model>\n  private options: Map<string, any>\n\n  constructor(viewer: Cesium.Viewer) {\n    this.viewer = viewer\n    this.dataSource = new Map()\n    this.options = new Map()\n  }\n\n  /**\n   * 加载gltf模型\n   * @param options Object\n   */\n  public add(options: any) {\n    const { longitude, latitude, altitude } = options.position\n    const modelMatrix = Cesium.Transforms.eastNorthUpToFixedFrame(\n      Cesium.Cartesian3.fromDegrees(longitude, latitude, altitude)\n    )\n    const model = Cesium.Model.fromGltf({\n      url: options.url,\n      modelMatrix: modelMatrix,\n      scale: options.scale || 100,\n      heightReference: options.heightReference\n    })\n\n    this.viewer.scene.primitives.add(model)\n    model.readyPromise\n      .then(() => {\n        this.dataSource.set(options.id, model)\n        this.options.set(options.id, options)\n        this.flyTo(options.id)\n      })\n      .catch((error: any) => {\n        console.log(error)\n      })\n  }\n\n  /**\n   * 通过ID获取模型\n   * @param id String\n   * @returns Cesium.Model\n   */\n  public getModelById(id: string) {\n    return this.dataSource.get(id)\n  }\n\n  /**\n   * 删除gltf模型\n   * @param id string\n   */\n  public delete(id: string) {\n    const model = this.getModelById(id)\n    if (!model) return\n    this.viewer.scene.primitives.remove(model as Cesium.Model)\n    this.options.delete(id)\n  }\n\n  /**\n   * 设置gltf模型的可见性\n   * @param id String\n   * @param visible Boolean\n   */\n  public setVisibleById(id: string, visible: boolean) {\n    const model = this.getModelById(id)\n    if (model) model.show = visible\n  }\n\n  /**\n   * 飞行到gltf模型\n   * @param id string\n   */\n  public flyTo(id: string) {\n    const model = this.getModelById(id)\n    if (!model) return\n    const boundingSphere = model.boundingSphere\n    this.viewer.camera.flyToBoundingSphere(boundingSphere)\n  }\n\n  /**\n   * 获取加载的资源\n   */\n  public getLoadedSource() {\n    return {\n      type: MapSourceType.GLTF_MODEL,\n      value: Object.fromEntries(this.options)\n    }\n  }\n}\n","import * as Cesium from 'cesium'\n\nfunction ArcGisMapServerImageryProvider(url: string) {\n  return new Cesium.ArcGisMapServerImageryProvider({\n    url,\n    enablePickFeatures: false\n  })\n}\n\nfunction BingMapsImageryProvider(url: string, options: any) {\n  return new Cesium.BingMapsImageryProvider({\n    url,\n    key: options.key,\n    mapStyle: Cesium.BingMapsStyle.AERIAL\n  })\n}\n\nfunction TileMapServiceImageryProvider(url: string) {\n  return new Cesium.TileMapServiceImageryProvider({\n    url\n  })\n}\n\n/**\n * mapbox服务\n */\nfunction MapboxImageryProvider(url: string, options: any) {\n  url = Cesium.defaultValue(url, 'https://api.mapbox.com/v4/')\n  options.mapId = Cesium.defaultValue(options.mapId, 'mapbox.streets')\n  return new Cesium.MapboxImageryProvider({\n    mapId: 'mapbox.satellite',\n    accessToken:\n      'pk.eyJ1IjoibGlhbS13dSIsImEiOiJja2lqeTJwY2owMjhhMnpxbGcwODh5ZGhoIn0.fLOknIfMlTVbjkkh9dmYbg'\n  })\n}\n\nfunction SingleTileImageryProvider(url: string, options: any) {\n  options.rectangle = Cesium.defaultValue(\n    options.rectangle,\n    Cesium.Rectangle.fromDegrees(-180.0, -90.0, 180.0, 90.0)\n  )\n  return new Cesium.SingleTileImageryProvider({\n    url,\n    rectangle: options.rectangle\n  })\n}\n\nfunction UrlTemplateImageryProvider(url: string) {\n  return new Cesium.UrlTemplateImageryProvider({\n    url\n  })\n}\n\n/**\n * wms服务\n */\nfunction WebMapServiceImageryProvider(url: string, options: any) {\n  return new Cesium.WebMapServiceImageryProvider({\n    url,\n    layers: options.laers,\n    parameters: options.parameters\n  })\n}\n\n/**\n * wmts服务按照参数进行加载\n */\nfunction WebMapTileServiceImageryProvider(url: string, options: any) {\n  return new Cesium.WebMapTileServiceImageryProvider({\n    url,\n    layer: options.layer,\n    style: options.style,\n    tileMatrixSetID: options.tileMatrixSetID,\n    format: options.format,\n    maximumLevel: options.maximumLevel\n  })\n}\n\nexport default {\n  arcGisMapServer: ArcGisMapServerImageryProvider,\n  bingMap: BingMapsImageryProvider,\n  tileMapServer: TileMapServiceImageryProvider,\n  mapBox: MapboxImageryProvider,\n  singleTile: SingleTileImageryProvider,\n  urlTemplate: UrlTemplateImageryProvider,\n  webMapService: WebMapServiceImageryProvider,\n  webMapTileService: WebMapTileServiceImageryProvider\n}\n","import * as Cesium from 'cesium'\n\nimport { ImagerProviderType } from '@/common/map-base'\nimport { MapSourceType } from '@/common/map-base'\n\nimport ImageryProvider from './imagery-provider'\n\nexport default class ImageryLayerManager {\n  private viewer: Cesium.Viewer\n  private dataSource: Map<string, Cesium.ImageryLayer>\n  private options: Map<string, any>\n\n  constructor(viewer: Cesium.Viewer) {\n    this.viewer = viewer\n    this.dataSource = new Map() // 存储地图数据实例\n    this.options = new Map() // 存储地图数据配置项\n  }\n\n  /**\n   * 加载影像服务\n   * @param options Object\n   */\n  public add(options: any) {\n    if (!options.imageryType) {\n      throw new Error('未选择影像服务类型！')\n    }\n    const type: keyof typeof ImagerProviderType = options.imageryType\n    const typeHandler = ImageryProvider[type]\n    const layer = new Cesium.ImageryLayer(typeHandler(options.url, options))\n\n    this.viewer.imageryLayers.add(layer)\n    this.dataSource.set(options.id, layer)\n    this.options.set(options.id, options)\n    this.viewer.flyTo(layer)\n  }\n\n  /**\n   * 通过ID获取影像图层\n   * @param id String\n   * @returns Cesium.ImageryLayer\n   */\n  public getLayerById(id: string) {\n    return this.dataSource.get(id)\n  }\n\n  /**\n   * 删除影像服务\n   * @param id string\n   */\n  public delete(id: string) {\n    const layer = this.getLayerById(id)\n    if (!layer) return\n    this.viewer.imageryLayers.remove(layer as Cesium.ImageryLayer)\n    this.options.delete(id)\n    window.$message.success('影像服务删除成功！')\n  }\n\n  /**\n   * 设置影像服务的可见性\n   * @param id String\n   * @param visible Boolean\n   */\n  public setVisibleById(id: string, visible: boolean) {\n    const layer = this.getLayerById(id)\n    if (layer) layer.show = visible\n  }\n\n  /**\n   * 飞行到影像图层\n   * @param id string\n   */\n  public flyTo(id: string) {\n    const layer = this.getLayerById(id)\n    if (layer) this.viewer.flyTo(layer)\n  }\n\n  /**\n   * 获取加载的资源\n   */\n  public getLoadedSource() {\n    return {\n      type: MapSourceType.IMAGE_SERVICE,\n      value: Object.fromEntries(this.options)\n    }\n  }\n}\n","import axios from 'axios'\nimport * as Cesium from 'cesium'\n\nimport { MapSourceType } from '@/common/map-base'\nimport utils from '@/utils'\n\nexport default class SpecialLayerManager {\n  private viewer: Cesium.Viewer\n  private dataSource: Map<string, Cesium.BillboardCollection>\n  private options: Map<string, any>\n\n  constructor(viewer: Cesium.Viewer) {\n    this.viewer = viewer\n    this.dataSource = new Map() // 存储地图数据实例\n    this.options = new Map() // 存储地图数据配置项\n  }\n\n  /**\n   * 加载专题数据\n   * @param options Object\n   */\n  public async add(options: any) {\n    const features = await this.getFeatures(options.url)\n    const collection = this.createCollectioon(features, options)\n\n    this.viewer.scene.primitives.add(collection)\n    this.dataSource.set(options.id, collection)\n    this.options.set(options.id, options)\n    this.flyTo(options.id)\n  }\n\n  /**\n   * 获取专题数据的features\n   * @param url String\n   */\n  public async getFeatures(url: string) {\n    try {\n      const res = await axios.get(url)\n      return res?.data?.features || []\n    } catch (err) {\n      console.log(err)\n    }\n  }\n\n  public createCollectioon(features: any[], options: any) {\n    const billboards = new Cesium.BillboardCollection({\n      scene: this.viewer.scene\n    })\n\n    features.forEach(async (f) => {\n      const coordinate: [number, number] = f.geometry.coordinates\n      const image = await utils.imageOverlayText(\n        options.special.icon,\n        f.properties[options.special.label]\n      )\n\n      billboards.add({\n        position: Cesium.Cartesian3.fromDegrees(...coordinate),\n        image,\n        scale: 0.6,\n        width: options.special.size,\n        disableDepthTestDistance: Number.POSITIVE_INFINITY,\n        heightReference: Cesium.HeightReference.RELATIVE_TO_GROUND\n      })\n    })\n\n    return billboards\n  }\n\n  /**\n   * 通过ID获取矢量要素集合\n   * @param id String\n   * @returns Cesium.BillboardCollection\n   */\n  public getLayerById(id: string) {\n    return this.dataSource.get(id)\n  }\n\n  /**\n   * 删除矢量要素集合\n   * @param id string\n   */\n  public delete(id: string) {\n    const layer = this.getLayerById(id)\n    if (!layer) return\n    this.viewer.scene.primitives.remove(layer)\n    this.options.delete(id)\n  }\n\n  /**\n   * 设置矢量数据的可见性\n   * @param id String\n   * @param visible Boolean\n   */\n  public setVisibleById(id: string, visible: boolean) {\n    const layer = this.getLayerById(id)\n    if (layer) layer.show = visible\n  }\n\n  /**\n   * 飞行到矢量要素集合\n   * @param id string\n   */\n  public flyTo(id: string) {\n    const layer = this.getLayerById(id) as any\n    if (!layer) return\n    const billboards = layer._billboards as Cesium.Billboard[]\n    const cartesians = billboards.map((b) => b.position)\n    const rectangle = Cesium.Rectangle.fromCartesianArray(cartesians)\n    this.viewer.camera.flyTo({\n      destination: rectangle\n    })\n  }\n\n  /**\n   * 获取加载的矢量要素集合\n   */\n  public getLoadedSource() {\n    return {\n      type: MapSourceType.SPECIAL_SUBJECT,\n      value: Object.fromEntries(this.options)\n    }\n  }\n}\n","import * as Cesium from 'cesium'\n\nimport { TerrainType } from '@/common/map-base'\nimport { MapSourceType } from '@/common/map-base'\n\ninterface WorldTerrainOptions {\n  requestVertexNormals?: boolean\n  requestWaterMask?: boolean\n}\n\ntype TerrainProvider =\n  | Cesium.EllipsoidTerrainProvider\n  | Cesium.CesiumTerrainProvider\n\n/**\n * 无地形\n */\nfunction ellipsoidTerrainProvider(): Cesium.EllipsoidTerrainProvider {\n  return new Cesium.EllipsoidTerrainProvider()\n}\n\n/**\n * 创建自定义地形\n */\nfunction cesiumTerrainProvider(\n  url: string,\n  options: any\n): Cesium.CesiumTerrainProvider {\n  return new Cesium.CesiumTerrainProvider({\n    url,\n    requestVertexNormals: options.requestVertexNormals\n  })\n}\n\n/**\n * 创建Cesium自带地形\n */\nfunction worldTerrain(\n  options?: WorldTerrainOptions\n): Cesium.CesiumTerrainProvider {\n  return Cesium.createWorldTerrain({\n    requestVertexNormals: options?.requestVertexNormals,\n    requestWaterMask: options?.requestWaterMask\n  })\n}\n\n/**\n * 地形加载工具\n */\nexport default class TerrainManager {\n  private viewer: Cesium.Viewer\n  private terrainProvider: TerrainProvider\n  private visible: boolean\n  private options: any\n\n  constructor(viewer: Cesium.Viewer) {\n    this.viewer = viewer\n    this.terrainProvider = ellipsoidTerrainProvider()\n    this.visible = false\n    this.options = null\n  }\n\n  /**\n   * 加载地形数据\n   * @param {Object} options\n   */\n  public add(options: any = {}) {\n    const type = Cesium.defaultValue(\n      options.terrainType,\n      TerrainType.ellipsoidTerrain\n    )\n\n    if (type === TerrainType.ellipsoidTerrain) {\n      this.terrainProvider = ellipsoidTerrainProvider()\n    } else if (type === TerrainType.cesiumTerrain) {\n      this.terrainProvider = cesiumTerrainProvider(options.url, options)\n    } else if (type === TerrainType.worldTerrain) {\n      this.terrainProvider = worldTerrain(options)\n    }\n\n    this.viewer.terrainProvider = this.terrainProvider\n\n    this.options = options\n  }\n\n  /**\n   *  切换地形隐藏与显示\n   * @param {Boolean} value\n   */\n  public show(value: boolean) {\n    if (value !== this.visible) {\n      const emptyTerrain = new Cesium.EllipsoidTerrainProvider()\n      this.viewer.terrainProvider = value ? this.terrainProvider : emptyTerrain\n      this.visible = value\n    }\n  }\n\n  /**\n   * 删除地形服务\n   */\n  public delete() {\n    const emptyTerrain = new Cesium.EllipsoidTerrainProvider()\n    this.viewer.terrainProvider = emptyTerrain\n  }\n\n  /**\n   * 飞行到地形\n   */\n  public flyTo() {\n    return\n  }\n\n  /**\n   * 获取加载的地形数据\n   */\n  public getLoadedSource() {\n    return {\n      type: MapSourceType.TERRAIN_SERVICE,\n      value: this.options\n    }\n  }\n}\n","import * as Cesium from 'cesium'\n\nimport { MapSourceType } from '@/common/map-base'\n\nexport default class TilesetLayerManager {\n  private viewer: Cesium.Viewer\n  private dataSource: Map<string, Cesium.Cesium3DTileset>\n  private options: Map<string, any>\n\n  constructor(viewer: Cesium.Viewer) {\n    this.viewer = viewer\n    this.dataSource = new Map()\n    this.options = new Map()\n  }\n\n  /**\n   * 加载3dtiles模型\n   * @param options Object\n   */\n  public add(options: any) {\n    const tileset = new Cesium.Cesium3DTileset({\n      url: options.url,\n      maximumMemoryUsage: options.maximumMemoryUsage || 128,\n      maximumScreenSpaceError: options.maximumScreenSpaceError || 64\n    })\n    this.viewer.scene.primitives.add(tileset)\n\n    tileset.readyPromise\n      .then(() => {\n        this.dataSource.set(options.id, tileset)\n        this.options.set(options.id, options)\n        this.viewer.flyTo(tileset)\n      })\n      .catch((error: any) => {\n        console.log(error)\n      })\n  }\n\n  /**\n   * 通过ID获取模型\n   * @param id String\n   * @returns Cesium.Cesium3DTileset\n   */\n  public getTilesetById(id: string) {\n    return this.dataSource.get(id)\n  }\n\n  /**\n   * 删除3dtiles模型\n   * @param id string\n   */\n  public delete(id: string) {\n    const tileset = this.getTilesetById(id)\n    if (!tileset) return\n    this.viewer.scene.primitives.remove(tileset as Cesium.Cesium3DTileset)\n    this.options.delete(id)\n  }\n\n  /**\n   * 设置3dtiles模型的可见性\n   * @param id String\n   * @param visible Boolean\n   */\n  public setVisibleById(id: string, visible: boolean) {\n    const tileset = this.getTilesetById(id)\n    if (!tileset) return\n    tileset!.show = visible\n  }\n\n  /**\n   * 飞行到3dtiles模型\n   * @param id string\n   */\n  public flyTo(id: string) {\n    const tileset = this.getTilesetById(id)\n    if (!tileset) return\n    this.viewer.flyTo(tileset)\n  }\n\n  /**\n   * 获取加载的资源\n   */\n  public getLoadedSource() {\n    return {\n      type: MapSourceType.TILE_SET,\n      value: Object.fromEntries(this.options)\n    }\n  }\n}\n","import * as Cesium from 'cesium'\n\nimport { MapSourceType, MapSourceTypeEnum } from '@/common/map-base'\n\nimport FeatureLayerManager from './feature-layer-manager'\nimport GltfModelManager from './gltf-model-manager'\nimport ImageryLayerManager from './imagery-layer-manager'\nimport SpecialLayerManager from './special-layer-manager'\nimport TerrainManager from './terrain-manager'\nimport TilesetLayerManager from './tileset-layer-manager'\n\n/**\n * Cesium相关资源加载工具\n */\nexport default class CesiumSourceLoader {\n  private imageryLayerManager: ImageryLayerManager\n  private tilesetLayerManager: TilesetLayerManager\n  private gltfModelManager: GltfModelManager\n  private terrainManager: TerrainManager\n  private featureLayerManager: FeatureLayerManager\n  private specialLayerManager: SpecialLayerManager\n\n  constructor(viewer: Cesium.Viewer) {\n    this.imageryLayerManager = new ImageryLayerManager(viewer)\n    this.tilesetLayerManager = new TilesetLayerManager(viewer)\n    this.gltfModelManager = new GltfModelManager(viewer)\n    this.terrainManager = new TerrainManager(viewer)\n    this.featureLayerManager = new FeatureLayerManager(viewer)\n    this.specialLayerManager = new SpecialLayerManager(viewer)\n  }\n\n  get typeManager() {\n    return {\n      [MapSourceType.IMAGE_SERVICE]: this.imageryLayerManager,\n      [MapSourceType.TERRAIN_SERVICE]: this.terrainManager,\n      [MapSourceType.TILE_SET]: this.tilesetLayerManager,\n      [MapSourceType.GLTF_MODEL]: this.gltfModelManager,\n      [MapSourceType.FEATURE]: this.featureLayerManager,\n      [MapSourceType.SPECIAL_SUBJECT]: this.specialLayerManager\n    }\n  }\n\n  /**\n   * 加载地图资源\n   * @param type String\n   * @param options Object\n   */\n  public addSource(type: MapSourceTypeEnum, options: any) {\n    console.log('type', type)\n\n    const curManager = this.typeManager[type]\n    curManager.add(options)\n  }\n\n  /**\n   * 删除地图资源\n   * @param id String\n   * @param type String\n   */\n  public deleteSource(id: string, type: string) {\n    const curManager = this.typeManager[type as MapSourceTypeEnum]\n    curManager.delete(id)\n  }\n\n  /**\n   * 飞到地图资源\n   * @param id String\n   * @param type String\n   */\n  public flyTo(id: string, type: MapSourceTypeEnum) {\n    const curManager = this.typeManager[type]\n    curManager.flyTo(id)\n  }\n\n  /**\n   * 获取各类型的资源\n   */\n  public getTypeDataSource() {\n    const dataSource = Object.keys(this.typeManager).map((k) => {\n      const loader = this.typeManager[k as MapSourceTypeEnum]\n      return loader.getLoadedSource()\n    })\n    return dataSource\n  }\n}\n"],"names":["FeatureLayerManager","constructor","viewer","__publicField","this","dataSource","Map","options","add","style","feature","layer","Cesium","GeoJsonDataSource","load","url","stroke","Color","HOTPINK","strokeWidth","fill","fromCssColorString","withAlpha","PINK","markerColor","clampToGround","dataSources","set","id","flyTo","getLayerById","get","remove","delete","setVisibleById","visible","show","getLoadedSource","type","MapSourceType","FEATURE","value","Object","fromEntries","GltfModelManager","longitude","latitude","altitude","position","modelMatrix","Transforms","eastNorthUpToFixedFrame","Cartesian3","fromDegrees","model","Model","fromGltf","scale","heightReference","scene","primitives","readyPromise","then","catch","error","getModelById","boundingSphere","camera","flyToBoundingSphere","GLTF_MODEL","ImageryProvider","arcGisMapServer","ArcGisMapServerImageryProvider","enablePickFeatures","bingMap","BingMapsImageryProvider","key","mapStyle","BingMapsStyle","AERIAL","tileMapServer","TileMapServiceImageryProvider","mapBox","defaultValue","mapId","MapboxImageryProvider","accessToken","singleTile","rectangle","Rectangle","SingleTileImageryProvider","urlTemplate","UrlTemplateImageryProvider","webMapService","WebMapServiceImageryProvider","layers","laers","parameters","webMapTileService","WebMapTileServiceImageryProvider","tileMatrixSetID","format","maximumLevel","ImageryLayerManager","imageryType","Error","typeHandler","ImageryLayer","imageryLayers","window","$message","success","IMAGE_SERVICE","SpecialLayerManager","features","getFeatures","collection","createCollectioon","res","axios","_a","data","err","billboards","BillboardCollection","forEach","async","f","coordinate","geometry","coordinates","image","utils","imageOverlayText","special","icon","properties","label","width","size","disableDepthTestDistance","Number","POSITIVE_INFINITY","HeightReference","RELATIVE_TO_GROUND","cartesians","_billboards","map","b","fromCartesianArray","destination","SPECIAL_SUBJECT","ellipsoidTerrainProvider","EllipsoidTerrainProvider","TerrainManager","terrainProvider","terrainType","TerrainType","ellipsoidTerrain","cesiumTerrain","CesiumTerrainProvider","requestVertexNormals","cesiumTerrainProvider","worldTerrain","createWorldTerrain","requestWaterMask","emptyTerrain","TERRAIN_SERVICE","TilesetLayerManager","tileset","Cesium3DTileset","maximumMemoryUsage","maximumScreenSpaceError","getTilesetById","TILE_SET","CesiumSourceLoader","imageryLayerManager","tilesetLayerManager","gltfModelManager","terrainManager","featureLayerManager","specialLayerManager","typeManager","addSource","deleteSource","getTypeDataSource","keys","k"],"mappings":"kSAIA,MAAAA,EAGU,WAAAC,CAAAC,GAH+BC,EAAAC,KAAA,UAC/BD,EAAAC,KAAA,cACAD,EAAAC,KAAA,WAINA,KAAAF,OAAAA,EACAE,KAAAC,eAAAC,IACAF,KAAAG,YAAAD,GAAuB,CACzB,SAAAE,CAAAD,GAOE,MAAAE,EAAAF,EAAAG,QAEAC,QAAAC,OAAAC,kBAAAC,KAAAP,EAAAQ,IAAA,CAA+DC,OAAAP,EAAAO,QAAAJ,OAAAK,MAAAC,QACxBC,YAAAV,EAAAU,aAAA,EACHC,KAAAR,OAAAK,MAAAI,mBAAAZ,EAAAW,MAAAE,UAAA,KAAAV,OAAAK,MAAAM,KAAAD,UAAA,IAGDE,YAAAZ,OAAAK,MAAAI,mBAAAZ,EAAAe,cAAAZ,OAAAK,MAAAM,KAEoCE,cAAAhB,EAAAgB,gBAAA,IAGvErB,KAAAF,OAAAwB,YAAAlB,IAAAG,GACAP,KAAAC,WAAAsB,IAAApB,EAAAqB,GAAAjB,GACAP,KAAAG,QAAAoB,IAAApB,EAAAqB,GAAArB,GACAH,KAAAF,OAAA2B,MAAAlB,EAAuB,CACzB,YAAAmB,CAAAF,GAQE,OAAAxB,KAAAC,WAAA0B,IAAAH,EAA6B,CAC/B,OAAAA,GAOE,MAAAjB,EAAAP,KAAA0B,aAAAF,GACAjB,IACAP,KAAAF,OAAAwB,YAAAM,OAAArB,GACAP,KAAAG,QAAA0B,OAAAL,GAAsB,CACxB,cAAAM,CAAAN,EAAAO,GAQE,MAAAxB,EAAAP,KAAA0B,aAAAF,GACAjB,IAAWA,EAAAyB,KAAAD,EAAa,CAC1B,KAAAN,CAAAD,GAOE,MAAAjB,EAAAP,KAAA0B,aAAAF,GACAjB,GAAWP,KAAAF,OAAA2B,MAAAlB,EAAuB,CACpC,eAAA0B,GAME,MAAA,CAAOC,KAAAC,EAAAC,QACeC,MAAAC,OAAAC,YAAAvC,KAAAG,SAEtB,EChFJ,MAAAqC,EAGU,WAAA3C,CAAAC,GAH4BC,EAAAC,KAAA,UAC5BD,EAAAC,KAAA,cACAD,EAAAC,KAAA,WAINA,KAAAF,OAAAA,EACAE,KAAAC,eAAAC,IACAF,KAAAG,YAAAD,GAAuB,CACzB,GAAAE,CAAAD,GAOE,MAAAsC,UAAAA,EAAAC,SAAAA,EAAAC,SAAAA,GAAAxC,EAAAyC,SACAC,EAAArC,OAAAsC,WAAAC,wBAAsCvC,OAAAwC,WAAAC,YAAAR,EAAAC,EAAAC,IAGtCO,EAAA1C,OAAA2C,MAAAC,SAAA,CAAoCzC,IAAAR,EAAAQ,IACrBkC,cACbQ,MAAAlD,EAAAkD,OAAA,IACwBC,gBAAAnD,EAAAmD,kBAI1BtD,KAAAF,OAAAyD,MAAAC,WAAApD,IAAA8C,GACAA,EAAAO,aAAAC,MAAA,KAEI1D,KAAAC,WAAAsB,IAAApB,EAAAqB,GAAA0B,GACAlD,KAAAG,QAAAoB,IAAApB,EAAAqB,GAAArB,GACAH,KAAAyB,MAAAtB,EAAAqB,GAAA,IAAqBmC,OAAAC,IAGrB,GACD,CACL,YAAAC,CAAArC,GAQE,OAAAxB,KAAAC,WAAA0B,IAAAH,EAA6B,CAC/B,OAAAA,GAOE,MAAA0B,EAAAlD,KAAA6D,aAAArC,GACA0B,IACAlD,KAAAF,OAAAyD,MAAAC,WAAA5B,OAAAsB,GACAlD,KAAAG,QAAA0B,OAAAL,GAAsB,CACxB,cAAAM,CAAAN,EAAAO,GAQE,MAAAmB,EAAAlD,KAAA6D,aAAArC,GACA0B,IAAWA,EAAAlB,KAAAD,EAAa,CAC1B,KAAAN,CAAAD,GAOE,MAAA0B,EAAAlD,KAAA6D,aAAArC,GACA,IAAA0B,EAAY,OACZ,MAAAY,EAAAZ,EAAAY,eACA9D,KAAAF,OAAAiE,OAAAC,oBAAAF,EAAqD,CACvD,eAAA7B,GAME,MAAA,CAAOC,KAAAC,EAAA8B,WACe5B,MAAAC,OAAAC,YAAAvC,KAAAG,SAEtB,ECbJ,MAAA+D,EAAA,CAAeC,gBA5Ef,SAAAxD,GACE,OAAA,IAAAH,OAAA4D,+BAAA,CAAiDzD,MAC/C0D,oBAAA,GAGJ,EAwEmBC,QAtEnB,SAAA3D,EAAAR,GACE,OAAA,IAAAK,OAAA+D,wBAAA,CAA0C5D,MACxC6D,IAAArE,EAAAqE,IACaC,SAAAjE,OAAAkE,cAAAC,QAGjB,EAiEWC,cA/DX,SAAAjE,GACE,OAAA,IAAAH,OAAAqE,8BAAA,CAAgDlE,OAGlD,EA4DiBmE,OAvDjB,SAAAnE,EAAAR,GAGE,OAFAQ,EAAAH,OAAAuE,aAAApE,EAAA,8BACAR,EAAA6E,MAAAxE,OAAAuE,aAAA5E,EAAA6E,MAAA,kBACA,IAAAxE,OAAAyE,sBAAA,CAAwCD,MAAA,mBAC/BE,YAAA,6FAIX,EAgDUC,WA9CV,SAAAxE,EAAAR,GAKE,OAJAA,EAAAiF,UAAA5E,OAAAuE,aAA2B5E,EAAAiF,UACjB5E,OAAA6E,UAAApC,aAAA,KAAA,GAAA,IAAA,KAGV,IAAAzC,OAAA8E,0BAAA,CAA4C3E,MAC1CyE,UAAAjF,EAAAiF,WAGJ,EAsCcG,YApCd,SAAA5E,GACE,OAAA,IAAAH,OAAAgF,2BAAA,CAA6C7E,OAG/C,EAiCe8E,cA5Bf,SAAA9E,EAAAR,GACE,OAAA,IAAAK,OAAAkF,6BAAA,CAA+C/E,MAC7CgF,OAAAxF,EAAAyF,MACgBC,WAAA1F,EAAA0F,YAGpB,EAuBiBC,kBAlBjB,SAAAnF,EAAAR,GACE,OAAA,IAAAK,OAAAuF,iCAAA,CAAmDpF,MACjDJ,MAAAJ,EAAAI,MACeF,MAAAF,EAAAE,MACA2F,gBAAA7F,EAAA6F,gBACUC,OAAA9F,EAAA8F,OACTC,aAAA/F,EAAA+F,cAGpB,GCrEA,MAAAC,EAGU,WAAAtG,CAAAC,GAH+BC,EAAAC,KAAA,UAC/BD,EAAAC,KAAA,cACAD,EAAAC,KAAA,WAINA,KAAAF,OAAAA,EACAE,KAAAC,eAAAC,IACAF,KAAAG,YAAAD,GAAuB,CACzB,GAAAE,CAAAD,GAOE,IAAAA,EAAAiG,YACE,MAAA,IAAAC,MAAA,cAEF,MAAAnE,EAAA/B,EAAAiG,YACAE,EAAApC,EAAAhC,GACA3B,EAAA,IAAAC,OAAA+F,aAAAD,EAAAnG,EAAAQ,IAAAR,IAEAH,KAAAF,OAAA0G,cAAApG,IAAAG,GACAP,KAAAC,WAAAsB,IAAApB,EAAAqB,GAAAjB,GACAP,KAAAG,QAAAoB,IAAApB,EAAAqB,GAAArB,GACAH,KAAAF,OAAA2B,MAAAlB,EAAuB,CACzB,YAAAmB,CAAAF,GAQE,OAAAxB,KAAAC,WAAA0B,IAAAH,EAA6B,CAC/B,OAAAA,GAOE,MAAAjB,EAAAP,KAAA0B,aAAAF,GACAjB,IACAP,KAAAF,OAAA0G,cAAA5E,OAAArB,GACAP,KAAAG,QAAA0B,OAAAL,GACAiF,OAAAC,SAAAC,QAAA,aAAmC,CACrC,cAAA7E,CAAAN,EAAAO,GAQE,MAAAxB,EAAAP,KAAA0B,aAAAF,GACAjB,IAAWA,EAAAyB,KAAAD,EAAa,CAC1B,KAAAN,CAAAD,GAOE,MAAAjB,EAAAP,KAAA0B,aAAAF,GACAjB,GAAWP,KAAAF,OAAA2B,MAAAlB,EAAuB,CACpC,eAAA0B,GAME,MAAA,CAAOC,KAAAC,EAAAyE,cACevE,MAAAC,OAAAC,YAAAvC,KAAAG,SAEtB,EC7EJ,MAAA0G,EAGU,WAAAhH,CAAAC,GAH+BC,EAAAC,KAAA,UAC/BD,EAAAC,KAAA,cACAD,EAAAC,KAAA,WAINA,KAAAF,OAAAA,EACAE,KAAAC,eAAAC,IACAF,KAAAG,YAAAD,GAAuB,CACzB,SAAAE,CAAAD,GAOE,MAAA2G,QAAA9G,KAAA+G,YAAA5G,EAAAQ,KACAqG,EAAAhH,KAAAiH,kBAAAH,EAAA3G,GAEAH,KAAAF,OAAAyD,MAAAC,WAAApD,IAAA4G,GACAhH,KAAAC,WAAAsB,IAAApB,EAAAqB,GAAAwF,GACAhH,KAAAG,QAAAoB,IAAApB,EAAAqB,GAAArB,GACAH,KAAAyB,MAAAtB,EAAAqB,GAAqB,CACvB,iBAAAuF,CAAApG,SAOE,IACE,MAAAuG,QAAAC,EAAAxF,IAAAhB,GACA,OAAA,OAAAyG,EAAA,MAAAF,OAAA,EAAAA,EAAAG,WAAA,EAAAD,EAAAN,WAAA,EAA+B,OAAAQ,GAEhB,CACjB,CACF,iBAAAL,CAAAH,EAAA3G,GAGE,MAAAoH,EAAA,IAAA/G,OAAAgH,oBAAA,CAAkDjE,MAAAvD,KAAAF,OAAAyD,QAqBlD,OAjBAuD,EAAAW,SAAAC,MAAAC,IACE,MAAAC,EAAAD,EAAAE,SAAAC,YACAC,QAAAC,EAAAC,iBAA0B9H,EAAA+H,QAAAC,KACRR,EAAAS,WAAAjI,EAAA+H,QAAAG,QAIlBd,EAAAnH,IAAA,CAAewC,SAAApC,OAAAwC,WAAAC,eAAA2E,GACwCG,QACrD1E,MAAA,GACOiF,MAAAnI,EAAA+H,QAAAK,KACgBC,yBAAAC,OAAAC,kBACUpF,gBAAA9C,OAAAmI,gBAAAC,oBACO,IAI5CrB,CAAO,CACT,YAAA7F,CAAAF,GAQE,OAAAxB,KAAAC,WAAA0B,IAAAH,EAA6B,CAC/B,OAAAA,GAOE,MAAAjB,EAAAP,KAAA0B,aAAAF,GACAjB,IACAP,KAAAF,OAAAyD,MAAAC,WAAA5B,OAAArB,GACAP,KAAAG,QAAA0B,OAAAL,GAAsB,CACxB,cAAAM,CAAAN,EAAAO,GAQE,MAAAxB,EAAAP,KAAA0B,aAAAF,GACAjB,IAAWA,EAAAyB,KAAAD,EAAa,CAC1B,KAAAN,CAAAD,GAOE,MAAAjB,EAAAP,KAAA0B,aAAAF,GACA,IAAAjB,EAAY,OACZ,MACAsI,EADAtI,EAAAuI,YACAC,KAAAC,GAAAA,EAAApG,WACAwC,EAAA5E,OAAA6E,UAAA4D,mBAAAJ,GACA7I,KAAAF,OAAAiE,OAAAtC,MAAA,CAAyByH,YAAA9D,GAExB,CACH,eAAAnD,GAME,MAAA,CAAOC,KAAAC,EAAAgH,gBACe9G,MAAAC,OAAAC,YAAAvC,KAAAG,SAEtB,ECxGJ,SAAAiJ,IACE,OAAA,IAAA5I,OAAA6I,wBACF,CA8BA,MAAAC,EAIU,WAAAzJ,CAAAC,GAJ0BC,EAAAC,KAAA,UAC1BD,EAAAC,KAAA,mBACAD,EAAAC,KAAA,WACAD,EAAAC,KAAA,WAINA,KAAAF,OAAAA,EACAE,KAAAuJ,gBAAAH,IACApJ,KAAA+B,SAAA,EACA/B,KAAAG,QAAA,IAAe,CACjB,GAAAC,CAAAD,EAAA,IAOE,MAAA+B,EAAA1B,OAAAuE,aAAoB5E,EAAAqJ,YACVC,EAAAC,kBAIVxH,IAAAuH,EAAAC,iBACE1J,KAAAuJ,gBAAAH,IAAgDlH,IAAAuH,EAAAE,cAEhD3J,KAAAuJ,gBAnDN,SAAA5I,EAAAR,GAIE,OAAA,IAAAK,OAAAoJ,sBAAA,CAAwCjJ,MACtCkJ,qBAAA1J,EAAA0J,sBAGJ,CA2CMC,CAAA3J,EAAAQ,IAAAR,GAAiE+B,IAAAuH,EAAAM,eAEjE/J,KAAAuJ,gBAxCN,SAAApJ,GAGE,OAAAK,OAAAwJ,mBAAA,CAAiCH,qBAAA,MAAA1J,OAAA,EAAAA,EAAA0J,qBACAI,iBAAA,MAAA9J,OAAA,EAAAA,EAAA8J,kBAGnC,CAiCMF,CAAA5J,IAGFH,KAAAF,OAAAyJ,gBAAAvJ,KAAAuJ,gBAEAvJ,KAAAG,QAAAA,CAAe,CACjB,IAAA6B,CAAAK,GAOE,GAAAA,IAAArC,KAAA+B,QAAA,CACE,MAAAmI,EAAA,IAAA1J,OAAA6I,yBACArJ,KAAAF,OAAAyJ,gBAAAlH,EAAArC,KAAAuJ,gBAAAW,EACAlK,KAAA+B,QAAAM,CAAe,CACjB,CACF,SAME,MAAA6H,EAAA,IAAA1J,OAAA6I,yBACArJ,KAAAF,OAAAyJ,gBAAAW,CAA8B,CAChC,KAAAzI,GAME,CACF,eAAAQ,GAME,MAAA,CAAOC,KAAAC,EAAAgI,gBACe9H,MAAArC,KAAAG,QAEtB,ECnHJ,MAAAiK,EAGU,WAAAvK,CAAAC,GAH+BC,EAAAC,KAAA,UAC/BD,EAAAC,KAAA,cACAD,EAAAC,KAAA,WAINA,KAAAF,OAAAA,EACAE,KAAAC,eAAAC,IACAF,KAAAG,YAAAD,GAAuB,CACzB,GAAAE,CAAAD,GAOE,MAAAkK,EAAA,IAAA7J,OAAA8J,gBAAA,CAA2C3J,IAAAR,EAAAQ,IAC5B4J,mBAAApK,EAAAoK,oBAAA,IACqCC,wBAAArK,EAAAqK,yBAAA,KAGpDxK,KAAAF,OAAAyD,MAAAC,WAAApD,IAAAiK,GAEAA,EAAA5G,aAAAC,MAAA,KAEI1D,KAAAC,WAAAsB,IAAApB,EAAAqB,GAAA6I,GACArK,KAAAG,QAAAoB,IAAApB,EAAAqB,GAAArB,GACAH,KAAAF,OAAA2B,MAAA4I,EAAA,IAAyB1G,OAAAC,IAGzB,GACD,CACL,cAAA6G,CAAAjJ,GAQE,OAAAxB,KAAAC,WAAA0B,IAAAH,EAA6B,CAC/B,OAAAA,GAOE,MAAA6I,EAAArK,KAAAyK,eAAAjJ,GACA6I,IACArK,KAAAF,OAAAyD,MAAAC,WAAA5B,OAAAyI,GACArK,KAAAG,QAAA0B,OAAAL,GAAsB,CACxB,cAAAM,CAAAN,EAAAO,GAQE,MAAAsI,EAAArK,KAAAyK,eAAAjJ,GACA6I,IACAA,EAAArI,KAAAD,EAAgB,CAClB,KAAAN,CAAAD,GAOE,MAAA6I,EAAArK,KAAAyK,eAAAjJ,GACA6I,GACArK,KAAAF,OAAA2B,MAAA4I,EAAyB,CAC3B,eAAApI,GAME,MAAA,CAAOC,KAAAC,EAAAuI,SACerI,MAAAC,OAAAC,YAAAvC,KAAAG,SAEtB,ECxEJ,MAAqBwK,EAQnB,WAAA9K,CAAYC,GAPJC,EAAAC,KAAA,uBACAD,EAAAC,KAAA,uBACAD,EAAAC,KAAA,oBACAD,EAAAC,KAAA,kBACAD,EAAAC,KAAA,uBACAD,EAAAC,KAAA,uBAGDA,KAAA4K,oBAAsB,IAAIzE,EAAoBrG,GAC9CE,KAAA6K,oBAAsB,IAAIT,EAAoBtK,GAC9CE,KAAA8K,iBAAmB,IAAItI,EAAiB1C,GACxCE,KAAA+K,eAAiB,IAAIzB,EAAexJ,GACpCE,KAAAgL,oBAAsB,IAAIpL,EAAoBE,GAC9CE,KAAAiL,oBAAsB,IAAIpE,EAAoB/G,EACrD,CAEA,eAAIoL,GACK,MAAA,CACL,CAAC/I,EAAcyE,eAAgB5G,KAAK4K,oBACpC,CAACzI,EAAcgI,iBAAkBnK,KAAK+K,eACtC,CAAC5I,EAAcuI,UAAW1K,KAAK6K,oBAC/B,CAAC1I,EAAc8B,YAAajE,KAAK8K,iBACjC,CAAC3I,EAAcC,SAAUpC,KAAKgL,oBAC9B,CAAC7I,EAAcgH,iBAAkBnJ,KAAKiL,oBAE1C,CAOO,SAAAE,CAAUjJ,EAAyB/B,GAGrBH,KAAKkL,YAAYhJ,GACzB9B,IAAID,EACjB,CAOO,YAAAiL,CAAa5J,EAAYU,GACXlC,KAAKkL,YAAYhJ,GACzBL,OAAOL,EACpB,CAOO,KAAAC,CAAMD,EAAYU,GACJlC,KAAKkL,YAAYhJ,GACzBT,MAAMD,EACnB,CAKO,iBAAA6J,GAKE,OAJY/I,OAAOgJ,KAAKtL,KAAKkL,aAAanC,KAAKwC,GACrCvL,KAAKkL,YAAYK,GAClBtJ,mBAGlB"}