{"version":3,"file":"index-f6b6cd76.js","sources":["../../../src/views/preview/map/index.tsx","../../../src/views/preview/map/use-source-loader.ts"],"sourcesContent":["import CesiumSceneHelper from '@/helper/cesium-scene-helper'\nimport { usePreviewStore } from '@/store/preview'\n\nimport styles from './index.module.scss'\nimport { useSourceLoader } from './use-source-loader'\n\nconst Map = defineComponent({\n  name: 'the-map',\n  setup() {\n    const mapViewer = ref()\n    const previewStore = usePreviewStore()\n    const { mapForPreview } = storeToRefs(previewStore)\n    console.log('mapForPreview', mapForPreview.value)\n    const { loadTypeSource } = useSourceLoader(mapViewer)\n\n    onMounted(() => {\n      mapViewer.value = CesiumSceneHelper.initViewer('mapContainer')\n      loadTypeSource(mapForPreview)\n    })\n  },\n  render() {\n    return (\n      <div class={styles.container}>\n        <div id='mapContainer' class={styles.map}></div>\n      </div>\n    )\n  }\n})\nexport default Map\n","import * as Cesium from 'cesium'\nimport type { Ref } from 'vue'\n\nimport CesiumSourceLoader from '@/helper/cesium-source-loader'\n\nexport function useSourceLoader(mapViewer: Ref<Cesium.Viewer>) {\n  // 加载不同类型的地图资源\n  const loadTypeSource = (dataSource: any) => {\n    const cesiumSourceLoader = new CesiumSourceLoader(mapViewer!.value)\n    dataSource.value.forEach((data: any) => {\n      Object.values(data.value).forEach((val) => {\n        cesiumSourceLoader.addSource(data.type, val)\n      })\n    })\n  }\n\n  return {\n    loadTypeSource\n  }\n}\n"],"names":["Map","defineComponent","name","setup","mapViewer","ref","previewStore","usePreviewStore","mapForPreview","storeToRefs","loadTypeSource","dataSource","cesiumSourceLoader","CesiumSourceLoader","value","forEach","data","Object","values","val","addSource","type","useSourceLoader","onMounted","render","_createVNode","class","styles","id"],"mappings":"uSAMA,MAAAA,EAAAC,EAAA,CACEC,KAAAA,UACAC,KAAAA,GACE,MAAAC,EAAAC,IACAC,EAAAC,mBACQC,GAAcC,EAAAH,mBAEdI,GCRL,SAAyBN,GAWvB,MAAA,CACLM,eAVsBC,IACtB,MAAMC,EAAqB,IAAIC,EAAmBT,EAAWU,OAClDH,EAAAG,MAAMC,SAASC,IACxBC,OAAOC,OAAOF,EAAKF,OAAOC,SAASI,IACdP,EAAAQ,UAAUJ,EAAKK,KAAMF,EAAG,GAC5C,GACF,EAML,CDN2BG,CAAAlB,GAEvBmB,GAAAA,mDAKFC,OAAAA,IACEC,EAAA,MAAA,CAAAC,MAAAC,GAC8B,CAAAF,EAAA,MAAA,CAAAG,GAAA,eAAAF,MAAAC,GACc"}