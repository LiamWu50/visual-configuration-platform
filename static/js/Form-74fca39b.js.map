{"version":3,"file":"Form-74fca39b.js","sources":["../../../node_modules/naive-ui/es/form/src/styles/form.cssr.js","../../../node_modules/naive-ui/es/form/src/Form.js"],"sourcesContent":["import { c, cB, cM } from '../../../_utils/cssr';\nexport default cB('form', [cM('inline', `\n width: 100%;\n display: inline-flex;\n align-items: flex-start;\n align-content: space-around;\n `, [cB('form-item', {\n  width: 'auto',\n  marginRight: '18px'\n}, [c('&:last-child', {\n  marginRight: 0\n})])])]);","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { h, defineComponent, provide, ref } from 'vue';\nimport { useConfig, useTheme } from '../../_mixins';\nimport { formLight } from '../styles';\nimport style from './styles/form.cssr';\nimport { keysOf } from '../../_utils';\nimport { formInjectionKey, formItemInstsInjectionKey } from './context';\nexport const formProps = Object.assign(Object.assign({}, useTheme.props), { inline: Boolean, labelWidth: [Number, String], labelAlign: String, labelPlacement: {\n        type: String,\n        default: 'top'\n    }, model: {\n        type: Object,\n        default: () => { }\n    }, rules: Object, disabled: Boolean, size: String, showRequireMark: {\n        type: Boolean,\n        default: undefined\n    }, requireMarkPlacement: String, showFeedback: {\n        type: Boolean,\n        default: true\n    }, onSubmit: {\n        type: Function,\n        default: (e) => { e.preventDefault(); }\n    }, showLabel: {\n        type: Boolean,\n        default: undefined\n    }, validateMessages: Object });\nexport default defineComponent({\n    name: 'Form',\n    props: formProps,\n    setup(props) {\n        const { mergedClsPrefixRef } = useConfig(props);\n        useTheme('Form', '-form', style, formLight, props, mergedClsPrefixRef);\n        // from path to form-item\n        const formItems = {};\n        // for label-width = 'auto'\n        const maxChildLabelWidthRef = ref(undefined);\n        const deriveMaxChildLabelWidth = (currentWidth) => {\n            const currentMaxChildLabelWidth = maxChildLabelWidthRef.value;\n            if (currentMaxChildLabelWidth === undefined ||\n                currentWidth >= currentMaxChildLabelWidth) {\n                maxChildLabelWidthRef.value = currentWidth;\n            }\n        };\n        function validate(validateCallback, shouldRuleBeApplied = () => true) {\n            return __awaiter(this, void 0, void 0, function* () {\n                yield new Promise((resolve, reject) => {\n                    const formItemValidationPromises = [];\n                    for (const key of keysOf(formItems)) {\n                        const formItemInstances = formItems[key];\n                        for (const formItemInstance of formItemInstances) {\n                            if (formItemInstance.path) {\n                                formItemValidationPromises.push(formItemInstance.internalValidate(null, shouldRuleBeApplied));\n                            }\n                        }\n                    }\n                    void Promise.all(formItemValidationPromises).then((results) => {\n                        if (results.some((result) => !result.valid)) {\n                            const errors = results\n                                .filter((result) => result.errors)\n                                .map((result) => result.errors);\n                            if (validateCallback) {\n                                validateCallback(errors);\n                            }\n                            reject(errors);\n                        }\n                        else {\n                            if (validateCallback)\n                                validateCallback();\n                            resolve();\n                        }\n                    });\n                });\n            });\n        }\n        function restoreValidation() {\n            for (const key of keysOf(formItems)) {\n                const formItemInstances = formItems[key];\n                for (const formItemInstance of formItemInstances) {\n                    formItemInstance.restoreValidation();\n                }\n            }\n        }\n        provide(formInjectionKey, {\n            props,\n            maxChildLabelWidthRef,\n            deriveMaxChildLabelWidth\n        });\n        provide(formItemInstsInjectionKey, { formItems });\n        const formExposedMethod = {\n            validate,\n            restoreValidation\n        };\n        return Object.assign(formExposedMethod, {\n            mergedClsPrefix: mergedClsPrefixRef\n        });\n    },\n    render() {\n        const { mergedClsPrefix } = this;\n        return (h(\"form\", { class: [\n                `${mergedClsPrefix}-form`,\n                this.inline && `${mergedClsPrefix}-form--inline`\n            ], onSubmit: this.onSubmit }, this.$slots));\n    }\n});\n"],"names":["style","cB","cM","width","marginRight","c","__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","NForm","defineComponent","name","props","Object","assign","useTheme","inline","Boolean","labelWidth","Number","String","labelAlign","labelPlacement","type","default","model","rules","disabled","size","showRequireMark","requireMarkPlacement","showFeedback","onSubmit","Function","preventDefault","showLabel","validateMessages","setup","mergedClsPrefixRef","useConfig","formLight","formItems","maxChildLabelWidthRef","ref","provide","formInjectionKey","deriveMaxChildLabelWidth","currentWidth","currentMaxChildLabelWidth","formItemInstsInjectionKey","formExposedMethod","validate","validateCallback","shouldRuleBeApplied","formItemValidationPromises","key","keysOf","formItemInstances","formItemInstance","path","push","internalValidate","all","results","some","valid","errors","filter","map","restoreValidation","mergedClsPrefix","render","h","class","$slots"],"mappings":"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","x_google_ignoreList":[0,1]}