{"version":3,"file":"index-DmLr_Mm3.js","sources":["../../../node_modules/naive-ui/es/_utils/vue/create-data-key.mjs","../../../node_modules/naive-ui/es/_internal/icons/Switcher.mjs","../../../node_modules/naive-ui/es/checkbox/src/CheckMark.mjs","../../../node_modules/naive-ui/es/checkbox/src/LineMark.mjs","../../../node_modules/naive-ui/es/checkbox/src/CheckboxGroup.mjs","../../../node_modules/naive-ui/es/checkbox/src/styles/index.cssr.mjs","../../../node_modules/naive-ui/es/checkbox/src/Checkbox.mjs","../../../node_modules/naive-ui/es/tree-select/src/interface.mjs","../../../node_modules/naive-ui/es/tree/src/interface.mjs","../../../node_modules/naive-ui/es/tree/src/TreeNodeSwitcher.mjs","../../../node_modules/naive-ui/es/tree/src/TreeNodeCheckbox.mjs","../../../node_modules/naive-ui/es/tree/src/TreeNodeContent.mjs","../../../node_modules/naive-ui/es/tree/src/dnd.mjs","../../../node_modules/naive-ui/es/tree/src/utils.mjs","../../../node_modules/naive-ui/es/tree/src/TreeNode.mjs","../../../node_modules/naive-ui/es/tree/src/MotionWrapper.mjs","../../../node_modules/naive-ui/es/tree/src/styles/index.cssr.mjs","../../../node_modules/naive-ui/es/tree/src/Tree.mjs","../../../node_modules/naive-ui/es/tree/src/keyboard.mjs","../../../src/views/design-space/map/types.ts","../../../src/views/design-space/map/resource-tree/index.tsx"],"sourcesContent":["export function createDataKey(key) {\n  return typeof key === 'string' ? `s-${key}` : `n-${key}`;\n}","import { h, defineComponent } from 'vue';\nexport default defineComponent({\n  name: 'Switcher',\n  render() {\n    return h(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 32 32\"\n    }, h(\"path\", {\n      d: \"M12 8l10 8l-10 8z\"\n    }));\n  }\n});","import { h } from 'vue';\nexport default h(\"svg\", {\n  viewBox: \"0 0 64 64\",\n  class: \"check-icon\"\n}, h(\"path\", {\n  d: \"M50.42,16.76L22.34,39.45l-8.1-11.46c-1.12-1.58-3.3-1.96-4.88-0.84c-1.58,1.12-1.95,3.3-0.84,4.88l10.26,14.51  c0.56,0.79,1.42,1.31,2.38,1.45c0.16,0.02,0.32,0.03,0.48,0.03c0.8,0,1.57-0.27,2.2-0.78l30.99-25.03c1.5-1.21,1.74-3.42,0.52-4.92  C54.13,15.78,51.93,15.55,50.42,16.76z\"\n}));","import { h } from 'vue';\nexport default h(\"svg\", {\n  viewBox: \"0 0 100 100\",\n  class: \"line-icon\"\n}, h(\"path\", {\n  d: \"M80.2,55.5H21.4c-2.8,0-5.1-2.5-5.1-5.5l0,0c0-3,2.3-5.5,5.1-5.5h58.7c2.8,0,5.1,2.5,5.1,5.5l0,0C85.2,53.1,82.9,55.5,80.2,55.5z\"\n}));","import { h, defineComponent, provide, computed, toRef, ref, watchEffect } from 'vue';\nimport { useMergedState } from 'vooks';\nimport { useConfig, useFormItem } from \"../../_mixins/index.mjs\";\nimport { call, createInjectionKey, warnOnce } from \"../../_utils/index.mjs\";\nexport const checkboxGroupInjectionKey = createInjectionKey('n-checkbox-group');\nexport const checkboxGroupProps = {\n  min: Number,\n  max: Number,\n  size: String,\n  value: Array,\n  defaultValue: {\n    type: Array,\n    default: null\n  },\n  disabled: {\n    type: Boolean,\n    default: undefined\n  },\n  'onUpdate:value': [Function, Array],\n  onUpdateValue: [Function, Array],\n  // deprecated\n  onChange: [Function, Array]\n};\nexport default defineComponent({\n  name: 'CheckboxGroup',\n  props: checkboxGroupProps,\n  setup(props) {\n    if (process.env.NODE_ENV !== 'production') {\n      watchEffect(() => {\n        if (props.onChange !== undefined) {\n          warnOnce('checkbox-group', '`on-change` is deprecated, please use `on-update:value` instead.');\n        }\n      });\n    }\n    const {\n      mergedClsPrefixRef\n    } = useConfig(props);\n    const formItem = useFormItem(props);\n    const {\n      mergedSizeRef,\n      mergedDisabledRef\n    } = formItem;\n    const uncontrolledValueRef = ref(props.defaultValue);\n    const controlledValueRef = computed(() => props.value);\n    const mergedValueRef = useMergedState(controlledValueRef, uncontrolledValueRef);\n    const checkedCount = computed(() => {\n      var _a;\n      return ((_a = mergedValueRef.value) === null || _a === void 0 ? void 0 : _a.length) || 0;\n    });\n    const valueSetRef = computed(() => {\n      if (Array.isArray(mergedValueRef.value)) {\n        return new Set(mergedValueRef.value);\n      }\n      return new Set();\n    });\n    function toggleCheckbox(checked, checkboxValue) {\n      const {\n        nTriggerFormInput,\n        nTriggerFormChange\n      } = formItem;\n      const {\n        onChange,\n        'onUpdate:value': _onUpdateValue,\n        onUpdateValue\n      } = props;\n      if (Array.isArray(mergedValueRef.value)) {\n        const groupValue = Array.from(mergedValueRef.value);\n        const index = groupValue.findIndex(value => value === checkboxValue);\n        if (checked) {\n          if (!~index) {\n            groupValue.push(checkboxValue);\n            if (onUpdateValue) {\n              call(onUpdateValue, groupValue, {\n                actionType: 'check',\n                value: checkboxValue\n              });\n            }\n            if (_onUpdateValue) {\n              call(_onUpdateValue, groupValue, {\n                actionType: 'check',\n                value: checkboxValue\n              });\n            }\n            nTriggerFormInput();\n            nTriggerFormChange();\n            uncontrolledValueRef.value = groupValue;\n            // deprecated\n            if (onChange) call(onChange, groupValue);\n          }\n        } else {\n          if (~index) {\n            groupValue.splice(index, 1);\n            if (onUpdateValue) {\n              call(onUpdateValue, groupValue, {\n                actionType: 'uncheck',\n                value: checkboxValue\n              });\n            }\n            if (_onUpdateValue) {\n              call(_onUpdateValue, groupValue, {\n                actionType: 'uncheck',\n                value: checkboxValue\n              });\n            }\n            if (onChange) call(onChange, groupValue); // deprecated\n            uncontrolledValueRef.value = groupValue;\n            nTriggerFormInput();\n            nTriggerFormChange();\n          }\n        }\n      } else {\n        if (checked) {\n          if (onUpdateValue) {\n            call(onUpdateValue, [checkboxValue], {\n              actionType: 'check',\n              value: checkboxValue\n            });\n          }\n          if (_onUpdateValue) {\n            call(_onUpdateValue, [checkboxValue], {\n              actionType: 'check',\n              value: checkboxValue\n            });\n          }\n          if (onChange) call(onChange, [checkboxValue]); // deprecated\n          uncontrolledValueRef.value = [checkboxValue];\n          nTriggerFormInput();\n          nTriggerFormChange();\n        } else {\n          if (onUpdateValue) {\n            call(onUpdateValue, [], {\n              actionType: 'uncheck',\n              value: checkboxValue\n            });\n          }\n          if (_onUpdateValue) {\n            call(_onUpdateValue, [], {\n              actionType: 'uncheck',\n              value: checkboxValue\n            });\n          }\n          if (onChange) call(onChange, []); // deprecated\n          uncontrolledValueRef.value = [];\n          nTriggerFormInput();\n          nTriggerFormChange();\n        }\n      }\n    }\n    provide(checkboxGroupInjectionKey, {\n      checkedCountRef: checkedCount,\n      maxRef: toRef(props, 'max'),\n      minRef: toRef(props, 'min'),\n      valueSetRef,\n      disabledRef: mergedDisabledRef,\n      mergedSizeRef,\n      toggleCheckbox\n    });\n    return {\n      mergedClsPrefix: mergedClsPrefixRef\n    };\n  },\n  render() {\n    return h(\"div\", {\n      class: `${this.mergedClsPrefix}-checkbox-group`,\n      role: \"group\"\n    }, this.$slots);\n  }\n});","import { c, cB, cE, cM, insideModal, insidePopover } from \"../../../_utils/cssr/index.mjs\";\nimport { iconSwitchTransition } from \"../../../_styles/transitions/icon-switch.cssr.mjs\";\n// vars:\n// --n-label-line-height\n// --n-bezier\n// --n-size\n// --n-border\n// --n-border-focus\n// --n-border-checked\n// --n-border-disabled\n// --n-border-disabled-checked\n// --n-box-shadow-focus\n// --n-color\n// --n-color-checked\n// --n-color-table\n// --n-color-table-modal\n// --n-color-disabled\n// --n-color-disabled-checked\n// --n-text-color\n// --n-text-color-disabled\n// --n-check-mark-color\n// --n-check-mark-color-disabled\n// --n-check-mark-color-disabled-checked\n// --n-border-radius\n// --n-font-size\n// --n-label-padding\nexport default c([cB('checkbox', `\n font-size: var(--n-font-size);\n outline: none;\n cursor: pointer;\n display: inline-flex;\n flex-wrap: nowrap;\n align-items: flex-start;\n word-break: break-word;\n line-height: var(--n-size);\n --n-merged-color-table: var(--n-color-table);\n `, [cM('show-label', 'line-height: var(--n-label-line-height);'), c('&:hover', [cB('checkbox-box', [cE('border', 'border: var(--n-border-checked);')])]), c('&:focus:not(:active)', [cB('checkbox-box', [cE('border', `\n border: var(--n-border-focus);\n box-shadow: var(--n-box-shadow-focus);\n `)])]), cM('inside-table', [cB('checkbox-box', `\n background-color: var(--n-merged-color-table);\n `)]), cM('checked', [cB('checkbox-box', `\n background-color: var(--n-color-checked);\n `, [cB('checkbox-icon', [\n// if not set width to 100%, safari & old chrome won't display the icon\nc('.check-icon', `\n opacity: 1;\n transform: scale(1);\n `)])])]), cM('indeterminate', [cB('checkbox-box', [cB('checkbox-icon', [c('.check-icon', `\n opacity: 0;\n transform: scale(.5);\n `), c('.line-icon', `\n opacity: 1;\n transform: scale(1);\n `)])])]), cM('checked, indeterminate', [c('&:focus:not(:active)', [cB('checkbox-box', [cE('border', `\n border: var(--n-border-checked);\n box-shadow: var(--n-box-shadow-focus);\n `)])]), cB('checkbox-box', `\n background-color: var(--n-color-checked);\n border-left: 0;\n border-top: 0;\n `, [cE('border', {\n  border: 'var(--n-border-checked)'\n})])]), cM('disabled', {\n  cursor: 'not-allowed'\n}, [cM('checked', [cB('checkbox-box', `\n background-color: var(--n-color-disabled-checked);\n `, [cE('border', {\n  border: 'var(--n-border-disabled-checked)'\n}), cB('checkbox-icon', [c('.check-icon, .line-icon', {\n  fill: 'var(--n-check-mark-color-disabled-checked)'\n})])])]), cB('checkbox-box', `\n background-color: var(--n-color-disabled);\n `, [cE('border', `\n border: var(--n-border-disabled);\n `), cB('checkbox-icon', [c('.check-icon, .line-icon', `\n fill: var(--n-check-mark-color-disabled);\n `)])]), cE('label', `\n color: var(--n-text-color-disabled);\n `)]), cB('checkbox-box-wrapper', `\n position: relative;\n width: var(--n-size);\n flex-shrink: 0;\n flex-grow: 0;\n user-select: none;\n -webkit-user-select: none;\n `), cB('checkbox-box', `\n position: absolute;\n left: 0;\n top: 50%;\n transform: translateY(-50%);\n height: var(--n-size);\n width: var(--n-size);\n display: inline-block;\n box-sizing: border-box;\n border-radius: var(--n-border-radius);\n background-color: var(--n-color);\n transition: background-color 0.3s var(--n-bezier);\n `, [cE('border', `\n transition:\n border-color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n border-radius: inherit;\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n border: var(--n-border);\n `), cB('checkbox-icon', `\n display: flex;\n align-items: center;\n justify-content: center;\n position: absolute;\n left: 1px;\n right: 1px;\n top: 1px;\n bottom: 1px;\n `, [c('.check-icon, .line-icon', `\n width: 100%;\n fill: var(--n-check-mark-color);\n opacity: 0;\n transform: scale(0.5);\n transform-origin: center;\n transition:\n fill 0.3s var(--n-bezier),\n transform 0.3s var(--n-bezier),\n opacity 0.3s var(--n-bezier),\n border-color 0.3s var(--n-bezier);\n `), iconSwitchTransition({\n  left: '1px',\n  top: '1px'\n})])]), cE('label', `\n color: var(--n-text-color);\n transition: color .3s var(--n-bezier);\n user-select: none;\n -webkit-user-select: none;\n padding: var(--n-label-padding);\n font-weight: var(--n-label-font-weight);\n `, [c('&:empty', {\n  display: 'none'\n})])]),\n// modal table header checkbox\ninsideModal(cB('checkbox', `\n --n-merged-color-table: var(--n-color-table-modal);\n `)),\n// popover table header checkbox\ninsidePopover(cB('checkbox', `\n --n-merged-color-table: var(--n-color-table-popover);\n `))]);","import { h, defineComponent, computed, inject, ref, toRef, watchEffect } from 'vue';\nimport { useMergedState, useMemo } from 'vooks';\nimport { createId } from 'seemly';\nimport { on } from 'evtd';\nimport { useConfig, useFormItem, useTheme, useThemeClass } from \"../../_mixins/index.mjs\";\nimport { NIconSwitchTransition } from \"../../_internal/index.mjs\";\nimport { call, createKey, warnOnce, resolveWrappedSlot } from \"../../_utils/index.mjs\";\nimport { checkboxLight } from \"../styles/index.mjs\";\nimport CheckMark from \"./CheckMark.mjs\";\nimport LineMark from \"./LineMark.mjs\";\nimport { checkboxGroupInjectionKey } from \"./CheckboxGroup.mjs\";\nimport style from \"./styles/index.cssr.mjs\";\nimport { useRtl } from \"../../_mixins/use-rtl.mjs\";\nexport const checkboxProps = Object.assign(Object.assign({}, useTheme.props), {\n  size: String,\n  checked: {\n    type: [Boolean, String, Number],\n    default: undefined\n  },\n  defaultChecked: {\n    type: [Boolean, String, Number],\n    default: false\n  },\n  value: [String, Number],\n  disabled: {\n    type: Boolean,\n    default: undefined\n  },\n  indeterminate: Boolean,\n  label: String,\n  focusable: {\n    type: Boolean,\n    default: true\n  },\n  checkedValue: {\n    type: [Boolean, String, Number],\n    default: true\n  },\n  uncheckedValue: {\n    type: [Boolean, String, Number],\n    default: false\n  },\n  'onUpdate:checked': [Function, Array],\n  onUpdateChecked: [Function, Array],\n  // private\n  privateInsideTable: Boolean,\n  // deprecated\n  onChange: [Function, Array]\n});\nexport default defineComponent({\n  name: 'Checkbox',\n  props: checkboxProps,\n  setup(props) {\n    if (process.env.NODE_ENV !== 'production') {\n      watchEffect(() => {\n        if (props.onChange) {\n          warnOnce('checkbox', '`on-change` is deprecated, please use `on-update:checked` instead.');\n        }\n      });\n    }\n    const selfRef = ref(null);\n    const {\n      mergedClsPrefixRef,\n      inlineThemeDisabled,\n      mergedRtlRef\n    } = useConfig(props);\n    const formItem = useFormItem(props, {\n      mergedSize(NFormItem) {\n        const {\n          size\n        } = props;\n        if (size !== undefined) return size;\n        if (NCheckboxGroup) {\n          const {\n            value: mergedSize\n          } = NCheckboxGroup.mergedSizeRef;\n          if (mergedSize !== undefined) {\n            return mergedSize;\n          }\n        }\n        if (NFormItem) {\n          const {\n            mergedSize\n          } = NFormItem;\n          if (mergedSize !== undefined) return mergedSize.value;\n        }\n        return 'medium';\n      },\n      mergedDisabled(NFormItem) {\n        const {\n          disabled\n        } = props;\n        if (disabled !== undefined) return disabled;\n        if (NCheckboxGroup) {\n          if (NCheckboxGroup.disabledRef.value) return true;\n          const {\n            maxRef: {\n              value: max\n            },\n            checkedCountRef\n          } = NCheckboxGroup;\n          if (max !== undefined && checkedCountRef.value >= max && !renderedCheckedRef.value) {\n            return true;\n          }\n          const {\n            minRef: {\n              value: min\n            }\n          } = NCheckboxGroup;\n          if (min !== undefined && checkedCountRef.value <= min && renderedCheckedRef.value) {\n            return true;\n          }\n        }\n        if (NFormItem) {\n          return NFormItem.disabled.value;\n        }\n        return false;\n      }\n    });\n    const {\n      mergedDisabledRef,\n      mergedSizeRef\n    } = formItem;\n    const NCheckboxGroup = inject(checkboxGroupInjectionKey, null);\n    const uncontrolledCheckedRef = ref(props.defaultChecked);\n    const controlledCheckedRef = toRef(props, 'checked');\n    const mergedCheckedRef = useMergedState(controlledCheckedRef, uncontrolledCheckedRef);\n    const renderedCheckedRef = useMemo(() => {\n      if (NCheckboxGroup) {\n        const groupValueSet = NCheckboxGroup.valueSetRef.value;\n        if (groupValueSet && props.value !== undefined) {\n          return groupValueSet.has(props.value);\n        }\n        return false;\n      } else {\n        return mergedCheckedRef.value === props.checkedValue;\n      }\n    });\n    const themeRef = useTheme('Checkbox', '-checkbox', style, checkboxLight, props, mergedClsPrefixRef);\n    function toggle(e) {\n      if (NCheckboxGroup && props.value !== undefined) {\n        NCheckboxGroup.toggleCheckbox(!renderedCheckedRef.value, props.value);\n      } else {\n        const {\n          onChange,\n          'onUpdate:checked': _onUpdateCheck,\n          onUpdateChecked\n        } = props;\n        const {\n          nTriggerFormInput,\n          nTriggerFormChange\n        } = formItem;\n        const nextChecked = renderedCheckedRef.value ? props.uncheckedValue : props.checkedValue;\n        if (_onUpdateCheck) {\n          call(_onUpdateCheck, nextChecked, e);\n        }\n        if (onUpdateChecked) {\n          call(onUpdateChecked, nextChecked, e);\n        }\n        if (onChange) call(onChange, nextChecked, e); // deprecated\n        nTriggerFormInput();\n        nTriggerFormChange();\n        uncontrolledCheckedRef.value = nextChecked;\n      }\n    }\n    function handleClick(e) {\n      if (!mergedDisabledRef.value) {\n        toggle(e);\n      }\n    }\n    function handleKeyUp(e) {\n      if (mergedDisabledRef.value) return;\n      switch (e.key) {\n        case ' ':\n        case 'Enter':\n          toggle(e);\n      }\n    }\n    function handleKeyDown(e) {\n      switch (e.key) {\n        case ' ':\n          e.preventDefault();\n      }\n    }\n    const exposedMethods = {\n      focus: () => {\n        var _a;\n        (_a = selfRef.value) === null || _a === void 0 ? void 0 : _a.focus();\n      },\n      blur: () => {\n        var _a;\n        (_a = selfRef.value) === null || _a === void 0 ? void 0 : _a.blur();\n      }\n    };\n    const rtlEnabledRef = useRtl('Checkbox', mergedRtlRef, mergedClsPrefixRef);\n    const cssVarsRef = computed(() => {\n      const {\n        value: mergedSize\n      } = mergedSizeRef;\n      const {\n        common: {\n          cubicBezierEaseInOut\n        },\n        self: {\n          borderRadius,\n          color,\n          colorChecked,\n          colorDisabled,\n          colorTableHeader,\n          colorTableHeaderModal,\n          colorTableHeaderPopover,\n          checkMarkColor,\n          checkMarkColorDisabled,\n          border,\n          borderFocus,\n          borderDisabled,\n          borderChecked,\n          boxShadowFocus,\n          textColor,\n          textColorDisabled,\n          checkMarkColorDisabledChecked,\n          colorDisabledChecked,\n          borderDisabledChecked,\n          labelPadding,\n          labelLineHeight,\n          labelFontWeight,\n          [createKey('fontSize', mergedSize)]: fontSize,\n          [createKey('size', mergedSize)]: size\n        }\n      } = themeRef.value;\n      return {\n        '--n-label-line-height': labelLineHeight,\n        '--n-label-font-weight': labelFontWeight,\n        '--n-size': size,\n        '--n-bezier': cubicBezierEaseInOut,\n        '--n-border-radius': borderRadius,\n        '--n-border': border,\n        '--n-border-checked': borderChecked,\n        '--n-border-focus': borderFocus,\n        '--n-border-disabled': borderDisabled,\n        '--n-border-disabled-checked': borderDisabledChecked,\n        '--n-box-shadow-focus': boxShadowFocus,\n        '--n-color': color,\n        '--n-color-checked': colorChecked,\n        '--n-color-table': colorTableHeader,\n        '--n-color-table-modal': colorTableHeaderModal,\n        '--n-color-table-popover': colorTableHeaderPopover,\n        '--n-color-disabled': colorDisabled,\n        '--n-color-disabled-checked': colorDisabledChecked,\n        '--n-text-color': textColor,\n        '--n-text-color-disabled': textColorDisabled,\n        '--n-check-mark-color': checkMarkColor,\n        '--n-check-mark-color-disabled': checkMarkColorDisabled,\n        '--n-check-mark-color-disabled-checked': checkMarkColorDisabledChecked,\n        '--n-font-size': fontSize,\n        '--n-label-padding': labelPadding\n      };\n    });\n    const themeClassHandle = inlineThemeDisabled ? useThemeClass('checkbox', computed(() => mergedSizeRef.value[0]), cssVarsRef, props) : undefined;\n    return Object.assign(formItem, exposedMethods, {\n      rtlEnabled: rtlEnabledRef,\n      selfRef,\n      mergedClsPrefix: mergedClsPrefixRef,\n      mergedDisabled: mergedDisabledRef,\n      renderedChecked: renderedCheckedRef,\n      mergedTheme: themeRef,\n      labelId: createId(),\n      handleClick,\n      handleKeyUp,\n      handleKeyDown,\n      cssVars: inlineThemeDisabled ? undefined : cssVarsRef,\n      themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass,\n      onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender\n    });\n  },\n  render() {\n    var _a;\n    const {\n      $slots,\n      renderedChecked,\n      mergedDisabled,\n      indeterminate,\n      privateInsideTable,\n      cssVars,\n      labelId,\n      label,\n      mergedClsPrefix,\n      focusable,\n      handleKeyUp,\n      handleKeyDown,\n      handleClick\n    } = this;\n    (_a = this.onRender) === null || _a === void 0 ? void 0 : _a.call(this);\n    const labelNode = resolveWrappedSlot($slots.default, children => {\n      if (label || children) {\n        return h(\"span\", {\n          class: `${mergedClsPrefix}-checkbox__label`,\n          id: labelId\n        }, label || children);\n      }\n      return null;\n    });\n    return h(\"div\", {\n      ref: \"selfRef\",\n      class: [`${mergedClsPrefix}-checkbox`, this.themeClass, this.rtlEnabled && `${mergedClsPrefix}-checkbox--rtl`, renderedChecked && `${mergedClsPrefix}-checkbox--checked`, mergedDisabled && `${mergedClsPrefix}-checkbox--disabled`, indeterminate && `${mergedClsPrefix}-checkbox--indeterminate`, privateInsideTable && `${mergedClsPrefix}-checkbox--inside-table`, labelNode && `${mergedClsPrefix}-checkbox--show-label`],\n      tabindex: mergedDisabled || !focusable ? undefined : 0,\n      role: \"checkbox\",\n      \"aria-checked\": indeterminate ? 'mixed' : renderedChecked,\n      \"aria-labelledby\": labelId,\n      style: cssVars,\n      onKeyup: handleKeyUp,\n      onKeydown: handleKeyDown,\n      onClick: handleClick,\n      onMousedown: () => {\n        on('selectstart', window, e => {\n          e.preventDefault();\n        }, {\n          once: true\n        });\n      }\n    }, h(\"div\", {\n      class: `${mergedClsPrefix}-checkbox-box-wrapper`\n    }, \"\\u00A0\", h(\"div\", {\n      class: `${mergedClsPrefix}-checkbox-box`\n    }, h(NIconSwitchTransition, null, {\n      default: () => this.indeterminate ? h(\"div\", {\n        key: \"indeterminate\",\n        class: `${mergedClsPrefix}-checkbox-icon`\n      }, LineMark) : h(\"div\", {\n        key: \"check\",\n        class: `${mergedClsPrefix}-checkbox-icon`\n      }, CheckMark)\n    }), h(\"div\", {\n      class: `${mergedClsPrefix}-checkbox-box__border`\n    }))), labelNode);\n  }\n});","import { createInjectionKey } from \"../../_utils/index.mjs\";\nexport const treeSelectInjectionKey = createInjectionKey('n-tree-select');","import { createInjectionKey } from \"../../_utils/index.mjs\";\nexport const treeInjectionKey = createInjectionKey('n-tree');","import { h, defineComponent, inject } from 'vue';\nimport { SwitcherIcon } from \"../../_internal/icons/index.mjs\";\nimport { NIconSwitchTransition, NBaseLoading, NBaseIcon } from \"../../_internal/index.mjs\";\nimport { treeInjectionKey } from \"./interface.mjs\";\nexport default defineComponent({\n  name: 'NTreeSwitcher',\n  props: {\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    indent: {\n      type: Number,\n      required: true\n    },\n    expanded: Boolean,\n    selected: Boolean,\n    hide: Boolean,\n    loading: Boolean,\n    onClick: Function,\n    tmNode: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const {\n      renderSwitcherIconRef\n    } = inject(treeInjectionKey, null);\n    return () => {\n      const {\n        clsPrefix,\n        expanded,\n        hide,\n        indent,\n        onClick\n      } = props;\n      return h(\"span\", {\n        \"data-switcher\": true,\n        class: [`${clsPrefix}-tree-node-switcher`, expanded && `${clsPrefix}-tree-node-switcher--expanded`, hide && `${clsPrefix}-tree-node-switcher--hide`],\n        style: {\n          width: `${indent}px`\n        },\n        onClick: onClick\n      }, h(\"div\", {\n        class: `${clsPrefix}-tree-node-switcher__icon`\n      }, h(NIconSwitchTransition, null, {\n        default: () => {\n          if (props.loading) {\n            return h(NBaseLoading, {\n              clsPrefix: clsPrefix,\n              key: \"loading\",\n              radius: 85,\n              strokeWidth: 20\n            });\n          }\n          const {\n            value: renderSwitcherIcon\n          } = renderSwitcherIconRef;\n          return renderSwitcherIcon ? renderSwitcherIcon({\n            expanded: props.expanded,\n            selected: props.selected,\n            option: props.tmNode.rawNode\n          }) : h(NBaseIcon, {\n            clsPrefix: clsPrefix,\n            key: \"switcher\"\n          }, {\n            default: () => h(SwitcherIcon, null)\n          });\n        }\n      })));\n    };\n  }\n});","import { h, defineComponent, inject } from 'vue';\nimport { NCheckbox } from \"../../checkbox/index.mjs\";\nimport { treeInjectionKey } from \"./interface.mjs\";\nexport default defineComponent({\n  name: 'NTreeNodeCheckbox',\n  props: {\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    indent: {\n      type: Number,\n      required: true\n    },\n    right: Boolean,\n    focusable: Boolean,\n    disabled: Boolean,\n    checked: Boolean,\n    indeterminate: Boolean,\n    onCheck: Function\n  },\n  setup(props) {\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const NTree = inject(treeInjectionKey);\n    function doCheck(value) {\n      const {\n        onCheck\n      } = props;\n      if (onCheck) {\n        onCheck(value);\n      }\n    }\n    function handleUpdateValue(value) {\n      doCheck(value);\n    }\n    return {\n      handleUpdateValue,\n      mergedTheme: NTree.mergedThemeRef\n    };\n  },\n  render() {\n    const {\n      clsPrefix,\n      mergedTheme,\n      checked,\n      indeterminate,\n      disabled,\n      focusable,\n      indent,\n      handleUpdateValue\n    } = this;\n    return h(\"span\", {\n      class: [`${clsPrefix}-tree-node-checkbox`, this.right && `${clsPrefix}-tree-node-checkbox--right`],\n      style: {\n        width: `${indent}px`\n      },\n      \"data-checkbox\": true\n    }, h(NCheckbox, {\n      focusable: focusable,\n      disabled: disabled,\n      theme: mergedTheme.peers.Checkbox,\n      themeOverrides: mergedTheme.peerOverrides.Checkbox,\n      checked: checked,\n      indeterminate: indeterminate,\n      onUpdateChecked: handleUpdateValue\n    }));\n  }\n});","import { h, defineComponent, ref, inject } from 'vue';\nimport { render } from \"../../_utils/index.mjs\";\nimport { treeInjectionKey } from \"./interface.mjs\";\nexport default defineComponent({\n  name: 'TreeNodeContent',\n  props: {\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    disabled: Boolean,\n    checked: Boolean,\n    selected: Boolean,\n    onClick: Function,\n    onDragstart: Function,\n    tmNode: {\n      type: Object,\n      required: true\n    },\n    nodeProps: Object\n  },\n  setup(props) {\n    const {\n      renderLabelRef,\n      renderPrefixRef,\n      renderSuffixRef,\n      labelFieldRef\n    } =\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    inject(treeInjectionKey);\n    const selfRef = ref(null);\n    function doClick(e) {\n      const {\n        onClick\n      } = props;\n      if (onClick) onClick(e);\n    }\n    function handleClick(e) {\n      doClick(e);\n    }\n    return {\n      selfRef,\n      renderLabel: renderLabelRef,\n      renderPrefix: renderPrefixRef,\n      renderSuffix: renderSuffixRef,\n      labelField: labelFieldRef,\n      handleClick\n    };\n  },\n  render() {\n    const {\n      clsPrefix,\n      labelField,\n      nodeProps,\n      checked = false,\n      selected = false,\n      renderLabel,\n      renderPrefix,\n      renderSuffix,\n      handleClick,\n      onDragstart,\n      tmNode: {\n        rawNode,\n        rawNode: {\n          prefix,\n          suffix,\n          [labelField]: label\n        }\n      }\n    } = this;\n    return h(\"span\", Object.assign({}, nodeProps, {\n      ref: \"selfRef\",\n      class: [`${clsPrefix}-tree-node-content`, nodeProps === null || nodeProps === void 0 ? void 0 : nodeProps.class],\n      onClick: handleClick,\n      draggable: onDragstart === undefined ? undefined : true,\n      onDragstart: onDragstart\n    }), renderPrefix || prefix ? h(\"div\", {\n      class: `${clsPrefix}-tree-node-content__prefix`\n    }, renderPrefix ? renderPrefix({\n      option: rawNode,\n      selected,\n      checked\n    }) : render(prefix)) : null, h(\"div\", {\n      class: `${clsPrefix}-tree-node-content__text`\n    }, renderLabel ? renderLabel({\n      option: rawNode,\n      selected,\n      checked\n    }) : render(label)), renderSuffix || suffix ? h(\"div\", {\n      class: `${clsPrefix}-tree-node-content__suffix`\n    }, renderSuffix ? renderSuffix({\n      option: rawNode,\n      selected,\n      checked\n    }) : render(suffix)) : null);\n  }\n});","import { h } from 'vue';\nexport function renderDropMark({\n  position,\n  offsetLevel,\n  indent,\n  el\n}) {\n  const style = {\n    position: 'absolute',\n    boxSizing: 'border-box',\n    right: 0\n  };\n  if (position === 'inside') {\n    style.left = 0;\n    style.top = 0;\n    style.bottom = 0;\n    style.borderRadius = 'inherit';\n    style.boxShadow = 'inset 0 0 0 2px var(--n-drop-mark-color)';\n  } else {\n    const cssPosition = position === 'before' ? 'top' : 'bottom';\n    style[cssPosition] = 0;\n    // The left prop should be modified when tree's style is changed\n    // Maybe it is possible to use content left\n    style.left = `${el.offsetLeft + 6 - offsetLevel * indent}px`;\n    style.height = '2px';\n    style.backgroundColor = 'var(--n-drop-mark-color)';\n    style.transformOrigin = cssPosition;\n    style.borderRadius = '1px';\n    style.transform = position === 'before' ? 'translateY(-4px)' : 'translateY(4px)';\n  }\n  return h(\"div\", {\n    style: style\n  });\n}\nexport function defaultAllowDrop({\n  dropPosition,\n  node\n}) {\n  if (node.isLeaf === false) return true;\n  if (node.children) {\n    return true;\n  }\n  return dropPosition !== 'inside';\n}","import { computed } from 'vue';\nimport { isBrowser } from \"../../_utils/index.mjs\";\nimport { happensIn } from 'seemly';\nexport function useMergedCheckStrategy(props) {\n  return computed(() => props.leafOnly ? 'child' : props.checkStrategy);\n}\nexport function isNodeDisabled(node, disabledField) {\n  return !!node.rawNode[disabledField];\n}\nfunction traverse(nodes, childrenField, callback, callbackAfter) {\n  nodes === null || nodes === void 0 ? void 0 : nodes.forEach(node => {\n    callback(node);\n    traverse(node[childrenField], childrenField, callback, callbackAfter);\n    callbackAfter(node);\n  });\n}\nexport function keysWithFilter(nodes, pattern, keyField, childrenField, filter) {\n  const keys = new Set();\n  const highlightKeySet = new Set();\n  const path = [];\n  traverse(nodes, childrenField, node => {\n    path.push(node);\n    if (filter(pattern, node)) {\n      highlightKeySet.add(node[keyField]);\n      for (let i = path.length - 2; i >= 0; --i) {\n        if (!keys.has(path[i][keyField])) {\n          keys.add(path[i][keyField]);\n        } else {\n          return;\n        }\n      }\n    }\n  }, () => {\n    path.pop();\n  });\n  return {\n    expandedKeys: Array.from(keys),\n    highlightKeySet\n  };\n}\nconst emptyImage = null;\nif (isBrowser && Image) {\n  const emptyImage = new Image();\n  emptyImage.src = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n}\nexport { emptyImage };\nexport function filterTree(tree, filter, pattern, keyField, childrenField) {\n  const visitedTailKeys = new Set();\n  const visitedNonTailKeys = new Set();\n  const highlightKeySet = new Set();\n  const expandedKeys = [];\n  const filteredTree = [];\n  const path = [];\n  function visit(t) {\n    t.forEach(n => {\n      path.push(n);\n      if (filter(pattern, n)) {\n        visitedTailKeys.add(n[keyField]);\n        highlightKeySet.add(n[keyField]);\n        for (let i = path.length - 2; i >= 0; --i) {\n          const key = path[i][keyField];\n          if (!visitedNonTailKeys.has(key)) {\n            visitedNonTailKeys.add(key);\n            if (visitedTailKeys.has(key)) {\n              visitedTailKeys.delete(key);\n            }\n          } else {\n            break;\n          }\n        }\n      }\n      const children = n[childrenField];\n      if (children) {\n        visit(children);\n      }\n      path.pop();\n    });\n  }\n  visit(tree);\n  function build(t, sibs) {\n    t.forEach(n => {\n      const key = n[keyField];\n      const isVisitedTail = visitedTailKeys.has(key);\n      const isVisitedNonTail = visitedNonTailKeys.has(key);\n      if (!isVisitedTail && !isVisitedNonTail) return;\n      const children = n[childrenField];\n      if (children) {\n        if (isVisitedTail) {\n          // If it is visited path tail, use origin node\n          sibs.push(n);\n        } else {\n          // It it is not visited path tail, use cloned node\n          expandedKeys.push(key);\n          const clonedNode = Object.assign(Object.assign({}, n), {\n            [childrenField]: []\n          });\n          sibs.push(clonedNode);\n          build(children, clonedNode[childrenField]);\n        }\n      } else {\n        sibs.push(n);\n      }\n    });\n  }\n  build(tree, filteredTree);\n  return {\n    filteredTree,\n    highlightKeySet,\n    expandedKeys\n  };\n}\nexport function treeGetClickTarget(e) {\n  if (happensIn(e, 'checkbox')) {\n    return 'checkbox';\n  } else if (happensIn(e, 'switcher')) {\n    return 'switcher';\n  } else {\n    return 'node';\n  }\n}","import { h, inject, computed, defineComponent, ref, onMounted } from 'vue';\nimport { useMemo } from 'vooks';\nimport { happensIn, repeat } from 'seemly';\nimport { createDataKey } from \"../../_utils/index.mjs\";\nimport NTreeNodeSwitcher from \"./TreeNodeSwitcher.mjs\";\nimport NTreeNodeCheckbox from \"./TreeNodeCheckbox.mjs\";\nimport NTreeNodeContent from \"./TreeNodeContent.mjs\";\nimport { treeInjectionKey } from \"./interface.mjs\";\nimport { renderDropMark } from \"./dnd.mjs\";\nimport { isNodeDisabled } from \"./utils.mjs\";\nconst TreeNode = defineComponent({\n  name: 'TreeNode',\n  props: {\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    tmNode: {\n      type: Object,\n      required: true\n    }\n  },\n  setup(props) {\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const NTree = inject(treeInjectionKey);\n    const {\n      droppingNodeParentRef,\n      droppingMouseNodeRef,\n      draggingNodeRef,\n      droppingPositionRef,\n      droppingOffsetLevelRef,\n      nodePropsRef,\n      indentRef,\n      blockLineRef,\n      checkboxPlacementRef,\n      checkOnClickRef,\n      disabledFieldRef,\n      showLineRef,\n      renderSwitcherIconRef,\n      overrideDefaultNodeClickBehaviorRef\n    } = NTree;\n    const checkboxDisabledRef = useMemo(() => !!props.tmNode.rawNode.checkboxDisabled);\n    const nodeIsDisabledRef = useMemo(() => {\n      return isNodeDisabled(props.tmNode, disabledFieldRef.value);\n    });\n    const disabledRef = useMemo(() => NTree.disabledRef.value || nodeIsDisabledRef.value);\n    const resolvedNodePropsRef = computed(() => {\n      const {\n        value: nodeProps\n      } = nodePropsRef;\n      if (!nodeProps) return undefined;\n      return nodeProps({\n        option: props.tmNode.rawNode\n      });\n    });\n    // used for drag and drop\n    const contentInstRef = ref(null);\n    // must be non-reactive\n    const contentElRef = {\n      value: null\n    };\n    onMounted(() => {\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      contentElRef.value = contentInstRef.value.$el;\n    });\n    function handleSwitcherClick() {\n      const callback = () => {\n        const {\n          tmNode\n        } = props;\n        if (!tmNode.isLeaf && !tmNode.shallowLoaded) {\n          if (!NTree.loadingKeysRef.value.has(tmNode.key)) {\n            NTree.loadingKeysRef.value.add(tmNode.key);\n          } else {\n            return;\n          }\n          const {\n            onLoadRef: {\n              value: onLoad\n            }\n          } = NTree;\n          if (onLoad) {\n            void onLoad(tmNode.rawNode).then(value => {\n              if (value !== false) {\n                NTree.handleSwitcherClick(tmNode);\n              }\n            }).finally(() => {\n              NTree.loadingKeysRef.value.delete(tmNode.key);\n            });\n          }\n        } else {\n          NTree.handleSwitcherClick(tmNode);\n        }\n      };\n      if (renderSwitcherIconRef.value) {\n        // if renderSwitcherIcon is set, icon dom may be altered before event\n        // bubbles to parent dom, so that target check fails. Call it in next\n        // event loop so that event bubble phase is finishes.\n        setTimeout(callback, 0);\n      } else {\n        callback();\n      }\n    }\n    const selectableRef = useMemo(() => !nodeIsDisabledRef.value && NTree.selectableRef.value && (NTree.internalTreeSelect ? NTree.mergedCheckStrategyRef.value !== 'child' || NTree.multipleRef.value && NTree.cascadeRef.value || props.tmNode.isLeaf : true));\n    const checkableRef = useMemo(() => NTree.checkableRef.value && (NTree.cascadeRef.value || NTree.mergedCheckStrategyRef.value !== 'child' || props.tmNode.isLeaf));\n    const checkedRef = useMemo(() => NTree.displayedCheckedKeysRef.value.includes(props.tmNode.key));\n    const mergedCheckOnClickRef = useMemo(() => {\n      const {\n        value: checkable\n      } = checkableRef;\n      if (!checkable) return false;\n      const {\n        value: checkOnClick\n      } = checkOnClickRef;\n      const {\n        tmNode\n      } = props;\n      if (typeof checkOnClick === 'boolean') {\n        return !tmNode.disabled && checkOnClick;\n      }\n      return checkOnClick(props.tmNode.rawNode);\n    });\n    function _handleClick(e) {\n      const {\n        value: expandOnClick\n      } = NTree.expandOnClickRef;\n      const {\n        value: selectable\n      } = selectableRef;\n      const {\n        value: mergedCheckOnClick\n      } = mergedCheckOnClickRef;\n      if (!selectable && !expandOnClick && !mergedCheckOnClick) return;\n      if (happensIn(e, 'checkbox') || happensIn(e, 'switcher')) return;\n      const {\n        tmNode\n      } = props;\n      if (selectable) {\n        NTree.handleSelect(tmNode);\n      }\n      if (expandOnClick && !tmNode.isLeaf) {\n        handleSwitcherClick();\n      }\n      if (mergedCheckOnClick) {\n        handleCheck(!checkedRef.value);\n      }\n    }\n    function handleNodeClick(e) {\n      var _a, _b;\n      if (happensIn(e, 'checkbox') || happensIn(e, 'switcher')) return;\n      if (!disabledRef.value) {\n        const overrideDefaultNodeClickBehavior = overrideDefaultNodeClickBehaviorRef.value;\n        let shouldOverride = false;\n        if (overrideDefaultNodeClickBehavior) {\n          switch (overrideDefaultNodeClickBehavior({\n            option: props.tmNode.rawNode\n          })) {\n            case 'toggleCheck':\n              shouldOverride = true;\n              handleCheck(!checkedRef.value);\n              break;\n            case 'toggleSelect':\n              shouldOverride = true;\n              NTree.handleSelect(props.tmNode);\n              break;\n            case 'toggleExpand':\n              shouldOverride = true;\n              handleSwitcherClick();\n              shouldOverride = true;\n              break;\n            case 'none':\n              shouldOverride = true;\n              shouldOverride = true;\n              return;\n            case 'default':\n            default:\n              break;\n          }\n        }\n        if (!shouldOverride) {\n          _handleClick(e);\n        }\n      }\n      (_b = (_a = resolvedNodePropsRef.value) === null || _a === void 0 ? void 0 : _a.onClick) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n    }\n    function handleContentClick(e) {\n      if (blockLineRef.value) return;\n      handleNodeClick(e);\n    }\n    function handleLineClick(e) {\n      if (!blockLineRef.value) return;\n      handleNodeClick(e);\n    }\n    function handleCheck(checked) {\n      NTree.handleCheck(props.tmNode, checked);\n    }\n    // Dnd\n    function handleDragStart(e) {\n      NTree.handleDragStart({\n        event: e,\n        node: props.tmNode\n      });\n    }\n    function handleDragEnter(e) {\n      if (e.currentTarget !== e.target) {\n        return;\n      }\n      NTree.handleDragEnter({\n        event: e,\n        node: props.tmNode\n      });\n    }\n    function handleDragOver(e) {\n      e.preventDefault(); // if not prevent, drop event won't be fired...\n      NTree.handleDragOver({\n        event: e,\n        node: props.tmNode\n      });\n    }\n    function handleDragEnd(e) {\n      NTree.handleDragEnd({\n        event: e,\n        node: props.tmNode\n      });\n    }\n    function handleDragLeave(e) {\n      if (e.currentTarget !== e.target) {\n        return;\n      }\n      NTree.handleDragLeave({\n        event: e,\n        node: props.tmNode\n      });\n    }\n    function handleDrop(e) {\n      e.preventDefault();\n      if (droppingPositionRef.value !== null) {\n        NTree.handleDrop({\n          event: e,\n          node: props.tmNode,\n          dropPosition: droppingPositionRef.value\n        });\n      }\n    }\n    const indentNodes = computed(() => {\n      const {\n        clsPrefix\n      } = props;\n      const {\n        value: indent\n      } = indentRef;\n      if (showLineRef.value) {\n        const indentNodes = [];\n        let cursor = props.tmNode.parent;\n        while (cursor) {\n          if (cursor.isLastChild) {\n            indentNodes.push(h(\"div\", {\n              class: `${clsPrefix}-tree-node-indent`\n            }, h(\"div\", {\n              style: {\n                width: `${indent}px`\n              }\n            })));\n          } else {\n            indentNodes.push(h(\"div\", {\n              class: [`${clsPrefix}-tree-node-indent`, `${clsPrefix}-tree-node-indent--show-line`]\n            }, h(\"div\", {\n              style: {\n                width: `${indent}px`\n              }\n            })));\n          }\n          cursor = cursor.parent;\n        }\n        return indentNodes.reverse();\n      } else {\n        return repeat(props.tmNode.level, h(\"div\", {\n          class: `${props.clsPrefix}-tree-node-indent`\n        }, h(\"div\", {\n          style: {\n            width: `${indent}px`\n          }\n        })));\n      }\n    });\n    return {\n      showDropMark: useMemo(() => {\n        const {\n          value: draggingNode\n        } = draggingNodeRef;\n        if (!draggingNode) return;\n        const {\n          value: droppingPosition\n        } = droppingPositionRef;\n        if (!droppingPosition) return;\n        const {\n          value: droppingMouseNode\n        } = droppingMouseNodeRef;\n        if (!droppingMouseNode) {\n          return;\n        }\n        const {\n          tmNode\n        } = props;\n        if (tmNode.key === droppingMouseNode.key) return true;\n        return false;\n      }),\n      showDropMarkAsParent: useMemo(() => {\n        const {\n          value: droppingNodeParent\n        } = droppingNodeParentRef;\n        if (!droppingNodeParent) return false;\n        const {\n          tmNode\n        } = props;\n        const {\n          value: droppingPosition\n        } = droppingPositionRef;\n        if (droppingPosition === 'before' || droppingPosition === 'after') {\n          return droppingNodeParent.key === tmNode.key;\n        }\n        return false;\n      }),\n      pending: useMemo(() => NTree.pendingNodeKeyRef.value === props.tmNode.key),\n      loading: useMemo(() => NTree.loadingKeysRef.value.has(props.tmNode.key)),\n      highlight: useMemo(() => {\n        var _a;\n        return (_a = NTree.highlightKeySetRef.value) === null || _a === void 0 ? void 0 : _a.has(props.tmNode.key);\n      }),\n      checked: checkedRef,\n      indeterminate: useMemo(() => NTree.displayedIndeterminateKeysRef.value.includes(props.tmNode.key)),\n      selected: useMemo(() => NTree.mergedSelectedKeysRef.value.includes(props.tmNode.key)),\n      expanded: useMemo(() => NTree.mergedExpandedKeysRef.value.includes(props.tmNode.key)),\n      disabled: disabledRef,\n      checkable: checkableRef,\n      mergedCheckOnClick: mergedCheckOnClickRef,\n      checkboxDisabled: checkboxDisabledRef,\n      selectable: selectableRef,\n      expandOnClick: NTree.expandOnClickRef,\n      internalScrollable: NTree.internalScrollableRef,\n      draggable: NTree.draggableRef,\n      blockLine: blockLineRef,\n      nodeProps: resolvedNodePropsRef,\n      checkboxFocusable: NTree.internalCheckboxFocusableRef,\n      droppingPosition: droppingPositionRef,\n      droppingOffsetLevel: droppingOffsetLevelRef,\n      indent: indentRef,\n      checkboxPlacement: checkboxPlacementRef,\n      showLine: showLineRef,\n      contentInstRef,\n      contentElRef,\n      indentNodes,\n      handleCheck,\n      handleDrop,\n      handleDragStart,\n      handleDragEnter,\n      handleDragOver,\n      handleDragEnd,\n      handleDragLeave,\n      handleLineClick,\n      handleContentClick,\n      handleSwitcherClick\n    };\n  },\n  render() {\n    const {\n      tmNode,\n      clsPrefix,\n      checkable,\n      expandOnClick,\n      selectable,\n      selected,\n      checked,\n      highlight,\n      draggable,\n      blockLine,\n      indent,\n      indentNodes,\n      disabled,\n      pending,\n      internalScrollable,\n      nodeProps,\n      checkboxPlacement\n    } = this;\n    // drag start not inside\n    // it need to be append to node itself, not wrapper\n    const dragEventHandlers = draggable && !disabled ? {\n      onDragenter: this.handleDragEnter,\n      onDragleave: this.handleDragLeave,\n      onDragend: this.handleDragEnd,\n      onDrop: this.handleDrop,\n      onDragover: this.handleDragOver\n    } : undefined;\n    // In non virtual mode, there's no evidence that which element should be\n    // scrolled to, so we need data-key to query the target element.\n    const dataKey = internalScrollable ? createDataKey(tmNode.key) : undefined;\n    const checkboxOnRight = checkboxPlacement === 'right';\n    const checkboxNode = checkable ? h(NTreeNodeCheckbox, {\n      indent: indent,\n      right: checkboxOnRight,\n      focusable: this.checkboxFocusable,\n      disabled: disabled || this.checkboxDisabled,\n      clsPrefix: clsPrefix,\n      checked: this.checked,\n      indeterminate: this.indeterminate,\n      onCheck: this.handleCheck\n    }) : null;\n    return h(\"div\", Object.assign({\n      class: `${clsPrefix}-tree-node-wrapper`\n    }, dragEventHandlers), h(\"div\", Object.assign({}, blockLine ? nodeProps : undefined, {\n      class: [`${clsPrefix}-tree-node`, {\n        [`${clsPrefix}-tree-node--selected`]: selected,\n        [`${clsPrefix}-tree-node--checkable`]: checkable,\n        [`${clsPrefix}-tree-node--highlight`]: highlight,\n        [`${clsPrefix}-tree-node--pending`]: pending,\n        [`${clsPrefix}-tree-node--disabled`]: disabled,\n        [`${clsPrefix}-tree-node--selectable`]: selectable,\n        [`${clsPrefix}-tree-node--clickable`]: selectable || expandOnClick || this.mergedCheckOnClick\n      }, nodeProps === null || nodeProps === void 0 ? void 0 : nodeProps.class],\n      \"data-key\": dataKey,\n      draggable: draggable && blockLine,\n      onClick: this.handleLineClick,\n      onDragstart: draggable && blockLine && !disabled ? this.handleDragStart : undefined\n    }), indentNodes, tmNode.isLeaf && this.showLine ? h(\"div\", {\n      class: [`${clsPrefix}-tree-node-indent`, `${clsPrefix}-tree-node-indent--show-line`, tmNode.isLeaf && `${clsPrefix}-tree-node-indent--is-leaf`, tmNode.isLastChild && `${clsPrefix}-tree-node-indent--last-child`]\n    }, h(\"div\", {\n      style: {\n        width: `${indent}px`\n      }\n    })) : h(NTreeNodeSwitcher, {\n      clsPrefix: clsPrefix,\n      expanded: this.expanded,\n      selected: selected,\n      loading: this.loading,\n      hide: tmNode.isLeaf,\n      tmNode: this.tmNode,\n      indent: indent,\n      onClick: this.handleSwitcherClick\n    }), !checkboxOnRight ? checkboxNode : null, h(NTreeNodeContent, {\n      ref: \"contentInstRef\",\n      clsPrefix: clsPrefix,\n      checked: checked,\n      selected: selected,\n      onClick: this.handleContentClick,\n      nodeProps: blockLine ? undefined : nodeProps,\n      onDragstart: draggable && !blockLine && !disabled ? this.handleDragStart : undefined,\n      tmNode: tmNode\n    }), draggable ? this.showDropMark ? renderDropMark({\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      el: this.contentElRef.value,\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      position: this.droppingPosition,\n      offsetLevel: this.droppingOffsetLevel,\n      indent\n    }) : this.showDropMarkAsParent ? renderDropMark({\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      el: this.contentElRef.value,\n      position: 'inside',\n      offsetLevel: this.droppingOffsetLevel,\n      indent\n    }) : null : null, checkboxOnRight ? checkboxNode : null));\n  }\n});\nexport default TreeNode;","import { h, defineComponent } from 'vue';\nimport { pxfy } from 'seemly';\nimport FadeInExpandTransition from \"../../_internal/fade-in-expand-transition/index.mjs\";\nimport TreeNode from \"./TreeNode.mjs\";\nexport default defineComponent({\n  name: 'TreeMotionWrapper',\n  props: {\n    clsPrefix: {\n      type: String,\n      required: true\n    },\n    height: Number,\n    nodes: {\n      type: Array,\n      required: true\n    },\n    mode: {\n      type: String,\n      required: true\n    },\n    onAfterEnter: {\n      type: Function,\n      required: true\n    }\n  },\n  render() {\n    const {\n      clsPrefix\n    } = this;\n    return h(FadeInExpandTransition, {\n      onAfterEnter: this.onAfterEnter,\n      appear: true,\n      reverse: this.mode === 'collapse'\n    }, {\n      default: () => h(\"div\", {\n        class: [`${clsPrefix}-tree-motion-wrapper`, `${clsPrefix}-tree-motion-wrapper--${this.mode}`],\n        style: {\n          height: pxfy(this.height)\n        }\n      }, this.nodes.map(node => h(TreeNode, {\n        clsPrefix: clsPrefix,\n        tmNode: node\n      })))\n    });\n  }\n});","import { c, cB, cE, cM, cNotM } from \"../../../_utils/cssr/index.mjs\";\nimport { iconSwitchTransition } from \"../../../_styles/transitions/icon-switch.cssr.mjs\";\nimport { fadeInHeightExpandTransition } from \"../../../_styles/transitions/fade-in-height-expand.cssr.mjs\";\nconst iconSwitchTransitionNode = iconSwitchTransition();\n// vars:\n// --n-arrow-color\n// --n-bezier\n// --n-font-size\n// --n-node-border-radius\n// --n-node-color-active\n// --n-node-color-hover\n// --n-node-color-pressed\n// --n-node-text-color\n// --n-node-text-color-disabled\n// --n-node-wrapper-padding\n// --n-line-offset-top\n// --n-line-offset-bottom\n// --n-node-content-height\n// --n-line-height\n// --n-line-color\nexport default cB('tree', `\n font-size: var(--n-font-size);\n outline: none;\n`, [c('ul, li', `\n margin: 0;\n padding: 0;\n list-style: none;\n `), c('>', [cB('tree-node', [c('&:first-child', 'margin-top: 0;')])]), cB('tree-motion-wrapper', [cM('expand', [fadeInHeightExpandTransition({\n  duration: '0.2s'\n})]), cM('collapse', [fadeInHeightExpandTransition({\n  duration: '0.2s',\n  reverse: true\n})])]), cB('tree-node-wrapper', `\n box-sizing: border-box;\n padding: var(--n-node-wrapper-padding);\n `), cB('tree-node', `\n transform: translate3d(0,0,0);\n position: relative;\n display: flex;\n border-radius: var(--n-node-border-radius);\n transition: background-color .3s var(--n-bezier);\n `, [cM('highlight', [cB('tree-node-content', [cE('text', 'border-bottom-color: var(--n-node-text-color-disabled);')])]), cM('disabled', [cB('tree-node-content', `\n color: var(--n-node-text-color-disabled);\n cursor: not-allowed;\n `)]), cNotM('disabled', [cM('clickable', [cB('tree-node-content', `\n cursor: pointer;\n `)])])]), cM('block-node', [cB('tree-node-content', `\n flex: 1;\n min-width: 0;\n `)]), cNotM('block-line', [cB('tree-node', [cNotM('disabled', [cB('tree-node-content', [c('&:hover', 'background: var(--n-node-color-hover);')]), cM('selectable', [cB('tree-node-content', [c('&:active', 'background: var(--n-node-color-pressed);')])]), cM('pending', [cB('tree-node-content', `\n background: var(--n-node-color-hover);\n `)]), cM('selected', [cB('tree-node-content', 'background: var(--n-node-color-active);')])]), cM('selected', [cB('tree-node-content', 'background: var(--n-node-color-active);')])])]), cM('block-line', [cB('tree-node', [cNotM('disabled', [c('&:hover', 'background: var(--n-node-color-hover);'), cM('pending', `\n background: var(--n-node-color-hover);\n `), cM('selectable', [cNotM('selected', [c('&:active', 'background: var(--n-node-color-pressed);')])]), cM('selected', 'background: var(--n-node-color-active);')]), cM('selected', 'background: var(--n-node-color-active);'), cM('disabled', `\n cursor: not-allowed;\n `)])]), cB('tree-node-indent', `\n flex-grow: 0;\n flex-shrink: 0;\n `, [cM('show-line', 'position: relative', [c('&::before', `\n position: absolute;\n left: 50%;\n border-left: 1px solid var(--n-line-color);\n transition: border-color .3s var(--n-bezier);\n transform: translate(-50%);\n content: \"\";\n top: var(--n-line-offset-top);\n bottom: var(--n-line-offset-bottom);\n `), cM('last-child', [c('&::before', `\n bottom: 50%;\n `)]), cM('is-leaf', [c('&::after', `\n position: absolute;\n content: \"\";\n left: calc(50% + 0.5px);\n right: 0;\n bottom: 50%;\n transition: border-color .3s var(--n-bezier);\n border-bottom: 1px solid var(--n-line-color);\n `)])]), cNotM('show-line', 'height: 0;')]), cB('tree-node-switcher', `\n cursor: pointer;\n display: inline-flex;\n flex-shrink: 0;\n height: var(--n-node-content-height);\n align-items: center;\n justify-content: center;\n transition: transform .15s var(--n-bezier);\n vertical-align: bottom;\n `, [cE('icon', `\n position: relative;\n height: 14px;\n width: 14px;\n display: flex;\n color: var(--n-arrow-color);\n transition: color .3s var(--n-bezier);\n font-size: 14px;\n `, [cB('icon', [iconSwitchTransitionNode]), cB('base-loading', `\n color: var(--n-loading-color);\n position: absolute;\n left: 0;\n top: 0;\n right: 0;\n bottom: 0;\n `, [iconSwitchTransitionNode]), cB('base-icon', [iconSwitchTransitionNode])]), cM('hide', 'visibility: hidden;'), cM('expanded', 'transform: rotate(90deg);')]), cB('tree-node-checkbox', `\n display: inline-flex;\n height: var(--n-node-content-height);\n vertical-align: bottom;\n align-items: center;\n justify-content: center;\n `), cB('tree-node-content', `\n user-select: none;\n position: relative;\n display: inline-flex;\n align-items: center;\n min-height: var(--n-node-content-height);\n box-sizing: border-box;\n line-height: var(--n-line-height);\n vertical-align: bottom;\n padding: 0 6px 0 4px;\n cursor: default;\n border-radius: var(--n-node-border-radius);\n color: var(--n-node-text-color);\n transition:\n color .3s var(--n-bezier),\n background-color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n `, [c('&:last-child', 'margin-bottom: 0;'), cE('prefix', `\n display: inline-flex;\n margin-right: 8px;\n `), cE('text', `\n border-bottom: 1px solid #0000;\n transition: border-color .3s var(--n-bezier);\n flex-grow: 1;\n max-width: 100%;\n `), cE('suffix', `\n display: inline-flex;\n `)]), cE('empty', 'margin: auto;')]);","var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { h, ref, toRef, computed, defineComponent, provide, watch, nextTick, watchEffect, inject } from 'vue';\nimport { createTreeMate, flatten, createIndexGetter } from 'treemate';\nimport { useMergedState } from 'vooks';\nimport { VVirtualList } from 'vueuc';\nimport { depx, getPadding, pxfy } from 'seemly';\nimport { treeSelectInjectionKey } from \"../../tree-select/src/interface.mjs\";\nimport { useConfig, useTheme, useThemeClass, useRtl } from \"../../_mixins/index.mjs\";\nimport { call, createDataKey, resolveSlot, warn, warnOnce } from \"../../_utils/index.mjs\";\nimport { NxScrollbar } from \"../../_internal/index.mjs\";\nimport { treeLight } from \"../styles/index.mjs\";\nimport { NEmpty } from \"../../empty/index.mjs\";\nimport NTreeNode from \"./TreeNode.mjs\";\nimport { keysWithFilter, emptyImage, filterTree, isNodeDisabled, useMergedCheckStrategy } from \"./utils.mjs\";\nimport { useKeyboard } from \"./keyboard.mjs\";\nimport { treeInjectionKey } from \"./interface.mjs\";\nimport MotionWrapper from \"./MotionWrapper.mjs\";\nimport { defaultAllowDrop } from \"./dnd.mjs\";\nimport style from \"./styles/index.cssr.mjs\";\nexport function createTreeMateOptions(keyField, childrenField, disabledField, getChildren) {\n  const settledGetChildren = getChildren || (node => {\n    return node[childrenField];\n  });\n  return {\n    getIsGroup() {\n      return false;\n    },\n    getKey(node) {\n      return node[keyField];\n    },\n    getChildren: settledGetChildren,\n    getDisabled(node) {\n      return !!(node[disabledField] || node.checkboxDisabled);\n    }\n  };\n}\nexport const treeSharedProps = {\n  allowCheckingNotLoaded: Boolean,\n  filter: Function,\n  defaultExpandAll: Boolean,\n  expandedKeys: Array,\n  keyField: {\n    type: String,\n    default: 'key'\n  },\n  labelField: {\n    type: String,\n    default: 'label'\n  },\n  childrenField: {\n    type: String,\n    default: 'children'\n  },\n  disabledField: {\n    type: String,\n    default: 'disabled'\n  },\n  defaultExpandedKeys: {\n    type: Array,\n    default: () => []\n  },\n  indeterminateKeys: Array,\n  renderSwitcherIcon: Function,\n  onUpdateIndeterminateKeys: [Function, Array],\n  'onUpdate:indeterminateKeys': [Function, Array],\n  onUpdateExpandedKeys: [Function, Array],\n  'onUpdate:expandedKeys': [Function, Array],\n  overrideDefaultNodeClickBehavior: Function\n};\nexport const treeProps = Object.assign(Object.assign(Object.assign(Object.assign({}, useTheme.props), {\n  accordion: Boolean,\n  showIrrelevantNodes: {\n    type: Boolean,\n    default: true\n  },\n  data: {\n    type: Array,\n    default: () => []\n  },\n  expandOnDragenter: {\n    type: Boolean,\n    default: true\n  },\n  expandOnClick: Boolean,\n  checkOnClick: {\n    type: [Boolean, Function],\n    default: false\n  },\n  cancelable: {\n    type: Boolean,\n    default: true\n  },\n  checkable: Boolean,\n  draggable: Boolean,\n  blockNode: Boolean,\n  blockLine: Boolean,\n  showLine: Boolean,\n  disabled: Boolean,\n  checkedKeys: Array,\n  defaultCheckedKeys: {\n    type: Array,\n    default: () => []\n  },\n  selectedKeys: Array,\n  defaultSelectedKeys: {\n    type: Array,\n    default: () => []\n  },\n  multiple: Boolean,\n  pattern: {\n    type: String,\n    default: ''\n  },\n  onLoad: Function,\n  cascade: Boolean,\n  selectable: {\n    type: Boolean,\n    default: true\n  },\n  scrollbarProps: Object,\n  indent: {\n    type: Number,\n    default: 24\n  },\n  allowDrop: {\n    type: Function,\n    default: defaultAllowDrop\n  },\n  animated: {\n    type: Boolean,\n    default: true\n  },\n  checkboxPlacement: {\n    type: String,\n    default: 'left'\n  },\n  virtualScroll: Boolean,\n  watchProps: Array,\n  renderLabel: Function,\n  renderPrefix: Function,\n  renderSuffix: Function,\n  nodeProps: Function,\n  keyboard: {\n    type: Boolean,\n    default: true\n  },\n  getChildren: Function,\n  onDragenter: [Function, Array],\n  onDragleave: [Function, Array],\n  onDragend: [Function, Array],\n  onDragstart: [Function, Array],\n  onDragover: [Function, Array],\n  onDrop: [Function, Array],\n  onUpdateCheckedKeys: [Function, Array],\n  'onUpdate:checkedKeys': [Function, Array],\n  onUpdateSelectedKeys: [Function, Array],\n  'onUpdate:selectedKeys': [Function, Array]\n}), treeSharedProps), {\n  // internal props for tree-select\n  internalTreeSelect: Boolean,\n  internalScrollable: Boolean,\n  internalScrollablePadding: String,\n  // use it to display\n  internalRenderEmpty: Function,\n  internalHighlightKeySet: Object,\n  internalUnifySelectCheck: Boolean,\n  internalCheckboxFocusable: {\n    type: Boolean,\n    default: true\n  },\n  internalFocusable: {\n    // Make tree-select take over keyboard operations\n    type: Boolean,\n    default: true\n  },\n  checkStrategy: {\n    type: String,\n    default: 'all'\n  },\n  /**\n   * @deprecated\n   */\n  leafOnly: Boolean\n});\nexport default defineComponent({\n  name: 'Tree',\n  props: treeProps,\n  setup(props) {\n    if (process.env.NODE_ENV !== 'production') {\n      watchEffect(() => {\n        if (props.leafOnly) {\n          warnOnce('tree', '`leaf-only` is deprecated, please use `check-strategy=\"child\"` instead');\n        }\n      });\n    }\n    const {\n      mergedClsPrefixRef,\n      inlineThemeDisabled,\n      mergedRtlRef\n    } = useConfig(props);\n    const rtlEnabledRef = useRtl('Tree', mergedRtlRef, mergedClsPrefixRef);\n    const themeRef = useTheme('Tree', '-tree', style, treeLight, props, mergedClsPrefixRef);\n    const selfElRef = ref(null);\n    const scrollbarInstRef = ref(null);\n    const virtualListInstRef = ref(null);\n    function getScrollContainer() {\n      var _a;\n      return (_a = virtualListInstRef.value) === null || _a === void 0 ? void 0 : _a.listElRef;\n    }\n    function getScrollContent() {\n      var _a;\n      return (_a = virtualListInstRef.value) === null || _a === void 0 ? void 0 : _a.itemsElRef;\n    }\n    const mergedFilterRef = computed(() => {\n      const {\n        filter\n      } = props;\n      if (filter) return filter;\n      const {\n        labelField\n      } = props;\n      return (pattern, node) => {\n        if (!pattern.length) return true;\n        const label = node[labelField];\n        if (typeof label === 'string') {\n          return label.toLowerCase().includes(pattern.toLowerCase());\n        }\n        return false;\n      };\n    });\n    const filteredTreeInfoRef = computed(() => {\n      const {\n        pattern\n      } = props;\n      if (!pattern) {\n        return {\n          filteredTree: props.data,\n          highlightKeySet: null,\n          expandedKeys: undefined\n        };\n      }\n      if (!pattern.length || !mergedFilterRef.value) {\n        return {\n          filteredTree: props.data,\n          highlightKeySet: null,\n          expandedKeys: undefined\n        };\n      }\n      return filterTree(props.data, mergedFilterRef.value, pattern, props.keyField, props.childrenField);\n    });\n    // We don't expect data source to change so we just determine it once\n    const displayTreeMateRef = computed(() => createTreeMate(props.showIrrelevantNodes ? props.data : filteredTreeInfoRef.value.filteredTree, createTreeMateOptions(props.keyField, props.childrenField, props.disabledField, props.getChildren)));\n    const treeSelectInjection = inject(treeSelectInjectionKey, null);\n    const dataTreeMateRef = props.internalTreeSelect ? treeSelectInjection.dataTreeMate : displayTreeMateRef;\n    const {\n      watchProps\n    } = props;\n    const uncontrolledCheckedKeysRef = ref([]);\n    if (watchProps === null || watchProps === void 0 ? void 0 : watchProps.includes('defaultCheckedKeys')) {\n      watchEffect(() => {\n        uncontrolledCheckedKeysRef.value = props.defaultCheckedKeys;\n      });\n    } else {\n      uncontrolledCheckedKeysRef.value = props.defaultCheckedKeys;\n    }\n    const controlledCheckedKeysRef = toRef(props, 'checkedKeys');\n    const mergedCheckedKeysRef = useMergedState(controlledCheckedKeysRef, uncontrolledCheckedKeysRef);\n    const checkedStatusRef = computed(() => {\n      const value = dataTreeMateRef.value.getCheckedKeys(mergedCheckedKeysRef.value, {\n        cascade: props.cascade,\n        allowNotLoaded: props.allowCheckingNotLoaded\n      });\n      return value;\n    });\n    const mergedCheckStrategyRef = useMergedCheckStrategy(props);\n    const displayedCheckedKeysRef = computed(() => {\n      return checkedStatusRef.value.checkedKeys;\n    });\n    const displayedIndeterminateKeysRef = computed(() => {\n      const {\n        indeterminateKeys\n      } = props;\n      if (indeterminateKeys !== undefined) return indeterminateKeys;\n      return checkedStatusRef.value.indeterminateKeys;\n    });\n    const uncontrolledSelectedKeysRef = ref([]);\n    if (watchProps === null || watchProps === void 0 ? void 0 : watchProps.includes('defaultSelectedKeys')) {\n      watchEffect(() => {\n        uncontrolledSelectedKeysRef.value = props.defaultSelectedKeys;\n      });\n    } else {\n      uncontrolledSelectedKeysRef.value = props.defaultSelectedKeys;\n    }\n    const controlledSelectedKeysRef = toRef(props, 'selectedKeys');\n    const mergedSelectedKeysRef = useMergedState(controlledSelectedKeysRef, uncontrolledSelectedKeysRef);\n    const uncontrolledExpandedKeysRef = ref([]);\n    const initUncontrolledExpandedKeys = keys => {\n      uncontrolledExpandedKeysRef.value = props.defaultExpandAll ? dataTreeMateRef.value.getNonLeafKeys() : keys === undefined ? props.defaultExpandedKeys : keys;\n    };\n    if (watchProps === null || watchProps === void 0 ? void 0 : watchProps.includes('defaultExpandedKeys')) {\n      // if watching defaultExpandedKeys, we use access props.defaultExpandedKeys inside initiator\n      watchEffect(() => {\n        initUncontrolledExpandedKeys(undefined);\n      });\n    } else {\n      // We by default watchEffect since if defaultExpandAll is true, we should remain tree expand if data changes\n      watchEffect(() => {\n        initUncontrolledExpandedKeys(props.defaultExpandedKeys);\n      });\n    }\n    const controlledExpandedKeysRef = toRef(props, 'expandedKeys');\n    const mergedExpandedKeysRef = useMergedState(controlledExpandedKeysRef, uncontrolledExpandedKeysRef);\n    const fNodesRef = computed(() => displayTreeMateRef.value.getFlattenedNodes(mergedExpandedKeysRef.value));\n    const {\n      pendingNodeKeyRef,\n      handleKeydown\n    } = useKeyboard({\n      props,\n      mergedCheckedKeysRef,\n      mergedSelectedKeysRef,\n      fNodesRef,\n      mergedExpandedKeysRef,\n      handleCheck,\n      handleSelect,\n      handleSwitcherClick\n    });\n    let expandTimerId = null;\n    let nodeKeyToBeExpanded = null;\n    const uncontrolledHighlightKeySetRef = ref(new Set());\n    const controlledHighlightKeySetRef = computed(() => {\n      return props.internalHighlightKeySet || filteredTreeInfoRef.value.highlightKeySet;\n    });\n    const mergedHighlightKeySetRef = useMergedState(controlledHighlightKeySetRef, uncontrolledHighlightKeySetRef);\n    const loadingKeysRef = ref(new Set());\n    const expandedNonLoadingKeysRef = computed(() => {\n      return mergedExpandedKeysRef.value.filter(key => !loadingKeysRef.value.has(key));\n    });\n    let dragStartX = 0;\n    const draggingNodeRef = ref(null);\n    const droppingNodeRef = ref(null);\n    const droppingMouseNodeRef = ref(null);\n    const droppingPositionRef = ref(null);\n    const droppingOffsetLevelRef = ref(0);\n    const droppingNodeParentRef = computed(() => {\n      const {\n        value: droppingNode\n      } = droppingNodeRef;\n      if (!droppingNode) return null;\n      // May avoid overlap between line mark of first child & rect mark of parent\n      // if (droppingNode.isFirstChild && droppingPositionRef.value === 'before') {\n      //   return null\n      // }\n      return droppingNode.parent;\n    });\n    // shallow watch data\n    let isDataReset = false;\n    watch(toRef(props, 'data'), () => {\n      isDataReset = true;\n      void nextTick(() => {\n        isDataReset = false;\n      });\n      loadingKeysRef.value.clear();\n      pendingNodeKeyRef.value = null;\n      resetDndState();\n    }, {\n      deep: false\n    });\n    let expandAnimationDisabled = false;\n    const disableExpandAnimationForOneTick = () => {\n      expandAnimationDisabled = true;\n      void nextTick(() => {\n        expandAnimationDisabled = false;\n      });\n    };\n    let memoizedExpandedKeys;\n    watch(toRef(props, 'pattern'), (value, oldValue) => {\n      if (props.showIrrelevantNodes) {\n        memoizedExpandedKeys = undefined;\n        if (value) {\n          const {\n            expandedKeys: expandedKeysAfterChange,\n            highlightKeySet\n          } = keysWithFilter(props.data, props.pattern, props.keyField, props.childrenField, mergedFilterRef.value);\n          uncontrolledHighlightKeySetRef.value = highlightKeySet;\n          disableExpandAnimationForOneTick();\n          doUpdateExpandedKeys(expandedKeysAfterChange, getOptionsByKeys(expandedKeysAfterChange), {\n            node: null,\n            action: 'filter'\n          });\n        } else {\n          uncontrolledHighlightKeySetRef.value = new Set();\n        }\n      } else {\n        if (!value.length) {\n          if (memoizedExpandedKeys !== undefined) {\n            disableExpandAnimationForOneTick();\n            doUpdateExpandedKeys(memoizedExpandedKeys, getOptionsByKeys(memoizedExpandedKeys), {\n              node: null,\n              action: 'filter'\n            });\n          }\n        } else {\n          if (!oldValue.length) {\n            memoizedExpandedKeys = mergedExpandedKeysRef.value;\n          }\n          const {\n            expandedKeys\n          } = filteredTreeInfoRef.value;\n          if (expandedKeys !== undefined) {\n            disableExpandAnimationForOneTick();\n            doUpdateExpandedKeys(expandedKeys, getOptionsByKeys(expandedKeys), {\n              node: null,\n              action: 'filter'\n            });\n          }\n        }\n      }\n    });\n    function triggerLoading(node) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const {\n          onLoad\n        } = props;\n        if (!onLoad) {\n          if (process.env.NODE_ENV !== 'production') {\n            warn('tree', 'There is unloaded node in data but props.onLoad is not specified.');\n          }\n          yield Promise.resolve();\n          return;\n        }\n        const {\n          value: loadingKeys\n        } = loadingKeysRef;\n        if (!loadingKeys.has(node.key)) {\n          loadingKeys.add(node.key);\n          try {\n            const loadResult = yield onLoad(node.rawNode);\n            if (loadResult === false) {\n              resetDragExpandState();\n            }\n          } catch (loadError) {\n            console.error(loadError);\n            resetDragExpandState();\n          }\n          loadingKeys.delete(node.key);\n        }\n      });\n    }\n    watchEffect(() => {\n      var _a;\n      const {\n        value: displayTreeMate\n      } = displayTreeMateRef;\n      if (!displayTreeMate) return;\n      const {\n        getNode\n      } = displayTreeMate;\n      (_a = mergedExpandedKeysRef.value) === null || _a === void 0 ? void 0 : _a.forEach(key => {\n        const node = getNode(key);\n        if (node && !node.shallowLoaded) {\n          void triggerLoading(node);\n        }\n      });\n    });\n    // animation in progress\n    const aipRef = ref(false);\n    // animation flattened nodes\n    const afNodesRef = ref([]);\n    // Note: Since the virtual list depends on min height, if there's a node\n    // whose height starts from 0, the virtual list will have a wrong height\n    // during animation. This will seldom cause wired scrollbar status. It is\n    // fixable and need some changes in vueuc, I've no time so I just leave it\n    // here. Maybe the bug won't be fixed during the life time of the project.\n    watch(expandedNonLoadingKeysRef, (value, prevValue) => {\n      if (!props.animated || expandAnimationDisabled) {\n        void nextTick(syncScrollbar);\n        return;\n      }\n      if (isDataReset) {\n        return;\n      }\n      const nodeHeight = depx(themeRef.value.self.nodeHeight);\n      const prevVSet = new Set(prevValue);\n      let addedKey = null;\n      let removedKey = null;\n      for (const expandedKey of value) {\n        if (!prevVSet.has(expandedKey)) {\n          if (addedKey !== null) return; // multi expand, not triggered by click\n          addedKey = expandedKey;\n        }\n      }\n      const currentVSet = new Set(value);\n      for (const expandedKey of prevValue) {\n        if (!currentVSet.has(expandedKey)) {\n          if (removedKey !== null) return; // multi collapse, not triggered by click\n          removedKey = expandedKey;\n        }\n      }\n      if (addedKey === null && removedKey === null) {\n        // 1. multi action, not triggered by click\n        // 2. no action, don't know what happened\n        return;\n      }\n      const {\n        virtualScroll\n      } = props;\n      const viewportHeight = (virtualScroll ? virtualListInstRef.value.listElRef : selfElRef.value).offsetHeight;\n      const viewportItemCount = Math.ceil(viewportHeight / nodeHeight) + 1;\n      // play add animation\n      let baseExpandedKeys;\n      if (addedKey !== null) {\n        baseExpandedKeys = prevValue;\n      }\n      if (removedKey !== null) {\n        if (baseExpandedKeys === undefined) {\n          baseExpandedKeys = value;\n        } else {\n          baseExpandedKeys = baseExpandedKeys.filter(key => key !== removedKey);\n        }\n      }\n      aipRef.value = true;\n      afNodesRef.value = displayTreeMateRef.value.getFlattenedNodes(baseExpandedKeys);\n      if (addedKey !== null) {\n        const expandedNodeIndex = afNodesRef.value.findIndex(node => node.key === addedKey);\n        if (~expandedNodeIndex) {\n          const children =\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n          afNodesRef.value[expandedNodeIndex].children;\n          // sometimes user will pass leaf keys in\n          if (children) {\n            const expandedChildren = flatten(children, value);\n            afNodesRef.value.splice(expandedNodeIndex + 1, 0, {\n              __motion: true,\n              mode: 'expand',\n              height: virtualScroll ? expandedChildren.length * nodeHeight : undefined,\n              nodes: virtualScroll ? expandedChildren.slice(0, viewportItemCount) : expandedChildren\n            });\n          }\n        }\n      }\n      if (removedKey !== null) {\n        const collapsedNodeIndex = afNodesRef.value.findIndex(node => node.key === removedKey);\n        if (~collapsedNodeIndex) {\n          const collapsedNodeChildren = afNodesRef.value[collapsedNodeIndex].children;\n          // Sometime the whole tree is change, remove a key doesn't mean it is collapsed,\n          // but maybe children removed\n          if (!collapsedNodeChildren) return;\n          // play remove animation\n          aipRef.value = true;\n          const collapsedChildren = flatten(collapsedNodeChildren, value);\n          afNodesRef.value.splice(collapsedNodeIndex + 1, 0, {\n            __motion: true,\n            mode: 'collapse',\n            height: virtualScroll ? collapsedChildren.length * nodeHeight : undefined,\n            nodes: virtualScroll ? collapsedChildren.slice(0, viewportItemCount) : collapsedChildren\n          });\n        }\n      }\n    });\n    const getFIndexRef = computed(() => {\n      return createIndexGetter(fNodesRef.value);\n    });\n    const mergedFNodesRef = computed(() => {\n      if (aipRef.value) return afNodesRef.value;else return fNodesRef.value;\n    });\n    function syncScrollbar() {\n      const {\n        value: scrollbarInst\n      } = scrollbarInstRef;\n      if (scrollbarInst) scrollbarInst.sync();\n    }\n    function handleAfterEnter() {\n      aipRef.value = false;\n      if (props.virtualScroll) {\n        // If virtual scroll, we won't listen to resize during animation, so\n        // resize callback of virtual list won't be called and as a result\n        // scrollbar won't sync. We need to sync scrollbar manually.\n        void nextTick(syncScrollbar);\n      }\n    }\n    function getOptionsByKeys(keys) {\n      const {\n        getNode\n      } = dataTreeMateRef.value;\n      return keys.map(key => {\n        var _a;\n        return ((_a = getNode(key)) === null || _a === void 0 ? void 0 : _a.rawNode) || null;\n      });\n    }\n    function doUpdateExpandedKeys(value, option, meta) {\n      const {\n        'onUpdate:expandedKeys': _onUpdateExpandedKeys,\n        onUpdateExpandedKeys\n      } = props;\n      uncontrolledExpandedKeysRef.value = value;\n      if (_onUpdateExpandedKeys) {\n        call(_onUpdateExpandedKeys, value, option, meta);\n      }\n      if (onUpdateExpandedKeys) {\n        call(onUpdateExpandedKeys, value, option, meta);\n      }\n    }\n    function doUpdateCheckedKeys(value, option, meta) {\n      const {\n        'onUpdate:checkedKeys': _onUpdateCheckedKeys,\n        onUpdateCheckedKeys\n      } = props;\n      uncontrolledCheckedKeysRef.value = value;\n      if (onUpdateCheckedKeys) {\n        call(onUpdateCheckedKeys, value, option, meta);\n      }\n      if (_onUpdateCheckedKeys) {\n        call(_onUpdateCheckedKeys, value, option, meta);\n      }\n    }\n    function doUpdateIndeterminateKeys(value, option) {\n      const {\n        'onUpdate:indeterminateKeys': _onUpdateIndeterminateKeys,\n        onUpdateIndeterminateKeys\n      } = props;\n      if (_onUpdateIndeterminateKeys) {\n        call(_onUpdateIndeterminateKeys, value, option);\n      }\n      if (onUpdateIndeterminateKeys) {\n        call(onUpdateIndeterminateKeys, value, option);\n      }\n    }\n    function doUpdateSelectedKeys(value, option, meta) {\n      const {\n        'onUpdate:selectedKeys': _onUpdateSelectedKeys,\n        onUpdateSelectedKeys\n      } = props;\n      uncontrolledSelectedKeysRef.value = value;\n      if (onUpdateSelectedKeys) {\n        call(onUpdateSelectedKeys, value, option, meta);\n      }\n      if (_onUpdateSelectedKeys) {\n        call(_onUpdateSelectedKeys, value, option, meta);\n      }\n    }\n    // Drag & Drop\n    function doDragEnter(info) {\n      const {\n        onDragenter\n      } = props;\n      if (onDragenter) call(onDragenter, info);\n    }\n    function doDragLeave(info) {\n      const {\n        onDragleave\n      } = props;\n      if (onDragleave) call(onDragleave, info);\n    }\n    function doDragEnd(info) {\n      const {\n        onDragend\n      } = props;\n      if (onDragend) call(onDragend, info);\n    }\n    function doDragStart(info) {\n      const {\n        onDragstart\n      } = props;\n      if (onDragstart) call(onDragstart, info);\n    }\n    function doDragOver(info) {\n      const {\n        onDragover\n      } = props;\n      if (onDragover) call(onDragover, info);\n    }\n    function doDrop(info) {\n      const {\n        onDrop\n      } = props;\n      if (onDrop) call(onDrop, info);\n    }\n    function resetDndState() {\n      resetDragState();\n      resetDropState();\n    }\n    function resetDragState() {\n      draggingNodeRef.value = null;\n    }\n    function resetDropState() {\n      droppingOffsetLevelRef.value = 0;\n      droppingNodeRef.value = null;\n      droppingMouseNodeRef.value = null;\n      droppingPositionRef.value = null;\n      resetDragExpandState();\n    }\n    function resetDragExpandState() {\n      if (expandTimerId) {\n        window.clearTimeout(expandTimerId);\n        expandTimerId = null;\n      }\n      nodeKeyToBeExpanded = null;\n    }\n    function handleCheck(node, checked) {\n      // We don't guard for leaf only since we have done it in view layer\n      if (props.disabled || isNodeDisabled(node, props.disabledField)) {\n        return;\n      }\n      if (props.internalUnifySelectCheck && !props.multiple) {\n        handleSelect(node);\n        return;\n      }\n      const checkedAction = checked ? 'check' : 'uncheck';\n      const {\n        checkedKeys,\n        indeterminateKeys\n      } = dataTreeMateRef.value[checkedAction](node.key, displayedCheckedKeysRef.value, {\n        cascade: props.cascade,\n        checkStrategy: mergedCheckStrategyRef.value,\n        allowNotLoaded: props.allowCheckingNotLoaded\n      });\n      doUpdateCheckedKeys(checkedKeys, getOptionsByKeys(checkedKeys), {\n        node: node.rawNode,\n        action: checkedAction\n      });\n      doUpdateIndeterminateKeys(indeterminateKeys, getOptionsByKeys(indeterminateKeys));\n    }\n    function toggleExpand(node) {\n      if (props.disabled) return;\n      const {\n        key\n      } = node;\n      const {\n        value: mergedExpandedKeys\n      } = mergedExpandedKeysRef;\n      const index = mergedExpandedKeys.findIndex(expandNodeId => expandNodeId === key);\n      if (~index) {\n        const expandedKeysAfterChange = Array.from(mergedExpandedKeys);\n        expandedKeysAfterChange.splice(index, 1);\n        doUpdateExpandedKeys(expandedKeysAfterChange, getOptionsByKeys(expandedKeysAfterChange), {\n          node: node.rawNode,\n          action: 'collapse'\n        });\n      } else {\n        const nodeToBeExpanded = displayTreeMateRef.value.getNode(key);\n        if (!nodeToBeExpanded || nodeToBeExpanded.isLeaf) {\n          return;\n        }\n        let nextKeys;\n        if (props.accordion) {\n          const siblingKeySet = new Set(node.siblings.map(({\n            key\n          }) => key));\n          nextKeys = mergedExpandedKeys.filter(expandedKey => {\n            return !siblingKeySet.has(expandedKey);\n          });\n          nextKeys.push(key);\n        } else {\n          nextKeys = mergedExpandedKeys.concat(key);\n        }\n        doUpdateExpandedKeys(nextKeys, getOptionsByKeys(nextKeys), {\n          node: node.rawNode,\n          action: 'expand'\n        });\n      }\n    }\n    function handleSwitcherClick(node) {\n      if (props.disabled || aipRef.value) return;\n      toggleExpand(node);\n    }\n    function handleSelect(node) {\n      if (props.disabled || !props.selectable) {\n        return;\n      }\n      pendingNodeKeyRef.value = node.key;\n      if (props.internalUnifySelectCheck) {\n        const {\n          value: {\n            checkedKeys,\n            indeterminateKeys\n          }\n        } = checkedStatusRef;\n        if (props.multiple) {\n          handleCheck(node, !(checkedKeys.includes(node.key) || indeterminateKeys.includes(node.key)));\n        } else {\n          doUpdateCheckedKeys([node.key], getOptionsByKeys([node.key]), {\n            node: node.rawNode,\n            action: 'check'\n          });\n        }\n      }\n      if (props.multiple) {\n        const selectedKeys = Array.from(mergedSelectedKeysRef.value);\n        const index = selectedKeys.findIndex(key => key === node.key);\n        if (~index) {\n          if (props.cancelable) {\n            selectedKeys.splice(index, 1);\n          }\n        } else if (!~index) {\n          selectedKeys.push(node.key);\n        }\n        doUpdateSelectedKeys(selectedKeys, getOptionsByKeys(selectedKeys), {\n          node: node.rawNode,\n          action: ~index ? 'unselect' : 'select'\n        });\n      } else {\n        const selectedKeys = mergedSelectedKeysRef.value;\n        if (selectedKeys.includes(node.key)) {\n          if (props.cancelable) {\n            doUpdateSelectedKeys([], [], {\n              node: node.rawNode,\n              action: 'unselect'\n            });\n          }\n        } else {\n          doUpdateSelectedKeys([node.key], getOptionsByKeys([node.key]), {\n            node: node.rawNode,\n            action: 'select'\n          });\n        }\n      }\n    }\n    function expandDragEnterNode(node) {\n      if (expandTimerId) {\n        window.clearTimeout(expandTimerId);\n        expandTimerId = null;\n      }\n      // Don't expand leaf node.\n      if (node.isLeaf) return;\n      nodeKeyToBeExpanded = node.key;\n      const expand = () => {\n        if (nodeKeyToBeExpanded !== node.key) return;\n        const {\n          value: droppingMouseNode\n        } = droppingMouseNodeRef;\n        if (droppingMouseNode && droppingMouseNode.key === node.key && !mergedExpandedKeysRef.value.includes(node.key)) {\n          const nextKeys = mergedExpandedKeysRef.value.concat(node.key);\n          doUpdateExpandedKeys(nextKeys, getOptionsByKeys(nextKeys), {\n            node: node.rawNode,\n            action: 'expand'\n          });\n        }\n        expandTimerId = null;\n        nodeKeyToBeExpanded = null;\n      };\n      if (!node.shallowLoaded) {\n        expandTimerId = window.setTimeout(() => {\n          void triggerLoading(node).then(() => {\n            expand();\n          });\n        }, 1000);\n      } else {\n        expandTimerId = window.setTimeout(() => {\n          expand();\n        }, 1000);\n      }\n    }\n    // Dnd\n    function handleDragEnter({\n      event,\n      node\n    }) {\n      // node should be a tmNode\n      if (!props.draggable || props.disabled || isNodeDisabled(node, props.disabledField)) {\n        return;\n      }\n      handleDragOver({\n        event,\n        node\n      }, false);\n      doDragEnter({\n        event,\n        node: node.rawNode\n      });\n    }\n    function handleDragLeave({\n      event,\n      node\n    }) {\n      if (!props.draggable || props.disabled || isNodeDisabled(node, props.disabledField)) {\n        return;\n      }\n      doDragLeave({\n        event,\n        node: node.rawNode\n      });\n    }\n    function handleDragLeaveTree(e) {\n      if (e.target !== e.currentTarget) return;\n      resetDropState();\n    }\n    // Dragend is ok, we don't need to add global listener to reset drag status\n    function handleDragEnd({\n      event,\n      node\n    }) {\n      resetDndState();\n      if (!props.draggable || props.disabled || isNodeDisabled(node, props.disabledField)) {\n        return;\n      }\n      doDragEnd({\n        event,\n        node: node.rawNode\n      });\n    }\n    function handleDragStart({\n      event,\n      node\n    }) {\n      var _a;\n      if (!props.draggable || props.disabled || isNodeDisabled(node, props.disabledField)) {\n        return;\n      }\n      // Most of time, the image will block user's view\n      emptyImage && ((_a = event.dataTransfer) === null || _a === void 0 ? void 0 : _a.setDragImage(emptyImage, 0, 0));\n      dragStartX = event.clientX;\n      draggingNodeRef.value = node;\n      doDragStart({\n        event,\n        node: node.rawNode\n      });\n    }\n    function handleDragOver({\n      event,\n      node\n    }, emit = true) {\n      var _a;\n      if (!props.draggable || props.disabled || isNodeDisabled(node, props.disabledField)) {\n        return;\n      }\n      const {\n        value: draggingNode\n      } = draggingNodeRef;\n      if (!draggingNode) return;\n      const {\n        allowDrop,\n        indent\n      } = props;\n      if (emit) doDragOver({\n        event,\n        node: node.rawNode\n      });\n      // Update dropping node\n      const el = event.currentTarget;\n      const {\n        height: elOffsetHeight,\n        top: elClientTop\n      } = el.getBoundingClientRect();\n      const eventOffsetY = event.clientY - elClientTop;\n      let mousePosition;\n      const allowDropInside = allowDrop({\n        node: node.rawNode,\n        dropPosition: 'inside',\n        phase: 'drag'\n      });\n      if (allowDropInside) {\n        if (eventOffsetY <= 8) {\n          mousePosition = 'before';\n        } else if (eventOffsetY >= elOffsetHeight - 8) {\n          mousePosition = 'after';\n        } else {\n          mousePosition = 'inside';\n        }\n      } else {\n        if (eventOffsetY <= elOffsetHeight / 2) {\n          mousePosition = 'before';\n        } else {\n          mousePosition = 'after';\n        }\n      }\n      const {\n        value: getFindex\n      } = getFIndexRef;\n      /** determine the drop position and drop node */\n      /** the dropping node needn't to be the mouse hovering node! */\n      /**\n       * if there is something i've learned from implementing a complex\n       * drag & drop. that is never write unit test before you really figure\n       * out what behavior is exactly you want.\n       */\n      let finalDropNode;\n      let finalDropPosition;\n      const hoverNodeFIndex = getFindex(node.key);\n      if (hoverNodeFIndex === null) {\n        resetDropState();\n        return;\n      }\n      let mouseAtExpandedNonLeafNode = false;\n      if (mousePosition === 'inside') {\n        finalDropNode = node;\n        finalDropPosition = 'inside';\n      } else {\n        if (mousePosition === 'before') {\n          if (node.isFirstChild) {\n            finalDropNode = node;\n            finalDropPosition = 'before';\n          } else {\n            finalDropNode = fNodesRef.value[hoverNodeFIndex - 1];\n            finalDropPosition = 'after';\n          }\n        } else {\n          finalDropNode = node;\n          finalDropPosition = 'after';\n        }\n      }\n      // If the node is non-leaf and it is expanded, we don't allow it to\n      // drop after it and change it to drop before its next view sibling\n      if (!finalDropNode.isLeaf && mergedExpandedKeysRef.value.includes(finalDropNode.key)) {\n        mouseAtExpandedNonLeafNode = true;\n        if (finalDropPosition === 'after') {\n          finalDropNode = fNodesRef.value[hoverNodeFIndex + 1];\n          if (!finalDropNode) {\n            // maybe there is no next view sibling when non-leaf node has no\n            // children and it is the last node in the tree\n            finalDropNode = node;\n            finalDropPosition = 'inside';\n          } else {\n            finalDropPosition = 'before';\n          }\n        }\n      }\n      const droppingMouseNode = finalDropNode;\n      droppingMouseNodeRef.value = droppingMouseNode;\n      // This is a speacial case, user is dragging a last child itself, so we\n      // only view it as they are trying to drop after it.\n      // There are some relevant codes in bailout 1's child branch.\n      // Also, the expand bailout should have a high priority. If it's non-leaf\n      // node and expanded, keep its origin drop position\n      if (!mouseAtExpandedNonLeafNode && draggingNode.isLastChild && draggingNode.key === finalDropNode.key) {\n        finalDropPosition = 'after';\n      }\n      if (finalDropPosition === 'after') {\n        let offset = dragStartX - event.clientX; // drag left => > 0\n        let offsetLevel = 0;\n        while (offset >= indent / 2 &&\n        // divide by 2 to make it easier to trigger\n        finalDropNode.parent !== null && finalDropNode.isLastChild && offsetLevel < 1) {\n          offset -= indent;\n          offsetLevel += 1;\n          finalDropNode = finalDropNode.parent;\n        }\n        droppingOffsetLevelRef.value = offsetLevel;\n      } else {\n        droppingOffsetLevelRef.value = 0;\n      }\n      // Bailout 1\n      // Drag self into self\n      // Drag it into direct parent\n      if (draggingNode.contains(finalDropNode) || finalDropPosition === 'inside' && ((_a = draggingNode.parent) === null || _a === void 0 ? void 0 : _a.key) === finalDropNode.key) {\n        if (draggingNode.key === droppingMouseNode.key && draggingNode.key === finalDropNode.key) {\n          // This is special case that we want ui to show a mark to guide user\n          // to start dragging. Nor they will think nothing happens.\n          // However this is an invalid drop, we need to guard it inside\n          // handleDrop\n        } else {\n          resetDropState();\n          return;\n        }\n      }\n      // Bailout 3\n      if (!allowDrop({\n        node: finalDropNode.rawNode,\n        dropPosition: finalDropPosition,\n        phase: 'drag'\n      })) {\n        resetDropState();\n        return;\n      }\n      if (draggingNode.key === finalDropNode.key) {\n        // don't expand when drag on itself\n        resetDragExpandState();\n      } else {\n        if (nodeKeyToBeExpanded !== finalDropNode.key) {\n          if (finalDropPosition === 'inside') {\n            if (props.expandOnDragenter) {\n              expandDragEnterNode(finalDropNode);\n              // Bailout 4\n              // not try to loading\n              if (!finalDropNode.shallowLoaded && nodeKeyToBeExpanded !== finalDropNode.key) {\n                resetDndState();\n                return;\n              }\n            } else {\n              // Bailout 5\n              // never expands on drag\n              if (!finalDropNode.shallowLoaded) {\n                resetDndState();\n                return;\n              }\n            }\n          } else {\n            resetDragExpandState();\n          }\n        } else {\n          if (finalDropPosition !== 'inside') {\n            resetDragExpandState();\n          }\n        }\n      }\n      droppingPositionRef.value = finalDropPosition;\n      droppingNodeRef.value = finalDropNode;\n    }\n    function handleDrop({\n      event,\n      node,\n      dropPosition\n    }) {\n      if (!props.draggable || props.disabled || isNodeDisabled(node, props.disabledField)) {\n        return;\n      }\n      const {\n        value: draggingNode\n      } = draggingNodeRef;\n      const {\n        value: droppingNode\n      } = droppingNodeRef;\n      const {\n        value: droppingPosition\n      } = droppingPositionRef;\n      if (!draggingNode || !droppingNode || !droppingPosition) {\n        return;\n      }\n      // Bailout 1\n      if (!props.allowDrop({\n        node: droppingNode.rawNode,\n        dropPosition: droppingPosition,\n        phase: 'drag'\n      })) {\n        return;\n      }\n      // Bailout 2\n      // This is a special case to guard since we want ui to show the status\n      // but not to emit a event\n      if (draggingNode.key === droppingNode.key) {\n        return;\n      }\n      // Bailout 3\n      // insert before its next node\n      // insert after its prev node\n      if (droppingPosition === 'before') {\n        const nextNode = draggingNode.getNext({\n          includeDisabled: true\n        });\n        if (nextNode) {\n          if (nextNode.key === droppingNode.key) {\n            resetDropState();\n            return;\n          }\n        }\n      }\n      if (droppingPosition === 'after') {\n        const prevNode = draggingNode.getPrev({\n          includeDisabled: true\n        });\n        if (prevNode) {\n          if (prevNode.key === droppingNode.key) {\n            resetDropState();\n            return;\n          }\n        }\n      }\n      doDrop({\n        event,\n        node: droppingNode.rawNode,\n        dragNode: draggingNode.rawNode,\n        dropPosition\n      });\n      resetDndState();\n    }\n    function handleScroll() {\n      syncScrollbar();\n    }\n    function handleResize() {\n      syncScrollbar();\n    }\n    function handleFocusout(e) {\n      var _a;\n      if (props.virtualScroll || props.internalScrollable) {\n        const {\n          value: scrollbarInst\n        } = scrollbarInstRef;\n        if ((_a = scrollbarInst === null || scrollbarInst === void 0 ? void 0 : scrollbarInst.containerRef) === null || _a === void 0 ? void 0 : _a.contains(e.relatedTarget)) {\n          return;\n        }\n        pendingNodeKeyRef.value = null;\n      } else {\n        const {\n          value: selfEl\n        } = selfElRef;\n        if (selfEl === null || selfEl === void 0 ? void 0 : selfEl.contains(e.relatedTarget)) return;\n        pendingNodeKeyRef.value = null;\n      }\n    }\n    watch(pendingNodeKeyRef, value => {\n      var _a, _b;\n      if (value === null) return;\n      if (props.virtualScroll) {\n        (_a = virtualListInstRef.value) === null || _a === void 0 ? void 0 : _a.scrollTo({\n          key: value\n        });\n      } else if (props.internalScrollable) {\n        const {\n          value: scrollbarInst\n        } = scrollbarInstRef;\n        if (scrollbarInst === null) return;\n        const targetEl = (_b = scrollbarInst.contentRef) === null || _b === void 0 ? void 0 : _b.querySelector(`[data-key=\"${createDataKey(value)}\"]`);\n        if (!targetEl) return;\n        scrollbarInst.scrollTo({\n          el: targetEl\n        });\n      }\n    });\n    provide(treeInjectionKey, {\n      loadingKeysRef,\n      highlightKeySetRef: mergedHighlightKeySetRef,\n      displayedCheckedKeysRef,\n      displayedIndeterminateKeysRef,\n      mergedSelectedKeysRef,\n      mergedExpandedKeysRef,\n      mergedThemeRef: themeRef,\n      mergedCheckStrategyRef,\n      nodePropsRef: toRef(props, 'nodeProps'),\n      disabledRef: toRef(props, 'disabled'),\n      checkableRef: toRef(props, 'checkable'),\n      selectableRef: toRef(props, 'selectable'),\n      expandOnClickRef: toRef(props, 'expandOnClick'),\n      onLoadRef: toRef(props, 'onLoad'),\n      draggableRef: toRef(props, 'draggable'),\n      blockLineRef: toRef(props, 'blockLine'),\n      indentRef: toRef(props, 'indent'),\n      cascadeRef: toRef(props, 'cascade'),\n      checkOnClickRef: toRef(props, 'checkOnClick'),\n      checkboxPlacementRef: props.checkboxPlacement,\n      droppingMouseNodeRef,\n      droppingNodeParentRef,\n      draggingNodeRef,\n      droppingPositionRef,\n      droppingOffsetLevelRef,\n      fNodesRef,\n      pendingNodeKeyRef,\n      showLineRef: toRef(props, 'showLine'),\n      disabledFieldRef: toRef(props, 'disabledField'),\n      internalScrollableRef: toRef(props, 'internalScrollable'),\n      internalCheckboxFocusableRef: toRef(props, 'internalCheckboxFocusable'),\n      internalTreeSelect: props.internalTreeSelect,\n      renderLabelRef: toRef(props, 'renderLabel'),\n      renderPrefixRef: toRef(props, 'renderPrefix'),\n      renderSuffixRef: toRef(props, 'renderSuffix'),\n      renderSwitcherIconRef: toRef(props, 'renderSwitcherIcon'),\n      labelFieldRef: toRef(props, 'labelField'),\n      multipleRef: toRef(props, 'multiple'),\n      overrideDefaultNodeClickBehaviorRef: toRef(props, 'overrideDefaultNodeClickBehavior'),\n      handleSwitcherClick,\n      handleDragEnd,\n      handleDragEnter,\n      handleDragLeave,\n      handleDragStart,\n      handleDrop,\n      handleDragOver,\n      handleSelect,\n      handleCheck\n    });\n    function scrollTo(options, y) {\n      var _a, _b;\n      if (typeof options === 'number') {\n        (_a = virtualListInstRef.value) === null || _a === void 0 ? void 0 : _a.scrollTo(options, y || 0);\n      } else {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        (_b = virtualListInstRef.value) === null || _b === void 0 ? void 0 : _b.scrollTo(options);\n      }\n    }\n    const exposedMethods = {\n      handleKeydown,\n      scrollTo,\n      getCheckedData: () => {\n        if (!props.checkable) return {\n          keys: [],\n          options: []\n        };\n        const {\n          checkedKeys\n        } = checkedStatusRef.value;\n        return {\n          keys: checkedKeys,\n          options: getOptionsByKeys(checkedKeys)\n        };\n      },\n      getIndeterminateData: () => {\n        if (!props.checkable) return {\n          keys: [],\n          options: []\n        };\n        const {\n          indeterminateKeys\n        } = checkedStatusRef.value;\n        return {\n          keys: indeterminateKeys,\n          options: getOptionsByKeys(indeterminateKeys)\n        };\n      }\n    };\n    const cssVarsRef = computed(() => {\n      const {\n        common: {\n          cubicBezierEaseInOut\n        },\n        self: {\n          fontSize,\n          nodeBorderRadius,\n          nodeColorHover,\n          nodeColorPressed,\n          nodeColorActive,\n          arrowColor,\n          loadingColor,\n          nodeTextColor,\n          nodeTextColorDisabled,\n          dropMarkColor,\n          nodeWrapperPadding,\n          nodeHeight,\n          lineHeight,\n          lineColor\n        }\n      } = themeRef.value;\n      const lineOffsetTop = getPadding(nodeWrapperPadding, 'top');\n      const lineOffsetBottom = getPadding(nodeWrapperPadding, 'bottom');\n      const nodeContentHeight = pxfy(depx(nodeHeight) - depx(lineOffsetTop) - depx(lineOffsetBottom));\n      return {\n        '--n-arrow-color': arrowColor,\n        '--n-loading-color': loadingColor,\n        '--n-bezier': cubicBezierEaseInOut,\n        '--n-font-size': fontSize,\n        '--n-node-border-radius': nodeBorderRadius,\n        '--n-node-color-active': nodeColorActive,\n        '--n-node-color-hover': nodeColorHover,\n        '--n-node-color-pressed': nodeColorPressed,\n        '--n-node-text-color': nodeTextColor,\n        '--n-node-text-color-disabled': nodeTextColorDisabled,\n        '--n-drop-mark-color': dropMarkColor,\n        '--n-node-wrapper-padding': nodeWrapperPadding,\n        '--n-line-offset-top': `-${lineOffsetTop}`,\n        '--n-line-offset-bottom': `-${lineOffsetBottom}`,\n        '--n-node-content-height': nodeContentHeight,\n        '--n-line-height': lineHeight,\n        '--n-line-color': lineColor\n      };\n    });\n    const themeClassHandle = inlineThemeDisabled ? useThemeClass('tree', undefined, cssVarsRef, props) : undefined;\n    return Object.assign(Object.assign({}, exposedMethods), {\n      mergedClsPrefix: mergedClsPrefixRef,\n      mergedTheme: themeRef,\n      rtlEnabled: rtlEnabledRef,\n      fNodes: mergedFNodesRef,\n      aip: aipRef,\n      selfElRef,\n      virtualListInstRef,\n      scrollbarInstRef,\n      handleFocusout,\n      handleDragLeaveTree,\n      handleScroll,\n      getScrollContainer,\n      getScrollContent,\n      handleAfterEnter,\n      handleResize,\n      cssVars: inlineThemeDisabled ? undefined : cssVarsRef,\n      themeClass: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.themeClass,\n      onRender: themeClassHandle === null || themeClassHandle === void 0 ? void 0 : themeClassHandle.onRender\n    });\n  },\n  render() {\n    var _a;\n    const {\n      fNodes,\n      internalRenderEmpty\n    } = this;\n    if (!fNodes.length && internalRenderEmpty) {\n      return internalRenderEmpty();\n    }\n    const {\n      mergedClsPrefix,\n      blockNode,\n      blockLine,\n      draggable,\n      disabled,\n      internalFocusable,\n      checkable,\n      handleKeydown,\n      rtlEnabled,\n      handleFocusout,\n      scrollbarProps\n    } = this;\n    const mergedFocusable = internalFocusable && !disabled;\n    const tabindex = mergedFocusable ? '0' : undefined;\n    const treeClass = [`${mergedClsPrefix}-tree`, rtlEnabled && `${mergedClsPrefix}-tree--rtl`, checkable && `${mergedClsPrefix}-tree--checkable`, (blockLine || blockNode) && `${mergedClsPrefix}-tree--block-node`, blockLine && `${mergedClsPrefix}-tree--block-line`];\n    const createNode = tmNode => {\n      return '__motion' in tmNode ? h(MotionWrapper, {\n        height: tmNode.height,\n        nodes: tmNode.nodes,\n        clsPrefix: mergedClsPrefix,\n        mode: tmNode.mode,\n        onAfterEnter: this.handleAfterEnter\n      }) : h(NTreeNode, {\n        key: tmNode.key,\n        tmNode: tmNode,\n        clsPrefix: mergedClsPrefix\n      });\n    };\n    if (this.virtualScroll) {\n      const {\n        mergedTheme,\n        internalScrollablePadding\n      } = this;\n      const padding = getPadding(internalScrollablePadding || '0');\n      return h(NxScrollbar, Object.assign({}, scrollbarProps, {\n        ref: \"scrollbarInstRef\",\n        onDragleave: draggable ? this.handleDragLeaveTree : undefined,\n        container: this.getScrollContainer,\n        content: this.getScrollContent,\n        class: treeClass,\n        theme: mergedTheme.peers.Scrollbar,\n        themeOverrides: mergedTheme.peerOverrides.Scrollbar,\n        tabindex: tabindex,\n        onKeydown: mergedFocusable ? handleKeydown : undefined,\n        onFocusout: mergedFocusable ? handleFocusout : undefined\n      }), {\n        default: () => {\n          var _a;\n          (_a = this.onRender) === null || _a === void 0 ? void 0 : _a.call(this);\n          return !fNodes.length ? resolveSlot(this.$slots.empty, () => [h(NEmpty, {\n            class: `${mergedClsPrefix}-tree__empty`,\n            theme: this.mergedTheme.peers.Empty,\n            themeOverrides: this.mergedTheme.peerOverrides.Empty\n          })]) : h(VVirtualList, {\n            ref: \"virtualListInstRef\",\n            items: this.fNodes,\n            itemSize: depx(mergedTheme.self.nodeHeight),\n            ignoreItemResize: this.aip,\n            paddingTop: padding.top,\n            paddingBottom: padding.bottom,\n            class: this.themeClass,\n            style: [this.cssVars, {\n              paddingLeft: padding.left,\n              paddingRight: padding.right\n            }],\n            onScroll: this.handleScroll,\n            onResize: this.handleResize,\n            showScrollbar: false,\n            itemResizable: true\n          }, {\n            default: ({\n              item\n            }) => createNode(item)\n          });\n        }\n      });\n    }\n    const {\n      internalScrollable\n    } = this;\n    treeClass.push(this.themeClass);\n    (_a = this.onRender) === null || _a === void 0 ? void 0 : _a.call(this);\n    if (internalScrollable) {\n      return h(NxScrollbar, Object.assign({}, scrollbarProps, {\n        class: treeClass,\n        tabindex: tabindex,\n        onKeydown: mergedFocusable ? handleKeydown : undefined,\n        onFocusout: mergedFocusable ? handleFocusout : undefined,\n        style: this.cssVars,\n        contentStyle: {\n          padding: this.internalScrollablePadding\n        }\n      }), {\n        default: () => h(\"div\", {\n          onDragleave: draggable ? this.handleDragLeaveTree : undefined,\n          ref: \"selfElRef\"\n        }, this.fNodes.map(createNode))\n      });\n    } else {\n      return h(\"div\", {\n        class: treeClass,\n        tabindex: tabindex,\n        ref: \"selfElRef\",\n        style: this.cssVars,\n        onKeydown: mergedFocusable ? handleKeydown : undefined,\n        onFocusout: mergedFocusable ? handleFocusout : undefined,\n        onDragleave: draggable ? this.handleDragLeaveTree : undefined\n      }, !fNodes.length ? resolveSlot(this.$slots.empty, () => [h(NEmpty, {\n        class: `${mergedClsPrefix}-tree__empty`,\n        theme: this.mergedTheme.peers.Empty,\n        themeOverrides: this.mergedTheme.peerOverrides.Empty\n      })]) : fNodes.map(createNode));\n    }\n  }\n});","import { inject, ref } from 'vue';\nimport { treeSelectInjectionKey } from \"../../tree-select/src/interface.mjs\";\nexport function useKeyboard({\n  props,\n  fNodesRef,\n  mergedExpandedKeysRef,\n  mergedSelectedKeysRef,\n  mergedCheckedKeysRef,\n  handleCheck,\n  handleSelect,\n  handleSwitcherClick\n}) {\n  const {\n    value: mergedSelectedKeys\n  } = mergedSelectedKeysRef;\n  // If it's used in tree-select, make it take over pending state\n  const treeSelectInjection = inject(treeSelectInjectionKey, null);\n  const pendingNodeKeyRef = treeSelectInjection ? treeSelectInjection.pendingNodeKeyRef : ref(mergedSelectedKeys.length ? mergedSelectedKeys[mergedSelectedKeys.length - 1] : null);\n  function handleKeydown(e) {\n    var _a;\n    if (!props.keyboard) return {\n      enterBehavior: null\n    };\n    const {\n      value: pendingNodeKey\n    } = pendingNodeKeyRef;\n    let enterBehavior = null;\n    if (pendingNodeKey === null) {\n      if (e.key === 'ArrowDown' || e.key === 'ArrowUp') {\n        e.preventDefault();\n      }\n      if (['ArrowDown', 'ArrowUp', 'ArrowLeft', 'ArrowRight'].includes(e.key)) {\n        if (pendingNodeKey === null) {\n          const {\n            value: fNodes\n          } = fNodesRef;\n          let fIndex = 0;\n          while (fIndex < fNodes.length) {\n            if (!fNodes[fIndex].disabled) {\n              pendingNodeKeyRef.value = fNodes[fIndex].key;\n              break;\n            }\n            fIndex += 1;\n          }\n        }\n      }\n    } else {\n      const {\n        value: fNodes\n      } = fNodesRef;\n      let fIndex = fNodes.findIndex(tmNode => tmNode.key === pendingNodeKey);\n      if (!~fIndex) return {\n        enterBehavior: null\n      };\n      if (e.key === 'Enter') {\n        const tmNode = fNodes[fIndex];\n        enterBehavior = ((_a = props.overrideDefaultNodeClickBehavior) === null || _a === void 0 ? void 0 : _a.call(props, {\n          option: tmNode.rawNode\n        })) || null;\n        switch (enterBehavior) {\n          case 'toggleCheck':\n            handleCheck(tmNode, !mergedCheckedKeysRef.value.includes(tmNode.key));\n            break;\n          case 'toggleSelect':\n            handleSelect(tmNode);\n            break;\n          case 'toggleExpand':\n            handleSwitcherClick(tmNode);\n            break;\n          case 'none':\n            break;\n          case 'default':\n          default:\n            enterBehavior = 'default';\n            handleSelect(tmNode);\n        }\n      } else if (e.key === 'ArrowDown') {\n        e.preventDefault();\n        fIndex += 1;\n        while (fIndex < fNodes.length) {\n          if (!fNodes[fIndex].disabled) {\n            pendingNodeKeyRef.value = fNodes[fIndex].key;\n            break;\n          }\n          fIndex += 1;\n        }\n      } else if (e.key === 'ArrowUp') {\n        e.preventDefault();\n        fIndex -= 1;\n        while (fIndex >= 0) {\n          if (!fNodes[fIndex].disabled) {\n            pendingNodeKeyRef.value = fNodes[fIndex].key;\n            break;\n          }\n          fIndex -= 1;\n        }\n      } else if (e.key === 'ArrowLeft') {\n        const pendingNode = fNodes[fIndex];\n        if (pendingNode.isLeaf || !mergedExpandedKeysRef.value.includes(pendingNodeKey)) {\n          const parentTmNode = pendingNode.getParent();\n          if (parentTmNode) {\n            pendingNodeKeyRef.value = parentTmNode.key;\n          }\n        } else {\n          handleSwitcherClick(pendingNode);\n        }\n      } else if (e.key === 'ArrowRight') {\n        const pendingNode = fNodes[fIndex];\n        if (pendingNode.isLeaf) return {\n          enterBehavior: null\n        };\n        if (!mergedExpandedKeysRef.value.includes(pendingNodeKey)) {\n          handleSwitcherClick(pendingNode);\n        } else {\n          // Tha same as ArrowDown\n          fIndex += 1;\n          while (fIndex < fNodes.length) {\n            if (!fNodes[fIndex].disabled) {\n              pendingNodeKeyRef.value = fNodes[fIndex].key;\n              break;\n            }\n            fIndex += 1;\n          }\n        }\n      }\n    }\n    return {\n      enterBehavior\n    };\n  }\n  return {\n    pendingNodeKeyRef,\n    handleKeydown\n  };\n}","import * as Cesium from 'cesium'\nimport type { InjectionKey, Ref } from 'vue'\n\nexport const viewerKey: InjectionKey<Ref<Cesium.Viewer>> = Symbol('mapViewer')\n","import { MapSourceType, MapSourceTypeEnum } from '@/common/map-base'\nimport CesiumSourceLoader from '@/helper/cesium-source-loader'\nimport { useMapStore } from '@/store/map'\n\nimport { viewerKey } from '../types'\nimport styles from './index.module.scss'\nimport SourceModal from './source-modal'\nimport { useResourceTree } from './use-resource-tree'\n\nexport default defineComponent({\n  name: 'ResourceTree',\n  setup() {\n    const mapStore = useMapStore()\n    const resourceModalRef = ref<typeof SourceModal | null>(null)\n    const { stateRef, nodeProps } = useResourceTree()\n\n    const mapViewer = inject(viewerKey)\n    const cesiumSourceLoader = new CesiumSourceLoader(mapViewer!.value)\n    mapStore.saveCesiumSourceLoader(cesiumSourceLoader)\n\n    const handleSelect = (key: string | number) => {\n      if (key === 'ADD') {\n        resourceModalRef.value!.openModal(stateRef.rightObj.key)\n      } else if (key === 'DELETE') {\n        deleteMapSource()\n      } else if (key === 'FLY_TO') {\n        flyToMapSource()\n      }\n\n      stateRef.showDropdown = false\n    }\n\n    const handleClickoutside = () => {\n      stateRef.showDropdown = false\n    }\n\n    /**\n     * \n     */\n    const loadMapSource = ({\n      type,\n      options\n    }: {\n      type: keyof typeof MapSourceType\n      options: any\n    }) => {\n      // \n      cesiumSourceLoader.addSource(type, options)\n\n      // \n      const parentNode = stateRef.treeData.find((t) => t.key === type)\n      parentNode?.children!.push({\n        label: options.name,\n        key: options.id,\n        isLeaf: true,\n        parentType: type\n      })\n    }\n\n    /**\n     * \n     */\n    const deleteMapSource = () => {\n      // \n      const { key, parentType } = stateRef.rightObj\n      cesiumSourceLoader.deleteSource(key as string, parentType as string)\n\n      // \n      const parentNode = stateRef.treeData.find((t) => t.key === parentType)\n      const index = parentNode?.children!.findIndex((c) => c.key === key)\n      if (!index || index < 0) return\n      parentNode?.children!.splice(index, 1)\n    }\n\n    /**\n     * \n     */\n    const flyToMapSource = () => {\n      const { key, parentType } = stateRef.rightObj\n      cesiumSourceLoader.flyTo(key as string, parentType as MapSourceTypeEnum)\n    }\n\n    return () => (\n      <div class={styles.resourceTree}>\n        <NTree\n          data={stateRef.treeData}\n          node-props={nodeProps}\n          checkable\n          expand-on-click\n          default-expand-all\n          selectable\n        />\n        <NDropdown\n          trigger='manual'\n          placement='bottom-start'\n          show={stateRef.showDropdown}\n          options={stateRef.options as any}\n          x={stateRef.x}\n          y={stateRef.y}\n          onSelect={handleSelect}\n          onClickoutside={handleClickoutside}\n        />\n        <SourceModal ref={resourceModalRef} onLoadMapSource={loadMapSource} />\n      </div>\n    )\n  }\n})\n"],"names":["createDataKey","key","SwitcherIcon","defineComponent","name","render","h","xmlns","viewBox","d","CheckMark","class","LineMark","checkboxGroupInjectionKey","createInjectionKey","style$1","c","cB","cM","cE","border","cursor","fill","iconSwitchTransition","left","top","display","insideModal","insidePopover","NCheckbox","props","Object","assign","useTheme","size","String","checked","type","Boolean","Number","default","defaultChecked","value","disabled","indeterminate","label","focusable","checkedValue","uncheckedValue","Function","Array","onUpdateChecked","privateInsideTable","onChange","setup","watchEffect","warnOnce","selfRef","ref","mergedClsPrefixRef","inlineThemeDisabled","mergedRtlRef","useConfig","formItem","useFormItem","mergedSize","NFormItem","NCheckboxGroup","mergedSizeRef","mergedDisabled","disabledRef","maxRef","max","checkedCountRef","renderedCheckedRef","minRef","min","mergedDisabledRef","inject","uncontrolledCheckedRef","controlledCheckedRef","toRef","mergedCheckedRef","useMergedState","useMemo","groupValueSet","valueSetRef","has","themeRef","style","checkboxLight","toggle","e","toggleCheckbox","_onUpdateCheck","nTriggerFormInput","nTriggerFormChange","nextChecked","call","exposedMethods","focus","_a","blur","rtlEnabledRef","useRtl","cssVarsRef","computed","common","cubicBezierEaseInOut","self","borderRadius","color","colorChecked","colorDisabled","colorTableHeader","colorTableHeaderModal","colorTableHeaderPopover","checkMarkColor","checkMarkColorDisabled","borderFocus","borderDisabled","borderChecked","boxShadowFocus","textColor","textColorDisabled","checkMarkColorDisabledChecked","colorDisabledChecked","borderDisabledChecked","labelPadding","labelLineHeight","labelFontWeight","createKey","fontSize","themeClassHandle","useThemeClass","rtlEnabled","mergedClsPrefix","renderedChecked","mergedTheme","labelId","createId","handleClick","handleKeyUp","handleKeyDown","preventDefault","cssVars","themeClass","onRender","$slots","this","labelNode","resolveWrappedSlot","children","id","tabindex","role","onKeyup","onKeydown","onClick","onMousedown","on","window","once","NIconSwitchTransition","treeSelectInjectionKey","treeInjectionKey","NTreeNodeSwitcher","clsPrefix","required","indent","expanded","selected","hide","loading","tmNode","renderSwitcherIconRef","width","NBaseLoading","radius","strokeWidth","renderSwitcherIcon","option","rawNode","NBaseIcon","NTreeNodeCheckbox","right","onCheck","handleUpdateValue","doCheck","mergedThemeRef","theme","peers","Checkbox","themeOverrides","peerOverrides","NTreeNodeContent","onDragstart","nodeProps","renderLabelRef","renderPrefixRef","renderSuffixRef","labelFieldRef","renderLabel","renderPrefix","renderSuffix","labelField","doClick","prefix","suffix","draggable","renderDropMark","position","offsetLevel","el","boxSizing","bottom","boxShadow","cssPosition","offsetLeft","height","backgroundColor","transformOrigin","transform","isNodeDisabled","node","disabledField","traverse","nodes","childrenField","callback","callbackAfter","forEach","keysWithFilter","pattern","keyField","filter","keys","Set","highlightKeySet","path","push","add","i","length","pop","expandedKeys","from","isBrowser","Image","src","NTreeNode","NTree","droppingNodeParentRef","droppingMouseNodeRef","draggingNodeRef","droppingPositionRef","droppingOffsetLevelRef","nodePropsRef","indentRef","blockLineRef","checkboxPlacementRef","checkOnClickRef","disabledFieldRef","showLineRef","overrideDefaultNodeClickBehaviorRef","checkboxDisabledRef","checkboxDisabled","nodeIsDisabledRef","resolvedNodePropsRef","contentInstRef","contentElRef","handleSwitcherClick","isLeaf","shallowLoaded","loadingKeysRef","onLoadRef","onLoad","then","finally","delete","setTimeout","onMounted","$el","selectableRef","internalTreeSelect","mergedCheckStrategyRef","multipleRef","cascadeRef","checkableRef","checkedRef","displayedCheckedKeysRef","includes","mergedCheckOnClickRef","checkable","checkOnClick","handleNodeClick","_b","happensIn","overrideDefaultNodeClickBehavior","shouldOverride","handleCheck","handleSelect","expandOnClick","expandOnClickRef","selectable","mergedCheckOnClick","_handleClick","indentNodes","parent","isLastChild","reverse","repeat","level","showDropMark","draggingNode","droppingPosition","droppingMouseNode","showDropMarkAsParent","droppingNodeParent","pending","pendingNodeKeyRef","highlight","highlightKeySetRef","displayedIndeterminateKeysRef","mergedSelectedKeysRef","mergedExpandedKeysRef","internalScrollable","internalScrollableRef","draggableRef","blockLine","checkboxFocusable","internalCheckboxFocusableRef","droppingOffsetLevel","checkboxPlacement","showLine","handleDrop","event","dropPosition","handleDragStart","handleDragEnter","currentTarget","target","handleDragOver","handleDragEnd","handleDragLeave","handleLineClick","handleContentClick","dragEventHandlers","onDragenter","onDragleave","onDragend","onDrop","onDragover","dataKey","checkboxOnRight","checkboxNode","MotionWrapper","mode","onAfterEnter","FadeInExpandTransition","appear","pxfy","map","TreeNode","iconSwitchTransitionNode","fadeInHeightExpandTransition","duration","cNotM","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","apply","treeSharedProps","allowCheckingNotLoaded","defaultExpandAll","defaultExpandedKeys","indeterminateKeys","onUpdateIndeterminateKeys","onUpdateExpandedKeys","__unplugin_components_0","accordion","showIrrelevantNodes","data","expandOnDragenter","cancelable","blockNode","checkedKeys","defaultCheckedKeys","selectedKeys","defaultSelectedKeys","multiple","cascade","scrollbarProps","allowDrop","animated","virtualScroll","watchProps","keyboard","getChildren","onUpdateCheckedKeys","onUpdateSelectedKeys","internalScrollablePadding","internalRenderEmpty","internalHighlightKeySet","internalUnifySelectCheck","internalCheckboxFocusable","internalFocusable","checkStrategy","leafOnly","treeLight","selfElRef","scrollbarInstRef","virtualListInstRef","mergedFilterRef","toLowerCase","filteredTreeInfoRef","tree","visitedTailKeys","visitedNonTailKeys","filteredTree","visit","t","n","build","sibs","isVisitedTail","isVisitedNonTail","clonedNode","filterTree","displayTreeMateRef","createTreeMate","getIsGroup","getKey","getDisabled","treeSelectInjection","dataTreeMateRef","dataTreeMate","uncontrolledCheckedKeysRef","controlledCheckedKeysRef","mergedCheckedKeysRef","checkedStatusRef","getCheckedKeys","allowNotLoaded","useMergedCheckStrategy","uncontrolledSelectedKeysRef","controlledSelectedKeysRef","uncontrolledExpandedKeysRef","initUncontrolledExpandedKeys","getNonLeafKeys","controlledExpandedKeysRef","fNodesRef","getFlattenedNodes","handleKeydown","mergedSelectedKeys","enterBehavior","pendingNodeKey","fNodes","fIndex","findIndex","pendingNode","parentTmNode","getParent","useKeyboard","expandTimerId","nodeKeyToBeExpanded","uncontrolledHighlightKeySetRef","controlledHighlightKeySetRef","mergedHighlightKeySetRef","expandedNonLoadingKeysRef","dragStartX","droppingNodeRef","droppingNode","isDataReset","watch","nextTick","clear","deep","expandAnimationDisabled","disableExpandAnimationForOneTick","memoizedExpandedKeys","triggerLoading","warn","loadingKeys","loadError","oldValue","expandedKeysAfterChange","doUpdateExpandedKeys","getOptionsByKeys","action","displayTreeMate","getNode","aipRef","afNodesRef","prevValue","syncScrollbar","nodeHeight","depx","prevVSet","addedKey","removedKey","expandedKey","currentVSet","viewportHeight","listElRef","offsetHeight","viewportItemCount","Math","ceil","baseExpandedKeys","expandedNodeIndex","expandedChildren","flatten","splice","__motion","slice","collapsedNodeIndex","collapsedNodeChildren","collapsedChildren","getFIndexRef","createIndexGetter","mergedFNodesRef","scrollbarInst","sync","meta","_onUpdateExpandedKeys","doUpdateCheckedKeys","_onUpdateCheckedKeys","doUpdateSelectedKeys","_onUpdateSelectedKeys","resetDndState","resetDropState","resetDragExpandState","clearTimeout","checkedAction","_onUpdateIndeterminateKeys","doUpdateIndeterminateKeys","mergedExpandedKeys","index","expandNodeId","nodeToBeExpanded","nextKeys","siblingKeySet","siblings","concat","toggleExpand","emit","info","doDragOver","elOffsetHeight","elClientTop","getBoundingClientRect","eventOffsetY","clientY","mousePosition","phase","getFindex","finalDropNode","finalDropPosition","hoverNodeFIndex","mouseAtExpandedNonLeafNode","isFirstChild","offset","clientX","contains","expand","expandDragEnterNode","scrollTo","targetEl","contentRef","querySelector","provide","doDragEnd","doDragEnter","doDragLeave","doDragStart","nextNode","getNext","includeDisabled","prevNode","getPrev","doDrop","dragNode","options","y","getCheckedData","getIndeterminateData","nodeBorderRadius","nodeColorHover","nodeColorPressed","nodeColorActive","arrowColor","loadingColor","nodeTextColor","nodeTextColorDisabled","dropMarkColor","nodeWrapperPadding","lineHeight","lineColor","lineOffsetTop","getPadding","lineOffsetBottom","aip","handleFocusout","containerRef","relatedTarget","selfEl","handleDragLeaveTree","handleScroll","getScrollContainer","getScrollContent","itemsElRef","handleAfterEnter","handleResize","mergedFocusable","treeClass","createNode","padding","NxScrollbar","container","content","Scrollbar","onFocusout","VVirtualList","items","itemSize","ignoreItemResize","paddingTop","paddingBottom","paddingLeft","paddingRight","onScroll","onResize","showScrollbar","itemResizable","item","resolveSlot","empty","NEmpty","Empty","contentStyle","viewerKey","Symbol","mapStore","useMapStore","resourceModalRef","stateRef","useResourceTree","mapViewer","cesiumSourceLoader","CesiumSourceLoader","saveCesiumSourceLoader","openModal","rightObj","showDropdown","handleClickoutside","loadMapSource","addSource","parentNode","treeData","find","parentType","deleteMapSource","deleteSource","flyToMapSource","flyTo","_createVNode","styles","_resolveComponent","trigger","placement","show","x","onSelect","onClickoutside","SourceModal","onLoadMapSource"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18]}