{"version":3,"file":"index-af6b124f.js","sources":["../../../src/store/editor/index.ts"],"sourcesContent":["import { Primitive } from '@/primitives/primitive'\nimport { CanvasStyle } from '@/primitives/types'\n\nexport const useEditorStore = defineStore('editor', () => {\n  const canvasStyle = ref<CanvasStyle>({ width: 1920, height: 1080 })\n  const primitives = ref<Primitive[]>([])\n  const curPrimitive = ref<Primitive | null>(null)\n  const isClickPrimitive = ref<boolean>(false)\n  const editorScale = ref<number>(40)\n\n  /**\n   * 设置画布样式\n   * @param style CanvasStyle\n   */\n  const setCanvasStyle = (style: CanvasStyle) => {\n    canvasStyle.value = style\n  }\n\n  /**\n   * 添加primitive到画布编辑器\n   * @param val Primitive\n   */\n  const addPrimitive = (val: Primitive) => {\n    primitives.value.push(val)\n  }\n\n  /**\n   * 清空画布\n   */\n  const clear = () => {\n    primitives.value.length = 0\n    curPrimitive.value = null\n    isClickPrimitive.value = false\n  }\n\n  /**\n   * 设置当前选中的primitive\n   * @param val Primitive\n   */\n  const setCurPrimitive = (val: Primitive | null) => {\n    curPrimitive.value = val\n  }\n\n  /**\n   * 删除当前选中的primitive\n   */\n  const deleteCurPrimitive = () => {\n    const index = curPrimitiveIndex.value\n    if (index > -1) primitives.value.splice(index, 1)\n    curPrimitive.value = null\n  }\n\n  /**\n   * 批量删除 primitive\n   * @param primitives Primitive[]\n   */\n  const batchDeletePrimitive = (data: Primitive[]) => {\n    data.forEach(({ id }) => {\n      const index = primitives.value.findIndex((p) => p.id === id)\n      primitives.value.splice(index, 1)\n    })\n  }\n\n  /**\n   * 设置当前是否点击primitive的状态\n   * @param status Boolean\n   */\n  const setClickPrimitiveStatus = (status: boolean) => {\n    isClickPrimitive.value = status\n  }\n\n  /**\n   * 当前选中primitive在数组中的下标\n   */\n  const curPrimitiveIndex = computed(() =>\n    primitives.value.findIndex(({ id }) => id === curPrimitive.value?.id)\n  )\n\n  /**\n   * 移动当前选中Primitive位置\n   * @param toIndex Number\n   */\n  const moveCurPrimitiveByIndex = (toIndex: number) => {\n    const indexToMove = curPrimitiveIndex.value\n\n    const [valueToMove] = primitives.value.splice(indexToMove, 1)\n    primitives.value.splice(indexToMove + toIndex, 0, valueToMove)\n  }\n\n  /**\n   * 置顶当前选中组件\n   */\n  const upCurComponent = () => {\n    const indexToMove = curPrimitiveIndex.value\n    const [valueToMove] = primitives.value.splice(indexToMove, 1)\n    primitives.value.push(valueToMove)\n  }\n\n  /**\n   * 置底当前选中组件\n   */\n  const downCurComponent = () => {\n    const indexToMove = curPrimitiveIndex.value\n    const [valueToMove] = primitives.value.splice(indexToMove, 1)\n    primitives.value.unshift(valueToMove)\n  }\n\n  /**\n   * 设置编辑器的缩放比\n   * @param scale Number\n   */\n  const setEditorScale = (scale: number) => {\n    editorScale.value = scale\n  }\n\n  return {\n    canvasStyle,\n    primitives,\n    setCanvasStyle,\n    curPrimitive,\n    isClickPrimitive,\n    editorScale,\n    addPrimitive,\n    clear,\n    deleteCurPrimitive,\n    batchDeletePrimitive,\n    setCurPrimitive,\n    setClickPrimitiveStatus,\n    moveCurPrimitiveByIndex,\n    upCurComponent,\n    downCurComponent,\n    setEditorScale\n  }\n})\n"],"names":["useEditorStore","defineStore","canvasStyle","ref","width","height","primitives","curPrimitive","isClickPrimitive","editorScale","curPrimitiveIndex","computed","value","findIndex","id","_a","setCanvasStyle","style","addPrimitive","val","push","clear","length","deleteCurPrimitive","index","splice","batchDeletePrimitive","data","forEach","p","setCurPrimitive","setClickPrimitiveStatus","status","moveCurPrimitiveByIndex","toIndex","indexToMove","valueToMove","upCurComponent","downCurComponent","unshift","setEditorScale","scale"],"mappings":"sDAGO,MAAAA,EAAAC,EAAA,UAAA,KACL,MAAAC,EAAAC,EAAA,CAAAC,MAAA,KAAAC,OAAA,OACAC,EAAAH,EAAA,IACAI,EAAAJ,EAAA,MACAK,EAAAL,GAAA,GACAM,EAAAN,EAAA,IAkEAO,EAAAC,GAA0B,IAAAL,EAAAM,MAAAC,WAAA,EAAAC,eAAA,OAAAA,KAAA,OAAAC,EAAAR,EAAAK,YAAA,EAAAG,EAAAD,GAAA,MAyC1B,MAAA,CAAOZ,cACLI,aACAU,eAvGFC,IACEf,EAAAU,MAAAK,CAAA,EAuGAV,eACAC,mBACAC,cACAS,aAnGFC,IACEb,EAAAM,MAAAQ,KAAAD,EAAA,EAmGAE,MA7FF,KACEf,EAAAM,MAAAU,OAAA,EACAf,EAAAK,MAAA,KACAJ,EAAAI,OAAA,CAAA,EA2FAW,mBA7EF,KACE,MAAAC,EAAAd,EAAAE,MACAY,GAAA,GAAgBlB,EAAAM,MAAAa,OAAAD,EAAA,GAChBjB,EAAAK,MAAA,IAAA,EA2EAc,qBApEFC,IACEA,EAAAC,SAAA,EAAAd,SACE,MAAAU,EAAAlB,EAAAM,MAAAC,WAAAgB,GAAAA,EAAAf,KAAAA,IACAR,EAAAM,MAAAa,OAAAD,EAAA,EAAA,GAAgC,EAkElCM,gBAtFFX,IACEZ,EAAAK,MAAAO,CAAA,EAsFAY,wBA3DFC,IACExB,EAAAI,MAAAoB,CAAA,EA2DAC,wBA7CFC,IACE,MAAAC,EAAAzB,EAAAE,OAEAwB,GAAA9B,EAAAM,MAAAa,OAAAU,EAAA,GACA7B,EAAAM,MAAAa,OAAAU,EAAAD,EAAA,EAAAE,EAAA,EA0CAC,eApCF,KACE,MAAAF,EAAAzB,EAAAE,OACAwB,GAAA9B,EAAAM,MAAAa,OAAAU,EAAA,GACA7B,EAAAM,MAAAQ,KAAAgB,EAAA,EAkCAE,iBA5BF,KACE,MAAAH,EAAAzB,EAAAE,OACAwB,GAAA9B,EAAAM,MAAAa,OAAAU,EAAA,GACA7B,EAAAM,MAAA2B,QAAAH,EAAA,EA0BAI,eAnBFC,IACEhC,EAAAG,MAAA6B,CAAA,EAmBA"}