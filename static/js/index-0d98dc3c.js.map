{"version":3,"file":"index-0d98dc3c.js","sources":["../../../src/store/area-select/index.ts","../../../src/utils/translate.ts","../../../src/utils/primitive.ts","../../../src/components/Editor/AreaSelect/index.tsx","../../../src/utils/event-emitter.ts","../../../src/components/Editor/AuxiliaryLine/index.tsx","../../../src/hooks/use-editor-scale.ts","../../../src/components/Editor/BoundBox/index.tsx","../../../src/components/Editor/BoundBox/use-boundbox.ts","../../../src/components/Editor/hooks/use-compose.ts","../../../src/components/Editor/ContextMenu/use-context-menu.ts","../../../src/components/Editor/ContextMenu/index.tsx","../../../src/components/Editor/hooks/use-mouse-event.ts","../../../src/components/Editor/hooks/use-group.ts","../../../node_modules/vue3-sketch-ruler/lib/index.es.js","../../../src/assets/images/editor/eye.png","../../../src/assets/images/editor/eyeOffSharp.png","../../../src/components/Editor/SketchRuler/index.tsx","../../../src/components/Editor/index.tsx","../../../src/views/design-space/chart/container/index.tsx","../../../src/views/design-space/chart/container/use-container.ts"],"sourcesContent":["import { Primitive } from '@/primitives/primitive'\nimport { PrimitiveStyle } from '@/primitives/types'\n\nexport const useAreaSelectStore = defineStore('areaSelect', () => {\n  const groupStyle = ref<PrimitiveStyle | null>(null)\n  const selectedPrimitives = ref<Primitive[]>([])\n  const areaSelectVisible = ref(false)\n\n  /**\n   * 保存框选中的 primitive 以及包围框的样式\n   * @param style  包围和样式\n   * @param primitives 选中的 primitive\n   */\n  const setAreaSelectOptions = (\n    style: PrimitiveStyle | null,\n    primitives: Primitive[]\n  ) => {\n    groupStyle.value = style\n    selectedPrimitives.value = primitives\n  }\n\n  /**\n   * 清除selectedPrimitives\n   */\n  const clearPrimitives = () => {\n    selectedPrimitives.value = []\n  }\n\n  /**\n   * 设置包围盒可见性\n   * @param visible Boolean\n   */\n  const setAreaSelectVisible = (visible: boolean) => {\n    areaSelectVisible.value = visible\n  }\n\n  return {\n    groupStyle,\n    selectedPrimitives,\n    areaSelectVisible,\n    clearPrimitives,\n    setAreaSelectOptions,\n    setAreaSelectVisible\n  }\n})\n","export function mod360(deg: number) {\n  return (deg + 360) % 360\n}\n\nexport function toPercent(val: number) {\n  return val * 100 + '%'\n}\n","import { Primitive } from '@/primitives/primitive'\nimport type { DOMRect, Location, PrimitiveStyle } from '@/primitives/types'\n\nimport { toPercent } from './translate'\n\nconst needUnit = [\n  'fontSize',\n  'width',\n  'height',\n  'top',\n  'left',\n  'borderWidth',\n  'letterSpacing',\n  'borderRadius'\n]\n\n/**\n * 计算组件笛卡尔坐标系坐标\n * @param style 组件在画布中的位置\n * @returns 组件坐标\n */\nexport function calcPrimitiveAxis(style: PrimitiveStyle): Location {\n  return {\n    top: style.top,\n    left: style.left,\n    right: style.left + style.width,\n    bottom: style.top + style.height\n  }\n}\n\n/**\n *\n * @param style PrimitiveStyle\n * @param filter []\n * @returns PrimitiveStyle\n */\nexport function getStyle(style: PrimitiveStyle, filter: string[] = []) {\n  const result = {} as any\n  Object.keys(style).forEach((key) => {\n    if (!filter.includes(key as never)) {\n      if (style[key]) {\n        result[key] = style[key]\n        if (needUnit.includes(key)) result[key] += 'px'\n      }\n    }\n  })\n\n  return result\n}\n\n/**\n * 获取包围盒的样式\n * @param style PrimitiveStyle\n */\nexport function getBoundBoxStyle(style: PrimitiveStyle) {\n  const pStyle: Record<string, string> = {}\n\n  for (const [key, value] of Object.entries(style)) {\n    if (value) pStyle[key] = `${value}px`\n  }\n\n  return pStyle\n}\n\n/**\n * 获取一个组件的位置信息\n * @param style PrimitiveStyle\n * @returns Location\n */\nexport function getPrimitiveLocation(style: PrimitiveStyle): Location {\n  const bottom = style.top + style.height\n  const right = style.left + style.width\n\n  return {\n    left: style.left,\n    top: style.top,\n    right,\n    bottom\n  }\n}\n\n// 将组合中的各个子组件拆分出来，并计算它们新的 style\nexport function decomposePrimitive(\n  primitive: Primitive,\n  editorRect: DOMRect,\n  parentStyle: PrimitiveStyle\n) {\n  const element = document.getElementById(`primitive${primitive.id}`)\n  const rectInfo = element!.getBoundingClientRect()\n  // 获取元素的中心点坐标\n  const center = {\n    x: rectInfo.left - editorRect.left + rectInfo.width / 2,\n    y: rectInfo.top - editorRect.top + rectInfo.height / 2\n  }\n\n  primitive.style.width =\n    (parseFloat(primitive.groupStyle.width) / 100) * parentStyle.width\n  primitive.style.height =\n    (parseFloat(primitive.groupStyle.height) / 100) * parentStyle.height\n  // 计算出元素新的 top left 坐标\n  primitive.style.left = center.x - primitive.style.width / 2\n  primitive.style.top = center.y - primitive.style.height / 2\n  primitive.groupStyle = {} as CSSStyleDeclaration\n}\n\n/**\n * 创建组的样式\n * @param groupPrimitive Primitive\n */\nexport function createGroupStyle(groupPrimitive: Primitive) {\n  const parentStyle = groupPrimitive.style as PrimitiveStyle\n  groupPrimitive.childPrimitives?.forEach((primitive: Primitive) => {\n    // primitive.groupStyle 的 top left 是相对于 group 组件的位置\n    if (!Object.keys(primitive.groupStyle).length) {\n      const style = { ...primitive.style } as PrimitiveStyle\n\n      primitive.groupStyle = getStyle(style)\n\n      primitive.groupStyle.left = toPercent(\n        (style.left - parentStyle.left) / parentStyle.width\n      )\n      primitive.groupStyle.top = toPercent(\n        (style.top - parentStyle.top) / parentStyle.height\n      )\n      primitive.groupStyle.width = toPercent(style.width / parentStyle.width)\n      primitive.groupStyle.height = toPercent(style.height / parentStyle.height)\n    }\n  })\n}\n","import styles from './index.module.scss'\n\nexport default defineComponent({\n  name: 'AreaSelect',\n  props: {\n    options: {\n      type: Object,\n      default: () => {}\n    }\n  },\n  setup(props) {\n    return {\n      style: computed(() => ({\n        left: props.options.start.x + 'px',\n        top: props.options.start.y + 'px',\n        width: props.options.width + 'px',\n        height: props.options.height + 'px'\n      }))\n    }\n  },\n  render() {\n    return <div style={this.style} class={styles.areaSelect}></div>\n  }\n})\n","class EventEmitter {\n  private events: Record<string, Function[]> = {}\n\n  // 监听事件\n  on(eventName: string, callback: Function) {\n    if (!this.events[eventName]) {\n      this.events[eventName] = []\n    }\n    if (!this.events[eventName].includes(callback)) {\n      this.events[eventName].push(callback)\n    }\n  }\n\n  // 取消监听事件\n  off(eventName: string, callback: Function) {\n    const eventCallbacks = this.events[eventName]\n    if (eventCallbacks) {\n      this.events[eventName] = eventCallbacks.filter(\n        (item) => item !== callback\n      )\n    }\n  }\n\n  // 触发事件\n  emit(eventName: string, arg?: any) {\n    const eventCallbacks = this.events[eventName]\n    if (eventCallbacks && eventCallbacks.length > 0) {\n      for (const callback of eventCallbacks) {\n        callback(arg)\n      }\n    } else {\n      console.log(`no listener for event: ${eventName}`)\n    }\n  }\n\n  // 只监听一次事件\n  once(eventName: string, callback: Function) {\n    const onceCallback = (arg: any) => {\n      callback(arg)\n      this.off(eventName, onceCallback)\n    }\n    this.on(eventName, onceCallback)\n  }\n}\n\nexport default new EventEmitter()\n","// 导入类型和工具函数\nimport type { Location } from '@/primitives/types'\nimport { useEditorStore } from '@/store/editor'\nimport eventEmitter from '@/utils/event-emitter'\nimport { calcPrimitiveAxis } from '@/utils/primitive'\n\nimport styles from './index.module.scss'\n\n// 定义一些类型和常量\nexport type StyleObject = {\n  [key: string]: any\n}\n\ninterface LineStatus {\n  [key: string]: boolean\n}\n\ntype Condition = Record<\n  'isNearly' | 'lineNode' | 'line' | 'dragShift' | 'lineShift',\n  any\n>\n\ntype RecordWithAnyKey<T> = {\n  [key: string]: T\n}\n\nexport default defineComponent({\n  name: 'AuxiliaryLine',\n  setup() {\n    const editorStore = useEditorStore()\n    const lineElementsRef = ref<(HTMLElement | null)[]>([])\n    const LINE_NAMES = ['xt', 'xc', 'xb', 'yl', 'yc', 'yr']\n    const NEAR_THRESHOLD = ref<number>(3)\n    const lineStatus = reactive<LineStatus>({\n      xt: false,\n      xc: false,\n      xb: false,\n      yl: false,\n      yc: false,\n      yr: false\n    })\n\n    const setLineElementRef = (element: any) => {\n      lineElementsRef.value.push(element)\n    }\n\n    // 隐藏辅助线\n    const hideLines = () => {\n      Object.keys(lineStatus).forEach((line) => {\n        lineStatus[line] = false\n      })\n    }\n\n    const showLines = (isDownward: boolean, isRightward: boolean) => {\n      const { primitives } = editorStore\n      const currentPrimitive = editorStore.curPrimitive\n      if (!currentPrimitive) return\n\n      const {\n        top: theTop,\n        left: theLeft,\n        right: theRight,\n        bottom: theBottom\n      }: Location = calcPrimitiveAxis(currentPrimitive.style)\n\n      const currentPrimitiveHalfWidth = (theRight - theLeft) / 2\n      const currentPrimitiveHalfHeight = (theBottom - theTop) / 2\n\n      hideLines()\n      primitives.forEach((primitive) => {\n        if (primitive == currentPrimitive) return\n\n        const primitiveStyle = calcPrimitiveAxis(primitive.style)\n        const { top, left, bottom, right } = primitiveStyle\n        const primitiveHalfWidth = (right - left!) / 2\n        const primitiveHalfHeight = (bottom - top!) / 2\n\n        const conditions: RecordWithAnyKey<Condition[]> = {\n          top: [\n            {\n              isNearly: isNearly(theTop, top),\n              lineNode: lineElementsRef.value[0], // xt\n              line: 'xt',\n              dragShift: top,\n              lineShift: top\n            },\n            {\n              isNearly: isNearly(theBottom, top),\n              lineNode: lineElementsRef.value[0], // xt\n              line: 'xt',\n              dragShift: top - (theBottom - theTop || 0),\n              lineShift: top\n            },\n            {\n              // 组件与拖拽节点的中间是否对齐\n              isNearly: isNearly(\n                (theTop || 0) + currentPrimitiveHalfHeight,\n                top + primitiveHalfHeight\n              ),\n              lineNode: lineElementsRef.value[1], // xc\n              line: 'xc',\n              dragShift: top + primitiveHalfHeight - currentPrimitiveHalfHeight,\n              lineShift: top + primitiveHalfHeight\n            },\n            {\n              isNearly: isNearly(theTop, bottom),\n              lineNode: lineElementsRef.value[2], // xb\n              line: 'xb',\n              dragShift: bottom,\n              lineShift: bottom\n            },\n            {\n              isNearly: isNearly(theBottom, bottom),\n              lineNode: lineElementsRef.value[2], // xb\n              line: 'xb',\n              dragShift: bottom - (theBottom - theTop || 0),\n              lineShift: bottom\n            }\n          ],\n          left: [\n            {\n              isNearly: isNearly(theLeft, left),\n              lineNode: lineElementsRef.value[3], // yl\n              line: 'yl',\n              dragShift: left,\n              lineShift: left\n            },\n            {\n              isNearly: isNearly(theRight, left),\n              lineNode: lineElementsRef.value[3], // yl\n              line: 'yl',\n              dragShift: left - (theRight - theLeft || 0),\n              lineShift: left\n            },\n            {\n              // 组件与拖拽节点的中间是否对齐\n              isNearly: isNearly(\n                (theLeft || 0) + currentPrimitiveHalfWidth,\n                left + primitiveHalfWidth\n              ),\n              lineNode: lineElementsRef.value[4], // yc\n              line: 'yc',\n              dragShift: left + primitiveHalfWidth - currentPrimitiveHalfWidth,\n              lineShift: left + primitiveHalfWidth\n            },\n            {\n              isNearly: isNearly(theLeft, right),\n              lineNode: lineElementsRef.value[5], // yr\n              line: 'yr',\n              dragShift: right,\n              lineShift: right\n            },\n            {\n              isNearly: isNearly(theRight, right),\n              lineNode: lineElementsRef.value[5], // yr\n              line: 'yr',\n              dragShift: right - (theRight - theLeft || 0),\n              lineShift: right\n            }\n          ]\n        }\n\n        const needToShow: string[] = []\n\n        Object.keys(conditions).forEach((key) => {\n          // 遍历符合的条件并处理\n          conditions[key].forEach((condition: Condition) => {\n            if (!condition.isNearly) return\n            // 修改当前组件位移\n            currentPrimitive.updateStyleByKey(key, condition.dragShift)\n            condition.lineNode.style[key] = `${condition.lineShift}px`\n            needToShow.push(condition.line)\n          })\n        })\n\n        // 同一方向上同时显示一条线可能不太美观，因此采取选择逻辑\n        chooseTheTrueLine(needToShow, isDownward, isRightward)\n      })\n    }\n\n    const chooseTheTrueLine = (\n      needToShow: string[],\n      isDownward: boolean,\n      isRightward: boolean\n    ) => {\n      // 根据鼠标移动方向决定显示哪条线\n      if (isRightward) {\n        if (needToShow.includes('yr')) {\n          lineStatus.yr = true\n        } else if (needToShow.includes('yc')) {\n          lineStatus.yc = true\n        } else if (needToShow.includes('yl')) {\n          lineStatus.yl = true\n        }\n      } else {\n        if (needToShow.includes('yl')) {\n          lineStatus.yl = true\n        } else if (needToShow.includes('yc')) {\n          lineStatus.yc = true\n        } else if (needToShow.includes('yr')) {\n          lineStatus.yr = true\n        }\n      }\n\n      if (isDownward) {\n        if (needToShow.includes('xb')) {\n          lineStatus.xb = true\n        } else if (needToShow.includes('xc')) {\n          lineStatus.xc = true\n        } else if (needToShow.includes('xt')) {\n          lineStatus.xt = true\n        }\n      } else {\n        if (needToShow.includes('xt')) {\n          lineStatus.xt = true\n        } else if (needToShow.includes('xc')) {\n          lineStatus.xc = true\n        } else if (needToShow.includes('xb')) {\n          lineStatus.xb = true\n        }\n      }\n    }\n\n    const isNearly = (dragValue: number, targetValue: number) =>\n      Math.abs(dragValue - targetValue) <= NEAR_THRESHOLD.value\n\n    watchEffect(() => {\n      // 监听事件\n      eventEmitter.on('move', ({ isDownward, isRightward }: any) => {\n        showLines(isDownward, isRightward)\n      })\n      eventEmitter.on('unmove', () => {\n        hideLines()\n      })\n      showLines(false, false)\n    })\n\n    return () => (\n      // 渲染线条\n      <div class={styles.markLine}>\n        {LINE_NAMES.map((lineName) => (\n          <div\n            key={lineName}\n            v-show={lineStatus[lineName]}\n            ref={setLineElementRef}\n            class={`${styles.line} ${\n              lineName.includes('x') ? styles.xline : styles.yline\n            }`}\n          ></div>\n        ))}\n      </div>\n    )\n  }\n})\n","import { useEditorStore } from '@/store/editor/index'\n\nexport function useEditorScale() {\n  const editorStore = useEditorStore()\n  const { editorScale } = storeToRefs(editorStore)\n\n  /**\n   * 通过当前缩放比例转换数值\n   * @param val Number\n   * @returns Number\n   */\n  const transByCurScale = (val: number) => {\n    return (val * 100) / editorScale.value\n  }\n\n  /**\n   * 通过当前缩放比例转换数值\n   * @param val Number\n   * @returns Number\n   */\n  const transAbsByCurScale = (val: number) => {\n    return (Math.abs(val) * 100) / editorScale.value\n  }\n\n  return {\n    transByCurScale,\n    transAbsByCurScale\n  }\n}\n","import { ceil } from 'lodash'\nimport { type PropType } from 'vue'\n\nimport { useEditorScale } from '@/hooks/use-editor-scale'\nimport { Primitive } from '@/primitives/primitive'\nimport { PrimitiveStyle } from '@/primitives/types'\nimport { useAreaSelectStore } from '@/store/area-select/index'\nimport { useEditorStore } from '@/store/editor/index'\nimport eventEmitter from '@/utils/event-emitter'\nimport { mod360 } from '@/utils/translate'\n\nimport styles from './index.module.scss'\nimport { useBoundBox } from './use-boundbox'\n\ntype CursorRes = {\n  [key: string]: string\n}\n\nconst props = {\n  primitive: {\n    type: Object as PropType<Primitive>,\n    default: () => {}\n  },\n  pStyle: {\n    type: Object as PropType<PrimitiveStyle>,\n    default: () => {}\n  },\n  index: {\n    required: true,\n    type: Number,\n    default: 0\n  }\n}\n\nexport default defineComponent({\n  name: 'BoundBox',\n  props,\n  emits: ['closeContextmenu'],\n  setup(props, { slots, emit }) {\n    const editorStore = useEditorStore()\n    const areaSelectStore = useAreaSelectStore()\n\n    const { curPrimitive } = storeToRefs(editorStore)\n    const { areaSelectVisible } = storeToRefs(areaSelectStore)\n    const { transByCurScale } = useEditorScale()\n\n    const { curRef, cursors, angleToCursor, drawPoints } = useBoundBox()\n\n    // 位置点的样式\n    const pointStyle = (pointStr: string) => {\n      const { width = 0, height = 0 } = props.pStyle\n      const hasT = pointStr.includes('t')\n      const hasB = pointStr.includes('b')\n      const hasL = pointStr.includes('l')\n      const hasR = pointStr.includes('r')\n      let newLeft = hasL ? 0 : width\n      let newTop = hasT ? 0 : height\n\n      if ((hasT || hasB) && !(hasL || hasR)) {\n        newLeft = width / 2\n        newTop = hasT ? 0 : height\n      } else if (!(hasT || hasB) && (hasL || hasR)) {\n        newLeft = hasL ? 0 : width\n        newTop = Math.floor(height / 2)\n      }\n\n      return {\n        marginLeft: '-4px',\n        marginTop: '-4px',\n        left: `${newLeft}px`,\n        top: `${newTop}px`,\n        cursor: cursors.value[pointStr]\n      }\n    }\n\n    // 获取每个位置的光标的角度\n    const getCursorStyle = () => {\n      const result: CursorRes = {}\n      let lastMatchIndex = -1\n\n      for (const key in drawPoints) {\n        const angle = mod360(drawPoints[key])\n\n        for (let i = 0; i < angleToCursor.length; i++) {\n          lastMatchIndex = (lastMatchIndex + 1) % angleToCursor.length\n          const angleLimit = angleToCursor[lastMatchIndex]\n\n          if (angle < 23 || angle >= 338) {\n            result[key] = 'nw-resize'\n            break\n          }\n\n          if (angleLimit.start <= angle && angle < angleLimit.end) {\n            result[key] = angleLimit.cursor + '-resize'\n            break\n          }\n        }\n      }\n\n      return result\n    }\n\n    /**\n     * 鼠标按下primitive\n     * @param e MouseEvent\n     */\n    const handleMouseDownEvent = (e: MouseEvent) => {\n      e.stopPropagation()\n      e.preventDefault()\n\n      // 如果当前是在组合的模式下，就取消该方法\n      if (areaSelectVisible.value) return\n\n      editorStore.setClickPrimitiveStatus(true)\n      editorStore.setCurPrimitive(props.primitive)\n      cursors.value = getCursorStyle()\n\n      const style = props.pStyle\n      const startY = e.clientY\n      const startX = e.clientX\n      const startTop = style.top || 0\n      const startLeft = style.left || 0\n      //鼠标移动事件 用来调整primitive的大小\n\n      const mouseMoveEvent = (event: MouseEvent) => {\n        const curX = event.clientX\n        const curY = event.clientY\n        const top = transByCurScale(event.clientY - startY) + startTop\n        const left = transByCurScale(event.clientX - startX) + startLeft\n\n        const style = {\n          top: ceil(top),\n          left: ceil(left)\n        } as PrimitiveStyle\n\n        props.primitive.updateStyle(style)\n\n        const isDownward = curY - startY > 0\n        const isRightward = curX - startX > 0\n        eventEmitter.emit('move', { isDownward, isRightward })\n      }\n\n      // 鼠标抬起事件\n      const mouseUpEvent = () => {\n        // 触发元素停止移动事件，用于隐藏标线\n        eventEmitter.emit('unmove')\n        document.removeEventListener('mousemove', mouseMoveEvent)\n        document.removeEventListener('mouseup', mouseUpEvent)\n      }\n\n      document.addEventListener('mousemove', mouseMoveEvent)\n      document.addEventListener('mouseup', mouseUpEvent)\n    }\n\n    /**\n     * 调整包围盒和内部组件的大小\n     * @param pType String\n     * @param e MouseEvent\n     */\n    const handleAdjustSize = (pType: string, e: MouseEvent) => {\n      e.stopPropagation()\n      e.preventDefault()\n\n      const { pStyle } = props\n      const { height = 0, width = 0, top = 0, left = 0 } = pStyle\n      const startX = e.clientX\n      const startY = e.clientY\n      const mouseMoveEvent = (moveEvent: MouseEvent) => {\n        const curX = moveEvent.clientX\n        const curY = moveEvent.clientY\n        const disY = curY - startY\n        const disX = curX - startX\n        const hasT = /t/.test(pType)\n        const hasB = /b/.test(pType)\n        const hasL = /l/.test(pType)\n        const hasR = /r/.test(pType)\n        const newHeight = height + (hasT ? -disY : hasB ? disY : 0)\n        const newWidth = width + (hasL ? -disX : hasR ? disX : 0)\n        Object.assign(pStyle, {\n          height: Math.max(newHeight, 0),\n          width: Math.max(newWidth, 0),\n          left: left + (hasL ? disX : 0),\n          top: top + (hasT ? disY : 0)\n        })\n      }\n      const mouseUpEvent = () => {\n        document.removeEventListener('mousemove', mouseMoveEvent)\n        document.removeEventListener('mouseup', mouseUpEvent)\n      }\n      document.addEventListener('mousemove', mouseMoveEvent)\n      document.addEventListener('mouseup', mouseUpEvent)\n    }\n\n    onMounted(() => {\n      // 用于 Group 组件\n      if (curPrimitive.value) {\n        cursors.value = getCursorStyle()\n      }\n    })\n\n    /**\n     * 点击当前包围盒\n     */\n    const handleClickBoundBox = (e: MouseEvent) => {\n      e.stopPropagation()\n      e.preventDefault()\n      emit('closeContextmenu')\n    }\n\n    /**\n     * 当前组件是否选中\n     */\n    const isSelected = computed(\n      () => curPrimitive.value?.id === props.primitive.id\n    )\n\n    const renderDrawPoints = () =>\n      Object.keys(drawPoints).map((key: string) => (\n        <div\n          key={key}\n          class={styles.point}\n          style={pointStyle(key as string)}\n          onMousedown={(e) => handleAdjustSize(key as string, e)}\n        ></div>\n      ))\n\n    return () => (\n      <div\n        ref={curRef}\n        class={[styles.boundBox, isSelected.value && styles.active]}\n        onClick={handleClickBoundBox}\n        onMousedown={handleMouseDownEvent}\n      >\n        {isSelected.value ? renderDrawPoints() : null}\n        {slots.default?.()}\n      </div>\n    )\n  }\n})\n","type Directions = {\n  [key: string]: number\n}\n\nexport function useBoundBox() {\n  const curRef = ref<HTMLElement | null>(null)\n  const cursors = ref<any>({})\n\n  const drawPoints: Directions = {\n    lt: 0,\n    t: 45,\n    rt: 90,\n    r: 135,\n    rb: 180,\n    b: 225,\n    lb: 270,\n    l: 315\n  }\n\n  // 每个范围的角度对应的光标\n  const angleToCursor = [\n    { start: 338, end: 23, cursor: 'nw' },\n    { start: 23, end: 68, cursor: 'n' },\n    { start: 68, end: 113, cursor: 'ne' },\n    { start: 113, end: 158, cursor: 'e' },\n    { start: 158, end: 203, cursor: 'se' },\n    { start: 203, end: 248, cursor: 's' },\n    { start: 248, end: 293, cursor: 'sw' },\n    { start: 293, end: 338, cursor: 'w' }\n  ]\n\n  return {\n    curRef,\n    cursors,\n    angleToCursor,\n    drawPoints\n  }\n}\n","import GroupPrimitive from '@/primitives/components/group/primitive'\nimport { Primitive } from '@/primitives/primitive'\nimport { PrimitiveStyle } from '@/primitives/types'\nimport { useAreaSelectStore } from '@/store/area-select/index'\nimport { useEditorStore } from '@/store/editor/index'\nimport { createGroupStyle, decomposePrimitive } from '@/utils/primitive'\n\nexport function useCompose() {\n  const editorStore = useEditorStore()\n  const areaSelectStore = useAreaSelectStore()\n  const { curPrimitive } = storeToRefs(editorStore)\n  const { groupStyle, selectedPrimitives } = storeToRefs(areaSelectStore)\n\n  // 合并 primitive\n  const handleCompose = () => {\n    const allPrimitives: Primitive[] = []\n    const primitives = selectedPrimitives.value as Primitive[]\n    const editor = document.querySelector('#editor')\n    const editorRect = editor!.getBoundingClientRect()\n\n    primitives.forEach((primitive) => {\n      // 如果要组合的组件中，已经存在组合数据，则需要提前拆分\n      if (primitive.cName === 'Group') {\n        const parentStyle = { ...primitive.style }\n\n        primitive.childPrimitives?.forEach((primitive) => {\n          decomposePrimitive(primitive, editorRect, parentStyle)\n          allPrimitives.push(primitive)\n        })\n      } else {\n        allPrimitives.push(primitive)\n      }\n    })\n\n    // 实例化一个 groupPrimitive\n    const deletePrimitives = selectedPrimitives.value as Primitive[]\n    const groupPrimitive = new GroupPrimitive()\n    groupPrimitive.childPrimitives = allPrimitives\n    groupPrimitive.style = { ...groupStyle.value } as PrimitiveStyle\n\n    createGroupStyle(groupPrimitive)\n\n    editorStore.addPrimitive(groupPrimitive)\n    editorStore.setCurPrimitive(groupPrimitive)\n    editorStore.batchDeletePrimitive(deletePrimitives)\n    areaSelectStore.setAreaSelectVisible(false)\n    areaSelectStore.clearPrimitives()\n  }\n\n  // 解除合并 primitive\n  const handleDecompose = () => {\n    const parentStyle = { ...curPrimitive.value?.style } as PrimitiveStyle\n    const primitives = curPrimitive.value?.childPrimitives as Primitive[]\n    const editor = document.querySelector('#editor')\n    const editorRect = editor?.getBoundingClientRect() as DOMRect\n    editorStore.deleteCurPrimitive()\n\n    primitives.forEach((primitive) => {\n      decomposePrimitive(primitive, editorRect, parentStyle)\n      editorStore.addPrimitive(primitive)\n    })\n  }\n\n  return {\n    handleCompose,\n    handleDecompose\n  }\n}\n","import { cloneDeep } from 'lodash'\n\nimport { Primitive } from '@/primitives/primitive'\nimport { useEditorStore } from '@/store/editor'\nimport utils from '@/utils'\n\nimport { useCompose } from '../hooks/use-compose'\n\nexport const useContextMenu = () => {\n  const menuState = reactive({\n    top: ref(0),\n    left: ref(0),\n    copyData: ref<Primitive | null>(null)\n  })\n\n  const editorStore = useEditorStore()\n  const { curPrimitive } = storeToRefs(editorStore)\n  const { handleCompose, handleDecompose } = useCompose()\n\n  /**\n   * 复制\n   */\n  const handleCopy = () => {\n    const primitive = cloneDeep(curPrimitive.value)\n    primitive!.id = utils.createId()\n    menuState.copyData = primitive\n    window.$message.success('复制成功！')\n  }\n\n  /**\n   * 粘贴\n   */\n  const handlePaste = () => {\n    if (!menuState.copyData) {\n      window.$message.warning('请选择组件！')\n      return\n    }\n\n    const primitive = menuState.copyData\n    primitive.style.top = menuState.top\n    primitive.style.left = menuState.left\n\n    editorStore.addPrimitive(primitive as Primitive)\n  }\n\n  /**\n   * 清空粘贴板\n   */\n  const handleClearCanvas = () => {\n    editorStore.clear()\n  }\n\n  /**\n   * 删除\n   */\n  const handelDelete = () => {\n    editorStore.deleteCurPrimitive()\n    window.$message.success('删除成功！')\n  }\n\n  /**\n   * 置顶\n   */\n  const handleUp = () => {\n    editorStore.upCurComponent()\n  }\n\n  /**\n   * 置底\n   */\n  const handleDown = () => {\n    editorStore.downCurComponent()\n  }\n\n  /**\n   * 上移\n   */\n  const handleTop = () => {\n    editorStore.moveCurPrimitiveByIndex(1)\n  }\n\n  /**\n   * 下移\n   */\n  const handleBottom = () => {\n    editorStore.moveCurPrimitiveByIndex(-1)\n  }\n\n  /**\n   * 创建分组\n   */\n  const handleCreateGroup = () => {\n    handleCompose()\n  }\n\n  /**\n   * 删除分组\n   */\n  const handleDeleteGroup = () => {\n    handleDecompose()\n  }\n\n  return {\n    menuState,\n    operations: {\n      handleCopy,\n      handlePaste,\n      handleClearCanvas,\n      handelDelete,\n      handleUp,\n      handleDown,\n      handleTop,\n      handleBottom,\n      handleCreateGroup,\n      handleDeleteGroup\n    }\n  }\n}\n","import { Teleport } from 'vue'\n\nimport { useAreaSelectStore } from '@/store/area-select/index'\nimport { useEditorStore } from '@/store/editor'\n\nimport styles from './index.module.scss'\nimport { useContextMenu } from './use-context-menu'\n\ninterface ContextOptions {\n  label: string\n  handler: () => void\n  disabled?: boolean\n}\n\nexport default defineComponent({\n  name: 'ContextMenu',\n  setup(props, { expose }) {\n    const { menuState, operations } = useContextMenu()\n    const editorStore = useEditorStore()\n    const areaSelectStore = useAreaSelectStore()\n\n    const { areaSelectVisible } = storeToRefs(areaSelectStore)\n\n    const variables = reactive({\n      visible: ref(false),\n      contextType: ref(''),\n      contextOptions: ref<ContextOptions[]>([])\n    })\n\n    // 显示右键菜单\n    const show = ({\n      top,\n      left,\n      contextType\n    }: {\n      top: number\n      left: number\n      contextType: string\n    }) => {\n      menuState.top = top\n      menuState.left = left\n      variables.contextType = contextType\n      getContextOptions()\n      variables.visible = true\n    }\n\n    // 关闭右键菜单\n    const close = () => {\n      variables.visible = false\n    }\n\n    // 点击菜单时不取消当前组件的选中状态\n    const handleMouseUp = () => {\n      editorStore.setClickPrimitiveStatus(true)\n    }\n\n    const defaultOptions = [\n      {\n        label: '复制',\n        handler: operations.handleCopy\n      },\n      {\n        label: '粘贴',\n        handler: operations.handlePaste\n      },\n      {\n        label: '删除',\n        handler: operations.handelDelete\n      },\n      {\n        label: '置顶',\n        handler: operations.handleUp\n      },\n      {\n        label: '置底',\n        handler: operations.handleDown\n      },\n      {\n        label: '上移',\n        handler: operations.handleTop\n      },\n      {\n        label: '下移',\n        handler: operations.handleBottom\n      }\n    ]\n\n    const groupOptions = [\n      {\n        label: '组合',\n        handler: operations.handleCreateGroup\n      },\n      {\n        label: '删除',\n        handler: operations.handleDeleteGroup\n      }\n    ]\n\n    const editorOptions = [\n      {\n        label: '粘贴',\n        handler: operations.handlePaste\n      },\n      {\n        label: '清空画布',\n        handler: operations.handleClearCanvas\n      }\n    ]\n\n    const getContextOptions = () => {\n      if (areaSelectVisible.value) {\n        variables.contextOptions = [...groupOptions]\n      } else if (variables.contextType === 'Editor') {\n        variables.contextOptions = [...editorOptions]\n      } else {\n        variables.contextOptions = [...defaultOptions]\n        if (variables.contextType === 'Group') {\n          variables.contextOptions.unshift({\n            label: '解除分组',\n            handler: operations.handleDeleteGroup\n          })\n        }\n      }\n    }\n\n    // 右键菜单样式\n    const contextStyle = computed(() => ({\n      top: `${menuState.top}px`,\n      left: `${menuState.left}px`\n    }))\n\n    expose({ show, close })\n\n    return () => (\n      <Teleport to='body'>\n        <div\n          v-show={variables.visible}\n          class={styles.contextmenu}\n          style={contextStyle.value}\n        >\n          <ul\n            onMouseup={handleMouseUp}\n            onMousedown={(e) => e.stopPropagation()}\n          >\n            {variables.contextOptions.map((item) => (\n              <li onClick={item.handler}>\n                {item.label} {item.disabled}\n              </li>\n            ))}\n          </ul>\n        </div>\n      </Teleport>\n    )\n  }\n})\n","import { useEditorStore } from '@/store/editor/index'\n\nimport ContextMenu from '../ContextMenu/index'\nimport SketchRuler from '../SketchRuler/index'\nimport { useGroup } from './use-group'\n\nexport function useMouseEvent() {\n  const state = reactive({\n    lastX: 0, // 上一次鼠标横向位置\n    lastY: 0, // 上一次鼠标纵向位置\n    isSpaceDown: ref(false), // 键盘Space键是否按下\n    isMouseDown: ref(false) // 鼠标左键是否按下\n  })\n\n  const screenRef = ref<HTMLDivElement | null>(null)\n  const editorRef = ref<HTMLDivElement | null>(null)\n  const contextMenuRef = ref<typeof ContextMenu | null>(null)\n  const sketchRulerRef = ref<typeof SketchRuler | null>(null)\n  const editorContaineRef = ref<HTMLElement | null>(null)\n\n  const { groupState, onDrawGroupBoundry } = useGroup()\n  const editorStore = useEditorStore()\n  const { curPrimitive, primitives, editorScale } = storeToRefs(editorStore)\n\n  // 页面滚动事件\n  const handleMouseScroll = () => {\n    sketchRulerRef.value?.handleResizeRuler()\n  }\n\n  // 鼠标滚轮事件\n  const handleMouseWheel = (e: any) => {\n    if (e.ctrlKey || e.metaKey) {\n      e.preventDefault()\n\n      let scaleValue = editorScale.value\n\n      if (e.wheelDelta >= 0 && scaleValue < 200) {\n        scaleValue = scaleValue + 5\n        editorStore.setEditorScale(scaleValue)\n        return\n      }\n\n      if (e.wheelDelta < 0 && scaleValue > 10) {\n        scaleValue = scaleValue - 5\n        editorStore.setEditorScale(scaleValue)\n      }\n\n      sketchRulerRef.value?.handleResizeRuler()\n    }\n  }\n\n  // 开启右键菜单\n  const handleShowContextMenu = (e: MouseEvent) => {\n    e.stopPropagation()\n    e.preventDefault()\n    if (!e.target) return\n\n    const top = e.clientY\n    const left = e.clientX\n    const contextType = getContextElementType(e.target as Element)\n    contextMenuRef.value?.show({ top, left, contextType })\n  }\n\n  // 获取当前鼠标右键点击的节点是画布、普通 primitive 还是 groupPrimitive\n  const getContextElementType = (element: Element): string | undefined => {\n    if (!element || !element.parentNode) return\n    const parentNode = element.parentNode as Element\n    if (!parentNode.getAttribute) return\n    const dataType = parentNode.getAttribute('data-context')\n    if (dataType) return dataType\n    return getContextElementType(parentNode)\n  }\n\n  // 按下鼠标左键事件\n  const handleMouseDown = (e: MouseEvent) => {\n    // 如果不是鼠标左键触发的就取消\n    if (e.button !== 0) return\n    state.isMouseDown = true\n\n    // 如果当前按下了键盘的 Space 键就执行拖动画布的操作\n    if (state.isSpaceDown) {\n      state.lastX = e.clientX\n      state.lastY = e.clientY\n    } else {\n      editorStore.setClickPrimitiveStatus(false)\n      if (!curPrimitive) e.preventDefault()\n      onDrawGroupBoundry(e)\n    }\n  }\n\n  // 取消当前选中的primitive\n  const handleMouseUp = (e: MouseEvent) => {\n    if (!editorStore.isClickPrimitive) editorStore.setCurPrimitive(null)\n    // 如果不是右键的话就把右键菜单关闭\n    if (e.button !== 2) contextMenuRef.value?.close()\n    state.isMouseDown = false\n  }\n\n  const mouseMoveEvent = (e: MouseEvent) => {\n    if (!state.isMouseDown) return\n    const deltaX = e.clientX - state.lastX\n    const deltaY = e.clientY - state.lastY\n    screenRef.value?.scrollBy(-deltaX, -deltaY)\n    state.lastX = e.clientX\n    state.lastY = e.clientY\n  }\n\n  // 处理键盘事件\n  const { space } = useMagicKeys({\n    passive: false,\n    onEventFired(e) {\n      if (e.code === 'Space' && e.type === 'keydown') {\n        e.preventDefault()\n      }\n    }\n  })\n\n  watch(space, (v) => {\n    state.isSpaceDown = v\n    editorRef.value!.style.cursor = v ? 'pointer' : 'default'\n    if (v) {\n      document.addEventListener('mousemove', mouseMoveEvent)\n    } else {\n      document.removeEventListener('mousemove', mouseMoveEvent)\n    }\n  })\n\n  onMounted(() => {\n    // 设计区域滚动居中\n    const containerRect = editorContaineRef.value!.getBoundingClientRect()\n    screenRef.value!.scrollLeft = containerRect.width / 2 - 100\n    screenRef.value!.scrollTop = containerRect.height / 2 - 160\n  })\n\n  return {\n    groupState,\n    editorScale,\n    contextMenuRef,\n    primitives,\n    screenRef,\n    editorRef,\n    sketchRulerRef,\n    editorContaineRef,\n    handleMouseUp,\n    handleMouseDown,\n    handleMouseWheel,\n    handleMouseScroll,\n    handleShowContextMenu\n  }\n}\n","import { useEditorScale } from '@/hooks/use-editor-scale'\nimport { Primitive } from '@/primitives/primitive'\nimport { Location } from '@/primitives/types'\nimport { useAreaSelectStore } from '@/store/area-select/index'\nimport { useEditorStore } from '@/store/editor/index'\nimport { getPrimitiveLocation } from '@/utils/primitive'\n\nexport function useGroup() {\n  const editorStore = useEditorStore()\n  const { transByCurScale, transAbsByCurScale } = useEditorScale()\n  const areaSelectStore = useAreaSelectStore()\n  const { primitives } = storeToRefs(editorStore)\n  const variables = reactive({\n    editorX: 0,\n    editorY: 0,\n    start: {\n      x: 0,\n      y: 0\n    },\n    width: 0,\n    height: 0\n  })\n\n  /**\n   * 开始绘制包围盒范围\n   * @param e MouseEvent\n   */\n  const onDrawGroupBoundry = (e: MouseEvent) => {\n    hideAreaSelect()\n\n    const editor = document.getElementById('editor')\n    const rectInfo = editor!.getBoundingClientRect()\n    const startX = e.clientX\n    const startY = e.clientY\n\n    variables.editorX = rectInfo.x\n    variables.editorY = rectInfo.y\n    variables.start.x = transByCurScale(startX - variables.editorX)\n    variables.start.y = transByCurScale(startY - variables.editorY)\n\n    areaSelectStore.setAreaSelectVisible(true)\n\n    const move = (moveEvent: MouseEvent) => {\n      variables.width = transAbsByCurScale(moveEvent.clientX - startX)\n      variables.height = transAbsByCurScale(moveEvent.clientY - startY)\n      if (moveEvent.clientX < startX) {\n        variables.start.x = transAbsByCurScale(\n          moveEvent.clientX - variables.editorX\n        )\n      }\n\n      if (moveEvent.clientY < startY) {\n        variables.start.y = transAbsByCurScale(\n          moveEvent.clientY - variables.editorY\n        )\n      }\n    }\n\n    const up = (e: MouseEvent) => {\n      document.removeEventListener('mousemove', move)\n      document.removeEventListener('mouseup', up)\n\n      if (e.clientX == startX && e.clientY == startY) {\n        hideAreaSelect()\n        return\n      }\n\n      saveAreaSelectData()\n    }\n\n    document.addEventListener('mousemove', move)\n    document.addEventListener('mouseup', up)\n  }\n\n  /**\n   * 隐藏包围盒子\n   */\n  const hideAreaSelect = () => {\n    variables.width = 0\n    variables.height = 0\n    areaSelectStore.setAreaSelectVisible(false)\n    areaSelectStore.setAreaSelectOptions(null, [])\n  }\n\n  /**\n   * 保存区域选择的数据\n   */\n  const saveAreaSelectData = () => {\n    // 获取选中区域的组件数据\n    const primitives = getInternalPrimitives()\n\n    if (primitives.length <= 1) {\n      hideAreaSelect()\n      return\n    }\n\n    let top = Infinity,\n      left = Infinity,\n      right = -Infinity,\n      bottom = -Infinity\n\n    primitives.forEach((primitive) => {\n      let style = {} as Location\n      if (primitive.cName === 'Group') {\n        primitive.childPrimitives?.forEach((item: Primitive) => {\n          const element = document.getElementById(`primitive${item.id}`)\n          const rectInfo = element!.getBoundingClientRect()\n\n          style.left = rectInfo.left - variables.editorX\n          style.top = rectInfo.top - variables.editorY\n          style.right = rectInfo.right - variables.editorX\n          style.bottom = rectInfo.bottom - variables.editorY\n\n          if (style.left < left) left = style.left\n          if (style.top < top) top = style.top\n          if (style.right > right) right = style.right\n          if (style.bottom > bottom) bottom = style.bottom\n        })\n      } else {\n        style = getPrimitiveLocation(primitive.style)\n      }\n      if (style.left < left) left = style.left\n      if (style.top < top) top = style.top\n      if (style.right > right) right = style.right\n      if (style.bottom > bottom) bottom = style.bottom\n    })\n\n    variables.start.x = left\n    variables.start.y = top\n    variables.width = right - left\n    variables.height = bottom - top\n\n    const style = {\n      left,\n      top,\n      width: variables.width,\n      height: variables.height\n    }\n    areaSelectStore.setAreaSelectOptions(style, primitives)\n  }\n\n  /**\n   * 获取当前回执包围盒内部的 primitive\n   * @returns Pimitive[]\n   */\n  const getInternalPrimitives = () => {\n    const { x, y } = variables.start\n    const allPrimitives = primitives.value as Primitive[]\n\n    return allPrimitives.filter((primitive) => {\n      const { left, top, width, height } = primitive.style\n      if (\n        x <= left &&\n        y <= top &&\n        left + width <= x + variables.width &&\n        top + height <= y + variables.height\n      )\n        return primitive\n    })\n  }\n\n  return {\n    groupState: variables,\n    onDrawGroupBoundry\n  }\n}\n","/*!vue3-sketch-ruler v1.3.62022年11月Fri Nov 04 2022 18:18:02 GMT+0800 (中国标准时间)制作*/\r\nimport { defineComponent, ref, onMounted, computed, reactive, watch } from \"vue-demi\";\r\nimport { withDirectives, openBlock, createElementBlock, normalizeStyle, createElementVNode, toDisplayString, vShow, resolveComponent, normalizeClass, createVNode, Fragment, renderList, createBlock } from \"vue\";\r\nvar rulerLine_vue_vue_type_style_index_0_scoped_true_lang = /* @__PURE__ */ (() => \".line[data-v-5dea28d6]{pointer-events:auto;position:absolute}.line .action[data-v-5dea28d6]{position:absolute;display:flex;justify-content:center;align-items:center}.line .value[data-v-5dea28d6]{pointer-events:none;transform:scale(.83)}.line .del[data-v-5dea28d6]{padding:3px 5px;cursor:pointer;visibility:hidden}.line:hover .del[data-v-5dea28d6]{visibility:visible}\\n\")();\r\nvar _export_sfc = (sfc, props) => {\r\n  const target = sfc.__vccOpts || sfc;\r\n  for (const [key, val] of props) {\r\n    target[key] = val;\r\n  }\r\n  return target;\r\n};\r\nconst _sfc_main$3 = defineComponent({\r\n  name: \"LineRuler\",\r\n  props: {\r\n    scale: Number,\r\n    thick: Number,\r\n    palette: Object,\r\n    index: Number,\r\n    start: Number,\r\n    vertical: Boolean,\r\n    value: Number,\r\n    isShowReferLine: Boolean\r\n  },\r\n  emits: [\"onMouseDown\", \"onRelease\", \"onRemove\"],\r\n  setup(props, { emit }) {\r\n    const startValue = ref(0);\r\n    const showLine = ref(true);\r\n    onMounted(() => {\r\n      startValue.value = props.value;\r\n    });\r\n    const setShowLine = (offset2) => {\r\n      showLine.value = offset2 >= 0;\r\n    };\r\n    const offset = computed(() => {\r\n      const offset2 = (startValue.value - props.start) * props.scale;\r\n      setShowLine(offset2);\r\n      const positionValue = offset2 + \"px\";\r\n      const position = props.vertical ? { top: positionValue } : { left: positionValue };\r\n      return position;\r\n    });\r\n    const borderCursor = computed(() => {\r\n      var _a;\r\n      const borderValue = `1px solid ${(_a = props.palette) == null ? void 0 : _a.lineColor}`;\r\n      const border = props.vertical ? { borderTop: borderValue } : { borderLeft: borderValue };\r\n      const cursorValue = props.isShowReferLine ? props.vertical ? \"ns-resize\" : \"ew-resize\" : \"none\";\r\n      return {\r\n        cursor: cursorValue,\r\n        ...border\r\n      };\r\n    });\r\n    const actionStyle = computed(() => {\r\n      const actionStyle2 = props.vertical ? { left: props.thick + \"px\" } : { top: props.thick + \"px\" };\r\n      return actionStyle2;\r\n    });\r\n    const handleDown = (e) => {\r\n      const startD = props.vertical ? e.clientY : e.clientX;\r\n      const initValue = startValue.value;\r\n      emit(\"onMouseDown\");\r\n      const onMove = (e2) => {\r\n        const currentD = props.vertical ? e2.clientY : e2.clientX;\r\n        const newValue = Math.round(initValue + (currentD - startD) / props.scale);\r\n        startValue.value = newValue;\r\n      };\r\n      const onEnd = () => {\r\n        emit(\"onRelease\", startValue.value, props.index);\r\n        document.removeEventListener(\"mousemove\", onMove);\r\n        document.removeEventListener(\"mouseup\", onEnd);\r\n      };\r\n      document.addEventListener(\"mousemove\", onMove);\r\n      document.addEventListener(\"mouseup\", onEnd);\r\n    };\r\n    const handleRemove = () => {\r\n      emit(\"onRemove\", props.index);\r\n    };\r\n    return {\r\n      startValue,\r\n      showLine,\r\n      offset,\r\n      borderCursor,\r\n      actionStyle,\r\n      handleDown,\r\n      handleRemove\r\n    };\r\n  }\r\n});\r\nconst _hoisted_1$2 = { class: \"value\" };\r\nfunction _sfc_render$3(_ctx, _cache, $props, $setup, $data, $options) {\r\n  return withDirectives((openBlock(), createElementBlock(\"div\", {\r\n    class: \"line\",\r\n    style: normalizeStyle([_ctx.offset, _ctx.borderCursor]),\r\n    onMousedown: _cache[1] || (_cache[1] = (...args) => _ctx.handleDown && _ctx.handleDown(...args))\r\n  }, [\r\n    createElementVNode(\"div\", {\r\n      class: \"action\",\r\n      style: normalizeStyle(_ctx.actionStyle)\r\n    }, [\r\n      createElementVNode(\"span\", {\r\n        class: \"del\",\r\n        onClick: _cache[0] || (_cache[0] = (...args) => _ctx.handleRemove && _ctx.handleRemove(...args))\r\n      }, \"\\xD7\"),\r\n      createElementVNode(\"span\", _hoisted_1$2, toDisplayString(_ctx.startValue), 1)\r\n    ], 4)\r\n  ], 36)), [\r\n    [vShow, _ctx.showLine]\r\n  ]);\r\n}\r\nvar RulerLine = /* @__PURE__ */ _export_sfc(_sfc_main$3, [[\"render\", _sfc_render$3], [\"__scopeId\", \"data-v-5dea28d6\"]]);\r\nconst getGridSize = (scale) => {\r\n  if (scale <= 0.25)\r\n    return 40;\r\n  if (scale <= 0.5)\r\n    return 20;\r\n  if (scale <= 1)\r\n    return 10;\r\n  if (scale <= 2)\r\n    return 5;\r\n  if (scale <= 4)\r\n    return 2;\r\n  return 1;\r\n};\r\nconst FONT_SCALE = 0.83;\r\nconst drawCavaseRuler = (ctx, start, selectStart, selectLength, options, h) => {\r\n  const { scale, width, height, ratio, palette } = options;\r\n  const { bgColor, fontColor, shadowColor, longfgColor, shortfgColor } = palette;\r\n  ctx.scale(ratio, ratio);\r\n  ctx.clearRect(0, 0, width, height);\r\n  ctx.fillStyle = bgColor;\r\n  ctx.fillRect(0, 0, width, height);\r\n  if (selectLength) {\r\n    const shadowX = (selectStart - start) * scale;\r\n    const shadowWidth = selectLength * scale;\r\n    ctx.fillStyle = shadowColor;\r\n    h ? ctx.fillRect(shadowX, 0, shadowWidth, height * 3 / 8) : ctx.fillRect(0, shadowX, width * 3 / 8, shadowWidth);\r\n  }\r\n  const gridSize = getGridSize(scale);\r\n  const gridPixel = gridSize * scale;\r\n  const gridSize10 = gridSize * 10;\r\n  const gridPixel10 = gridSize10 * scale;\r\n  const startValue = Math.floor(start / gridSize) * gridSize;\r\n  const startValue10 = Math.floor(start / gridSize10) * gridSize10;\r\n  const offsetX = (startValue - start) / gridSize * gridPixel;\r\n  const offsetX10 = (startValue10 - start) / gridSize10 * gridPixel10;\r\n  const endValue = start + Math.ceil((h ? width : height) / scale);\r\n  ctx.beginPath();\r\n  ctx.fillStyle = fontColor;\r\n  ctx.strokeStyle = longfgColor;\r\n  for (let value = startValue10, count = 0; value < endValue; value += gridSize10, count++) {\r\n    const x = offsetX10 + count * gridPixel10 + 0.5;\r\n    h ? ctx.moveTo(x, 0) : ctx.moveTo(0, x);\r\n    ctx.save();\r\n    h ? ctx.translate(x, height * 0.4) : ctx.translate(width * 0.4, x);\r\n    if (!h) {\r\n      ctx.rotate(-Math.PI / 2);\r\n    }\r\n    ctx.scale(FONT_SCALE / ratio, FONT_SCALE / ratio);\r\n    ctx.fillText(value.toString(), 4 * ratio, 7 * ratio);\r\n    ctx.restore();\r\n    h ? ctx.lineTo(x, height * 9 / 16) : ctx.lineTo(width * 9 / 16, x);\r\n  }\r\n  ctx.stroke();\r\n  ctx.closePath();\r\n  ctx.beginPath();\r\n  ctx.strokeStyle = shortfgColor;\r\n  for (let value = startValue, count = 0; value < endValue; value += gridSize, count++) {\r\n    const x = offsetX + count * gridPixel + 0.5;\r\n    h ? ctx.moveTo(x, 0) : ctx.moveTo(0, x);\r\n    if (value % gridSize10 !== 0) {\r\n      h ? ctx.lineTo(x, height * 1 / 4) : ctx.lineTo(width * 1 / 4, x);\r\n    }\r\n  }\r\n  ctx.stroke();\r\n  ctx.closePath();\r\n  ctx.setTransform(1, 0, 0, 1, 0, 0);\r\n};\r\nconst _sfc_main$2 = defineComponent({\r\n  name: \"CanvasRuler\",\r\n  props: {\r\n    showIndicator: Boolean,\r\n    valueNum: Number,\r\n    scale: Number,\r\n    ratio: Number,\r\n    palette: Object,\r\n    vertical: Boolean,\r\n    start: Number,\r\n    width: Number,\r\n    height: Number,\r\n    selectStart: Number,\r\n    selectLength: Number\r\n  },\r\n  emits: [\"onAddLine\", \"update:showIndicator\", \"update:valueNum\"],\r\n  setup(props, { emit }) {\r\n    const state = reactive({\r\n      canvasContext: null\r\n    });\r\n    let ratio = 1;\r\n    const canvas = ref(null);\r\n    onMounted(() => {\r\n      ratio = props.ratio || window.devicePixelRatio || 1;\r\n      initCanvasRef();\r\n      updateCanvasContext(ratio);\r\n      drawRuler(ratio);\r\n    });\r\n    const initCanvasRef = () => {\r\n      state.canvasContext = canvas.value && canvas.value.getContext(\"2d\");\r\n    };\r\n    const updateCanvasContext = (ratio2) => {\r\n      if (canvas.value) {\r\n        canvas.value.width = props.width * ratio2;\r\n        canvas.value.height = props.height * ratio2;\r\n        const ctx = state.canvasContext;\r\n        if (ctx) {\r\n          ctx.font = `${12 * ratio2}px -apple-system,\r\n                \"Helvetica Neue\", \".SFNSText-Regular\",\r\n                \"SF UI Text\", Arial, \"PingFang SC\", \"Hiragino Sans GB\",\r\n                \"Microsoft YaHei\", \"WenQuanYi Zen Hei\", sans-serif`;\r\n          ctx.lineWidth = 1;\r\n          ctx.textBaseline = \"middle\";\r\n        }\r\n      }\r\n    };\r\n    const drawRuler = (ratio2) => {\r\n      const options = {\r\n        scale: props.scale,\r\n        width: props.width,\r\n        height: props.height,\r\n        palette: props.palette,\r\n        ratio: ratio2\r\n      };\r\n      if (state.canvasContext) {\r\n        drawCavaseRuler(state.canvasContext, props.start, props.selectStart, props.selectLength, options, !props.vertical);\r\n      }\r\n    };\r\n    watch(() => props.start, () => drawRuler(ratio));\r\n    watch([() => props.width, () => props.height], () => {\r\n      updateCanvasContext(ratio);\r\n      drawRuler(ratio);\r\n    });\r\n    const handle = (e, key) => {\r\n      const getValueByOffset = (offset2, start, scale) => Math.round(start + offset2 / scale);\r\n      const offset = props.vertical ? e.offsetY : e.offsetX;\r\n      const value = getValueByOffset(offset, props.start, props.scale);\r\n      switch (key) {\r\n        case \"click\":\r\n          emit(\"onAddLine\", value);\r\n          break;\r\n        case \"enter\":\r\n          emit(\"update:valueNum\", value);\r\n          emit(\"update:showIndicator\", true);\r\n          break;\r\n        default:\r\n          emit(\"update:valueNum\", value);\r\n          break;\r\n      }\r\n    };\r\n    return {\r\n      handle,\r\n      canvas\r\n    };\r\n  }\r\n});\r\nfunction _sfc_render$2(_ctx, _cache, $props, $setup, $data, $options) {\r\n  return openBlock(), createElementBlock(\"canvas\", {\r\n    ref: \"canvas\",\r\n    class: \"ruler\",\r\n    onClick: _cache[0] || (_cache[0] = ($event) => _ctx.handle($event, \"click\")),\r\n    onMouseenter: _cache[1] || (_cache[1] = ($event) => _ctx.handle($event, \"enter\")),\r\n    onMousemove: _cache[2] || (_cache[2] = ($event) => _ctx.handle($event, \"move\")),\r\n    onMouseleave: _cache[3] || (_cache[3] = ($event) => _ctx.$emit(\"update:showIndicator\", false))\r\n  }, null, 544);\r\n}\r\nvar CanvasRuler = /* @__PURE__ */ _export_sfc(_sfc_main$2, [[\"render\", _sfc_render$2]]);\r\nconst wrapperProps = {\r\n  scale: Number,\r\n  ratio: Number,\r\n  thick: Number,\r\n  palette: Object,\r\n  vertical: {\r\n    type: Boolean,\r\n    default: true\r\n  },\r\n  width: {\r\n    type: Number,\r\n    default: 200\r\n  },\r\n  height: {\r\n    type: Number,\r\n    default: 200\r\n  },\r\n  start: {\r\n    type: Number,\r\n    default: 0\r\n  },\r\n  lines: {\r\n    type: Array,\r\n    default: () => []\r\n  },\r\n  selectStart: {\r\n    type: Number\r\n  },\r\n  selectLength: {\r\n    type: Number\r\n  },\r\n  isShowReferLine: {\r\n    type: Boolean\r\n  }\r\n};\r\nvar rulerWrapper_vue_vue_type_style_index_0_scoped_true_lang = /* @__PURE__ */ (() => \".line[data-v-b6c23352],.h-container[data-v-b6c23352],.v-container[data-v-b6c23352]{position:absolute}.h-container .lines[data-v-b6c23352],.v-container .lines[data-v-b6c23352]{pointer-events:none}.h-container:hover .lines[data-v-b6c23352],.v-container:hover .lines[data-v-b6c23352]{pointer-events:auto}.h-container[data-v-b6c23352]{top:0}.h-container .line[data-v-b6c23352]{top:0;height:100vh;padding-left:5px}.h-container .line .action[data-v-b6c23352]{transform:translate(-24px)}.h-container .line .action .value[data-v-b6c23352]{margin-left:4px}.h-container .indicator[data-v-b6c23352]{top:0;height:100vw}.h-container .indicator .value[data-v-b6c23352]{width:auto;padding:0 2px;margin-top:4px;margin-left:4px}.v-container[data-v-b6c23352]{left:0}.v-container .line[data-v-b6c23352]{left:0;width:100vw;padding-top:5px}.v-container .line .action[data-v-b6c23352]{transform:translateY(-24px);flex-direction:column}.v-container .line .action .value[data-v-b6c23352]{margin-top:4px}.v-container .indicator[data-v-b6c23352]{width:100vw}.v-container .indicator .value[data-v-b6c23352]{left:0;width:auto;padding:0 2px;margin-top:-5px;margin-left:2px;transform:rotate(-90deg);transform-origin:0 0}\\n\")();\r\nconst _sfc_main$1 = defineComponent({\r\n  name: \"RulerWrapper\",\r\n  components: {\r\n    CanvasRuler,\r\n    RulerLine\r\n  },\r\n  props: wrapperProps,\r\n  setup(props) {\r\n    const showIndicator = ref(false);\r\n    const valueNum = ref(0);\r\n    const rwClassName = computed(() => {\r\n      const className = props.vertical ? \"v-container\" : \"h-container\";\r\n      return className;\r\n    });\r\n    const rwStyle = computed(() => {\r\n      const hContainer = {\r\n        width: `calc(100% - ${props.thick}px)`,\r\n        height: `${props.thick + 1}px`,\r\n        left: `${props.thick}px`\r\n      };\r\n      const vContainer = {\r\n        width: `${props.thick && props.thick + 1}px`,\r\n        height: `calc(100% - ${props.thick}px)`,\r\n        top: `${props.thick}px`\r\n      };\r\n      return props.vertical ? vContainer : hContainer;\r\n    });\r\n    const indicatorStyle = computed(() => {\r\n      var _a;\r\n      const indicatorOffset = (valueNum.value - props.start) * props.scale;\r\n      let positionKey = \"top\";\r\n      let boderKey = \"borderLeft\";\r\n      positionKey = props.vertical ? \"top\" : \"left\";\r\n      boderKey = props.vertical ? \"borderBottom\" : \"borderLeft\";\r\n      return {\r\n        [positionKey]: indicatorOffset + \"px\",\r\n        [boderKey]: `1px solid ${(_a = props.palette) == null ? void 0 : _a.lineColor}`\r\n      };\r\n    });\r\n    const handleNewLine = (value) => {\r\n      props.lines.push(value);\r\n    };\r\n    const handleLineRelease = (value, index) => {\r\n      const offset = value - props.start;\r\n      const maxOffset = (props.vertical ? props.height : props.width) / props.scale;\r\n      if (offset < 0 || offset > maxOffset) {\r\n        handleLineRemove(index);\r\n      } else {\r\n        props.lines[index] = value;\r\n      }\r\n    };\r\n    const handleLineRemove = (index) => {\r\n      props.lines.splice(index, 1);\r\n    };\r\n    return {\r\n      showIndicator,\r\n      valueNum,\r\n      rwClassName,\r\n      rwStyle,\r\n      indicatorStyle,\r\n      handleNewLine,\r\n      handleLineRelease,\r\n      handleLineRemove\r\n    };\r\n  }\r\n});\r\nconst _hoisted_1$1 = { class: \"lines\" };\r\nconst _hoisted_2 = { class: \"value\" };\r\nfunction _sfc_render$1(_ctx, _cache, $props, $setup, $data, $options) {\r\n  const _component_CanvasRuler = resolveComponent(\"CanvasRuler\");\r\n  const _component_RulerLine = resolveComponent(\"RulerLine\");\r\n  return openBlock(), createElementBlock(\"div\", {\r\n    class: normalizeClass(_ctx.rwClassName),\r\n    style: normalizeStyle(_ctx.rwStyle)\r\n  }, [\r\n    createVNode(_component_CanvasRuler, {\r\n      vertical: _ctx.vertical,\r\n      scale: _ctx.scale,\r\n      width: _ctx.width,\r\n      height: _ctx.height,\r\n      start: _ctx.start,\r\n      ratio: _ctx.ratio,\r\n      \"select-start\": _ctx.selectStart,\r\n      \"select-length\": _ctx.selectLength,\r\n      palette: _ctx.palette,\r\n      valueNum: _ctx.valueNum,\r\n      \"onUpdate:valueNum\": _cache[0] || (_cache[0] = ($event) => _ctx.valueNum = $event),\r\n      showIndicator: _ctx.showIndicator,\r\n      \"onUpdate:showIndicator\": _cache[1] || (_cache[1] = ($event) => _ctx.showIndicator = $event),\r\n      onOnAddLine: _ctx.handleNewLine\r\n    }, null, 8, [\"vertical\", \"scale\", \"width\", \"height\", \"start\", \"ratio\", \"select-start\", \"select-length\", \"palette\", \"valueNum\", \"showIndicator\", \"onOnAddLine\"]),\r\n    withDirectives(createElementVNode(\"div\", _hoisted_1$1, [\r\n      (openBlock(true), createElementBlock(Fragment, null, renderList(_ctx.lines, (v, i) => {\r\n        return openBlock(), createBlock(_component_RulerLine, {\r\n          key: v + i,\r\n          index: i,\r\n          value: v >> 0,\r\n          scale: _ctx.scale,\r\n          start: _ctx.start,\r\n          thick: _ctx.thick,\r\n          palette: _ctx.palette,\r\n          vertical: _ctx.vertical,\r\n          \"is-show-refer-line\": _ctx.isShowReferLine,\r\n          onOnRemove: _ctx.handleLineRemove,\r\n          onOnRelease: _ctx.handleLineRelease\r\n        }, null, 8, [\"index\", \"value\", \"scale\", \"start\", \"thick\", \"palette\", \"vertical\", \"is-show-refer-line\", \"onOnRemove\", \"onOnRelease\"]);\r\n      }), 128))\r\n    ], 512), [\r\n      [vShow, _ctx.isShowReferLine]\r\n    ]),\r\n    withDirectives(createElementVNode(\"div\", {\r\n      class: \"indicator\",\r\n      style: normalizeStyle(_ctx.indicatorStyle)\r\n    }, [\r\n      createElementVNode(\"div\", _hoisted_2, toDisplayString(_ctx.valueNum), 1)\r\n    ], 4), [\r\n      [vShow, _ctx.showIndicator]\r\n    ])\r\n  ], 6);\r\n}\r\nvar RulerWrapper = /* @__PURE__ */ _export_sfc(_sfc_main$1, [[\"render\", _sfc_render$1], [\"__scopeId\", \"data-v-b6c23352\"]]);\r\nconst eye64 = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAAAXNSR0IArs4c6QAAAopJREFUOE/FlE9IVEEcx7+/N9ouds1Mu0QUSFZYdIgoUqQoKPBQHsKozpXE7jbTO/U8xLJvn6usBHWQ6hBFXupSkQeVbh0KJEPp0sH+eLGTsKs77xcj78m0ax0E8cHjzZv5zef3/c33xxA24KENYGJzoEEQbNNaN4Zh2OQ4znwYhr9c1/39vwrXVDo0NNS0tLR0GYB5D64BmAMwzMyvlFKz1es10Hw+f4mZ7wHYBeA9gNdENFepVOaEEM3M3OI4Thczn41gt6WUgQ3+C+r7/h0AWQD3mXnYqPA8L9nQ0HCemduIaFpKOWoAhUJhT6VSuQXgOjP3K6W8GLwKzeVyp4jonR0QBEErM48w8zFLyayUsjX+z+VyHhHdZebTSqkxM78CHRgYOKS1/ghgVErZY214RkQ7ADyRUj72ff8qgCtmXUrZGcf5vv8CwEUhxOF0Ov1pBRpla5dSdseBhUJhpznH6tIsZb1KqacW+BGArUaUXX63UuplHJTNZjuEEONSyhozfd/n6mQ1RkXZL2itz7mu+80EDA4ONi8vL/8AcM2UbikyR2BU9cSmmTU70YqKIAj2hWFo2uenlHK/BRg3Y2aeNO5GyU8S0ZbFxcUuz/NKEXAGQKPjOCcymcyX1dIi8DSAiWQyeaavr68cbSgCuBknYubnQoj+TCYzUywWE6VS6S2ADsdx2gxw1X3L7SNENMbMnwE8qK+vf5NKpRaMaeVyeW8ikfiaSqW+R7BuZr5BRMe11p2u607U9Gk8kc/ntzPzQwCmExYATDLzVBiGE0KIowAOADDf3QA+aK2VDaxRajto3K+rq+tl5nYAzQBamHmeiOYBTGmtR6ph/1Rqg9c73pz7dD1qN0TpHyNQRCUDJXrAAAAAAElFTkSuQmCC`;\r\nconst closeEye64 = `data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAAAAXNSR0IArs4c6QAAAjtJREFUOE/NlD9oFEEUxn9v9ghC0hpRUogIAUmniGAT/5Q2FrETPSNRJILg7RwimI0ox85eQFCEBGIUO1PYpFM0jSConQoBEZGgGPsgl+w+2eM2bC57SopAFqYZ3v7m+977ZoQt+GQLmGxPaBiGgYiMWWvXBHZUGoZhH3BERPYC+4F+4Keq/urt7b1RLpf/ZEBVHa9Wq0HWyg3QKIoGVPU8cA7wgK/pUtXPQJ8xZk+pVBpuNBqXUoUiEvi+P56fzTpo6+SbwHNg1lo7WzTITGEKXFlZeeB53tVCpa3CK8AFa+1cBgvD8LKIXAQOJkkyICJDeYVBEJS6u7s/qeoLa+1o+l9TqXNuBLhmjDlbqVQ+5ICjInIfOBPH8W9jzGCR5YmJiRNxHM+papgqzqDvgSlr7VTernPuO3An3c9bBt74vv+yrdaKyLDv+/1Sq9UGPc97nY9EVuycU2AQOA7cAm4Dr4D5TvVxHB9rKo2iaEFVp621Ln96FEUngaOqGmSxabVqsh3a2h+x1h5qQjNrae/yE4+iaCwDJkky73neTuBZe129Xk+H+BS4l7ZqLVIZ2BhzuFKpvMsDVXXWGPMxFdAedOfcKeCRqj7MYrUhpz09PfXl5eXrectFWXXODQHpOq2qd/95o/JXr6ura3J1dXU6SZIfwKKIHAD2tVYMPBGRx77vN10UXtO85fTkmZmZHUtLSzUR2QXsBhaAL6r6DXhbrVYXi1yss59GqOgub/bN3Z7v6X/tb9Zmp/q/kN8s+lJb8oEAAAAASUVORK5CYII=`;\r\nconst sketchRulerProps = {\r\n  eyeIcon: {\r\n    type: String\r\n  },\r\n  closeEyeIcon: {\r\n    type: String\r\n  },\r\n  scale: {\r\n    type: Number,\r\n    default: 1\r\n  },\r\n  ratio: {\r\n    type: Number\r\n  },\r\n  thick: {\r\n    type: Number,\r\n    default: 16\r\n  },\r\n  palette: Object,\r\n  startX: {\r\n    type: Number\r\n  },\r\n  startY: {\r\n    type: Number,\r\n    default: 0\r\n  },\r\n  width: {\r\n    type: Number,\r\n    default: 200\r\n  },\r\n  height: {\r\n    type: Number,\r\n    default: 200\r\n  },\r\n  shadow: {\r\n    type: Object,\r\n    default: () => {\r\n      return {\r\n        x: 0,\r\n        y: 0,\r\n        width: 0,\r\n        height: 0\r\n      };\r\n    }\r\n  },\r\n  lines: {\r\n    type: Object,\r\n    default: () => {\r\n      return {\r\n        h: [],\r\n        v: []\r\n      };\r\n    }\r\n  },\r\n  isShowReferLine: {\r\n    type: Boolean,\r\n    default: true\r\n  }\r\n};\r\nvar index_vue_vue_type_style_index_0_lang = /* @__PURE__ */ (() => '@charset \"UTF-8\";.style-ruler{position:absolute;z-index:3;width:100%;height:100%;overflow:hidden;font-size:12px;pointer-events:none}.style-ruler span{line-height:1}.corner{position:absolute;top:0;left:0;pointer-events:auto;cursor:pointer;box-sizing:content-box;transition:all .2s ease-in-out}.indicator{position:absolute;pointer-events:none}.indicator .value{position:absolute;background:white}.ruler{width:100%;height:100%;pointer-events:auto}\\n')();\r\nconst _sfc_main = defineComponent({\r\n  name: \"SketchRule\",\r\n  components: {\r\n    RulerWrapper\r\n  },\r\n  props: sketchRulerProps,\r\n  emits: [\"onCornerClick\"],\r\n  setup(props, { emit }) {\r\n    let showReferLine = ref(true);\r\n    showReferLine.value = props.isShowReferLine;\r\n    const paletteCpu = computed(() => {\r\n      function merge(obj, o) {\r\n        Object.keys(obj).forEach((key) => {\r\n          if (key && obj.hasOwnProperty(key)) {\r\n            if (typeof o[\"key\"] === \"object\") {\r\n              obj[key] = merge(obj[key], o[key]);\r\n            } else if (o.hasOwnProperty(key)) {\r\n              obj[key] = o[key];\r\n            }\r\n          }\r\n        });\r\n        return obj;\r\n      }\r\n      const finalObj = merge({\r\n        bgColor: \"rgba(225,225,225, 0)\",\r\n        longfgColor: \"#BABBBC\",\r\n        shortfgColor: \"#C8CDD0\",\r\n        fontColor: \"#7D8694\",\r\n        shadowColor: \"#E8E8E8\",\r\n        lineColor: \"#EB5648\",\r\n        borderColor: \"#DADADC\",\r\n        cornerActiveColor: \"rgb(235, 86, 72, 0.6)\",\r\n        menu: {\r\n          bgColor: \"#fff\",\r\n          dividerColor: \"#DBDBDB\",\r\n          listItem: {\r\n            textColor: \"#415058\",\r\n            hoverTextColor: \"#298DF8\",\r\n            disabledTextColor: \"rgba(65, 80, 88, 0.4)\",\r\n            bgColor: \"#fff\",\r\n            hoverBgColor: \"#F2F2F2\"\r\n          }\r\n        }\r\n      }, props.palette || {});\r\n      return finalObj;\r\n    });\r\n    const cornerStyle = computed(() => {\r\n      return {\r\n        backgroundImage: showReferLine.value ? `url(${props.eyeIcon || eye64})` : `url(${props.closeEyeIcon || closeEye64})`,\r\n        width: props.thick + \"px\",\r\n        height: props.thick + \"px\",\r\n        borderRight: `1px solid ${paletteCpu.value.borderColor}`,\r\n        borderBottom: `1px solid ${paletteCpu.value.borderColor}`\r\n      };\r\n    });\r\n    const onCornerClick = (e) => {\r\n      showReferLine.value = !showReferLine.value;\r\n      emit(\"onCornerClick\", showReferLine.value);\r\n    };\r\n    watch([() => props.isShowReferLine], () => {\r\n      showReferLine.value = props.isShowReferLine;\r\n    });\r\n    return {\r\n      showReferLine,\r\n      paletteCpu,\r\n      cornerStyle,\r\n      onCornerClick\r\n    };\r\n  }\r\n});\r\nconst _hoisted_1 = {\r\n  id: \"mb-ruler\",\r\n  class: \"style-ruler mb-ruler\"\r\n};\r\nfunction _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {\r\n  const _component_RulerWrapper = resolveComponent(\"RulerWrapper\");\r\n  return openBlock(), createElementBlock(\"div\", _hoisted_1, [\r\n    createVNode(_component_RulerWrapper, {\r\n      vertical: false,\r\n      width: _ctx.width,\r\n      height: _ctx.thick,\r\n      \"is-show-refer-line\": _ctx.showReferLine,\r\n      thick: _ctx.thick,\r\n      ratio: _ctx.ratio,\r\n      start: _ctx.startX,\r\n      lines: _ctx.lines.h,\r\n      \"select-start\": _ctx.shadow.x,\r\n      \"select-length\": _ctx.shadow.width,\r\n      scale: _ctx.scale,\r\n      palette: _ctx.paletteCpu\r\n    }, null, 8, [\"width\", \"height\", \"is-show-refer-line\", \"thick\", \"ratio\", \"start\", \"lines\", \"select-start\", \"select-length\", \"scale\", \"palette\"]),\r\n    createVNode(_component_RulerWrapper, {\r\n      vertical: true,\r\n      width: _ctx.thick,\r\n      height: _ctx.height,\r\n      \"is-show-refer-line\": _ctx.showReferLine,\r\n      thick: _ctx.thick,\r\n      ratio: _ctx.ratio,\r\n      start: _ctx.startY,\r\n      lines: _ctx.lines.v,\r\n      \"select-start\": _ctx.shadow.y,\r\n      \"select-length\": _ctx.shadow.height,\r\n      scale: _ctx.scale,\r\n      palette: _ctx.paletteCpu\r\n    }, null, 8, [\"width\", \"height\", \"is-show-refer-line\", \"thick\", \"ratio\", \"start\", \"lines\", \"select-start\", \"select-length\", \"scale\", \"palette\"]),\r\n    createElementVNode(\"a\", {\r\n      class: \"corner\",\r\n      style: normalizeStyle(_ctx.cornerStyle),\r\n      onClick: _cache[0] || (_cache[0] = (...args) => _ctx.onCornerClick && _ctx.onCornerClick(...args))\r\n    }, null, 4)\r\n  ]);\r\n}\r\nvar SketchRule = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"render\", _sfc_render]]);\r\nexport { SketchRule, SketchRule as default };\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAA7ElEQVQ4je3SvS5EURSG4ccMmXYUQ0hoRoErEXMJ4iaE6GVqYlTojWugEf8/LZdApRLKCcVZh5PJOScTjUjmTb5irb3X2t/eezHkXzGHHTzhI/SIbTSLiio5uSrauMIbVtAIreId19iKvaVU0MUJJkr2TeIURwWmvtnEGWoRj+MAL3jGPuqxVsM5NspOfcVMxKO4xS6mQh3c+LnqbNQ08hquh5uUVjjIMoJLLGdyh1hLg+z9F3Cciedx39fwE3exltLFYp7Dflq4GMDhwFQlb9jBdGhPMjKF41L25T0sSX7zITQW7nq/cTjkj/gC6vIqCPem75wAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAABEUlEQVQ4jdXTu0oDQRiG4ccDBqw8YAIWWkgaBcHeYrG1iQRyARbegdjnAhRLRUEQjHoLIoh4QBRRFCvRWo2Fhb1FJjAGlqSIYF5YZv+Z4eX7d2foJO6RtFM4izfM/XtpgvcwTuAB3+F5xGqYb5luHARBXTqAfsygrNZFGT3NZF2o4BjFKGkjORxhLwRIZQVnyIS6GCWdxwYGw1oGp1hOk+XwgfFQ9+IWO1HSRVyENRhDFSN1SfwNlvCJ3VAXMI0FXOMQm3hFFs/4Qh6juNTQ/xT2ozqPq/B+glKQvuA82lfBZFrbMYUgiklCqqQVQSN9uMGaWktZrONJ+t9vyhC2g6CKLQz7ffjbRmfd/bt2Cv+WH7FAOwOy5F6RAAAAAElFTkSuQmCC\"","import 'vue3-sketch-ruler/lib/style.css'\n\nimport { SketchRule } from 'vue3-sketch-ruler'\n\nimport eyeIcon from '@/assets/images/editor/eye.png'\nimport closeEyeIcon from '@/assets/images/editor/eyeOffSharp.png'\nimport { useEditorScale } from '@/hooks/use-editor-scale'\nimport { useEditorStore } from '@/store/editor/index'\nimport { useThemeStore } from '@/store/theme'\n\nimport styles from './index.module.scss'\n\nexport default defineComponent({\n  name: 'SketchRuler',\n  setup() {\n    const state = reactive({\n      thick: 16,\n      startX: ref(0),\n      startY: ref(0),\n      lines: reactive({ h: [], v: [] })\n    })\n\n    const editorStore = useEditorStore()\n    const themeStore = useThemeStore()\n    const { editorScale } = storeToRefs(editorStore)\n    const { transByCurScale } = useEditorScale()\n\n    // 页面滚动事件\n    const handleResizeRuler = () => {\n      const screensRect = document\n        .querySelector('#screen')\n        ?.getBoundingClientRect()\n      const canvasRect = document\n        .querySelector('#editor')\n        ?.getBoundingClientRect()\n\n      // 标尺开始的刻度\n      state.startX = transByCurScale(\n        screensRect!.left + state.thick - canvasRect!.left\n      )\n\n      state.startY = transByCurScale(\n        screensRect!.top + state.thick - canvasRect!.top\n      )\n    }\n\n    // 计算画布大小\n    const containerRect = computed(() => {\n      const screenRef = document.getElementById('screen')\n      return {\n        width: screenRef?.clientWidth,\n        height: screenRef?.clientHeight\n      }\n    })\n\n    const paletteStyle = computed(() =>\n      themeStore.darkTheme\n        ? {\n            bgColor: '#18181c',\n            longfgColor: '#4d4d4d',\n            shortfgColor: '#4d4d4d',\n            fontColor: '#4d4d4d',\n            shadowColor: '#18181c',\n            borderColor: '#18181c',\n            cornerActiveColor: '#18181c'\n          }\n        : {\n            bgColor: '#fff',\n            longfgColor: '#cbcbcb',\n            shortfgColor: '#cbcbcb',\n            fontColor: '#ababab',\n            shadowColor: '#fff',\n            borderColor: '#e2e2e2',\n            cornerActiveColor: 'blue'\n          }\n    )\n\n    return {\n      ...toRefs(state),\n      editorScale,\n      containerRect,\n      handleResizeRuler,\n      paletteStyle,\n      eyeIcon,\n      closeEyeIcon\n    }\n  },\n  render() {\n    return (\n      <SketchRule\n        class={styles.sketchRule}\n        thick={this.thick}\n        eyeIcon={eyeIcon}\n        closeEyeIcon={closeEyeIcon}\n        scale={this.editorScale / 100}\n        width={this.containerRect?.width}\n        height={this.containerRect?.height}\n        startX={this.startX}\n        startY={this.startY}\n        lines={this.lines}\n        cornerActive={true}\n        palette={this.paletteStyle}\n      />\n    )\n  }\n})\n","import { Primitive } from '@/primitives/primitive'\nimport { PrimitiveStyle } from '@/primitives/types'\nimport { useAreaSelectStore } from '@/store/area-select/index'\nimport { getBoundBoxStyle, getStyle } from '@/utils/primitive'\n\nimport AreaSelect from './AreaSelect'\nimport AuxiliaryLine from './AuxiliaryLine/index'\nimport BoundBox from './BoundBox/index'\nimport ContextMenu from './ContextMenu/index'\nimport { useMouseEvent } from './hooks/use-mouse-event'\nimport styles from './index.module.scss'\nimport SketchRuler from './SketchRuler/index'\n\nexport default defineComponent({\n  name: 'Editor',\n  components: { SketchRuler, AreaSelect, ContextMenu },\n  setup() {\n    const rulerVisible = ref(false)\n    const areaSelectStore = useAreaSelectStore()\n    const { areaSelectVisible } = storeToRefs(areaSelectStore)\n    const styleFilterAttrs = ['width', 'height', 'top', 'left']\n\n    const { groupState, editorScale, contextMenuRef, ...rest } = useMouseEvent()\n\n    // 关闭右键菜单\n    const handleCloseContextMenu = () => {\n      contextMenuRef.value?.close()\n    }\n\n    // 编辑器样式\n    const editorStyle = computed(() => ({\n      transform: `scale(${editorScale.value / 100})`\n    }))\n\n    // 获取每个组件的样式\n    const getPrimitiveStyle = (style: PrimitiveStyle) =>\n      getStyle(style, styleFilterAttrs)\n\n    nextTick(() => (rulerVisible.value = true))\n\n    return {\n      ...rest,\n      groupState,\n      editorStyle,\n      rulerVisible,\n      contextMenuRef,\n      getPrimitiveStyle,\n      areaSelectVisible,\n      handleCloseContextMenu\n    }\n  },\n  render() {\n    const renderPrimitive = (item: Primitive) =>\n      h(resolveComponent(item.cName), {\n        id: `primitive${item.id}`,\n        class: styles.primitive,\n        style: this.getPrimitiveStyle(item.style),\n        'data-context': item.cName,\n        dataSource: item\n      })\n\n    const renderPrimitives = () =>\n      this.primitives.map((item, index) => (\n        <BoundBox\n          index={index}\n          style={getBoundBoxStyle(item.style)}\n          primitive={item as Primitive}\n          pStyle={item.style}\n          onCloseContextmenu={this.handleCloseContextMenu}\n        >\n          {renderPrimitive(item as Primitive)}\n        </BoundBox>\n      ))\n\n    return (\n      <>\n        <div\n          id='screen'\n          ref='screenRef'\n          class={styles.screen}\n          onWheel={this.handleMouseWheel}\n          onScroll={this.handleMouseScroll}\n        >\n          <div\n            id='editorContainer'\n            ref='editorContaineRef'\n            class={styles.container}\n          >\n            <div\n              id='editor'\n              ref='editorRef'\n              data-context='Editor'\n              class={styles.editor}\n              style={this.editorStyle}\n              onMousedown={this.handleMouseDown}\n              onMouseup={this.handleMouseUp}\n              onContextmenu={this.handleShowContextMenu}\n            >\n              <AreaSelect\n                v-show={this.areaSelectVisible}\n                options={this.groupState}\n              />\n              <AuxiliaryLine />\n              <ContextMenu ref='contextMenuRef' />\n              {renderPrimitives()}\n            </div>\n          </div>\n        </div>\n        {this.rulerVisible ? <SketchRuler ref='sketchRulerRef' /> : null}\n      </>\n    )\n  }\n})\n","import Editor from '@/components/Editor/index'\n\nimport styles from './index.module.scss'\nimport { useContainer } from './use-container'\n\nexport default defineComponent({\n  name: 'Container',\n  components: { Editor },\n  setup() {\n    const { ...restFunc } = useContainer()\n\n    return {\n      ...restFunc\n    }\n  },\n  render() {\n    return (\n      <>\n        <div\n          class={styles.container}\n          onDrop={this.handleDrop}\n          onDragover={this.handleDragOver}\n          onMousedown={this.handleMouseDown}\n          onMouseup={this.handleMouseUp}\n        >\n          <Editor />\n        </div>\n      </>\n    )\n  }\n})\n","import { ceil } from 'lodash'\n\nimport { useEditorScale } from '@/hooks/use-editor-scale'\nimport { primitivesList } from '@/primitives/loader'\nimport { Primitive } from '@/primitives/primitive'\nimport { PrimitiveStyle } from '@/primitives/types'\nimport { useEditorStore } from '@/store/editor/index'\n\nexport const useContainer = () => {\n  const editorStore = useEditorStore()\n  const { transByCurScale } = useEditorScale()\n\n  // 拖动结束事件\n  const handleDrop = (e: DragEvent) => {\n    e.preventDefault()\n    e.stopPropagation()\n\n    const name = e.dataTransfer!.getData('name')\n    const editorRef = document.querySelector('#editor')!\n    const editorRefRec = editorRef.getBoundingClientRect()\n\n    const primitive: Primitive = new primitivesList[name]()\n    const style = {\n      top: ceil(transByCurScale(e.clientY - editorRefRec.y)),\n      left: ceil(transByCurScale(e.clientX - editorRefRec.x))\n    } as PrimitiveStyle\n\n    primitive.updateStyle(style)\n    editorStore.addPrimitive(primitive)\n  }\n\n  const handleDragOver = (e: DragEvent) => {\n    e.preventDefault()\n    e.dataTransfer!.dropEffect = 'copy'\n  }\n\n  const handleMouseDown = (e: MouseEvent) => {\n    e.stopPropagation()\n  }\n\n  const handleMouseUp = () => {}\n\n  return {\n    handleDrop,\n    handleDragOver,\n    handleMouseDown,\n    handleMouseUp\n  }\n}\n"],"names":["useAreaSelectStore","defineStore","groupStyle","ref","selectedPrimitives","areaSelectVisible","clearPrimitives","value","setAreaSelectOptions","style","primitives","setAreaSelectVisible","visible","toPercent","val","needUnit","calcPrimitiveAxis","top","left","right","width","bottom","height","getStyle","filter","result","Object","keys","forEach","key","includes","getBoundBoxStyle","pStyle","entries","decomposePrimitive","primitive","editorRect","parentStyle","rectInfo","document","getElementById","id","getBoundingClientRect","center","parseFloat","AreaSelect","defineComponent","name","props","options","type","render","_createVNode","class","styles","eventEmitter","constructor","__publicField","this","on","eventName","callback","events","push","off","eventCallbacks","item","emit","arg","length","once","onceCallback","AuxiliaryLine","setup","editorStore","useEditorStore","lineElementsRef","LINE_NAMES","NEAR_THRESHOLD","xt","xc","xb","yl","yc","yr","lineStatus","showLines","isDownward","isRightward","currentPrimitive","curPrimitive","currentPrimitiveHalfWidth","theRight","theLeft","currentPrimitiveHalfHeight","theBottom","theTop","primitiveStyle","primitiveHalfWidth","primitiveHalfHeight","conditions","isNearly","lineNode","line","dragShift","lineShift","condition","needToShow","chooseTheTrueLine","dragValue","targetValue","Math","abs","watchEffect","lineName","setLineElementRef","useEditorScale","editorScale","storeToRefs","transByCurScale","transAbsByCurScale","BoundBox","index","required","default","areaSelectStore","drawPoints","curRef","cursors","angleToCursor","start","end","cursor","lt","t","rt","r","rb","b","lb","l","hasT","pointStr","hasB","hasL","hasR","newLeft","newTop","marginLeft","marginTop","i","angleLimit","lastMatchIndex","angle","startY","e","clientY","startX","clientX","startTop","startLeft","curX","event","curY","onMounted","isSelected","computed","_a","renderDrawPoints","map","onMousedown","pType","moveEvent","disY","disX","test","newHeight","newWidth","handleAdjustSize","onClick","handleClickBoundBox","slots","call","useCompose","handleCompose","allPrimitives","querySelector","cName","childPrimitives","primitive2","deletePrimitives","groupPrimitive","GroupPrimitive","createGroupStyle","addPrimitive","setCurPrimitive","batchDeletePrimitive","handleDecompose","_b","editor","deleteCurPrimitive","ContextMenu","expose","operations","menuState","reactive","copyData","handleCopy","cloneDeep","utils","createId","window","$message","success","handlePaste","warning","handleClearCanvas","clear","handelDelete","handleUp","upCurComponent","handleDown","downCurComponent","handleTop","moveCurPrimitiveByIndex","handleBottom","handleCreateGroup","handleDeleteGroup","contextType","label","variables","contextStyle","close","to","onMouseup","handleMouseUp","stopPropagation","handler","_createTextVNode","disabled","_vShow","useMouseEvent","state","lastX","lastY","isSpaceDown","isMouseDown","screenRef","editorRef","contextMenuRef","sketchRulerRef","editorContaineRef","groupState","onDrawGroupBoundry","editorX","editorY","x","y","hideAreaSelect","saveAreaSelectData","primitives2","getInternalPrimitives","Infinity","style2","getPrimitiveLocation","move","up","e2","removeEventListener","addEventListener","useGroup","getContextElementType","element","parentNode","getAttribute","dataType","mouseMoveEvent","deltaX","deltaY","scrollBy","space","useMagicKeys","passive","onEventFired","code","preventDefault","watch","v","containerRect","scrollLeft","scrollTop","isClickPrimitive","button","handleMouseDown","setClickPrimitiveStatus","handleMouseWheel","ctrlKey","metaKey","scaleValue","wheelDelta","setEditorScale","handleResizeRuler","handleMouseScroll","handleShowContextMenu","target","show","_export_sfc","sfc","__vccOpts","_sfc_main$3","scale","Number","thick","palette","vertical","Boolean","isShowReferLine","emits","startValue","showLine","offset","offset2","setShowLine","positionValue","borderCursor","borderValue","lineColor","border","borderTop","borderLeft","actionStyle","startD","initValue","onMove","currentD","newValue","round","onEnd","handleRemove","_hoisted_1$2","RulerLine","_ctx","_cache","$props","$setup","$data","$options","withDirectives","openBlock","createElementBlock","normalizeStyle","args","createElementVNode","toDisplayString","vShow","_sfc_main$2","showIndicator","valueNum","ratio","selectStart","selectLength","canvasContext","canvas","devicePixelRatio","updateCanvasContext","drawRuler","initCanvasRef","getContext","ratio2","ctx","font","lineWidth","textBaseline","h","bgColor","fontColor","shadowColor","longfgColor","shortfgColor","clearRect","fillStyle","fillRect","shadowX","shadowWidth","gridSize","getGridSize","gridPixel","gridSize10","gridPixel10","floor","startValue10","offsetX","offsetX10","endValue","ceil","beginPath","strokeStyle","count","moveTo","save","translate","rotate","PI","fillText","toString","restore","lineTo","stroke","closePath","setTransform","drawCavaseRuler","handle","offsetY","_sfc_main$1","components","CanvasRuler","$event","onMouseenter","onMousemove","onMouseleave","$emit","lines","Array","rwClassName","rwStyle","hContainer","vContainer","indicatorStyle","indicatorOffset","positionKey","boderKey","handleLineRemove","splice","handleNewLine","handleLineRelease","maxOffset","_hoisted_1$1","_hoisted_2","_sfc_main","RulerWrapper","_component_CanvasRuler","resolveComponent","_component_RulerLine","normalizeClass","createVNode","onOnAddLine","Fragment","renderList","createBlock","onOnRemove","onOnRelease","eyeIcon","String","closeEyeIcon","shadow","showReferLine","paletteCpu","finalObj","merge","obj","o","hasOwnProperty","borderColor","cornerActiveColor","menu","dividerColor","listItem","textColor","hoverTextColor","disabledTextColor","hoverBgColor","cornerStyle","backgroundImage","borderRight","borderBottom","onCornerClick","_hoisted_1","SketchRule","_component_RulerWrapper","SketchRuler","themeStore","useThemeStore","cornerActive","paletteStyle","Editor","rulerVisible","editorStyle","transform","nextTick","rest","handleCloseContextMenu","renderPrimitive","dataSource","_Fragment","onScroll","onContextmenu","_withDirectives","_slot","onCloseContextmenu","s","prototype","_isVNode","Container","handleDrop","dataTransfer","getData","editorRefRec","primitivesList","updateStyle","handleDragOver","dropEffect"],"mappings":"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","x_google_ignoreList":[14]}