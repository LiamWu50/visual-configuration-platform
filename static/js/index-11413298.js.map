{"version":3,"file":"index-11413298.js","sources":["../../../src/store/editor/index.ts"],"sourcesContent":["import { Primitive } from '@/primitives/primitive'\n\nexport const useEditorStore = defineStore('editor', () => {\n  const primitives = ref<Primitive[]>([])\n  const curPrimitive = ref<Primitive | null>(null)\n  const isClickPrimitive = ref<boolean>(false)\n\n  /**\n   * 添加primitive到画布编辑器\n   * @param val Primitive\n   */\n  const addPrimitive = (val: Primitive) => {\n    primitives.value.push(val)\n  }\n\n  /**\n   * 清空画布\n   */\n  const clear = () => {\n    primitives.value.length = 0\n    curPrimitive.value = null\n    isClickPrimitive.value = false\n  }\n\n  /**\n   * 设置当前选中的primitive\n   * @param val Primitive\n   */\n  const setCurPrimitive = (val: Primitive | null) => {\n    curPrimitive.value = val\n  }\n\n  /**\n   * 删除当前选中的primitive\n   */\n  const deleteCurPrimitive = () => {\n    const index = curPrimitiveIndex.value\n    if (index > -1) primitives.value.splice(index, 1)\n    curPrimitive.value = null\n  }\n\n  /**\n   * 批量删除 primitive\n   * @param primitives Primitive[]\n   */\n  const batchDeletePrimitive = (data: Primitive[]) => {\n    data.forEach(({ id }) => {\n      const index = primitives.value.findIndex((p) => p.id === id)\n      primitives.value.splice(index, 1)\n    })\n  }\n\n  /**\n   * 设置当前是否点击primitive的状态\n   * @param status Boolean\n   */\n  const setClickPrimitiveStatus = (status: boolean) => {\n    isClickPrimitive.value = status\n  }\n\n  /**\n   * 当前选中primitive在数组中的下标\n   */\n  const curPrimitiveIndex = computed(() =>\n    primitives.value.findIndex(({ id }) => id === curPrimitive.value?.id)\n  )\n\n  /**\n   * 移动当前选中Primitive位置\n   * @param toIndex Number\n   */\n  const moveCurPrimitiveByIndex = (toIndex: number) => {\n    const indexToMove = curPrimitiveIndex.value\n\n    const [valueToMove] = primitives.value.splice(indexToMove, 1)\n    primitives.value.splice(indexToMove + toIndex, 0, valueToMove)\n  }\n\n  /**\n   * 置顶当前选中组件\n   */\n  const upCurComponent = () => {\n    const indexToMove = curPrimitiveIndex.value\n    const [valueToMove] = primitives.value.splice(indexToMove, 1)\n    primitives.value.push(valueToMove)\n  }\n\n  /**\n   * 置底当前选中组件\n   */\n  const downCurComponent = () => {\n    const indexToMove = curPrimitiveIndex.value\n    const [valueToMove] = primitives.value.splice(indexToMove, 1)\n    primitives.value.unshift(valueToMove)\n  }\n\n  return {\n    primitives,\n    curPrimitive,\n    isClickPrimitive,\n    addPrimitive,\n    clear,\n    deleteCurPrimitive,\n    batchDeletePrimitive,\n    setCurPrimitive,\n    setClickPrimitiveStatus,\n    moveCurPrimitiveByIndex,\n    upCurComponent,\n    downCurComponent\n  }\n})\n"],"names":["useEditorStore","defineStore","primitives","ref","curPrimitive","isClickPrimitive","curPrimitiveIndex","computed","value","findIndex","id","_a","addPrimitive","val","push","clear","length","deleteCurPrimitive","index","splice","batchDeletePrimitive","data","forEach","p","setCurPrimitive","setClickPrimitiveStatus","status","moveCurPrimitiveByIndex","toIndex","indexToMove","valueToMove","upCurComponent","downCurComponent","unshift"],"mappings":"uDAEO,MAAAA,EAAAC,EAAA,UAAA,KACL,MAAAC,EAAAC,EAAA,IACAC,EAAAD,EAAA,MACAE,EAAAF,GAAA,GA0DAG,EAAAC,GAA0B,IAAAL,EAAAM,MAAAC,WAAA,EAAAC,eAAA,OAAAA,KAAA,OAAAC,EAAAP,EAAAI,YAAA,EAAAG,EAAAD,GAAA,MAiC1B,MAAA,CAAOR,aACLE,eACAC,mBACAO,aAxFFC,IACEX,EAAAM,MAAAM,KAAAD,EAAA,EAwFAE,MAlFF,KACEb,EAAAM,MAAAQ,OAAA,EACAZ,EAAAI,MAAA,KACAH,EAAAG,OAAA,CAAA,EAgFAS,mBAlEF,KACE,MAAAC,EAAAZ,EAAAE,MACAU,GAAA,GAAgBhB,EAAAM,MAAAW,OAAAD,EAAA,GAChBd,EAAAI,MAAA,IAAA,EAgEAY,qBAzDFC,IACEA,EAAAC,SAAA,EAAAZ,SACE,MAAAQ,EAAAhB,EAAAM,MAAAC,WAAAc,GAAAA,EAAAb,KAAAA,IACAR,EAAAM,MAAAW,OAAAD,EAAA,EAAA,GAAgC,EAuDlCM,gBA3EFX,IACET,EAAAI,MAAAK,CAAA,EA2EAY,wBAhDFC,IACErB,EAAAG,MAAAkB,CAAA,EAgDAC,wBAlCFC,IACE,MAAAC,EAAAvB,EAAAE,OAEAsB,GAAA5B,EAAAM,MAAAW,OAAAU,EAAA,GACA3B,EAAAM,MAAAW,OAAAU,EAAAD,EAAA,EAAAE,EAAA,EA+BAC,eAzBF,KACE,MAAAF,EAAAvB,EAAAE,OACAsB,GAAA5B,EAAAM,MAAAW,OAAAU,EAAA,GACA3B,EAAAM,MAAAM,KAAAgB,EAAA,EAuBAE,iBAjBF,KACE,MAAAH,EAAAvB,EAAAE,OACAsB,GAAA5B,EAAAM,MAAAW,OAAAU,EAAA,GACA3B,EAAAM,MAAAyB,QAAAH,EAAA,EAeA"}